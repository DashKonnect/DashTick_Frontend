webpackJsonp([7],[function(e,t,n){e.exports=n(138)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(9),a=function(){function e(){}return e.init=function(){if(void 0!==i.getPageData().clientConfiguration){var t=i.getPageData().clientConfiguration.ajaxRetryTimes,n=i.getPageData().clientConfiguration.ajaxRetryInterval;t&&n&&(e.ajaxRetryTimes=t,e.ajaxRetryInterval=n)}},e.ajaxRetryTimes=2,e.ajaxRetryInterval=500,e}();e.exports=a},function(e,t,n){(function(t){"use strict";var i=n(63),a=function(){function e(){}return e.load=function(){t.ajaxPrefilter(function(e,n,a){if(n.retryMax&&!(n.retryMax<=1)){n.retryCount?n.retryCount++:n.retryCount=1;var o=t.Deferred();return a.done(o.resolve),e.error=function(e,a,r){return n.retryCount>=n.retryMax?o.rejectWith(e):void setTimeout(function(){t.ajax(n).then(function(e){return o.resolve(e)}).fail(function(e,t,n){return o.rejectWith(e)})},i.ajaxRetryInterval)},o.promise(a)}})},e}();e.exports=a}).call(t,n(2))},,,function(e,t,n){(function(t){"use strict";var n=function(){function e(){this.cardId=t.observable(),this.countryIdOfIssuingBank=t.observable(),this.cardHolderName=t.observable(),this.cvcCode=t.observable(),this.expiryMonth=t.observable(""),this.expiryYear=t.observable(""),this.expiryDate=t.observable(null),this.isDisabled=t.observable(),this.issuingBank=t.observable(),this.cardNumber=t.observable(),this.isValidForBnpl=t.observable(),this.last4Digits=t.observable(),this.type=t.observable(),this.typeName=t.observable(),this.mobilePhoneNumber=t.observable(),this.mobilePhoneCountryCode=t.observable(),this.cardClass=t.observable(),this.identificationNumber=t.observable(),this.issuingBankDetails=t.observable(),this.displayIssuingBankInDynamicCard=t.observable(!1),this.installmentPlanId=t.observable(null),this.idCardType=t.observable(),this.idCardNumber=t.observable(),this.idCardName=t.observable(),this.ccWhiteListed=t.observable(),this.threeDSecure2Details=t.observable()}return e}();e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";var i=n(21),a=n(69),o=n(70),r=function(){function e(){}return e.determinePaymentMethodOption=function(e,t){switch(e){case i.PayPal:case i.Ideal:case i.Alipay:case i.UnionPayDebitCard:case i.UnionPayWorldPay:case i.WeChat:case i.Scb:case i.Ktb:case i.Bay:case i.Bll:case i.MayBank2u:case i.HongLeongConnect:case i.RhbNow:case i.Pbe:case i.BankIslam:case i.AffinOnline:case i.AmOnline:case i.CimbClicksMalay:case i.MandiriClickPay:case i.Bdo:case i.Bpi:case i.Metrobank:case i.Rcbc:case i.Unionbank:case i.Ucpb:case i.Chinabank:case i.Pnb:case i.Maybank:case i.RobinsonsBank:case i.SterlingBankofAsia:case i.EastWestBank:case i.Kplus:case i.Uob:case i.Thanachart:case i.Tmb:case i.TescoLotus:case i.BigC:case i.Bersama:case i.Prima:case i.Alto:case i.Indomaret:case i.Alfamart:case i.SevenEleven:case i.Mpay:case i.PayAtPost:case i.TrueMoneyShop:case i.CenPay:case i.VietcomBank:case i.Bidv:case i.VietinBank:case i.VpBank:case i.DongaBank:case i.TechcomBank:case i.SacomBank:case i.FamilyMart:case i.SevenElevenJP:case i.FAMILYMARTJP:case i.LAWSON:case i.SEICOMART:case i.MINISTOP:case i.SevenElevenTH:case i.Yandex:case i.Qiwi:case i.JDPay:return t&&e===i.UnionPayDebitCard?a.DirectCard:a.RedirectCard;case i.MySavedPaymentMethod:return a.SavedCards;case i.None:case void 0:case null:return a.None;default:return a.DirectCard}},e.getCvcMaxLength=function(e){switch(e){case i.AmericanExpress:case i.AllCreditCards:return"4";default:return"3"}},e.getCardNumberMaxLength=function(e){switch(e){case i.AmericanExpress:return"17";default:return"19"}},e.getCardTypeString=function(e){switch(e){case i.Visa:case i.CarteBleue:return"Visa";case i.MasterCard:return"MasterCard";case i.AmericanExpress:return"American Express";case i.Jcb:return"JCB";case i.Shinhan:return"Shinhan";case i.UnionPayDebitCard:return"UnionPayDebitCard";case i.UnionPayCreditCard:return"UnionPayCreditCard";case i.SamsungCard:return"SamsungCard";case i.NHCard:return"NHCard";case i.LotteCard:return"LotteCard";case i.KBCard:return"KBCard";case i.HyundaiCard:return"HyundaiCard";case i.HanaCard:return"HanaCard";case i.BCCard:return"BCCard";case i.MIR:return"MIR";default:return"None"}},e.isOnlineBanking=function(e){switch(e){case i.Scb:case i.Ktb:case i.Bay:case i.Bll:case i.MayBank2u:case i.HongLeongConnect:case i.RhbNow:case i.Pbe:case i.BankIslam:case i.AffinOnline:case i.AmOnline:case i.CimbClicksMalay:case i.MandiriClickPay:case i.Bdo:case i.Bpi:case i.Metrobank:case i.Rcbc:case i.Unionbank:case i.Ucpb:case i.Chinabank:case i.Pnb:case i.Maybank:case i.RobinsonsBank:case i.SterlingBankofAsia:case i.EastWestBank:case i.Kplus:case i.Uob:case i.Thanachart:case i.Tmb:case i.VietcomBank:case i.Bidv:case i.VietinBank:case i.VpBank:case i.DongaBank:case i.TechcomBank:case i.SacomBank:return!0;default:return!1}},e.isConvenientStore=function(e){switch(e){case i.TescoLotus:case i.BigC:case i.Bersama:case i.Prima:case i.Alto:case i.Indomaret:case i.Alfamart:case i.SevenEleven:case i.Mpay:case i.PayAtPost:case i.TrueMoneyShop:case i.CenPay:case i.FamilyMart:case i.SevenElevenTH:return!0;default:return!1}},e.isRequiresProcessingFee=function(e){switch(e){case i.Scb:case i.Ktb:case i.Bay:case i.Bll:case i.MandiriClickPay:case i.Kplus:case i.Uob:case i.Thanachart:case i.Tmb:case i.TescoLotus:case i.BigC:case i.Bersama:case i.Prima:case i.Alto:case i.Indomaret:case i.Alfamart:case i.SevenEleven:case i.Mpay:case i.PayAtPost:case i.TrueMoneyShop:case i.CenPay:case i.VietcomBank:case i.Bidv:case i.VietinBank:case i.VpBank:case i.DongaBank:case i.TechcomBank:case i.SacomBank:case i.FamilyMart:return!0;default:return!1}},e.getThirdPartyPaymentServiceGateway=function(e){switch(e){case i.Scb:case i.Ktb:case i.Bay:case i.Bll:case i.Kplus:case i.Uob:case i.Thanachart:case i.Tmb:case i.TescoLotus:case i.BigC:case i.Mpay:case i.PayAtPost:case i.TrueMoneyShop:case i.CenPay:case i.VietcomBank:case i.Bidv:case i.VietinBank:case i.VpBank:case i.DongaBank:case i.TechcomBank:case i.SacomBank:case i.FamilyMart:return o.OneTwoThree;case i.MandiriClickPay:case i.Bersama:case i.Prima:case i.Alto:case i.Alfamart:return o.Doku;case i.MayBank2u:case i.CimbClicksMalay:case i.RhbNow:case i.HongLeongConnect:case i.Pbe:case i.AmOnline:case i.BankIslam:case i.AffinOnline:case i.SevenEleven:return o.MolPay;case i.Bdo:case i.Bpi:case i.Metrobank:case i.Rcbc:case i.Unionbank:case i.Ucpb:case i.Chinabank:case i.Pnb:case i.Maybank:case i.RobinsonsBank:case i.SterlingBankofAsia:case i.EastWestBank:return o.DragonPay;case i.Indomaret:return o.Adyen;case i.SevenElevenTH:return o.CounterService;default:return o.Undefined}},e}();e.exports=r},function(e,t){"use strict";var n;!function(e){e[e.None=-1]="None",e[e.DirectCard=0]="DirectCard",e[e.SavedCards=1]="SavedCards",e[e.RedirectCard=2]="RedirectCard"}(n||(n={})),e.exports=n},function(e,t){"use strict";var n;!function(e){e[e.Undefined=0]="Undefined",e[e.OneTwoThree=1]="OneTwoThree",e[e.Doku=2]="Doku",e[e.MolPay=3]="MolPay",e[e.DragonPay=4]="DragonPay",e[e.Adyen=5]="Adyen",e[e.CounterService=6]="CounterService"}(n||(n={})),e.exports=n},function(e,t,n){"use strict";var i=n(72),a=n(74),o=function(){function e(){}return e.isValid=function(e,t){return!(!e||!t)&&(e=e.replace(/[^\d]/g,""),t=t.replace(/[^\w]/g,"").toLowerCase(),!!i[t]&&(!i[t]._luhn||a.luhn(e))&&i[t].test(e))},e.isCvcValid=function(t,n){return!!e.CVC_REGEX.test(t)&&(!n||(n=n.replace(/[^\w]/g,"").toLowerCase(),i[n]?i[n].cvcLength===t.length:e.CVC_REGEX.test(t)))},e.CVC_REGEX=/^\d{3,4}$/,e}();e.exports=o},function(e,t,n){"use strict";var i=n(73),a=function(){function e(){}return e.group19=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/,e.visa=new i("Visa",{pattern:/^4\d{12}(\d{3}|\d{6})?$/,eagerPattern:/^4/,groupPattern:e.group19}),e.mastercard=new i("MasterCard",{pattern:/^(5[1-5]|2[2-7])\d{14}$/,eagerPattern:/^(2|5[1-5])/}),e.americanexpress=new i("American Express",{pattern:/^3[47]\d{13}$/,eagerPattern:/^3[47]/,groupPattern:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,cvcLength:4}),e.dinersclub=new i("Diners Club",{pattern:/^3(0[0-5]|[68]\d)\d{11}$/,eagerPattern:/^3(0|[68])/,groupPattern:/(\d{1,4})?(\d{1,6})?(\d{1,4})?/}),e.discover=new i("Discover",{pattern:/^6(011(0[0-9]|[2-4]\d|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]\d{3}|5\d{4})\d{10}$/,eagerPattern:/^6(011(0[0-9]|[2-4]|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]|5)/}),e.jcb=new i("JCB",{pattern:/^35\d{14}$/,eagerPattern:/^35/}),e.unionpay=new i("UnionPay",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]/,luhn:!1}),e.unionpaydebitcard=new i("UnionPayDebitCard",{pattern:/^(?:\d{16}|\d{19})$/,eagerPattern:/^[0-9]/,luhn:!1}),e.shinhan=new i("Shinhan",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.unionpaycreditcard=new i("UnionPayCreditCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.bccard=new i("BCCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.samsungcard=new i("SamsungCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.nhcard=new i("NHCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.lottecard=new i("LotteCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.kbcard=new i("KBCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.hyundaicard=new i("HyundaiCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.hanacard=new i("HanaCard",{pattern:/^\d{16}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e.mir=new i("MIR",{pattern:/^2\d{15}$/,eagerPattern:/^[0-9]{3}$/,groupPattern:e.group19,luhn:!1,cvcLength:3}),e}();e.exports=a},function(e,t){"use strict";var n=function(){function e(t,n){this.cvcLength=null!=n.cvcLength?n.cvcLength:e.DEFAULT_CVC_LENGTH,this._luhn=null!=n.luhn?n.luhn:e.DEFAULT_IS_LUHN,this._pattern=n.pattern,this._eagerPattern=n.eagerPattern,this.groupPattern=null!=n.groupPattern?n.groupPattern:e.DEFAULT_GROUP_PATTERN}return e.prototype.test=function(e,t){return this[t?"_eagerPattern":"_pattern"].test(e)},e.DEFAULT_CVC_LENGTH=3,e.DEFAULT_IS_LUHN=!0,e.DEFAULT_GROUP_PATTERN=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/,e}();e.exports=n},function(e,t){"use strict";var n=function(){function e(){}return e.luhn=function(e){if(!e)return!1;for(var t,n=[0,2,4,6,8,1,3,5,7,9],i=e.length,a=1,o=0;i;)t=parseInt(e.charAt(--i),10),o+=(a^=1)?n[t]:t;return!!o&&o%10===0},e}();e.exports=n},function(e,t){"use strict";var n=function(){function e(){}return e.getValidationMessage=function(e,t){return"<span data-element-name='"+t+"'>"+e+"</span>"},e}();e.exports=n},,,,function(e,t){e.exports='<!-- payment details starts --> <div class=payment-details><!-- ko if: isRedesignPaymentCard --><!-- ko if: errorMessage --> <p class=error-message data-element-name=payment-error data-bind="html: errorMessage"></p><!-- /ko --><!-- ko if: paymentDetails.numberOfAvailablePaymentMethodsText --> <div class=message-available-payment-methods-count data-element-name=message-available-payment-methods-count> <span data-bind="html: paymentDetails.numberOfAvailablePaymentMethodsText"></span> </div><!-- /ko --><!-- ko component: {\r\n        name: "payment-methods-accordion",\r\n        params: {\r\n            availablePaymentCurrencies: availablePaymentCurrencies,\r\n            combinedCardTypes: combinedCardTypes,\r\n            countrySelectList: countrySelectList,\r\n            errorMessage: errorMessage,\r\n            isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n            isFocused: isFocused,\r\n            isRedesignPaymentCard: isRedesignPaymentCard,\r\n            paymentDetails: paymentDetails,\r\n            paymentMethods: paymentMethodList,\r\n            responseFormattedPaymentAmount: responseFormattedPaymentAmount,\r\n            selectedPaymentMethodObs: selectedPaymentMethodObject,\r\n            isRequireMoreGuestDetails: isRequireMoreGuestDetails,\r\n            isDontShowPaymentMethodDropdown: true,\r\n            isLoggedIn: isLoggedIn \r\n        }\r\n    } --><!-- /ko --><!-- /ko --><!-- ko ifnot: isRedesignPaymentCard --><!-- ko if: paymentDetails.weAcceptTheFollowingPaymentMethodsText --> <p data-bind="text: paymentDetails.weAcceptTheFollowingPaymentMethodsText"></p><!-- /ko --> <ul class="list-inline payment-method-logos" data-bind="foreach: { data:displayLogos , as: \'logoname\'}"> <li class="payment-logo payment-logo-l" data-bind="css: logoname, attr: { data-element-name: \'payment-logo-\'+logoname }"></li> </ul> <div class=payment-details-body><!-- ko if: errorMessage --> <p class=error-message data-element-name=payment-error data-bind="html: errorMessage"></p><!-- /ko --><!-- ko if: paymentDetails.lastStepYouAreAlmostDoneText --><!-- ko component: {\r\n            name: "almost-done",\r\n            params: {\r\n                almostDoneText: paymentDetails.lastStepYouAreAlmostDoneText\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- ko if: paymentDetails.paymentMethod.isRedirectPaymentMethodOptionShown() && paymentDetails.promotionDiscountInfo.isDisplayPromotionDiscountText() === true --> <div class=promotion-message> <div class=row> <div class="col-sm-2 col-md-2 col-lg-2"><!-- ko if: paymentDetails.promotionDiscountInfo.promotionDiscountLogoClass() --> <span class="payment-logo payment-logo-s" data-bind="css: paymentDetails.promotionDiscountInfo.promotionDiscountLogoClass"></span><!-- /ko --> </div> <div class="col-sm-10 col-md-10 col-lg-10 promotion-message-text"> <div class=promotion-text data-bind="text: paymentDetails.promotionDiscountInfo.promotionDiscountText"></div><!-- ko if: paymentDetails.promotionDiscountInfo.isAlipayCampaign() && paymentDetails.promotionDiscountInfo.alipayCampaignMessageText --> <div class=promotion-text> <span data-bind="html: paymentDetails.promotionDiscountInfo.alipayCampaignMessageText, popover: paymentDetails.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions"></span> <span><i class="ficon ficon-16 ficon-info-with-circle" data-bind="popover: paymentDetails.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions"></i></span> </div><!-- /ko --> </div> </div> </div><!-- /ko --><!-- ko if: paymentDetails.paymentDetailsMessages --> <div data-bind="foreach: { data: paymentDetails.paymentDetailsMessages(), as: \'paymentDetailsMessage\'}"><!-- ko if: paymentDetailsMessage.messages --> <ul class="well confident-message" data-bind="foreach: paymentDetailsMessage.messages"> <li class=list-unstyled data-bind="text: $data"></li> </ul><!-- /ko --> </div><!-- /ko --> <div class=row> <div class="col-lg-6 payment-method"> <div class="form-group has-feedback" data-bind="validationElement: paymentDetails.selectedPaymentMethod"><!-- ko if: isPaymentMethodDropdownDisplayed() --><!-- ko component: {\r\n                        name: "form-dropdown",\r\n                        params : {\r\n                            labelText: paymentDetails.paymentMethod.selectPaymentMethodText,\r\n                            value: paymentDetails.selectedPaymentMethod,\r\n                            options: paymentMethodList,\r\n                            optionsText: \'text\',\r\n                            optionsValue: function(item){ return item.value() + \',\' + (item.cardClass() || 0) },\r\n                            valueAllowUnset: true,\r\n                            optionsAfterRender: setOptionDisable,\r\n                            valueAllowUnset: true,\r\n                            hasFocus: hasFocusOnPaymentMethod,\r\n                            emptyOptionLabel: paymentDetails.paymentMethod.pleaseSelectOneText,\r\n                            css: { \'has-value\': ko.unwrap(paymentDetails.selectedPaymentMethod) != null },\r\n                            inputAttributes: {\r\n                                name: \'paymentMethod\',\r\n                                id: \'paymentMethod\',\r\n                                \'data-element-name\': \'payment-method\'\r\n                            },\r\n                        }\r\n                    } --><!-- /ko --><!-- /ko --> </div><!-- StartMouseStatsHide --> <div class=dynamic-card-container data-bind="ifWindowLessThan: 1200"><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n                    || !paymentDetails.selectedPaymentMethodType()\r\n                    || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n                        name: "dynamic-card",\r\n                        params: {\r\n                            card: paymentDetails.paymentMethod.creditCard,\r\n                            isFocused: isFocused\r\n                        }\r\n                    } --><!-- /ko --><!-- /ko --> </div><!-- EndMouseStatsHide --><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n                || !paymentDetails.selectedPaymentMethodType()\r\n                || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n                    name: "direct-card",\r\n                    params: {\r\n                        paymentMethod: paymentDetails.paymentMethod,\r\n                        paymentChargeOption: paymentDetails.paymentChargeOptionSelector.paymentChargeOption,\r\n                        countrySelectList: countrySelectList,\r\n                        payLaterDate: paymentDetails.paymentChargeOptionSelector.payLaterDate,\r\n                        selectedPaymentMethod: paymentDetails.selectedPaymentMethod,\r\n                        selectedPaymentMethodType: paymentDetails.selectedPaymentMethodType,\r\n                        availablePaymentCurrencies: availablePaymentCurrencies,\r\n                        isFocused: isFocused,\r\n                        combinedCardTypes: combinedCardTypes,\r\n                        isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n                    }\r\n                } --><!-- /ko --><!-- /ko --> </div><!-- StartMouseStatsHide --> <div class="col-lg-6 dynamic-card-container" data-bind="ifWindowGreaterThan: 1200"><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n                || !paymentDetails.selectedPaymentMethodType()\r\n                || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n                    name: "dynamic-card",\r\n                    params: {\r\n                        card: paymentDetails.paymentMethod.creditCard,\r\n                        isFocused: isFocused\r\n                    }\r\n                } --><!-- /ko --><!-- /ko --> </div><!-- EndMouseStatsHide --> </div><!-- ko if: paymentDetails.selectedPaymentMethodType() === 110 --> <div class="well confident-message shinhanLocalCardText1 m-t-1"> <i class="ficon ficon-16 ficon-menu-bookings ficon-left text-success"></i> <span data-bind="text: paymentDetails.paymentMethod.noOverseasPaymentTransactionFeeWhenPayingWithYourShinhanLocalCardText"></span> </div> <div class="well confident-message shinhanLocalCardText2 m-b-3"> <ul class="list-default m-b-0"> <li data-bind="text: paymentDetails.paymentMethod.weAcceptTheFollowingShinhanCardTypesXText"></li> <li data-bind="text: paymentDetails.paymentMethod.xCardsAndSpecialPurposeCreditOrCheckCardsAreNotAcceptedText"></li> </ul> </div><!-- /ko --><!-- ko if: paymentDetails.paymentMethod.paymentMethodOption() === 2\r\n         && paymentDetails.selectedPaymentMethodType() !== 12 --><!-- ko component: {\r\n            name: "redirect-payment",\r\n            params: {\r\n                paymentDetails: paymentDetails,\r\n                responseFormattedPaymentAmount: responseFormattedPaymentAmount,\r\n                selectedPaymentMethod: getSelectedPaymentMethod()\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- ko if: paymentDetails.selectedPaymentMethodType() === 12 --><!-- ko component: {\r\n            name: "union-pay-debit-card",\r\n            params: {\r\n                paymentMethod: paymentDetails.paymentMethod,\r\n                paymentChargeOption: paymentDetails.paymentChargeOptionSelector.paymentChargeOption,\r\n                payLaterDate: paymentDetails.paymentChargeOptionSelector.payLaterDate,\r\n                selectedPaymentMethod: paymentDetails.selectedPaymentMethod,\r\n                selectedPaymentMethodType: paymentDetails.selectedPaymentMethodType,\r\n                isFocused: isFocused,\r\n                isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- ko if: paymentDetails.selectedPaymentMethodType()\r\n        && paymentDetails.paymentMethod.paymentMethodOption() === 1 --><!-- ko component: {\r\n            name: "saved-cards",\r\n            params: {\r\n                paymentMethod: paymentDetails.paymentMethod,\r\n                paymentChargeOption: paymentDetails.paymentChargeOptionSelector.paymentChargeOption,\r\n                selectedPaymentMethod: paymentDetails.selectedPaymentMethod,\r\n                selectedPaymentMethodType: paymentDetails.selectedPaymentMethodType,\r\n                availablePaymentCurrencies: availablePaymentCurrencies,\r\n                isFocused: isFocused,\r\n                isRedesignPaymentCard: isRedesignPaymentCard,\r\n                isRequireMoreGuestDetails: isRequireMoreGuestDetails,\r\n                creditCardOnFilesListCount: creditCardOnFilesListCount,\r\n                cardsNotAcceptedText: paymentDetails.cardsNotAcceptedText,\r\n                isLoggedIn: isLoggedIn\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- ko if: paymentDetails.paymentMethod.currencyChangedByPolicyMessage --> <div class="currency-changed-by-policy-message well m-t-2 m-b-0"> <ul class="list-default m-b-0" data-bind="html: paymentDetails.paymentMethod.currencyChangedByPolicyMessage"></ul> </div><!-- /ko --><!-- ko if: paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox()\r\n        && paymentDetails.paymentMethod.paymentMethodOption() === 0 && !isRedesignPaymentCard --> <div class="checkbox add-credit-card-to-file m-b-0"> <label for=isAddCreditCardToFile> <input data-element-name=save-card-to-account type=checkbox id=isAddCreditCardToFile name=isAddCreditCardToFile data-bind="checked: paymentDetails.paymentMethod.isAddCreditCardToFile"/> <span data-bind="text: paymentDetails.paymentMethod.saveThisCardToMyAccountText"></span> </label> </div><!-- /ko --><!-- ko if: installmentPanel != null && ko.unwrap(installmentPanel.isDisplay) --><!-- ko component: {\r\n            name: "installment-panel",\r\n            params: {\r\n                selectedInstallmentId: paymentDetails.paymentMethod.creditCard.installmentPlanId,\r\n                installmentTitleText: installmentPanel.yourCardQualifiesYouToPayInMonthlyInstallmentsText,\r\n                installmentCheckboxText: installmentPanel.iWouldLikeToPayInMonthlyInstallmentsText,\r\n                numberOfInstallmentText: installmentPanel.numberOfPaymentsText,\r\n                monthlyEstimateText: installmentPanel.monthlyEstimateText,\r\n                interestRateText: installmentPanel.interestRateText,\r\n                installmentPlans: installmentPanel.installmentPlans\r\n            }\r\n        }--><!-- /ko --><!-- /ko --> </div><!-- /ko --> </div> <!-- payment details ends -->'},function(e,t,n){(function(t){"use strict";var i=n(81),a=n(67),o=n(11),r=n(82),s=n(9),l=n(83),d=n(68),c=n(84),p=n(69),u=n(21),m=n(85),h=n(89),f=n(86),g=n(88),b=n(90),y=n(71),v=n(91),C=n(92),T=n(93),k=n(94),P=n(95),x=n(98),D=function(){function e(e){var n=this;this.updateThreeDSecure2DetailsWithDeviceFingerprint=function(e){var i=t.unwrap(n.paymentDetails.paymentMethod.enabledThreeDSecure2PaymentMethodTypes);n.updateThreeDSecure2Details(e,i)},this.updateThreeDSecure2Details=function(e,t){if(null!=t&&t.length>0){var i=n._threeDSecureService.isEnabledThreeDSecure2Payment(e,t)?i=n._threeDSecure2Builder.buildThreeDSecure2DetailsWithDeviceFingerprintInfo():null,a=n.paymentDetails.paymentMethod.creditCard.threeDSecure2Details(),o=a?a.challengeResult:null,r=a?a.deviceFingerprintResult:null;n.paymentDetails.paymentMethod.creditCard.threeDSecure2Details({deviceFingerprintResult:r,challengeResult:o,deviceFingerprintInfo:i})}},this._paymentService=new m,this.countrySelectList=e.countrySelectList,this.paymentDetails=e.paymentDetails,this.isPaymentDetailsBlocked=e.isPaymentDetailsBlocked,this.errorMessage=e.errorMessage,this.paymentDetails.paymentMethod.countryOfResidenceId=e.countryOfResidenceId,this.paymentDetails.paymentMethod.phoneNumber=e.phoneNumber,this.isRoomLevelBor=e.isRoomLevelBor,this.allValidationRules=new Array,this.installmentPanel=new r,this._threeDSecureService=new P,this._threeDSecure2Builder=new x,this.isAddMoreLifeExperiment=s.getFeature(v.AddMoreLifeToBookingForm),this.isRedesignPaymentCard=!!t.unwrap(this.paymentDetails.paymentCategoryDescriptions),this.isSubmitBookingButtonMessageVisible=e.isSubmitBookingButtonMessageVisible;var i=s.getPageData();this.isDesktop=!(i.jsonViewModel&&i.jsonViewModel.isMobile),this.isEnableAlipayBnpl=f.isApplied(g.AlipayBnpl)&&this.isDesktop,this.paymentDetails.paymentMethod.isAddCreditCardToFileUnchecked=t.observable(!1),this.paymentDetails.paymentMethod.creditCard.threeDSecure2Details=t.observable(),this.isEnablePaypalBnpl=f.isApplied(g.PaypalBnpl),this.experimentApiService=new b,this.installmentDetailsMaster=e.installmentDetailsMaster,this.isEnableJapanConvenienceStoreFakePaymentMethods=f.isApplied(g.EnableJapanConvenientStoreFakePaymentOptions),this.isExperimentIKKI9356Applied=s.isDesktop()&&f.isApplied(g.ShowCcofForL1User),this.isExperimentIKKI9356Applied=s.isDesktop()&&f.isApplied(g.ShowCcofForL1User),this.isExperimentIKKI9415Applied=f.isApplied(g.DontCheckSaveCardAutomatically),this.isExperimentPC1289Applied=f.isApplied(g.HideIssuingBankForWhiteListedCardHolders),this._init(),this._subscribeEvents(),this._setValidation(),this._subscribeErrors(e),this.isRequireMoreGuestDetails=e.isRequireMoreGuestDetails,this.hasFocusOnPaymentMethod=t.observable(!t.unwrap(this.isRequireMoreGuestDetails)&&!this.paymentDetails.selectedPaymentMethod()),this.isLoggedIn=e.isLoggedIn}return e.prototype.getSelectedPaymentMethod=function(){var e=this,t=this.paymentMethodList().filter(function(t){return e._isSelectedPaymentMethod(t.value(),t.cardClass())})[0];return t},e.prototype.setOptionDisable=function(e,n){n||t.applyBindingsToNode(e,{css:"hide-option"},n)},e.prototype._init=function(){var e=this;this.paymentDetails.paymentChargeOptionSelector||(this.paymentDetails.paymentChargeOptionSelector={howDoYouLikeToPayText:t.observable(),paymentChargeOption:t.observable(),payLaterDate:t.observable()}),this.paymentDetails.paymentMethod.creditCard.issuingBank||(this.paymentDetails.paymentMethod.creditCard.issuingBank=t.observable()),this.paymentDetails.paymentMethod.isRedirectPaymentMethodOptionShown=t.pureComputed(function(){return!t.unwrap(e.paymentDetails.paymentChargeOptionSelector)||t.unwrap(e.paymentDetails.paymentChargeOptionSelector.paymentChargeOption)===l.PayNow}),this.isRequiredBillingZipCodeInput=t.pureComputed(function(){var t=e.paymentDetails.paymentMethod;return C.isRequiredBillingZipCodePaymentMethodTypeSelected(t.creditCard.type(),t.requiredBillingZipCodePaymentMethodTypes())}),this.isRequiredTaxIdInput=t.pureComputed(function(){var n=e.paymentDetails.paymentMethod,i=k.isRequiredTaxIdWithPaymentMethodTypeAndCurrencySelected(n.creditCard.type(),n.requiredTaxIdPaymentMethodTypes(),n.paymentCurrencyCode(),t.unwrap(n.requiredTaxIdCurrencies));return i}),this.initPaymentMethod(),this.updateThreeDSecure2DetailsWithDeviceFingerprint(this.paymentDetails.paymentMethod.creditCard.type()),this.responseFormattedPaymentAmount=t.observable(),this.paymentDetails.paymentMethod.selectedPaymentMethodText=t.observable(),this.paymentDetails.paymentMethod.creditCardNumberErrorMessage=t.observable(),this.paymentDetails.paymentMethod.creditCard.ccWhiteListed=t.observable(),this.availablePaymentCurrencies=t.observableArray([]);var n=d.determinePaymentMethodOption(this.paymentDetails.paymentMethod.creditCard.type());if(n===p.RedirectCard?this._setSelectedPaymentMethod(this.paymentDetails.paymentMethod.creditCard.type(),this.paymentDetails.paymentMethod.creditCard.cardClass()):this.paymentDetails.paymentMethod.creditCardOnFileList&&this.paymentDetails.paymentMethod.creditCardOnFileList()&&this.paymentDetails.paymentMethod.creditCardOnFileList().length>0?this.paymentDetails.paymentMethod.creditCard&&this.paymentDetails.paymentMethod.creditCard.type()!==u.None&&!this.paymentDetails.paymentMethod.creditCard.cardId()||this._setSelectedPaymentMethod(u.MySavedPaymentMethod,i.Unknown):(this.paymentDetails.selectedPaymentMethodType(void 0),this.setDefaultCreditCardType(),t.unwrap(this.paymentDetails.paymentChargeOptionSelector)&&t.unwrap(this.paymentDetails.paymentChargeOptionSelector.paymentChargeOption)!==l.PayNow||this.isRoomLevelBor()||!this.paymentDetails.paymentMethod.supportedPaymentMethodTypeList().some(function(e){return t.unwrap(e.value)===u.Alipay})||!this.paymentDetails.promotionDiscountInfo.isAlipayCampaign()||(this._setSelectedPaymentMethod(u.Alipay,i.Unknown),this.paymentDetails.paymentMethod.creditCard.type(u.Alipay),this.paymentDetails.paymentMethod.creditCard.cardClass(i.Unknown),this.paymentDetails.paymentMethod.paymentCurrencyCode||(this.paymentDetails.paymentMethod.paymentCurrencyCode=t.observable()),this._updatePaymentMethod(this.paymentDetails.paymentMethod.creditCard,this.paymentDetails.paymentMethod.paymentCurrencyCode())),t.unwrap(this.paymentDetails.paymentChargeOptionSelector)&&t.unwrap(this.paymentDetails.paymentChargeOptionSelector.paymentChargeOption)!==l.PayLater||!this.paymentDetails.paymentMethod.supportedPaymentMethodTypeList().some(function(e){return t.unwrap(e.value)===u.Alipay})||(this.experimentApiService.experimentSeen(g.SetAlipayAsDefaultSelectedPaymentMethodForBNPLBookings),f.isApplied(g.SetAlipayAsDefaultSelectedPaymentMethodForBNPLBookings)&&(this._setSelectedPaymentMethod(u.Alipay,i.Unknown),this.paymentDetails.paymentMethod.creditCard.type(u.Alipay),this.paymentDetails.paymentMethod.creditCard.cardClass(i.Unknown),this.paymentDetails.paymentMethod.paymentCurrencyCode||(this.paymentDetails.paymentMethod.paymentCurrencyCode=t.observable()),this._updatePaymentMethod(this.paymentDetails.paymentMethod.creditCard,this.paymentDetails.paymentMethod.paymentCurrencyCode())))),this.paymentDetails.paymentMethod.paymentMethodOption(this._determinePaymentMethodOption(this.selectedPaymentMethodType())),this.paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox||(this.paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox=t.observable(!0)),this.paymentDetails.paymentMethod.paymentCurrencyCode||(this.paymentDetails.paymentMethod.paymentCurrencyCode=t.observable()),this.displayLogos=t.pureComputed(function(){return c.getPaymentDisplayLogos(e.paymentDetails,e.isRoomLevelBor,e.isEnableAlipayBnpl,e.isEnablePaypalBnpl)}),this.isFocused={cardHolderName:t.observable(!1),cardNumber:t.observable(!1),cvcCode:t.observable(!1),expiryDate:t.observable(!1),issuingBank:t.observable(!1),mobilePhoneNumber:t.observable(!1),identificationNumber:t.observable(!1)},this.combinedCardTypes=new Array,this.paymentMethodList=t.pureComputed(function(){var n=[];e.combinedCardTypes=[];var a=[];e.paymentDetails.paymentMethod.supportedPaymentMethodTypeList().forEach(function(i){var o=t.unwrap(i.value);switch(o){case u.Visa:e.combinedCardTypes.push({name:"visa",displayName:"Visa",type:o,category:e.isRedesignPaymentCard?t.unwrap(i.category):null,logoClass:e.isRedesignPaymentCard?t.unwrap(i.logoClass):null,timeoutMinute:t.unwrap(i.timeoutMinute)
});break;case u.MasterCard:e.combinedCardTypes.push({name:"mastercard",displayName:"MasterCard",type:o,category:e.isRedesignPaymentCard?t.unwrap(i.category):null,logoClass:e.isRedesignPaymentCard?t.unwrap(i.logoClass):null,timeoutMinute:t.unwrap(i.timeoutMinute)});break;case u.Jcb:e.combinedCardTypes.push({name:"jcb",displayName:"JCB",type:o,category:e.isRedesignPaymentCard?t.unwrap(i.category):null,logoClass:e.isRedesignPaymentCard?t.unwrap(i.logoClass):null,timeoutMinute:t.unwrap(i.timeoutMinute)});break;case u.AmericanExpress:e.combinedCardTypes.push({name:"americanexpress",displayName:"Amex",type:o,category:e.isRedesignPaymentCard?t.unwrap(i.category):null,logoClass:e.isRedesignPaymentCard?t.unwrap(i.logoClass):null,timeoutMinute:t.unwrap(i.timeoutMinute)});break;case u.MySavedPaymentMethod:e.isRedesignPaymentCard&&(i.category=t.observable(u.MySavedPaymentMethod),i.logoClass=t.observable(t.unwrap(e.paymentDetails.paymentMethod.creditCardOnFileList)?t.unwrap(e.paymentDetails.paymentMethod.creditCardOnFileList).filter(function(e){return t.unwrap(e.isDisabled)===!1}).map(function(e){return t.unwrap(e.typeName)?t.unwrap(e.typeName):""}).join(" "):null),i.key=t.observable([i.value(),i.cardClass()].join(","))),e.initCreditCardOnFileCount(),e.creditCardOnFilesListCount()>0&&n.push(i);break;default:e.isRedesignPaymentCard&&(i.key=t.observable([i.value(),i.cardClass()].join(","))),a.push(i)}});var o;o=e.isRedesignPaymentCard?[{value:t.observable(u.AllCreditCards),cardClass:t.observable(i.Unknown),isPayLaterSupported:t.observable(!0),text:t.observable(e.combinedCardTypes.map(function(e){return e.displayName}).join(" / ")),key:t.observable([u.AllCreditCards,i.Unknown].join(",")),category:t.observable(e.combinedCardTypes[0].category),logoClass:t.observable(e.combinedCardTypes.filter(function(e){return null!=e.logoClass}).map(function(e){return e.logoClass}).join(" ")),timeoutMinute:t.observable(Math.min.apply(Math,e.combinedCardTypes.map(function(e){return e.timeoutMinute})))}]:[{value:t.observable(u.AllCreditCards),cardClass:t.observable(i.Unknown),isPayLaterSupported:t.observable(!0),text:t.observable(e.combinedCardTypes.map(function(e){return e.displayName}).join(" / ")),key:t.observable([u.AllCreditCards,i.Unknown].join(",")),timeoutMinute:t.observable(Math.min.apply(Math,e.combinedCardTypes.map(function(e){return e.timeoutMinute})))}];var r=e.isRoomLevelBor()?(new Array).concat(n,o):(new Array).concat(n,o,a);if(!t.unwrap(e.paymentDetails.paymentChargeOptionSelector)||t.unwrap(e.paymentDetails.paymentChargeOptionSelector.paymentChargeOption)!==l.PayLater&&t.unwrap(e.paymentDetails.paymentChargeOptionSelector.paymentChargeOption)!==l.PayOnCheckIn||(r=r.filter(function(n){return e.isEnableAlipayBnpl&&9===t.unwrap(n.value)||n.isPayLaterSupported()})),e.paymentDetails.promotionDiscountInfo.isAlipayCampaign()){var s,d,c=u.Alipay,p=u.WeChat,m=r.filter(function(e){var n=t.unwrap(e.value);return n===c?(s=e,!1):n!==p||(d=e,!1)});"undefined"!=typeof d&&(m=[d].concat(m)),"undefined"!=typeof s&&(m=[s].concat(m)),r=m}return r}),this.paymentDetails.paymentMethod.selectedPaymentMethodText=t.computed(function(){var t="",n=e.getSelectedPaymentMethod();return void 0!==n&&null!==n&&(t=n.text()),t}),this.paymentDetails.promotionDiscountInfo.isAlipayCampaign()&&(this.paymentDetails.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions=new h,this.paymentDetails.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions.options.html=!0,this.paymentDetails.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions.options.content=this.paymentDetails.promotionDiscountInfo.alipayCampaignTermsAndConditions),1===this.paymentMethodList().length){var a=this.paymentMethodList()[0];this._isSelectedPaymentMethod(a.value(),a.cardClass())||(this._setSelectedPaymentMethod(a.value(),a.cardClass()),this._paymentMethodChanged(this.createPaymentMethodSelectOptionValue(a)))}if(t.unwrap(this.paymentDetails.defaultSelectedPaymentMethod)){var o=t.unwrap(this.paymentDetails.defaultSelectedPaymentMethod),r=this.paymentMethodList().filter(function(e){return e.cardClass()===o.cardClass()&&e.value()===o.value()}),s=this.combinedCardTypes.filter(function(e){return e.type===o.value()&&(!e.category||e.category===t.unwrap(o.category))}),m=void 0!==s&&s.length>0;(void 0!==r&&r.length>0||m)&&(m?this._setSelectedPaymentMethod(u.AllCreditCards,i.Unknown):this._setSelectedPaymentMethod(o.value(),o.cardClass()),this._paymentMethodChanged(t.unwrap(this.paymentDetails.selectedPaymentMethod),!1),t.validation.group(this.paymentDetails.selectedPaymentMethod).showAllMessages(!0))}this.isRedesignPaymentCard&&(this.selectedPaymentMethodObject=t.computed(function(){return e.paymentMethodList?e.paymentMethodList().filter(function(t){return e._isSelectedPaymentMethod(t.value(),t.cardClass())})[0]:null}))},e.prototype.createPaymentMethodSelectOptionValue=function(e){return e.value()+","+(e.cardClass()||0)},e.prototype.initCreditCardOnFileCount=function(){var e=this;this.creditCardOnFilesListCount=t.computed(function(){return e.paymentDetails.paymentMethod.creditCardOnFileList()?e.paymentDetails.paymentChargeOptionSelector.paymentChargeOption&&e.paymentDetails.paymentChargeOptionSelector.paymentChargeOption()===l.PayLater?e.paymentDetails.paymentMethod.creditCardOnFileList().filter(function(e){return e.isValidForBnpl()}).length:e.paymentDetails.paymentMethod.creditCardOnFileList().length:0})},e.prototype._subscribeErrors=function(e){var n=this;this.paymentMethodValidationErrors=t.validation.group(this.paymentDetails.selectedPaymentMethodType,{deep:!1,observable:!0}),e.paymentDetails.paymentMethodValidationErrors=this.paymentMethodValidationErrors,this.paymentMethodValidationErrors.subscribe(function(e){e&&0===e.length&&0===n.validationErrors().length?setTimeout(function(){t.postbox.publish(o.CHECK_SECOND_STEP_VALIDATION)},0):t.postbox.publish(o.CHECK_SECOND_STEP_VALIDATION)}),this.validationErrors=t.validation.group(this.paymentDetails,{deep:!0,observable:!0}),e.paymentDetails.validationErrors=this.validationErrors,this.validationErrors.subscribe(function(e){e&&0===e.length&&0===n.paymentMethodValidationErrors().length?setTimeout(function(){t.postbox.publish(o.CHECK_SECOND_STEP_VALIDATION)},0):t.postbox.publish(o.CHECK_SECOND_STEP_VALIDATION)})},e.prototype.initPaymentMethod=function(){this.paymentDetails.selectedPaymentMethod=t.observable(),this.paymentDetails.selectedPaymentMethodType=t.observable()},e.prototype.selectedPaymentMethodType=function(){if(void 0!==this.paymentDetails.selectedPaymentMethod())return c.parse(this.paymentDetails.selectedPaymentMethod()).type},e.prototype._setSelectedPaymentMethod=function(e,n){void 0===this.paymentDetails.selectedPaymentMethod()&&(this.paymentDetails.selectedPaymentMethod=t.observable("")),this.paymentDetails.selectedPaymentMethodType(e),null===e?this.paymentDetails.selectedPaymentMethod(null):this.paymentDetails.selectedPaymentMethod(c.toString({type:e,cardClass:n}))},e.prototype._isSelectedPaymentMethod=function(e,t){if(void 0===this.paymentDetails.selectedPaymentMethod())return!1;var n;return n=c.parse(this.paymentDetails.selectedPaymentMethod()),n.type===e&&n.cardClass===t},e.prototype._subscribeEvents=function(){var e=this;this._paymentMethodUpdatedSubscription=t.postbox.subscribe(o.PAYMENT_METHOD_UPDATED,function(){e._updatePaymentMethod(e.paymentDetails.paymentMethod.creditCard)}),this._resetPaymentMethodSubscription=t.postbox.subscribe(o.RESET_PAYMENT_METHOD,function(){var t=new a;e._updatePaymentMethod(t),e._resetInstallment()}),this._installmentPanelUpdatedSubscription=t.postbox.subscribe(o.INSTALLMENT_UPDATED,function(n){n&&(e.installmentPanel.yourCardQualifiesYouToPayInMonthlyInstallmentsText(t.unwrap(n.yourCardQualifiesYouToPayInMonthlyInstallmentsText)),e.installmentPanel.iWouldLikeToPayInMonthlyInstallmentsText(t.unwrap(n.iWouldLikeToPayInMonthlyInstallmentsText)),e.installmentPanel.numberOfPaymentsText(t.unwrap(n.numberOfPaymentsText)),e.installmentPanel.monthlyEstimateText(t.unwrap(n.monthlyEstimateText)),e.installmentPanel.interestRateText(t.unwrap(n.interestRateText)),e.installmentPanel.installmentPlans(t.unwrap(n.installmentPlans)))}),this._installmentPanelResetSubscription=t.postbox.subscribe(o.INSTALLMENT_RESET,function(){e._resetInstallment()}),this._selectedInstallmentPlanIdSubscription=t.postbox.subscribe(o.INSTALLMENT_ID_FOR_BOOKING,function(t){e.paymentDetails.paymentMethod.creditCard.installmentPlanId(t)}),this._subscribeCardNumberAndCardTypeChanged(),this._subscribePaymentCurrencyCode(),this._subscribePaymentMethod(),this._subscribePaymentMethodChargeOption()},e.prototype._subscribeCardNumberAndCardTypeChanged=function(){var e=this;this.isExperimentPC1289Applied?this._cardNumberAndCardTypeListener():(this.paymentDetails.paymentMethod&&this.paymentDetails.paymentMethod.creditCard&&this.paymentDetails.paymentMethod.creditCard.cardNumber&&(this._paymentCreditCardNumberSubscription=this.paymentDetails.paymentMethod.creditCard.cardNumber.subscribe(function(n){var i=t.unwrap(e.paymentDetails.paymentMethod.creditCard.type);e._updatePaymentMethodForCardNumberAndCardType(n,i)})),this._cardNumberAndCardTypeListener())},e.prototype._cardNumberAndCardTypeListener=function(){var e=this;this._creditCardNumberAndCardTypeSubscription=t.postbox.subscribe(o.CARD_NUMBER_AND_CARD_TYPE_UPDATED,function(){var n=t.unwrap(e.paymentDetails.paymentMethod.creditCard.cardNumber),i=t.unwrap(e.paymentDetails.paymentMethod.creditCard.type);e._updatePaymentMethodForCardNumberAndCardType(n,i)})},e.prototype._updatePaymentMethodForCardNumberAndCardType=function(e,t){if(this.paymentDetails.paymentMethod.paymentMethodOption()===p.DirectCard){var n=e?e.replace(/-/g,"").length:0;if(n<=6)this.paymentDetails.paymentMethod.creditCard.countryIdOfIssuingBank(null),this.isExperimentPC1289Applied&&this.paymentDetails.paymentMethod.creditCard.ccWhiteListed(!1);else{var i=d.getCardTypeString(t);y.isValid(e,i)&&this._updatePaymentMethod(this.paymentDetails.paymentMethod.creditCard)}}},e.prototype._subscribePaymentMethod=function(){var e=this;this._selectedPaymentMethodTypeSubscription=this.paymentDetails.selectedPaymentMethod.subscribe(function(t){e._paymentMethodChanged(t)})},e.prototype._paymentMethodChanged=function(e,n){void 0===n&&(n=!0);var r=c.parse(e),s=r.type,l=r.cardClass;if(!s||s!==u.MySavedPaymentMethod){t.postbox.publish(o.UNSUBSCRIBE_FIELD_TO_UPDATE_PAYMENT),this.availablePaymentCurrencies&&this.availablePaymentCurrencies([]);var d=new a;e?s!==u.MySavedPaymentMethod&&(d.type(s),d.cardClass(l)):(d.type(u.AmericanExpress),d.cardClass(i.Unknown)),t.mapping.fromJS(d,{},this.paymentDetails.paymentMethod.creditCard),this._updatePaymentMethod(this.paymentDetails.paymentMethod.creditCard),n&&t.postbox.publish(o.SUBSCRIBE_FIELD_TO_UPDATE_PAYMENT)}if(this.paymentDetails.selectedPaymentMethodType(s),this.paymentDetails.paymentMethod.paymentMethodOption(this._determinePaymentMethodOption(s)),this.paymentDetails.paymentMethod.creditCard.type()===u.SevenElevenTH){var p=this.getSelectedPaymentMethod();this.paymentDetails.paymentMethod.timeoutText=this._formatPaymentMethodTimeoutText(t.unwrap(p.timeoutMinute))}t.validation.group(this.paymentDetails.paymentMethod.creditCard).showAllMessages(!1),t.validation.group(this.paymentDetails.paymentMethod.creditCard.mobilePhoneNumber).showAllMessages(!0),this.updateThreeDSecure2DetailsWithDeviceFingerprint(s),t.postbox.publish(o.UPDATED_SELECTED_PAYMENT_METHOD,s)},e.prototype._subscribePaymentMethodChargeOption=function(){var e=this;t.unwrap(this.paymentDetails.paymentChargeOptionSelector)&&(this._paymentChargeOptionSubscription=this.paymentDetails.paymentChargeOptionSelector.paymentChargeOption.subscribe(function(n){e.paymentDetails.paymentMethod.paymentMethodOption()!==p.RedirectCard&&e.paymentDetails.paymentMethod.creditCard.type()!==u.Shinhan&&e.paymentDetails.paymentMethod.creditCard.type()!==u.MIR&&e.paymentDetails.paymentMethod.creditCard.type()!==u.UnionPayCreditCard||n!==l.PayLater&&n!==l.PayOnCheckIn?n!==l.PayLater&&n!==l.PayOnCheckIn||!e._isSelectedPaymentMethod(u.MySavedPaymentMethod,i.Unknown)||e.paymentDetails.paymentMethod.creditCard.isValidForBnpl()?e._updatePaymentMethod(e.paymentDetails.paymentMethod.creditCard,e.paymentDetails.paymentMethod.paymentCurrencyCode()):t.postbox.publish(o.SELECT_FIRST_CARD_OF_MY_SAVE_CARD):(e.paymentDetails.paymentMethod.creditCardOnFileList&&e.paymentDetails.paymentMethod.creditCardOnFileList()&&e.paymentDetails.paymentMethod.creditCardOnFileList().length>0?e._setSelectedPaymentMethod(u.MySavedPaymentMethod,i.Unknown):e.resetPaymentMethod(),t.validation.group(e.paymentDetails.selectedPaymentMethod).showAllMessages(!1),t.validation.group(e.paymentDetails.paymentMethod.creditCard).showAllMessages(!1))}))},e.prototype.resetPaymentMethod=function(){this._setSelectedPaymentMethod(null,i.Unknown)},e.prototype._subscribePaymentCurrencyCode=function(){var e=this;this._paymentCurrencyCodeSubscription=this.paymentDetails.paymentMethod.paymentCurrencyCode.subscribe(function(t){(e.paymentDetails.paymentMethod.creditCard.cardNumber&&e.paymentDetails.paymentMethod.creditCard.cardNumber()||e.paymentDetails.paymentMethod.creditCard.cardId&&e.paymentDetails.paymentMethod.creditCard.cardId())&&e._updatePaymentMethod(e.paymentDetails.paymentMethod.creditCard,e.paymentDetails.paymentMethod.paymentCurrencyCode())})},e.prototype._setValidation=function(){var e=this;this.paymentDetails.selectedPaymentMethod.extend({required:{params:!0,message:this.paymentDetails.paymentMethod.pleaseSelectAMethodOfPaymentText()},notEqual:{message:this.paymentDetails.paymentMethod.pleaseSelectAMethodOfPaymentText(),params:u.None},validation:[{validator:function(){return void 0===e.paymentDetails||!e.isEnableJapanConvenienceStoreFakePaymentMethods||!T.isFakePaymentMethodNumber(e.paymentDetails.selectedPaymentMethodType())},message:this.paymentDetails.paymentMethod.pleaseSelectAnotherPaymentOptionErrorText()},{validator:function(){return void 0===e.paymentDetails||0!==e.paymentDetails.selectedPaymentMethodType()},message:this.paymentDetails.paymentMethod.pleaseSelectAMethodOfPaymentText()}]}),this.allValidationRules.push(this.paymentDetails.selectedPaymentMethod.rules),this.paymentDetails.paymentMethod.isPayAtHotel&&!this.paymentDetails.paymentMethod.isPayAtHotel()&&(this.paymentDetails.paymentMethod.paymentCurrencyCode.extend({required:{params:!0,message:""}}),this.allValidationRules.push(this.paymentDetails.paymentMethod.paymentCurrencyCode.rules)),this._setTaxIdValidationRules(),this._setBillingZipCodeValidationRules()},e.prototype._setTaxIdValidationRules=function(){var e=this,n=t.unwrap(this.paymentDetails.paymentMethod.taxIdRegex);null!=n&&(this.paymentDetails.paymentMethod.creditCard.taxId||(this.paymentDetails.paymentMethod.creditCard.taxId=t.observable()),this.paymentDetails.paymentMethod.creditCard.taxId.extend({required:{message:this.paymentDetails.paymentMethod.pleaseEnterValidTaxIdText(),params:!0,onlyIf:function(){return e.isRequiredTaxIdInput()}},pattern:{message:this.paymentDetails.paymentMethod.pleaseEnterValidTaxIdText(),params:n,onlyIf:function(){return e.isRequiredTaxIdInput()}}}),this.paymentDetails.paymentMethod.creditCard.taxId()&&this.paymentDetails.paymentMethod.creditCard.taxId.isModified(!0),this.allValidationRules.push(this.paymentDetails.paymentMethod.creditCard.taxId.rules))},e.prototype._setBillingZipCodeValidationRules=function(){var e=this;this.paymentDetails.paymentMethod.creditCard.billingZipCode||(this.paymentDetails.paymentMethod.creditCard.billingZipCode=t.observable());var n=t.unwrap(this.paymentDetails.paymentMethod.billingZipCodeRegex);null!=n&&(this.paymentDetails.paymentMethod.creditCard.billingZipCode.extend({required:{message:this.paymentDetails.paymentMethod.pleaseEnterPostCodeText(),params:!0,onlyIf:function(){return e.isRequiredBillingZipCodeInput()}},pattern:{message:this.paymentDetails.paymentMethod.pleaseEnterAValidUSPostCodeText(),params:n,onlyIf:function(){return e.isRequiredBillingZipCodeInput()}}}),this.allValidationRules.push(this.paymentDetails.paymentMethod.creditCard.billingZipCode.rules))},e.prototype._updatePaymentMethod=function(e,n){var a=this;this.responseFormattedPaymentAmount(""),t.isObservable(this.isSubmitBookingButtonMessageVisible)&&this.isSubmitBookingButtonMessageVisible(!1),this.isExperimentIKKI9356Applied&&t.unwrap(this.paymentDetails.paymentMethod.creditCardOnFileErrorMessage)&&this.paymentDetails.paymentMethod.creditCardOnFileErrorMessage(""),this.paymentDetails.paymentMethod.currencyChangedByPolicyMessage(""),this._isSelectedPaymentMethod(u.MySavedPaymentMethod,i.Unknown)&&this.isPaymentDetailsBlocked(!0),this._paymentService.updatePaymentMethod(t.unwrap(this.paymentDetails.paymentChargeOptionSelector.paymentChargeOption),e,n).then(function(e){a._paymentCurrencyCodeSubscription&&a._paymentCurrencyCodeSubscription.dispose(),a.availablePaymentCurrencies([]),t.mapping.fromJS(e.availablePaymentCurrencies,{},a.availablePaymentCurrencies),a.paymentDetails.paymentMethod.currencyChangedByPolicyMessage(e.currencyChangedByPolicyMessage),a.paymentDetails.paymentMethod.showChargeInBankCurrencyMessage(e.showChargeInBankCurrencyMessage),a.paymentDetails.paymentMethod.paymentCurrencyCode(e.paymentCurrencyCode),e.countryIdOfIssuingBank&&a.paymentDetails.paymentMethod.creditCard.countryIdOfIssuingBank(e.countryIdOfIssuingBank),e.issuingBankDetails&&(a.paymentDetails.paymentMethod.creditCard.issuingBankDetails||(a.paymentDetails.paymentMethod.creditCard.issuingBankDetails=t.observable()),a.paymentDetails.paymentMethod.creditCard.issuingBankDetails(e.issuingBankDetails)),void 0!==e.isDisplayAddCreditCardToFileCheckbox&&null!==e.isDisplayAddCreditCardToFileCheckbox?(a.paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox(e.isDisplayAddCreditCardToFileCheckbox),a.isExperimentIKKI9415Applied&&t.unwrap(a.paymentDetails.paymentMethod.isAddCreditCardToFileUnchecked)||a.paymentDetails.paymentMethod.isAddCreditCardToFile(e.isDisplayAddCreditCardToFileCheckbox)):(a.paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox(!1),a.paymentDetails.paymentMethod.isAddCreditCardToFile(!1)),e.priceDetails&&a.responseFormattedPaymentAmount(t.unwrap(e.priceDetails.formattedPaymentAmount)),a.paymentDetails.paymentMethod.isDownTime&&a.paymentDetails.paymentMethod.isDownTime(e.isDownTime),a._subscribePaymentCurrencyCode(),a.installmentDetailsMaster&&a.installmentDetailsMaster(e.installmentDetailsMaster),a.isExperimentPC1289Applied&&a.paymentDetails.paymentMethod.creditCard.ccWhiteListed(e.isCustomerCcWhiteListed)}).always(function(e){a.isPaymentDetailsBlocked(!1),t.isObservable(a.isSubmitBookingButtonMessageVisible)&&a.isSubmitBookingButtonMessageVisible(!0),a.isEnableJapanConvenienceStoreFakePaymentMethods&&"0"===a.paymentDetails.selectedPaymentMethod()&&t.validation.group(a.paymentDetails.selectedPaymentMethod).showAllMessages(!1)})},e.prototype._determinePaymentMethodOption=function(e){var t=d.determinePaymentMethodOption(e);switch(t){case p.None:this.setDefaultCreditCardType();break;default:this.paymentDetails.paymentMethod.creditCard.type(e)}return t},e.prototype._formatPaymentMethodTimeoutText=function(e){var t;if(e>0){var n=Math.floor(e/60);t=this.paymentDetails.paymentMethod.pleaseCompleteYourPaymentWithinXHoursText(),t=t.replace("{0}",n.toString()),t=n>1?t.replace("{1}",this.paymentDetails.paymentMethod.hoursText()):t.replace("{1}",this.paymentDetails.paymentMethod.hourText())}return t},e.prototype.setDefaultCreditCardType=function(){this.paymentDetails.paymentMethod.creditCard.type(u.AllCreditCards),this.paymentDetails.paymentMethod.creditCard.cardClass(i.Unknown)},e.prototype._resetInstallment=function(){this.installmentPanel.installmentPlans&&this.installmentPanel.installmentPlans(null),this.paymentDetails.paymentMethod.creditCard.installmentPlanId&&this.paymentDetails.paymentMethod.creditCard.installmentPlanId(null)},e.prototype.dispose=function(){this._paymentMethodUpdatedSubscription&&this._paymentMethodUpdatedSubscription.dispose(),this._resetPaymentMethodSubscription&&this._resetPaymentMethodSubscription.dispose(),this._paymentCurrencyCodeSubscription&&this._paymentCurrencyCodeSubscription.dispose(),this._selectedPaymentMethodTypeSubscription&&this._selectedPaymentMethodTypeSubscription.dispose(),this._paymentChargeOptionSubscription&&this._paymentChargeOptionSubscription.dispose(),this._installmentPanelUpdatedSubscription&&this._installmentPanelUpdatedSubscription.dispose(),this._installmentPanelResetSubscription&&this._installmentPanelResetSubscription.dispose(),this._selectedPaymentMethodBeforeChangeSubscription&&this._selectedPaymentMethodBeforeChangeSubscription.dispose(),this._paymentCreditCardNumberSubscription&&this._paymentCreditCardNumberSubscription.dispose(),this._creditCardNumberAndCardTypeSubscription&&this._creditCardNumberAndCardTypeSubscription.dispose(),this.allValidationRules.forEach(function(e){e&&e.removeAll()}),this.validationErrors&&this.validationErrors.dispose(),this.paymentMethodValidationErrors&&this.paymentMethodValidationErrors.dispose(),this._selectedInstallmentPlanIdSubscription&&this._selectedInstallmentPlanIdSubscription.dispose()},e.prototype.isPaymentMethodDropdownDisplayed=function(){return this.paymentMethodList().length>1},e}();e.exports=D}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){e[e.Unknown=0]="Unknown",e[e.Credit=1]="Credit",e[e.Debit=2]="Debit"}(n||(n={})),e.exports=n},function(e,t,n){(function(t){"use strict";var n=function(){function e(){var e=this;this.yourCardQualifiesYouToPayInMonthlyInstallmentsText=t.observable(""),this.iWouldLikeToPayInMonthlyInstallmentsText=t.observable(""),this.numberOfPaymentsText=t.observable(""),this.monthlyEstimateText=t.observable(""),this.interestRateText=t.observable(""),this.installmentPlans=t.observable([]),this.isDisplay=t.computed(function(){return null!==t.unwrap(e.installmentPlans)&&t.unwrap(e.installmentPlans).length>0})}return e}();e.exports=n}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){e[e.PayNow=0]="PayNow",e[e.PayLater=1]="PayLater",e[e.PayOnCheckIn=2]="PayOnCheckIn"}(n||(n={})),e.exports=n},function(e,t,n){(function(t){"use strict";var i=n(83),a=n(21),o=function(){function e(){}return e.parse=function(e){if(!e)return{type:0,cardClass:0};var t=e.split(","),n={type:parseInt(t[0],10)||0,cardClass:parseInt(t[1],10)||0};return n},e.toString=function(e){return[e.type,e.cardClass].join(",")},e.get=function(e,n){var i=null;return t.unwrap(e).forEach(function(e){t.unwrap(e.key)===n&&(i=e)}),i},e.getPaymentDisplayLogos=function(n,a,o,r){if(t.unwrap(n.paymentChargeOptionSelector.paymentChargeOption)===i.PayLater||t.unwrap(n.paymentChargeOptionSelector.paymentChargeOption)===i.PayOnCheckIn){var s=e.getPaymentDisplayLogosForPayLater(n);return o&&(s=s.concat(n.paymentMethod.displayLogoForRedirectPaymentMethods().filter(function(e){return"alipay"===e}))),r&&(s=s.concat(n.paymentMethod.displayLogoForRedirectPaymentMethods().filter(function(e){return"paypal"===e}))),s}return a()?n.paymentMethod.displayLogoForDirectPaymentMethods():e.getPaymentDisplayLogosForPayNow(n)},e.getPaymentDisplayLogosForPayLater=function(e){var t=(i={},i[a.Shinhan]="shinhan",i[a.BCCard]="bc-card",i[a.SamsungCard]="samsung-card",i[a.NHCard]="nh-card",i[a.LotteCard]="lotte-card",i[a.KBCard]="kb-card",i[a.HanaCard]="hana-card",i[a.HyundaiCard]="hyundai-card",i[a.MIR]="mir",i),n=e.paymentMethod.supportedPaymentMethodTypeList().filter(function(e){return e.value()in t&&!e.isPayLaterSupported()}).map(function(e){return t[e.value()]});return e.paymentMethod.displayLogoForDirectPaymentMethods().filter(function(e){return n.indexOf(e)===-1&&"unionpay"!==e&&"unionpay-credit"!==e});var i},e.getPaymentDisplayLogosForPayNow=function(e){var t=e.paymentMethod.displayLogoForDirectPaymentMethods().concat(e.paymentMethod.displayLogoForRedirectPaymentMethods());if(e.promotionDiscountInfo.isAlipayCampaign()){var n="alipay",i="wechatpay",a=t.indexOf(n),o=t.indexOf(i),r=t.filter(function(e){return e!==n&&e!==i});o>0&&(r=[i].concat(r)),a>0&&(r=[n].concat(r)),t=r}return t},e.getPaymentDisplayLogosForAll=function(e){var t=e.paymentMethod.displayLogoForDirectPaymentMethods().concat(e.paymentMethod.displayLogoForRedirectPaymentMethods());if(e.promotionDiscountInfo.isAlipayCampaign()){var n="alipay",i="wechatpay",a=t.indexOf(n),o=t.indexOf(i),r=t.filter(function(e){return e!==n&&e!==i});o>0&&(r=[i].concat(r)),a>0&&(r=[n].concat(r)),t=r}return t},e}();e.exports=o}).call(t,n(3))},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(68),s=n(69),l=n(21),d=n(86),c=n(88),p=function(){function e(){this._apiEndpointService=new a}return e.prototype.updatePaymentMethod=function(e,n,a,l){var p=this._apiEndpointService.create("payment/updatePaymentMethod"),u=r.determinePaymentMethodOption(n.type()),m={};this._buildUnionPayCreditCardInfo(n,m),u===s.RedirectCard?t.extend(m,{type:n.type()}):n.cardId&&n.cardId()?t.extend(m,{cardId:n.cardId(),type:n.type(),cardClass:n.cardClass(),identificationNumber:n.identificationNumber()}):n.cardNumber&&n.cardNumber()&&this._buildSubmittingCreditCardInfo(n,m);var h={paymentCurrencyCode:a,paymentChargeOption:e,creditCard:m};return null!=l&&t.extend(h,{paymentMethodType:l}),t.post(p,h).then(function(e){return i.postbox.publish(o.PRICE_DETAILS_UPDATED,e.priceDetails),i.postbox.publish(o.FORMATTED_MONEY_BACK_PAYMENT_AMOUNT_UPDATED,e.formattedMoneyBackPaymentAmount),e.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,e.priceDetails.smartChoiceYouSaveText),d.isApplied(c.CvvValidation)&&i.postbox.publish(o.IS_ABLE_TO_PAY_WITHOUT_CVV_UPDATED,e.cvvRequired),e.installmentPanel?i.postbox.publish(o.INSTALLMENT_UPDATED,e.installmentPanel):i.postbox.publish(o.INSTALLMENT_RESET),e})},e.prototype._buildSubmittingCreditCardInfo=function(e,n){var i=e.cardNumber();i=i.replace(/[^0-9]/g,""),t.extend(n,{cardNumber:i,countryIdOfIssuingBank:e.countryIdOfIssuingBank&&e.countryIdOfIssuingBank()?e.countryIdOfIssuingBank:"",issuingBankDetails:e.issuingBankDetails&&e.issuingBankDetails()?e.issuingBankDetails():null,expiryMonth:e.expiryMonth()||"",expiryYear:e.expiryYear()||"",type:e.type(),cardClass:e.cardClass(),identificationNumber:e.identificationNumber()})},e.prototype._buildUnionPayCreditCardInfo=function(e,n){if(e.type()===l.UnionPayDebitCard){if(e.mobilePhoneNumber&&e.mobilePhoneNumber()){var i=e.mobilePhoneNumber();i=i.replace(/[^0-9]/g,""),t.extend(n,{mobilePhoneNumber:i})}e.cardNumber&&e.cardNumber()&&this._buildSubmittingCreditCardInfo(e,n)}},e}();e.exports=p}).call(t,n(2),n(3))},function(e,t,n){"use strict";var i=n(9),a=n(87),o=function(){function e(){}return e.isApplied=function(e){return this.init(),this._clientSideExperiments.isBVariant(e)},e.isUnseenExperiment=function(e){this.init();var t=this._clientSideExperiments.isUnseenExperiment(e);return null!==t&&void 0!==t&&t.length>0},e.addExperiment=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.init(),t?null===this._clientSideExperiments.unseenExperiments[e]&&(this._clientSideExperiments.unseenExperiments[e]=n):this._clientSideExperiments.bVariants.indexOf(e)===-1&&this._clientSideExperiments.bVariants.push(e)},e.init=function(){this._clientSideExperiments||this._populateAppliedExperiments()},e._populateAppliedExperiments=function(){this._clientSideExperiments=new a,this._clientSideExperiments.addExperiments(i.getPageData().clientSideExperiments)},e.reset=function(){this._clientSideExperiments=void 0},e}();e.exports=o},function(e,t,n){"use strict";var i=n(10),a=function(){function e(){this.bVariants=new Array,this.unseenExperiments=[]}return e.prototype.addExperiments=function(e){this.isNullOrUndefined(e)||(this.addBVariants(e.bVariants),this.addUnseenExperiments(e.unseenExperiments))},e.prototype.isBVariant=function(e){if(this.bVariants.indexOf(e)!==-1)return!0;var t=this.isUnseenExperiment(e);return!this.isNullOrUndefined(t)&&0!==t.length&&t[0].value},e.prototype.isUnseenExperiment=function(e){var t=this.unseenExperiments.filter(function(t){return t.key===e});return(this.isNullOrUndefined(t)||0===t.length)&&(t=null),t},e.prototype.addBVariants=function(e){if(!this.isNullOrUndefined(e))for(var t=0;t<e.length;t++){var n=e[t];i.isNullOrEmpty(n)||this.bVariants.push(n)}},e.prototype.addUnseenExperiments=function(e){if(!this.isNullOrUndefined(e))for(var t=0;t<e.length;t++){var n=e[t];this.isNullOrUndefined(n)||i.isNullOrEmpty(n.key)||this.unseenExperiments.push(n)}},e.prototype.isNullOrUndefined=function(e){return null===e||"undefined"==typeof e},e}();e.exports=a},function(e,t){"use strict";var n;!function(e){var t;!function(e){e.AnalyticsFrameworkSwitch="FEDATA-AF-SWITCH-BF",e.BookOnRequestSwitch="BOOKONREQUEST-SWITCH",e.CancellationPolicyNotShowPopover="IKKI-7582",e.ConvertBookingTooLargePopToModal="IKKI-5524",e.CvvValidation="FRAUD-1091",e.EmailAndRetypeEmailShouldNotBeCaseSensitive="IKKI-9518",e.GiftCardOptionIsNotRetrained="IKKI-5420",e.MessagesAccuracyMeasurement="FEDATA-1270",e.MessagingDiscountMessagesSwitch="PFE-DM-SWITCH",e.CutTheRightPanelDonwToBeAllAboveTheFold="IKKI-9591",e.SuspiciousData="WFAPI-873",e.AirportTransferPanel="ARM-1496",e.AirportTransferCheckboxView="ARM-1459",e.AirportTransferOptionalFlightNumber="ARM-1753",e.AirportTransferOptionalAirportCode="ARM-2031",e.AirportTransferFlightValidation="ARM-1595",e.AirportTransferPanelOnMobileWeb="ARM-2109",e.CreditCardPromoEligiblePanel="AFF-2001",e.UnionPayGen2="CW-1913",e.PreFillContactDetailsWhenInL1="IKKI-7822",e.UnionPayGen2DebitCard="unionPayGen2DebitCard",e.UnionPayGen2CreditCard="unionPayGen2CreditCard",e.AlipayBnpl="PC-240",e.PaypalBnpl="PC-2009",e.AddContactDetailsSummaryOnStep2="IKKI-8271",e.RedesignedCheckinCheckoutOnMobile="IKKI-8208",e.KoreaInstallmentPlan="PC-935",e.EnableKoreaCard="PC-1002",e.SetAlipayAsDefaultSelectedPaymentMethodForBNPLBookings="PC-1295",e.ShouldHideAirportTransferPanelForPhoneTypeUser="PHONE-761",e.AddUSPostCodeInputForGuestDetailsForm="PAY-4787",e.GuestEmailOptionForPhoneTypeUsers="PHONE-675",e.WarnUserForPossibleTypoEmail="CEGHZ-4",e.AddEmailAddressToThankyouPage="CEGHZ-11",e.MoveMmbEntryPoint="CEGHZ-175",e.AddMessageWhenRoomDoesNotSupportTheRequest="IKKI-8610",e.IncreaseTimeoutSevenEleven="PC-1084",e.HideIssuingBankForWhiteListedCardHolders="PC-1289",e.GCBalanceOnLeavingBFPopup="LOY-3180",e.GiftCardDisplayRedeemBoxForSoftLogin="LOY-3185",e.SeparateSectionsInLeftColumnIntoCards="IKKI-9184",e.ShowCcofForL1User="IKKI-9356",e.YourCardDetailsAreAlwaysSafeWithUsText="IKKI-9309",e.EnableJapanConvenientStoreFakePaymentOptions="PC-1734",e.MakeAlmostDoneForCreditDebitCardOnly="IKKI-9301",e.FixBNPLRadioButtonDesign="IKKI-8745",e.ShowCollapsedContactDetails="IKKI-9386",e.DontCheckSaveCardAutomatically="IKKI-9415",e.MakeFirstAndLastNameFormFieldEditableForL2="IKKI-9495",e.DisclaimerTextWithTOULinkForBNPLMobile="PC-2236",e.RemovePhoneNumberField="IKKI-9502",e.EarlyCheckInCheckoutToggle="IKKI-9548",e.AddImageToHotelDetails="IKKI-9008",e.IntegrateWhitelabelwithBapi="JTBB-118",e.NewAgodaCashIcon="LOY-3570",e.UmrahMVP="UMRAH-787",e.ExpandedSpecialRequestsWithCheckbox="IKKI-9629",e.EnableThreeDSecure2Payment="PAY-5617",e.SwitchToNumberKeyboardForCVC="IKKI-9641",e.ReactHeaderComponent="KEBAB-2",e.ReactLoginComponet="KEBAB-5"}(t=e.experiments||(e.experiments={}))}(n||(n={})),e.exports=n.experiments},function(e,t){"use strict";var n=function(){function e(){this.options={container:"body",placement:"top",trigger:"hover"}}return e}();e.exports=n},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(86),r=n(61),s=n(9),l=function(){function e(){this._apiEndpointService=new a}return e.prototype.isExperimentAllocatedToB=function(e){var t={ExperimentNames:[e]};return this._getTestVariants(t).then(function(t){return t.indexOf(e)!==-1})},e.prototype.experimentSeen=function(e){return this.experimentsSeen([e])},e.prototype.experimentsSeen=function(e){var n=this._apiEndpointService.create("experimentapi/testvariants"),i=t.Deferred(),a=[];
if(e.forEach(function(e){if(o.isUnseenExperiment(e))a.push(e);else{var t=new r;t.logException(e,n,46,13,"Unseen Experiment Not Found: "+e)}}),0===a.length)return i.resolve(!1);var s={ExperimentNames:a};return this._getTestVariants(s).then(function(e){return a.forEach(function(t){if(e.indexOf(t)<0)return!1}),!0})},e.prototype._getTestVariants=function(e){var t=s.getPageData();if(t.jsonViewModel&&t.jsonViewModel.features&&t.jsonViewModel.features.clientSideBotWillNotSendMessage&&t.isTob)return i.Deferred().reject([]);var n=this._apiEndpointService.create("experimentapi/testvariants");return i.post(n,e).then(function(e){return e.forEach(function(e){o.addExperiment(e)}),e}).fail(function(e,t,i){var a=new r;a.logException(i,n,67,9,i)})},e}();e.exports=l}).call(t,n(2),n(2))},function(e,t){"use strict";var n=function(){function e(){}return e.AddMoreLifeToBookingForm="addMoreLifeToBookingForm",e.IsPrefillForL1LoggedinUser="isprefillforl1loggedinuser",e.ShowEmailSuggestionForPossibleTypo="showEmailSuggestionForPossibleTypo",e.ShowRetypeEmail="showRetypeEmail",e.ShowFacebookLoginEmail="showFacebookLoginEmail",e.WhatsNearByOnBookingForm="whatsNearByOnBookingForm",e.ShouldShowPaymentOptionPanel="shouldShowPaymentOptionPanel",e}();e.exports=n},function(e,t,n){(function(t){"use strict";var n=function(){function e(n){var i=this;this.billingZipCode=n.billingZipCode,this.billingZipCodeText=n.billingZipCodeText,this.creditCardType=n.creditCardType,this.requiredBillingZipCodePaymentMethodTypes=n.requiredBillingZipCodePaymentMethodTypes,this.isShowBillingZipCodeInput=t.pureComputed(function(){return e.isRequiredBillingZipCodePaymentMethodTypeSelected(t.unwrap(i.creditCardType),t.unwrap(i.requiredBillingZipCodePaymentMethodTypes))})}return e.isRequiredBillingZipCodePaymentMethodTypeSelected=function(e,t){return t.some(function(t){return t===e})},e}();e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";var i=n(21),a=function(){function e(){}return e.getFakePaymentMethods=function(){return this.listFakePaymentMethod},e.isFakePaymentMethod=function(e){return this.listFakePaymentMethod.indexOf(i[e])!==-1},e.isFakePaymentMethodType=function(e){return this.listFakePaymentMethod.indexOf(e)!==-1},e.isFakePaymentMethodNumber=function(e){return this.listFakePaymentMethod.indexOf(e)!==-1},e.listFakePaymentMethod=[i.SevenElevenJP,i.LAWSON,i.SEICOMART,i.FAMILYMARTJP,i.MINISTOP],e}();e.exports=a},function(e,t,n){(function(t){"use strict";var i=n(89),a=function(){function e(n){var a=this;this.taxId=n.taxId,this.taxIdText=n.taxIdText,this.taxIdDetailsText=n.taxIdDetailsText,this.requiredTaxIdPaymentMethodTypes=n.requiredTaxIdPaymentMethodTypes,this.creditCardType=n.creditCardType,this.paymentCurrency=n.paymentCurrency,this.requiredTaxIdCurrencies=n.requiredTaxIdCurrencies,this.isShowTaxIdComputed=t.pureComputed(function(){var n=e.isRequiredTaxIdWithPaymentMethodTypeAndCurrencySelected(a.creditCardType(),t.unwrap(a.requiredTaxIdPaymentMethodTypes),a.paymentCurrency(),t.unwrap(a.requiredTaxIdCurrencies));return n}),this.taxIdDetailsPopoverBindingOptions=new i,this.taxIdDetailsPopoverBindingOptions.options.content=t.unwrap(this.taxIdDetailsText)}return e.isRequiredTaxIdWithPaymentMethodTypeAndCurrencySelected=function(e,t,n,i){var a=null!=t&&t.some(function(t){return t===e}),o=null!=i&&i.some(function(e){return e===n});return o&&a},e}();e.exports=a}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=n(96),a=n(97),o=n(98),r=n(99),s=n(8),l=function(){function e(){var e=this;this.deviceFingerprintResultFromBankIframeName="device-fingerprint-result",this.challengeResultFromBankIframeName="threedschallenge-iframe",this.threeDSecureChallengeContentClassName=".threedsecure-challenge-content",this.deviceFingerprintResultActionMessage="deviceFingerprintResult",this.challengeResultActionMessage="challengeResult",this.messageEvent="message",this.failResponse="N",this.successResponse="Y",this.timeoutChallengeResponse="N",this.isEnabledThreeDSecure2Payment=function(e,t){var n=t.some(function(t){return e===t});return n},this.handleCollectDeviceFingerprint=function(t,n,i){e.setupDeviceFingerprintResultListener(n,i,t.deviceFingerprintResultTimeOutMilliseconds);var a=e.threedsecurebuilder.buildThreeDSecure2DeviceFingerprintRequestForBank(t),o=e.threedsecurebuilder.createHTMLIframeToGetDeviceFingerprintResult(e.deviceFingerprintResultFromBankIframeName);s.appendChildToDocumentBody(o);var r=e.threedsecurebuilder.createHTMLFormThreeDSecure2DeviceFingerprintRequestForBank(e.deviceFingerprintResultFromBankIframeName,t.submitDeviceFingerprintInfoUrl,a);s.appendChildToDocumentBody(r),r.submit(),s.removeChildFromDocumentBody(r)},this.handleRenderChallenge=function(t,n,i){var a=e.threedsecurebuilder.createHTMLIframeToGetChallengeResult(e.challengeResultFromBankIframeName),o=e.threedsecurebuilder.buildThreeDSecure2ChallengeRequestForBank(t),r=e.threedsecurebuilder.createHTMLFormThreeDSecure2ChallengeRequestForBank(e.challengeResultFromBankIframeName,t.challengeUrl,o);s.appendChildToDocumentBody(r);var l=e.handleCompletedOpenChallengeModalRender.bind(e,a,r,n,i,t.challengeResultTimeOutMilliseconds);e.openChallengeModalWith(t,l)},this.setupDeviceFingerprintResultListener=function(t,n,i){var a=e.handleDeviceFingerprintResponseResultEvent(t);s.addGlobalEventListener(e.messageEvent,a),e.timeoutDeviceFingerprintResult=s.setTimeout(e.handleDeviceFingerprintTimeoutResponseResult(a,n),i)},this.handleDeviceFingerprintResponseResultEvent=function(t){var n=s.getCurrentOriginOrEmpty(),i=function(a){if(a.origin&&a.origin===n){var o=a.message?"message":"data",r=a[o];e.isValidDeviceFingerprintResultResponse(r)&&(e.clearTimeoutDeviceFingerprintResult(),s.removeGlobalEventListener(e.messageEvent,i),e.removeIframeFromPage(e.deviceFingerprintResultFromBankIframeName),t(r.result))}};return i},this.handleDeviceFingerprintTimeoutResponseResult=function(t,n){var i=function(){s.removeGlobalEventListener(e.messageEvent,t),e.removeIframeFromPage(e.deviceFingerprintResultFromBankIframeName),n(e.failResponse)};return i},this.setupChallengeResultListener=function(t,n,i,a){var o=e.handleChallengeReponseResult(t,n);s.addGlobalEventListener(e.messageEvent,o);var r=e.handleChallengeResponseTimeout(i,o,t);e.timeoutChallengeResult=s.setTimeout(r,a)},this.handleChallengeReponseResult=function(t,n){var i=s.getCurrentOriginOrEmpty(),a=function(o){if(o.origin&&o.origin===i){var r=o.message?"message":"data",l=o[r];e.isValidChallengeResultResponse(l)&&(e.clearTimeoutChallengeResult(),s.removeGlobalEventListener(e.messageEvent,a),t(),e.removeIframeFromPage(e.challengeResultFromBankIframeName),n(l.result))}};return a},this.handleChallengeResponseTimeout=function(t,n,i){var a=function(){s.removeGlobalEventListener(e.messageEvent,n),i(),e.removeIframeFromPage(e.challengeResultFromBankIframeName),t(e.timeoutChallengeResponse)};return a},this.clearTimeoutDeviceFingerprintResult=function(){s.clearTimeout(e.timeoutDeviceFingerprintResult)},this.clearTimeoutChallengeResult=function(){s.clearTimeout(e.timeoutChallengeResult)},this.removeIframeFromPage=function(e){s.removeElementFromDocument('iframe[name="'+e+'"]')},this.isValidDeviceFingerprintResultResponse=function(t){return e.isValidThreeDSecureResultReponseFormat(t)&&t.action===e.deviceFingerprintResultActionMessage},this.isValidChallengeResultResponse=function(t){return e.isValidThreeDSecureResultReponseFormat(t)&&t.action===e.challengeResultActionMessage},this.isValidThreeDSecureResultReponseFormat=function(t){return null!=t&&null!=t.action&&null!=t.result&&(t.result===e.failResponse||t.result===e.successResponse)},this.openChallengeModalWith=function(o,r){e.modalBindingOptions=new a,e.modalBindingOptions.header.data={isCloseBtnDisplayed:!1,title:null},e.modalBindingOptions.body.name=i.PAYMENT_THREEDSECURE2_CHALLENGE_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(e.modalBindingOptions.body.name,n(100)),e.modalBindingOptions.body.data={contentHeightPixel:o.challengeContentHeightWithPixel},e.modalBindingOptions.body.afterRender=r,e.modalBindingOptions.dialogCss=i.PAYMENT_THREEDSECURE2_CHALLENGE_MODAL_CLASS,e.modalBindingOptions.visible(!0),e.modalBindingOptions.elementName="threedsecure-modal-backdrop",e.modalService.open(e.modalBindingOptions)},this.closeChallengeModal=function(){e.modalService.close()},this.handleCompletedOpenChallengeModalRender=function(t,n,i,a,o){e.addIframeChallengeContentToChallengeModal(t),e.setupChallengeResultListener(e.closeChallengeModal,i,a,o),n.submit(),s.removeChildFromDocumentBody(n)},this.addIframeChallengeContentToChallengeModal=function(t){s.appendChildElementTo(e.threeDSecureChallengeContentClassName,t)},this.threedsecurebuilder=new o,this.modalService=this.modalService||new r}return e}();e.exports=l}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){var t;!function(e){e.ACCOUNT_LOCKED_MODAL_CLASS="account-locked-modal",e.ACCOUNT_LOCKED_MODAL_BODY="accountLockedModalBodyTemplate",e.AGODA_PRICE_GUARANTEE_MODAL_BODY="agodaPriceGuaranteeModalBody",e.CARDS_NOT_ACCEPTED_MODAL_BODY="cardsNotAcceptedModalBody",e.ROOM_LEVEL_BOR_MODAL_BODY="roomLevelBorModalBody",e.ALLOTMENT_NOT_AVAILABLE_MODAL_CLASS="allotment-not-available-modal",e.ALLOTMENT_NOT_AVAILABLE_MODAL_BODY="allotmentNotAvailableModalBodyTemplate",e.ALLOTMENT_NOT_AVAILABLE_MODAL_FOOTER="allotmentNotAvailableModalFooterTemplate",e.APS_PEEK_MODAL_CLASS="aps-peek-modal",e.LOGIN_MODAL_CLASS="login-modal",e.LOGIN_MODAL_BODY="loginModalBody",e.LOGIN_MODAL_FOOTER="loginModalFooterTemplate",e.APS_PEEK_MODAL_BODY="apsPeekModalBodyTemplate",e.APS_PEEK_MODAL_HEADER="apsPeekModalHeaderTemplate",e.BOOKING_CONDITIONS_POPOVER="bookingConditionsPopover",e.BOOKING_CONDITIONS_MODAL_BODY="bookingConditionsModalBody",e.BOOKING_TOO_LARGE_MODAL_CLASS="booking-too-large-modal",e.BOOKING_TOO_LARGE_MODAL_BODY="bookingTooLargeModalBodyTemplate",e.BOOKING_TOO_LARGE_MODAL_FOOTER="bookingTooLargeModalFooterTemplate",e.BREAKFAST_UPGRADE_MODAL_CLASS="BreakfastUpgradeModal",e.BREAKFAST_UPGRADE_MODAL_HEADER="breakfastUpgradeModalHeaderTemplate",e.BREAKFAST_UPGRADE_MODAL_BODY="breakfastUpgradeModalBodyTemplate",e.BLOCK_SUSPICIOUS_BOOKING_CLASS="block-suspicious-booking-modal",e.BLOCK_SUSPICIOUS_BOOKING_BODY="blockSuspiciousBookingBodyTemplate",e.CVV_MODAL_CLASS="cvv-modal",e.CVV_MODAL_BODY="cvvModalBodyTemplate",e.DUPLICATE_BOOKING_MODAL_CLASS="duplicate-booking-modal",e.DUPLICATE_BOOKING_MODAL_BODY="duplicatedBookingModalBodyTemplate",e.DUPLICATE_BOOKING_MODAL_FOOTER="duplicateBookingModalFooterTemplate",e.FRAUD_HIGH_RISK_MODAL_CLASS="fraud-high-risk-modal",e.FRAUD_HIGH_RISK_MODAL_BODY="fraudHighRiskModalBodyTemplate",e.FRAUD_HIGH_RISK_MODAL_FOOTER="fraudHightRiskModalFooterTemplate",e.POINTS_MAX_CONDITIONS_MODAL_BODY="pointsMaxConditionsModalBody",e.FORGOT_PASSWORD_SUCCESS_MODAL_BODY="forgotPasswordSuccessModalBodyTemplate",e.FORGOT_PASSWORD_SUCCESS_MODAL_CLASS="forgot-password-success-modal",e.CLOSED_QUESTION_MODAL_BODY="closedQuestionModalBodyTemplate",e.CROSS_SELLING_ALLOTMENT_NOT_AVAILABLE_MODAL="cross-selling-allotment-unavailable-modal",e.CROSS_SELLING_ALLOTMENT_NOT_AVAILABLE_MODAL_BODY="crossSellingAllotmentNotAvailableModalBodyTemplate",e.CROSS_SELLING_ALLOTMENT_NOT_AVAILABLE_MODAL_FOOTER="crossSellingAllotmentNotAvailableModalFooterTemplate",e.SUBMIT_FEEDBACK_MODAL_CLASS="submit-feedback-modal",e.SUBMIT_FEEDBACK_MODAL_BODY="submitFeedbackModalBodyTemplate",e.SUBMIT_FEEDBACK_MODAL_FOOTER="submitFeedbackModalFooterTemplate",e.CROSS_SELLING_MODAL_BODY="crossSellingModalBodyTemplate",e.CROSS_SELLING_MODAL_CLASS="cross-selling-modal",e.CROSS_SELLING_MODAL_HEADER="crossSellingModalHeaderTemplate",e.REDIRECT_PAYMENT_MODAL_CLASS="redirect-payment-modal",e.REDIRECT_PAYMENT_MODAL_BODY="redirectPaymentModalBodyTemplate",e.REDIRECT_PAYMENT_MODAL_FOOTER="redirectPaymentModalFooterTemplate",e.UNABLE_TO_PROCESS_THIS_BOOKING_Modal_CLASS="unable-to-process-this-booking-modal",e.UNABLE_TO_PROCESS_THIS_BOOKING_Modal_BODY="unableToProcessThisBookingModalBodyTemplate",e.UNABLE_TO_PROCESS_THIS_BOOKING_Modal_FOOTER="unableToProcessThisBookingModalFooterTemplate",e.IDLE_WARNING_MODAL_CLASS="idle-warning-modal",e.IDLE_WARNING_MODAL_BODY="idleWarningModalBodyTemplate",e.IDLE_WARNING_MODAL_FOOTER="idleWarningModalFooterTemplate",e.PREBOOKING_SESSION_EXCEEDED_MODAL_CLASS="prebooking-session-exceeded-modal",e.PREBOOKING_SESSION_EXCEEDED_BODY="prebookingSessionExceededModalBodyTemplate",e.PREBOOKING_SESSION_EXCEEDED_FOOTER="prebookingSessionExceededModalFooterTemplate",e.IDLE_TIMEOUT_MODAL_CLASS="idle-timeout-modal",e.IDLE_TIMEOUT_MODAL_BODY="idleTimeoutModalBodyTemplate",e.IDLE_TIMEOUT_MODAL_FOOTER="idleTimeoutModalFooterTemplate",e.WAITING_FOR_CONFIRMATION_MODAL_CLASS="waiting-for-confirmation-modal",e.WAITING_FOR_CONFIRMATION_MODAL_HEADER="waitingForConfirmationModalHeaderTemplate",e.WAITING_FOR_CONFIRMATION_MODAL_BODY="waitingForConfirmationModalBodyTemplate",e.UNION_PAY_OTP_MODAL_CLASS="union-pay-modal",e.UNION_PAY_OTP_MODAL_HEADER="unionPayOtpModalHeaderTemplate",e.UNION_PAY_OTP_MODAL_BODY="unionPayOtpModalBodyTemplate",e.UNION_PAY_IDENTIFICATION_MODAL_CLASS="union-pay-modal",e.UNION_PAY_IDENTIFICATION_MODAL_HEADER="unionPayIdentificationModalHeaderTemplate",e.UNION_PAY_IDENTIFICATION_MODAL_BODY="unionPayIdentificationModalBodyTemplate",e.WECHAT_PAY_MODAL_CLASS="wechat-pay-modal",e.WECHAT_PAY_MODAL_BODY="wechatPayModalTemplate",e.WECHAT_PAY_SIMPLE_MODAL_CLASS="wechat-pay-simple-modal",e.WECHAT_PAY_SIMPLE_MODAL_BODY="wechatPaySimpleModalBodyTemplate",e.LEAVING_BOOKING_FROM_MODAL_CLASS="leaving-booking-form-modal",e.LEAVING_BOOKING_FROM_MODAL_BODY="leavingBookingFormModalBodyTemplate",e.LEAVING_BOOKING_FORM_MODAL_FOOTER="leavingBookingFormModalFooterTemplate",e.AIRPORT_TRANSFER_PAYMENT_MODAL_BODY="airportTransferPaymentModalBody",e.AIRPORT_TRANSFER_PAYMENT_MODAL_CLASS="airport-transfer-payment-modal",e.PAYMENT_OPTIONS_MODAL_CLASS="payment-options-modal",e.PAYMENT_OPTIONS_MODAL_BODY="paymentOptionsModalBodyTemplate",e.PAYMENT_OPTIONS_MODAL_FOOTER="paymentOptionsModalFooterTemplate",e.HOTEL_WHATSNEARBY_POPOVER="hotelWhatsNearByPopover",e.BLOCKED_CARDS_POPOVER="blockedCardsPopover",e.PRICE_DETAIL_POPOVER="priceDetailPopover",e.PAYMENT_THREEDSECURE2_CHALLENGE_MODAL_CLASS="threedsecure-challenge-modal",e.PAYMENT_THREEDSECURE2_CHALLENGE_MODAL_BODY="threedsecureChallengeModalBody"}(t=e.modals||(e.modals={}))}(n||(n={})),e.exports=n.modals},function(e,t,n){(function(t){"use strict";var n=function(){function e(){this.header={name:"defaultModalHeader"},this.body={templateEngine:t.stringTemplateEngine.instance},this.dialogCss="",this.options={keyboard:!1},this.visible=t.observable(!0)}return e}();e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";var i=n(8),a=function(){function e(){var e=this;this.buildThreeDSecure2DeviceFingerprintRequestForBank=function(t){var n=e.buildThreeDSecureDeviceFingerprintRequestForBank(t.paymentServerTransactionId,t.notifyDeviceFingerprintResultUrl);return n},this.buildThreeDSecure2ChallengeRequestForBank=function(t){var n=e.buildThreeDSecureChallengeRequestForBank(t.paymentServerTransactionId,t.challengeTransactionId,t.threeDSecureMessageVersion);return n},this.createHTMLFormThreeDSecure2DeviceFingerprintRequestForBank=function(e,t,n){var i=document.createElement("form");i.style.display="block",i.name="threedsMethodForm",i.action=t,i.method="POST",i.target=e;var a=document.createElement("input");return a.name="threeDSMethodData",a.value=n,i.appendChild(a),i},this.createHTMLFormThreeDSecure2ChallengeRequestForBank=function(e,t,n){var i=document.createElement("form");i.style.display="none",i.name="cReqForm",i.action=t,i.method="POST",i.target=e;var a=document.createElement("input");return a.name="creq",a.value=n,i.appendChild(a),i},this.createHTMLIframeToGetDeviceFingerprintResult=function(t){var n="1",i="1",a=!1;return e.createIframe(t,n,i,a)},this.createHTMLIframeToGetChallengeResult=function(t){var n="100%",i="100%",a=!0;return e.createIframe(t,n,i,a)},this.buildThreeDSecure2DetailsWithDeviceFingerprintResult=function(e){var t={challengeResult:null,deviceFingerprintInfo:null,deviceFingerprintResult:{result:e}};return t},this.buildThreeDSecure2DetailsWithChallengeResult=function(e){var t={challengeResult:{result:e},deviceFingerprintInfo:null,deviceFingerprintResult:null};return t},this.buildThreeDSecure2DetailsWithDeviceFingerprintInfo=function(){var e=i.getWindowScreenOrNull(),t=i.getWindowNavigatorOrNull(),n=null!==e?e.width.toString():"",a=null!==e?e.height.toString():"",o=null!==e?e.colorDepth.toString():"",r=null!==e?t.userAgent:"",s=null!==e&&t.javaEnabled(),l=i.getWindowNavigatorLanaugeOrEmpty(),d=new Date,c=d.getTimezoneOffset(),p={deviceChannel:r,colorDepth:o,isJavascriptEnabled:s,language:l,screenHeight:a,screenWidth:n,timeZoneOffSet:c};return p},this.buildThreeDSecureDeviceFingerprintRequestForBank=function(t,n){var i=JSON.stringify({threeDSServerTransID:t,threeDSMethodNotificationURL:n});return e.encodeBase64URLForThreeDSecureRequest(i)},this.buildThreeDSecureChallengeRequestForBank=function(t,n,i){var a="05",o=JSON.stringify({threeDSServerTransID:t,acsTransID:n,messageVersion:i,messageType:"CReq",challengeWindowSize:a});return e.encodeBase64URLForThreeDSecureRequest(o)},this.encodeBase64URLForThreeDSecureRequest=function(e){var t=i.encodeToBase64String(e),n=t.split("=")[0];return n=n.replace("/+/g","-"),n=n.replace("///g","_")},this.createIframe=function(e,t,n,i){var a=document.createElement("iframe");return a.width=t,a.height=n,a.name=e,a.setAttribute("frameborder","0"),a.setAttribute("border","0"),a.setAttribute("display",i?"block":"none"),a}}return e}();e.exports=a},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=function(){function e(){this._apiEndpointService=new a}return e.prototype.getAgodaPriceGuaranteeModal=function(){var e=this._apiEndpointService.create("commonModal/getAgodaPriceGuaranteeModal");return t.post(e).then(function(e){return e})},e.prototype.getPointsMaxConditionsModal=function(){var e=this._apiEndpointService.create("commonModal/getPointsMaxConditionsModal");return t.post(e).then(function(e){return e})},e.prototype.getRoomLevelBorModal=function(){var e=this._apiEndpointService.create("commonModal/getRoomLevelBorModal");return t.post(e).then(function(e){return e})},e.prototype.getWaitingForConfirmationModal=function(){var e=this._apiEndpointService.create("commonModal/getWaitingForConfirmationModal");return t.post(e).then(function(e){return e})},e.prototype.updateLeavingModalSessionValue=function(){var e=this._apiEndpointService.create("commonModal/updateLeavingModalSessionValue");return t.post(e).then(function(){})},e.prototype.open=function(e,n){var i=this;if(void 0===n&&(n=!0),!e.dialogCss)throw"you need to specify modal class name";var a=t(".modal");n&&a.length?(t(".modal").on("hidden.bs.modal",function(){i._open(e)}),t(".modal").modal("hide")):this._open(e)},e.prototype.close=function(){var e=this;this._modalBindingOptions.onClose=null,t(".modal").on("hidden.bs.modal",function(t){var n=t.target||event.srcElement;e._destroy(n,e._modalBindingOptions)}),t(".modal").modal("hide")},e.prototype._open=function(e){var n=this,a=t("<div class='modal' data-bind='modal : modalBindingOptions'></div>");e.elementName&&a.attr("data-element-name",e.elementName),t("body").append(a),e.visible||(e.visible=i.observable(!1)),this._modalBindingOptions=e,i.applyBindings({modalBindingOptions:e},a[0]),e.visible(!0),a.on("hidden.bs.modal",function(t){var i=t.target||event.srcElement;n._destroy(i,e)})},e.prototype._destroy=function(e,n){n.onClose&&n.onClose(),i.cleanNode(e),t(e).remove(),n=null},e}();e.exports=o}).call(t,n(2),n(3))},function(e,t){e.exports='<div class=threedsecure-threedsecure-content-container> <div class=threedsecure-challenge-content data-bind="style: { height: contentHeightPixel }"> </div> </div>'},function(e,t){e.exports='<div class=jp-card-container> <div class=jp-card data-bind="css: containerClass()"> <div class=jp-card-front> <div class="jp-card-logo payment-logo payment-logo-l visa"></div> <div class="jp-card-logo payment-logo payment-logo-l mastercard"></div> <div class="jp-card-logo payment-logo payment-logo-l american-express"></div> <div class="jp-card-logo payment-logo payment-logo-l jcb"></div> <div class="jp-card-logo payment-logo payment-logo-l shinhan"></div> <div class="jp-card-logo payment-logo payment-logo-l unionpay"></div> <div class="jp-card-logo payment-logo payment-logo-l diners-club"></div> <div class="jp-card-logo payment-logo payment-logo-l unionpay"></div> <div class="jp-card-logo payment-logo payment-logo-l nh-card"></div> <div class="jp-card-logo payment-logo payment-logo-l lotte-card"></div> <div class="jp-card-logo payment-logo payment-logo-l samsung-card"></div> <div class="jp-card-logo payment-logo payment-logo-l kb-card"></div> <div class="jp-card-logo payment-logo payment-logo-l hyundai-card"></div> <div class="jp-card-logo payment-logo payment-logo-l hana-card"></div> <div class="jp-card-logo payment-logo payment-logo-l bc-card"></div> <div class="jp-card-logo payment-logo payment-logo-l mir"></div><!-- ko if: displayIssuingBankInDynamicCard --> <div class="jp-issuing-bank jp-card-display" data-bind="text: formattedIssuingBank, css: { \'jp-card-focused\': _isFocused.issuingBank }"> </div><!-- /ko --> <div class=jp-card-lower> <div class=jp-card-shiny></div> <div class="jp-card-cvc jp-card-display" data-bind="text: formattedCvc, css: {\'jp-card-focused\': _isFocused.cvcCode}"> </div> <div class="jp-card-number jp-card-display" data-bind="text: formattedNumber, css: {\'jp-card-focused\': _isFocused.cardNumber}"> </div> <div class="jp-card-name jp-card-display" data-bind="text: formattedName, css: {\'jp-card-focused\': _isFocused.cardHolderName}"> </div> <div class="jp-card-expiry jp-card-display" data-bind="text: formattedExpiry, css: {\'jp-card-focused\': _isFocused.expiryDate}"> </div> </div> </div> <div class=jp-card-back> <div class=jp-card-bar></div> <div class="jp-card-cvc jp-card-display" data-bind="text: formattedCvc, css: {\'jp-card-focused\': _isFocused.cvcCode}"> </div> <div class=jp-card-shiny></div> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(72),a=n(21),o=function(){function e(e){this._creditCard=e.card,this._isFocused=e.isFocused,this._isOnlyFourDigitCreditCard=e.isOnlyFourDigit,this._createComputedProperties()}return e.prototype._createComputedProperties=function(){var e=this;this.formattedName=t.pureComputed(function(){var n=t.unwrap(e._creditCard.cardHolderName);return n?n.toUpperCase():"FULL NAME"}),this._trimmedCardNumber=t.pureComputed(function(){var n=t.unwrap(e._creditCard.cardNumber);return n&&(n=n.replace(/\-/g,"")),n}),this.formattedCardType=t.pureComputed(function(){var n=t.unwrap(e._creditCard.type);switch(n){case a.Visa:return"visa";case a.MasterCard:return"mastercard";case a.AmericanExpress:return"americanexpress";case a.Jcb:return"jcb";case a.Shinhan:return"shinhan";case a.UnionPayDebitCard:return"unionpaydebitcard";case a.Diners:return"dinersclub";case a.UnionPayCreditCard:return"unionpaycreditcard";case a.SamsungCard:return"samsungcard";case a.LotteCard:return"lottecard";case a.NHCard:return"nhcard";case a.KBCard:return"kbcard";case a.HyundaiCard:return"hyundaicard";case a.HanaCard:return"hanacard";case a.BCCard:return"bccard";case a.MIR:return"mir";case a.AllCreditCards:default:return""}}),this.formattedNumber=t.pureComputed(function(){var n=t.unwrap(e._trimmedCardNumber),o=t.unwrap(e.formattedCardType),r=o||"visa";if(!n)return"   ";var s=i[r].groupPattern.exec(n);if(null!=s&&s.shift(),e._isOnlyFourDigitCreditCard){n=s[0];var l=t.unwrap(e._creditCard.type);switch(l){case a.AmericanExpress:n="  "+n;break;default:n="   "+n}return n}if(null!=s&&n.length>=12){var d=null!=s?s.join(" ").trim():n,c=d.substring(d.length-5);return c.indexOf(" ")<0&&(c=c.replace(c.charAt(0),"")),d=d.replace(/\d/g,"").substring(0,d.length-5)+c}return(null!=s?s.join(" ").trim():n).replace(/\d/g,"")}),this.formattedCvc=t.pureComputed(function(){var n=t.unwrap(e.formattedCardType)||"visa",a=i[n].cvcLength;return"".slice(0,a)}),this.formattedExpiry=t.pureComputed(function(){var n=t.unwrap(e._creditCard.expiryMonth)||"",i=t.unwrap(e._creditCard.expiryYear)||"";return n+"/"+i}),this.formattedIssuingBank=t.pureComputed(function(){var n=t.unwrap(e._creditCard.issuingBank);return n?n.toUpperCase():""}),this.displayIssuingBankInDynamicCard=t.pureComputed(function(){var n=t.unwrap(e._creditCard.displayIssuingBankInDynamicCard);return!!n&&t.unwrap(e._creditCard.displayIssuingBankInDynamicCard)}),this.containerClass=t.pureComputed(function(){var t="";e._isFocused.cvcCode()&&(t+=" jp-card-flipped"),e.formattedCardType()&&(t+=" jp-card-identified "+e.formattedCardType());var n=navigator.userAgent;return/MSIE 10\./i.test(n)&&(t+=" jp-card-ie-10"),/rv:11.0/i.test(n)&&(t+=" jp-card-ie-11"),/Edge/i.test(n)&&(t+=" jp-card-ms-edge"),/Safari/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)&&(t+=" jp-card-safari"),t})},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports="<!-- direct card details starts --> <div class=direct-card-details><!-- ko if: shouldShowCardHolderName --> <div class=\"form-group has-feedback card-holder-name\" data-element-name=card-holder-name-error data-bind=\"validationElement: paymentMethod.creditCard.cardHolderName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                labelText: paymentMethod.cardHolderNameText,\r\n                value: paymentMethod.creditCard.cardHolderName,\r\n                hasFocus: isFocused.cardHolderName,\r\n                valueUpdate: ['keyup', 'paste', 'change'],\r\n                inputAttributes: {\r\n                    name: 'cardHolderName',\r\n                    id: 'cardHolderName',\r\n                    type: 'text',\r\n                    'data-element-name': 'card-holder-name',\r\n                    autocomplete: 'cc-name',\r\n                    novalidate: true\r\n                },\r\n            }\r\n        } --><!-- /ko --> </div><!-- /ko --> <div class=\"form-group has-feedback card-number\" data-element-name=card-number-error data-bind=\"validationElement: paymentMethod.creditCard.cardNumber\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                labelText: cardNumberLabelText,\r\n                value: paymentMethod.creditCard.cardNumber,\r\n                ccFormat: { value: paymentMethod.creditCard.cardNumber, paymentMethodType: paymentMethod.creditCard.type },\r\n                hasFocus: isFocused.cardNumber,\r\n                valueUpdate: ['keyup', 'paste', 'change'],\r\n                iconClass: 'ficon-secure-icon ficon-left hidden',\r\n                inputAttributes: {\r\n                    name: 'cardNumber',\r\n                    id: 'cardNumber',\r\n                    type: 'tel',\r\n                    'data-element-name': 'card-number',\r\n                    pattern: '[0-9]*',\r\n                    autocorrect: 'off',\r\n                    autocomplete: 'cc-number',\r\n                    novalidate: true,\r\n                    'maxlength': ccNumberMaxLengthAfterFormatted\r\n                },\r\n            }\r\n        } --><!-- /ko --> </div> <div class=row> <div class=\"col-md-5 col-sm-6 col-xs-5 form-group has-feedback expiry-date\" data-bind=\"validationElement: paymentMethod.creditCard.expiryDate,validationOptions: {insertMessages: false}\"><!-- ko component: {\r\n                name: \"form-input\",\r\n                params : {\r\n                    labelText: paymentMethod.expiryDateText,\r\n                    value: ccExpiryDate,\r\n                    ccExpiryDateFormat: ccExpiryDate,\r\n                    hasFocus: isFocused.expiryDate,\r\n                    valueUpdate: ['keyup', 'paste', 'change'],\r\n                    inputAttributes: {\r\n                        name: 'expiryDate',\r\n                        id: 'expiryDate',\r\n                        type: 'tel',\r\n                        'data-element-name': 'expiry-date',\r\n                        autocomplete: 'cc-exp',\r\n                        maxlength: '5',\r\n                        placeholder: expiryDatePlaceholderText,\r\n                        novalidate: true\r\n                    },\r\n                }\r\n            } --><!-- /ko --> </div> <div class=\"col-md-7 col-sm-6 col-xs-7 form-group has-feedback cvv-code\" data-bind=\"validationElement: paymentMethod.creditCard.cvcCode,validationOptions: {insertMessages: false}\"><!-- ko component: {\r\n                name: \"form-input\",\r\n                params : {\r\n                    labelText: paymentMethod.cvcCvvText,\r\n                    value: paymentMethod.creditCard.cvcCode,\r\n                    hasFocus: isFocused.cvcCode,\r\n                    numericOnly: paymentMethod.creditCard.cvcCode,\r\n                    valueUpdate: ['keyup', 'paste', 'change'],\r\n                    iconClass: 'ficon-secure-icon ficon-left hidden',\r\n                    inputAttributes: {\r\n                        name: 'cvvCode',\r\n                        id: 'cvvCode',\r\n                        type: 'password',\r\n                        'data-element-name': 'cvv-code',\r\n                        pattern: '[0-9]*',\r\n                        autocorrect: 'off',\r\n                        autocomplete: 'cc-csc',\r\n                        novalidate: true,\r\n                        'maxlength': cvcMaxLength\r\n                    },\r\n                }\r\n            } --><!-- /ko --><!-- ko if: isAmexCvvIconDisplayed() --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/new-bf/cvv-icon-amex.png 1x, ' + cdnUrl + '/images/new-bf/cvv-icon-amex@2x.png 2x',\r\n\t\t\t\tsrc: cdnUrl + '/images/new-bf/cvv-icon-amex.png' }\" class=cvv-icon /><!-- /ko --><!-- ko ifnot: isAmexCvvIconDisplayed() --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/new-bf/cvv-icon.png 1x, ' + cdnUrl + '/images/new-bf/cvv-icon@2x.png 2x',\r\n\t\t\t\tsrc: cdnUrl + '/images/new-bf/cvv-icon.png' }\" class=cvv-icon /><!-- /ko --> </div> <div data-element-name=expiry-date-div class=\"col-xs-12 m-b-1 error-message has-feedback expiryDate\" data-bind=\"validationMessage: paymentMethod.creditCard.expiryDate\"></div> <div data-element-name=cvv-code-div class=\"col-xs-12 m-b-1 error-message has-feedback cvvCode\" data-bind=\"validationMessage: paymentMethod.creditCard.cvcCode\"></div> </div><!-- ko component: {\r\n        name: \"billing-zip-code\",\r\n        params: {\r\n            billingZipCode: paymentMethod.creditCard.billingZipCode,\r\n            billingZipCodeText: paymentMethod.billingZipCodeText,\r\n            requiredBillingZipCodePaymentMethodTypes: paymentMethod.requiredBillingZipCodePaymentMethodTypes,\r\n            creditCardType: paymentMethod.creditCard.type,\r\n        }\r\n    } --><!-- /ko --><!-- ko if: availablePaymentCurrencies()\r\n        && availablePaymentCurrencies().length > 0 --><!-- ko component: {\r\n            name: \"taxid-details\",\r\n            params: {\r\n                paymentCurrency: paymentMethod.paymentCurrencyCode,\r\n                requiredTaxIdCurrencies: paymentMethod.requiredTaxIdCurrencies,\r\n                creditCardType: paymentMethod.creditCard.type,\r\n                requiredTaxIdPaymentMethodTypes: paymentMethod.requiredTaxIdPaymentMethodTypes,\r\n                taxId: paymentMethod.creditCard.taxId,\r\n                taxIdText: paymentMethod.taxIdText,\r\n                taxIdDetailsText: paymentMethod.taxIdDetailsText\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- ko if: isUnionPayGen2 --><!-- ko component: {\r\n        name: \"card-registered-phone-details\",\r\n        params: {\r\n            paymentMethod: paymentMethod\r\n        }\r\n    } --><!-- /ko --><!-- /ko --><!-- ko component: {\r\n        name: \"identification-card-details\",\r\n        params: {\r\n            pleaseEnterYourIdentificationNumberText: paymentMethod.pleaseEnterYourIdentificationNumberText,\r\n            identificationNumber: paymentMethod.creditCard.identificationNumber,\r\n            identificationCardNumberText: paymentMethod.identificationCardNumberText,\r\n            isFocused: isFocused.identificationNumber,\r\n            cardDetailsPattern: 0\r\n        }\r\n    } --><!-- /ko --><!-- ko if: !paymentMethod.isPayAtHotel() --><!-- ko if: shouldShowIssuingBank --> <div class=\"form-group has-feedback issuing-bank\" data-element-name=issuing-bank-error data-bind=\"validationElement: paymentMethod.creditCard.issuingBank\"><!-- ko component: {\r\n\t\t\tname: \"form-input\",\r\n\t\t\tparams : {\r\n\t\t\t\tlabelText: paymentMethod.issuingBankText,\r\n\t\t\t\tvalue: paymentMethod.creditCard.issuingBank,\r\n                hasFocus: isFocused.issuingBank,\r\n                valueUpdate: ['keyup', 'paste', 'change'],\r\n\t\t\t\tinputAttributes: {\r\n\t\t\t\t\tname: 'issuingBank',\r\n\t\t\t\t\tid: 'issuingBank',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t'data-element-name': 'issuing-bank',\r\n\t\t\t\t\tautocomplete: 'off'\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t} --><!-- /ko --> </div><!-- /ko --><!-- ko if: availablePaymentCurrencies()\r\n        && availablePaymentCurrencies().length > 1\r\n        && paymentMethod.paymentMethodOption() === 0 --><!-- ko component: {\r\n        name: \"charge-me-in\",\r\n        params: {\r\n            availablePaymentCurrencies: availablePaymentCurrencies,\r\n            paymentCurrencyCode: paymentMethod.paymentCurrencyCode,\r\n            chargeMeInText: paymentMethod.chargeMeInText\r\n        }\r\n    } --><!-- /ko --><!-- /ko --><!-- /ko --> </div> <!-- direct card details ends -->";
},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(72),o=n(105),r=n(9),s=n(69),l=n(81),d=n(21),c=n(75),p=n(86),u=n(106),m=n(88),h=n(90),f=n(68),g=n(91),b=n(11),y=n(107),v=n(108),C=n(109),T=function(e){function n(n){var i=this;e.call(this,n),this.cdnUrl=r.getPageData().cdnUrl,this.countrySelectList=n.countrySelectList,this.availablePaymentCurrencies=n.availablePaymentCurrencies,this._experimentApiService=new h,this.isDisableIssuingBankFieldValidator=t.observable(!1),this.isDisableCardHolderNameFieldValidator=t.observable(!1),this._combinedCardTypes=n.combinedCardTypes,this.isAddMoreLifeExperiment=r.getFeature(g.AddMoreLifeToBookingForm),this.isEnableKoreaCard=p.isApplied(m.EnableKoreaCard),this.isExperimentPC1289Applied=p.isApplied(m.HideIssuingBankForWhiteListedCardHolders),t.unwrap(this.paymentMethod.userFullName)&&(this.paymentMethod.creditCard.cardHolderName||(this.paymentMethod.creditCard.cardHolderName=t.observable("")),this.paymentMethod.creditCard.cardHolderName(t.unwrap(this.paymentMethod.userFullName))),this.isAmexCvvIconDisplayed=t.pureComputed(function(){return i.paymentMethod.creditCard.type()===d.AmericanExpress}),this.shouldShowCardHolderName=t.pureComputed(function(){var e=t.unwrap(i.paymentMethod.paymentMethodOption),n=t.unwrap(i.paymentMethod.creditCard.countryIdOfIssuingBank),a=t.unwrap(i.paymentMethod.creditCard.issuingBankDetails),o=n&&a&&i._is3DSMalaysiaDebit(n,e,a.cardClass);return i.isDisableCardHolderNameFieldValidator(o),!o}),this.shouldShowIssuingBank=t.pureComputed(function(){var e,n=i.paymentMethod.paymentMethodOption(),a=i.paymentMethod.creditCard.type(),o=i.paymentMethod.creditCard.countryIdOfIssuingBank(),r=i.paymentMethod.creditCard.cardNumber(),s=!1,l=t.unwrap(i.paymentMethod.creditCard.issuingBankDetails),d=o&&l&&i._isValidCardNumberLength(a,r)&&i._is3DSMalaysiaDebit(o,n,l.cardClass);return i.isExperimentPC1289Applied&&(e=t.unwrap(i.paymentMethod.creditCard.ccWhiteListed)),e&&i.isExperimentPC1289Applied?(i.isDisableIssuingBankFieldValidator(!0),i._updateIsAddIssuingBankToDynamicCardValue(s),s):(d?i.isDisableIssuingBankFieldValidator(!0):o&&i._isValidCardNumberLength(a,r)&&(i._isIssueBankFromJapanOrKorea(o,n)?i.isDisableIssuingBankFieldValidator(!0):s=i._validateShowingIssuingBank(n,a)),i._updateIsAddIssuingBankToDynamicCardValue(s),s)}),this.isUnionPayGen2=t.pureComputed(function(){return i.selectedPaymentMethodType()===d.UnionPayCreditCard&&r.getFeature(m.UnionPayGen2CreditCard)}),this.cardNumberLabelText=t.computed(function(){return i.paymentMethod.creditCard.type()===d.UnionPayCreditCard?i.paymentMethod.creditCardNumberText():i.paymentMethod.cardNumberText()}),this.expiryDatePlaceholderText=this.isAddMoreLifeExperiment&&y.isIE()?"":"mm/yy",this._setValidation(),this._setupCardTypeDetection(this.selectedPaymentMethodType()),this._subscribeEventForCommonFields(),this._subscribeSelectedPaymentMethodType()}return i(n,e),n.prototype.validateCreditCardNumber=function(n,i){var a=e.prototype.validateCreditCardNumber.call(this,n,i),o=t.unwrap(this.paymentMethod.paymentMethodTypeWithCobrands);if(null!=o&&o.length>0&&null!=i&&v.shouldBeCreditCardTypeForValidationFailAnalytic(i)&&!a){var r=n?n.replace(/\-/g,""):"",s=r.substr(0,6),l=i.replace(/[^\w]/g,"").toLowerCase();C.instance.track("card-number-invalid",{action_element_value:s}),C.instance.track("card-info-invalid",{action_element_value:s+","+l+","+r.length})}return a},n.prototype._isValidCardNumberLength=function(e,t){var n=parseInt(f.getCardNumberMaxLength(e),10);return t&&t.length===n},n.prototype._validateShowingIssuingBank=function(e,t){return this.isDisableIssuingBankFieldValidator(!1),e===s.DirectCard&&t!==d.AmericanExpress&&t!==d.Shinhan&&t!==d.UnionPayCreditCard&&t!==d.AllCreditCards&&!this._isKoreaCard(t)},n.prototype._isIssueBankFromJapanOrKorea=function(e,t){return t===s.DirectCard&&(e===u.Japan||e===u.SouthKorea)},n.prototype._is3DSMalaysiaDebit=function(e,t,n){return t===s.DirectCard&&e===u.Malaysia&&n===l.Debit},n.prototype._updateIsAddIssuingBankToDynamicCardValue=function(e){this.paymentMethod.creditCard.displayIssuingBankInDynamicCard&&this.paymentMethod.creditCard.displayIssuingBankInDynamicCard(e)},n.prototype._setValidation=function(){var e=this;this.paymentMethod.creditCard.cardHolderName||(this.paymentMethod.creditCard.cardHolderName=t.observable()),this.paymentMethod.creditCard.cardHolderName.extend({required:{params:!0,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTheNameOfTheCardHolderText(),"cardHolderName-span"),onlyIf:function(){return!e.isDisableCardHolderNameFieldValidator()&&!e.isFocused.cardHolderName()&&e.paymentMethod.creditCard.type()>0}},pattern:{params:this.paymentMethod.cardHolderNameRegex,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTextInEnglishOnlyText(),"cardHolderName-span"),onlyIf:function(){return!e.isFocused.cardHolderName()&&e.paymentMethod.creditCard.type()>0}}}),this.allValidationRules.push(this.paymentMethod.creditCard.cardHolderName.rules),this.paymentMethod.creditCard.countryIdOfIssuingBank||(this.paymentMethod.creditCard.countryIdOfIssuingBank=t.observable()),this.paymentMethod.isPayAtHotel&&!this.paymentMethod.isPayAtHotel()&&(this.paymentMethod.creditCard.type()===d.AmericanExpress||this.paymentMethod.creditCard.type()===d.Shinhan||this.paymentMethod.creditCard.type()===d.UnionPayCreditCard||this._isKoreaCard(this.paymentMethod.creditCard.type())||(this._setIssuingBankRules(),this.allValidationRules.push(this.paymentMethod.creditCard.issuingBank.rules)))},n.prototype._setIssuingBankRules=function(){var e=this;this.paymentMethod.creditCard.displayIssuingBankInDynamicCard?this.paymentMethod.creditCard.issuingBank.extend({required:{params:!0,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTheNameOfTheBankText(),"issuingBank-span"),onlyIf:function(){return!e.isDisableIssuingBankFieldValidator()&&!e.isFocused.issuingBank()&&e.paymentMethod.creditCard.type()>0}},pattern:{params:this.paymentMethod.issuingBankRegex,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTextInEnglishOnlyText(),"issuingBank-span"),onlyIf:function(){return!e.isFocused.issuingBank()&&e.paymentMethod.creditCard.type()>0}}}):this.paymentMethod.creditCard.issuingBank.extend({required:{params:!0,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTheNameOfTheBankText(),"issuingBank-span")},pattern:{params:this.paymentMethod.issuingBankRegex,message:c.getValidationMessage(this.paymentMethod.pleaseEnterTextInEnglishOnlyText(),"issuingBank-span")}})},n.prototype._subscribeEventForCommonFields=function(){var e=this;this._creditCardTypeSubscription=this.paymentMethod.creditCard.type.subscribe(function(t){e.allValidationRules.forEach(function(e){e.removeAll()}),e._setValidationBase(),e._setValidation()})},n.prototype._subscribeSelectedPaymentMethodType=function(){var e=this;this._paymentMethodTypeSubscription=this.selectedPaymentMethodType.subscribe(function(t){return e._setupCardTypeDetection(t)})},n.prototype._setupCardTypeDetection=function(e){var n=this;switch(this._creditCardNumberSubscription&&this._creditCardNumberSubscription.dispose(),setTimeout(function(){n.paymentMethod.creditCard.cardHolderName(t.unwrap(n.paymentMethod.userFullName))},0),e){case d.AllCreditCards:this._creditCardNumberSubscription=this.paymentMethod.creditCard.cardNumber.subscribe(function(e){n._detectCardType(e),t.postbox.publish(b.CARD_NUMBER_AND_CARD_TYPE_UPDATED)});break;case d.UnionPayCreditCard:this._creditCardNumberSubscription=this.paymentMethod.creditCard.cardNumber.subscribe(function(e){n._detectCardTypeForUnionPay(e),t.postbox.publish(b.CARD_NUMBER_AND_CARD_TYPE_UPDATED)});break;case d.Shinhan:case d.SamsungCard:case d.NHCard:case d.LotteCard:case d.KBCard:case d.HyundaiCard:case d.BCCard:case d.HanaCard:var i=t.unwrap(this.paymentMethod.paymentMethodTypeWithCobrands);null!=i&&v.isSupportCobrandPaymentMethodDetection(e,i)&&(this._creditCardNumberSubscription=this.paymentMethod.creditCard.cardNumber.subscribe(function(a){var o=v.detectCobrandCardType(a,e,i);n.paymentMethod.creditCard.type(o),t.postbox.publish(b.CARD_NUMBER_AND_CARD_TYPE_UPDATED)}));default:return}},n.prototype._detectCardTypeForUnionPay=function(e){if(!e||this.isUnionPayGen2)return void this.paymentMethod.creditCard.type(d.UnionPayCreditCard);e=e.replace(/\-/g,"");for(var t=[{name:"visa",type:d.Visa},{name:"mastercard",type:d.MasterCard}],n=0,i=t;n<i.length;n++){var o=i[n];if(a[o.name].test(e,!0))return void this.paymentMethod.creditCard.type(o.type)}this.paymentMethod.creditCard.type(d.UnionPayCreditCard)},n.prototype._detectCardType=function(e){if(!e)return void this.paymentMethod.creditCard.type(d.AllCreditCards);e=e.replace(/\-/g,"");for(var t=0,n=this._combinedCardTypes;t<n.length;t++){var i=n[t];if(a[i.name].test(e,!0))return void this.paymentMethod.creditCard.type(i.type)}this.paymentMethod.creditCard.type(d.AllCreditCards)},n.prototype._isKoreaCard=function(e){return this.isEnableKoreaCard&&(e===d.BCCard||e===d.SamsungCard||e===d.NHCard||e===d.LotteCard||e===d.KBCard||e===d.HyundaiCard||e===d.HanaCard)},n.prototype.dispose=function(){e.prototype.dispose.call(this),this._creditCardTypeSubscription&&this._creditCardTypeSubscription.dispose(),this._creditCardNumberSubscription&&this._creditCardNumberSubscription.dispose(),this._paymentMethodTypeSubscription&&this._paymentMethodTypeSubscription.dispose()},n}(o);e.exports=T}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=n(21),a=n(68),o=n(83),r=n(11),s=n(71),l=n(75),d=function(){function e(e){var n=this;this.paymentMethod=e.paymentMethod,this.allValidationRules=new Array,this.initPaymentMethod(e),this.paymentChargeOption=e.paymentChargeOption,this.payLaterDate=e.payLaterDate,this._combinedCardTypes=t.unwrap(e.combinedCardTypes),this.initializeFields(e),this._cardType=t.pureComputed(function(){return a.getCardTypeString(n.paymentMethod.creditCard.type())}),this.ccNumberMaxLengthAfterFormatted=t.pureComputed(function(){return n.getCardNumberMaxLength()}),this.cvcMaxLength=t.pureComputed(function(){return a.getCvcMaxLength(n.paymentMethod.creditCard.type())}),this._initialExpiryMonthAndYears(),this._setValidationBase(),this._subscribeEventForCommonFieldsBase(),this._subscribeEventsForUpdatePayment(),t.postbox.subscribe(r.SUBMIT_SECOND_STEP,function(){n.isFocused.cardHolderName(!1),n.isFocused.cardNumber(!1),n.isFocused.cvcCode(!1),n.isFocused.expiryDate(!1),n.isFocused.identificationNumber(!1)})}return e.prototype.initializeFields=function(e){this.isFocused=e.isFocused,this.ccExpiryDate=t.observable(""),this.paymentMethod.creditCard.expiryYear||(this.paymentMethod.creditCard.expiryYear=t.observable("")),this.paymentMethod.creditCard.expiryMonth||(this.paymentMethod.creditCard.expiryMonth=t.observable("")),this.paymentMethod.creditCard.expiryDate||(this.paymentMethod.creditCard.expiryDate=t.observable(null))},e.prototype.initPaymentMethod=function(e){this.selectedPaymentMethod=e.selectedPaymentMethod,this.selectedPaymentMethodType=e.selectedPaymentMethodType},e.prototype.validationCreditCardNumberRule=function(){var e=this;return[{validator:function(t,n){return e.validateCreditCardNumber(t,n)},message:this.paymentMethod.pleaseEnterValidCreditCardNumberText(),params:this._cardType,onlyIf:function(){return!e.isFocused.cardNumber()&&e.paymentMethod.creditCard.type()!==i.None&&e.paymentMethod.creditCard.type()!==i.AllCreditCards&&e.paymentMethod.creditCard.type()!==i.Shinhan}},{validator:function(t,n){return e.validateCreditCardNumber(t,n)},message:this.paymentMethod.pleaseEnterAShinhanLocalCreditOrCheckCardNumberValidForOverseasPaymentsText(),params:this._cardType,onlyIf:function(){return!e.isFocused.cardNumber()&&e.selectedPaymentMethodType()===i.Shinhan}},{validator:function(t){return e.paymentMethod.creditCard.type()!==i.AllCreditCards},message:this.getPleaseEnterValidCardNumberText(),onlyIf:function(){return!e.isFocused.cardNumber()}}]},e.prototype.getPleaseEnterValidCardNumberText=function(){if(this._combinedCardTypes&&this._combinedCardTypes.length>0){var e="";if(1===this._combinedCardTypes.length)e=t.unwrap(this._combinedCardTypes[0].displayName);else if(2===this._combinedCardTypes.length)e=t.unwrap(this.paymentMethod.orText).replace("{0}",t.unwrap(this._combinedCardTypes[0].displayName)),e=e.replace("{1}",t.unwrap(this._combinedCardTypes[1].displayName));else{for(var n=t.unwrap(this.paymentMethod.commaText()),i=0;i<this._combinedCardTypes.length-1;i++){var a=this._combinedCardTypes[i];n=n.replace("{0}",t.unwrap(a.displayName)),0===i?n=n.replace("{1}","{0}"):i<this._combinedCardTypes.length-2&&(n=t.unwrap(this.paymentMethod.commaText).replace("{0}",n),n=n.replace("{1}","{0}"))}var o=t.unwrap(this.paymentMethod.orText()).replace("{0}",n);e=o.replace("{1}",t.unwrap(this._combinedCardTypes[this._combinedCardTypes.length-1].displayName))}return t.unwrap(this.paymentMethod.pleaseEnterAValidCardNumberText()).replace("{0}",e)}return this.paymentMethod.pleaseEnterValidCreditCardNumberText()},e.prototype.validateCreditCardNumber=function(e,t){return s.isValid(e,t)},e.prototype.validateCreditCardCvc=function(e,t){return s.isCvcValid(e,t)},e.prototype.getCardNumberMaxLength=function(){return a.getCardNumberMaxLength(this.paymentMethod.creditCard.type())},e.prototype._subscribeEventForCommonFieldsBase=function(){var e=this;this._subscribeFileToUpdatePaymentSubscription=t.postbox.subscribe(r.SUBSCRIBE_FIELD_TO_UPDATE_PAYMENT,function(){e._subscribeEventsForUpdatePayment(),e.ccExpiryDate("")}),this._unSubscribeFileToUpdatePaymentSubscription=t.postbox.subscribe(r.UNSUBSCRIBE_FIELD_TO_UPDATE_PAYMENT,function(){e._unSubscribeEventsForUpdatePayment()}),this._expiryMonthSubscription=this.paymentMethod.creditCard.expiryMonth.subscribe(function(t){var n=new Date(parseInt(e.paymentMethod.creditCard.expiryYear(),10),parseInt(t,10));e.paymentMethod.creditCard.expiryDate(n)}),this._expiryYearSubscription=this.paymentMethod.creditCard.expiryYear.subscribe(function(t){var n=new Date(parseInt(t,10),parseInt(e.paymentMethod.creditCard.expiryMonth(),10));e.paymentMethod.creditCard.expiryDate(n)}),this._expiryDateSubscription=this.ccExpiryDate.subscribe(function(t){if(t){var n=t.split("/");e.paymentMethod.creditCard.expiryMonth(n[0]);var i=n[1]?"20"+n[1]:null;e.paymentMethod.creditCard.expiryYear(i)}else e.paymentMethod.creditCard.expiryMonth(null),e.paymentMethod.creditCard.expiryYear(null),e.paymentMethod.creditCard.expiryDate(null),e.paymentMethod.creditCard.expiryDate.isModified(!1)}),this._expiryDateFocusSubscription=this.isFocused.expiryDate.subscribe(function(t){e.ccExpiryDate()||e.paymentMethod.creditCard.expiryDate.isModified(!1)})},e.prototype._unSubscribeEventsForUpdatePayment=function(){this._cardNumberSubscription&&this._cardNumberSubscription.dispose(),this._mobilePhoneNumberSubscription&&this._mobilePhoneNumberSubscription.dispose()},e.prototype._subscribeEventsForUpdatePayment=function(){var e=this;this._cardNumberSubscription=this.isFocused.cardNumber.subscribe(function(n){n||(e.paymentMethod.creditCard.cardNumber&&e.paymentMethod.creditCard.cardNumber()&&e.paymentMethod.creditCard.cardNumber.isValid()?t.postbox.publish(r.PAYMENT_METHOD_UPDATED):t.postbox.publish(r.RESET_PAYMENT_METHOD))})},e.prototype._initialExpiryMonthAndYears=function(){this.expiryMonthList=t.observableArray(["01","02","03","04","05","06","07","08","09","10","11","12"]),this.expiryYearList=t.observableArray([]);for(var e=new Date,n=e.getFullYear(),i=0;i<11;i++)this.expiryYearList.push((n+i).toString())},e.prototype._setValidationBase=function(){this._setCreditCardValidation(),this._setExpiryDateValidation(),this._setCvcValidation()},e.prototype._setCvcValidation=function(){var e=this;this.paymentMethod.creditCard.cvcCode||(this.paymentMethod.creditCard.cvcCode=t.observable()),this.paymentMethod.creditCard.cvcCode.extend({required:{params:!0,message:this.paymentMethod.pleaseEnterValidCvcCodeText(),onlyIf:function(){return!e.isFocused.cvcCode()&&e._isCvcRequired()&&e.paymentMethod.creditCard.type()!==i.None}},validation:{validator:function(t,n){return e.validateCreditCardCvc(t,n)},message:this.paymentMethod.pleaseEnterValidCvcCodeText(),params:this._cardType,onlyIf:function(){return!e.isFocused.cvcCode()&&e._isCvcRequired()&&e.paymentMethod.creditCard.type()!==i.AllCreditCards&&e.paymentMethod.creditCard.type()!==i.None}}}),this.allValidationRules.push(this.paymentMethod.creditCard.cvcCode.rules)},e.prototype._setCreditCardValidation=function(){var e=this;this.paymentMethod.creditCard.cardNumber||(this.paymentMethod.creditCard.cardNumber=t.observable()),this.paymentMethod.creditCard.cardNumber.extend({required:{params:!0,message:l.getValidationMessage(this.paymentMethod.pleaseEnterValidCreditCardNumberText(),"cardNumber-span"),onlyIf:function(){return!e.isFocused.cardNumber()}},validation:this.validationCreditCardNumberRule()}),this.allValidationRules.push(this.paymentMethod.creditCard.cardNumber.rules)},e.prototype._setExpiryDateValidation=function(){var e=this;this.paymentMethod.creditCard.expiryDate||(this.paymentMethod.creditCard.expiryDate=t.observable()),this.paymentMethod.creditCard.expiryDate.extend({required:{params:!0,message:this.paymentMethod.pleaseEnterValidCreditCardExpiryDateText(),onlyIf:function(){return!e.isFocused.expiryDate()&&e._isExpiryRequired()&&e.paymentMethod.creditCard.type()>0}},validation:[{validator:function(e){var t=new Date,n=new Date;return n.setFullYear(n.getFullYear()+10),e>t&&e<n},message:this.paymentMethod.pleaseEnterValidCreditCardExpiryDateText(),onlyIf:function(){return!e.isFocused.expiryDate()&&e._isExpiryRequired()&&e.paymentMethod.creditCard.type()>0}},{validator:function(n){return!(t.unwrap(e.paymentChargeOption)===o.PayLater||t.unwrap(e.paymentChargeOption)===o.PayOnCheckIn&&e.paymentMethod.isPayAtHotel&&!e.paymentMethod.isPayAtHotel()&&e.payLaterDate&&e.payLaterDate())||n>new Date(Date.parse(e.payLaterDate().toString()))},message:this.paymentMethod.pleaseEnterValidCreditCardExpiryDateText(),onlyIf:function(){return!e.isFocused.expiryDate()&&e._isExpiryRequired()&&e.paymentMethod.creditCard.type()>0}}]}),this.allValidationRules.push(this.paymentMethod.creditCard.expiryDate.rules)},e.prototype._isCvcRequired=function(){return!0},e.prototype._isExpiryRequired=function(){return!0},e.prototype.dispose=function(){this._expiryDateSubscription&&this._expiryDateSubscription.dispose(),this._expiryDateFocusSubscription&&this._expiryDateFocusSubscription.dispose(),this._cardNumberSubscription&&this._cardNumberSubscription.dispose(),this._expiryMonthSubscription&&this._expiryMonthSubscription.dispose(),this._expiryYearSubscription&&this._expiryYearSubscription.dispose(),this._subscribeFileToUpdatePaymentSubscription&&this._subscribeFileToUpdatePaymentSubscription.dispose(),this._unSubscribeFileToUpdatePaymentSubscription&&this._unSubscribeFileToUpdatePaymentSubscription.dispose(),this._mobilePhoneNumberSubscription&&this._mobilePhoneNumberSubscription.dispose(),this.allValidationRules.forEach(function(e){e.removeAll()})},e}();e.exports=d}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){var t;!function(e){e.Japan=3,e.SouthKorea=212,e.UnitedStates=181,e.Malaysia=198}(t=e.country||(e.country={}))}(n||(n={})),e.exports=n.country},function(e,t,n){"use strict";var i=n(9),a=function(){function e(){}return e.isChrome=function(){return"Chrome"===this.getDeviceInfo().browserDetails.family},e.isFireFox=function(){return"Firefox"===this.getDeviceInfo().browserDetails.family},e.isIE=function(){return"Internet Explorer"===this.getDeviceInfo().browserDetails.family},e.getDeviceInfo=function(){return i.getPageData().deviceInformation},e}();e.exports=a},function(e,t,n){(function(t){"use strict";var i=n(72),a=n(21),o=function(){function e(){}return e.isSupportCobrandPaymentMethodDetection=function(e,n){return null!=n&&n.length>0&&n.some(function(n){var i=t.unwrap(n.paymentMethodType);return null!=i&&i===e})},e._getCobrandPaymentMethodTypesFrom=function(e,n){var i=t.observableArray([]);return null!=n&&n.length>0&&n.forEach(function(n){var a=t.unwrap(n.paymentMethodType);null!=a&&a===e&&(i=n.cobrandPaymentMethodTypes)}),i},e.shouldBeCreditCardTypeForValidationFailAnalytic=function(e){switch(e){case"American Express":case"Shinhan":case"SamsungCard":case"NHCard":case"LotteCard":case"KBCard":case"HyundaiCard":case"BCCard":case"HanaCard":return!0;default:return!1}},e.getCobrandCreditCardTypeName=function(e){switch(e){case a.AmericanExpress:return"americanexpress";default:return""}},e.detectCobrandCardType=function(e,n,a){var o=n,r=t.unwrap(this._getCobrandPaymentMethodTypesFrom(n,a));if(!e||null==r||r.length<=0)return o;e=e.replace(/\-/g,"");for(var s=0,l=r;s<l.length;s++){var d=l[s],c=this.getCobrandCreditCardTypeName(d);null!=i[c]&&i[c].test(e,!0)&&(o=d)}return o},e}();e.exports=o}).call(t,n(3))},function(e,t,n){"use strict";var i=n(110),a=n(114),o=n(86),r=n(88),s=n(120),l=n(116),d=function(){function e(){}return e.load=function(t){if(o.isApplied(r.AnalyticsFrameworkSwitch)){window.analytics={get session(){return s.getAnalyticsSession()}};var n=e.getManifest(t);e.instance.load({manifest:n,messagingjs:i})}},Object.defineProperty(e,"instance",{get:function(){return null==e.module&&(e.module=new l.AnalyticsModule,"undefined"!=typeof window&&(null==window.agoda&&(window.agoda={}),null==window.agoda.ada&&(window.agoda.ada=e.module))),e.module},enumerable:!0,configurable:!0}),e.getManifest=function(e){switch(e){case"landing":return a.landing;case"pending":return a.pending;case"thankyou":return a.thankyou}},e}();e.exports=d},function(e,t,n){"use strict";var i=n(9),a=n(111).MessagingClient,o=window.messagingClient;if(null==o){var r=i.getPageData();window.messagingClient=o=a.instantiate({apiKey:"bookingform",mode:"dev"===r.deployment?"development":"production",debug:"dev"===r.deployment||"qa"===r.deployment,disable:!r.messaging,workerUrl:n(112),polyfillsUrl:n(113)}),setTimeout(function(){o.context({sessionId:window.rtag_sid})})}e.exports=o},function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(t){return e[t]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=138)}([function(e,t,n){"use strict";function i(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]])}return n}function o(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r}function r(e,t){return function(n,i){t(n,i,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i["throw"](e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})}function d(e,t){function n(e){return function(n){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=2&e[0]?a["return"]:e[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,e[1])).done)return o;switch(a=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=t.call(n,s)}catch(n){e=[6,n],a=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,n])}}var i,a,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r}function c(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,o=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)r.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(a)throw a.error}}return r}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}function h(e){return this instanceof h?(this.v=e,this):new h(e)}function f(e,t,n){function i(e){d[e]&&(l[e]=function(t){return new Promise(function(n,i){c.push([e,t,n,i])>1||a(e,t)})})}function a(e,t){try{!function(e){e.value instanceof h?Promise.resolve(e.value.v).then(o,r):s(c[0][2],e)}(d[e](t))}catch(e){s(c[0][3],e)}}function o(e){a("next",e)}function r(e){a("throw",e)}function s(e,t){e(t),c.shift(),c.length&&a(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,d=n.apply(e,t||[]),c=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function g(e){function t(t,a){n[t]=e[t]?function(n){return(i=!i)?{value:h(e[t](n)),done:"return"===t}:a?a(n):n}:a}var n,i;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(i,a){!function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)}(i,a,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e=p(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function y(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function C(e){return e&&e.__esModule?e:{"default":e}}n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return k}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return o}),n.d(t,"__param",function(){return r}),n.d(t,"__metadata",function(){return s}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__exportStar",function(){return c}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return u}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return h}),n.d(t,"__asyncGenerator",function(){return f}),n.d(t,"__asyncDelegator",function(){return g}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return y}),n.d(t,"__importStar",function(){return v}),n.d(t,"__importDefault",function(){return C});var T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},k=function(){return(k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}},,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e){void 0===e&&(e=o.create()),this.random=e,this._byteToHex=[];for(var t=this._byteToHex,n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1)}return Object.defineProperty(e,"default",{get:function(){return e._default||(e._default=new e)},enumerable:!0,configurable:!0}),e.prototype.next=function(){var e=this.random.next();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,this.bytesToUuid(e)},e.prototype.bytesToUuid=function(e){var t=0,n=this._byteToHex;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]},e}();t.GuidProvider=a;var o=function(){function e(){}return e.create=function(e){return void 0===e&&(e=!1),"undefined"!=typeof crypto&&crypto.getRandomValues&&!e?new r:new s},e}();t.Random=o;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.next=function(){var e=new Uint8Array(16);return crypto.getRandomValues(e),e},t}(o);t.CryptoRandom=r;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rnds=new Array(16),t}return i.__extends(t,e),t.prototype.next=function(){for(var e=0,t=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),this._rnds[e]=t>>>((3&e)<<3)&255;return this._rnds},t}(o);t.SimpleRandom=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.traversal=function(e,t,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];if(o)for(var r in o)o.hasOwnProperty(r)&&e(r,o[r])}}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.current=function(){var t="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:null;if(!t)throw new Error("Unsupported environment.");return t},t}();t.GlobalProvider=n}).call(this,n(20))},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);i.__exportStar(n(36),t),i.__exportStar(n(9),t),i.__exportStar(n(3),t),i.__exportStar(n(37),t),i.__exportStar(n(15),t),i.__exportStar(n(26),t)},,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._listeners=new Array,this._buffer=new Array}return e.prototype.subscribe=function(e){var t=this;return"function"==typeof e&&(this.subscribed(e)<0&&this._listeners.push(e),this._buffer.length>0&&setTimeout(function(){return t.flushBuffer()})),this},e.prototype.unsubscribe=function(e){for(var t=this.subscribed(e);t>=0;)this._listeners.splice(t,1),t=this.subscribed(e);return this},e.prototype.clear=function(){this._listeners.length=0,this._buffer.length=0},e.prototype.emit=function(e){var t=this._listeners.length;if(t>0)for(var n=0;n<t;n++)try{this._listeners[n](e)}catch(e){}else this._buffer.push(e)},e.prototype.redirect=function(e){return this.subscribe(function(t){e.emit(t)}),e},e.prototype.map=function(t){var n=new e;return this.subscribe(function(e){n.emit(t(e))}),n},e.prototype.subscribed=function(e){return this._listeners.indexOf(e)},e.prototype.flushBuffer=function(){
var e=this._buffer.slice();this._buffer.length=0;for(var t=e.length,n=0;n<t;n++)this.emit(e[n])},e}();t.EventEmitter=n},,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.now=function(){return+new Date},e}();t.TimeStampProvider=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.extend=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e||(e={}),i.traversal(function(t,n){void 0===e[t]&&(e[t]=n)},e,t),e}},,,,function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);i.__exportStar(n(16),t),i.__exportStar(n(38),t),i.__exportStar(n(39),t)},,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.addListener=function(t){switch(e.mode){case"pagehide":return window.addEventListener("pagehide",t),!0;case"unload":return window.addEventListener("unload",t),!0;default:return!1}},e.removeListener=function(t){switch(e.mode){case"pagehide":return window.removeEventListener("pagehide",t),!0;case"unload":return window.removeEventListener("unload",t),!0;default:return!1}},e.mode="undefined"!=typeof window?window.onpagehide||null===window.onpagehide?"pagehide":"unload":"none",e}();t.UnloadEvent=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.current=function(){return window&&window.__MCJS_EXTENSION_DATA__||{}},e}();t.ChromeExtensionData=n},,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){e&&"undefined"!=typeof XDomainRequest?this._xhr=new XDomainRequest:this._xhr=new XMLHttpRequest}return e.prototype.send=function(e){var t=this,n=this._xhr,i=e.type||"POST",a=e.body||"",o=e.url,r=e.timeout;return new Promise(function(e,s){n.open(i,o,!0),void 0!==r&&(n.timeout=r),t.subscribe(e,s,r),n.send(a)})},e.prototype.subscribe=function(e,t,n){var i=this._xhr;i instanceof XMLHttpRequest?i.onreadystatechange=function(n){4===i.readyState&&(i.status>=200&&i.status<300?e(i.responseText):t(i.responseText||i.responseType||"CORS problem"))}:(i.onload=function(){return e(i.responseText)},i.onerror=function(){return t("XDomain CORS problem")},i.onprogress=function(){},i.ontimeout=function(){t("Timeout")},n&&setTimeout(function(){return t("Manual timeout")},n))},e}(),i=function(){function e(){}return e.prototype.send=function(e){if("undefined"!=typeof fetch)return this.fetch(e);var t=e.url.indexOf("://")>0||0===e.url.indexOf("//");return new n(t).send(e)},e.prototype.fetch=function(e){var t={body:e.body,method:e.type};return e.debugHeaders&&(t.headers=e.debugHeaders),fetch(e.url,t).then(function(e){var t=e.text();return e.status>=200&&e.status<300?t:t.then(function(e){return Promise.reject(e)})})["catch"](function(e){return e instanceof Error&&(e=e.message),Promise.reject(e)})},e}();t.Ajax=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e){var t=this;this._func=e,this._executed=!1,this.execute=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t._executed?t._result:(t._result=t._func.apply(t,i.__spread(e)),t._executed=!0,t._result)},this.executeOnce=this.execute}return Object.defineProperty(e.prototype,"executed",{get:function(){return this._executed},enumerable:!0,configurable:!0}),e}();t.Singleton=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.override=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e||(e={}),i.traversal(function(t,n){e[t]=n},e,t),e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.safeClone=function(e){var t={};return i.traversal(function(e,n){"function"!=typeof n&&(t[e]=n)},t,[e]),t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=function(){function e(e){this._options=e,this.prefix="[messaging-client.js]: "}return e.prototype.fatal=function(e,t){this.error(e,t)},e.prototype.error=function(e,t){var n=this;(e||t)&&this["do"](function(i){i.error(n.prefix+e,t)})},e.prototype.log=function(e){var t=this;e&&this["do"](function(n){n.log(t.prefix+e)})},e.prototype["do"]=function(t){var n=e._global.console;!this._options.mute&&n&&t(n)},e._global=i.GlobalProvider.current(),e}();t.ConsoleLogger=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=function(){function e(){this.onlog=new i.EventEmitter}return e.prototype.fatal=function(e,t){this.onlog.emit({level:"fatal",message:e,error:t})},e.prototype.error=function(e,t){this.onlog.emit({level:"error",message:e,error:t})},e.prototype.log=function(e){this.onlog.emit({level:"log",message:e})},e}();t.EventLogger=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=[]),this.loggers=e,this.enabled=!0}return e.prototype.fatal=function(e,t){this.enabled&&this.logger(function(n){return n.fatal(e,t)})},e.prototype.error=function(e,t){this.enabled&&this.logger(function(n){return n.error(e,t)})},e.prototype.log=function(e){this.enabled&&this.logger(function(t){return t.log(e)})},e.prototype.replace=function(e){this.loggers.length=0;for(var t=e.length,n=0;n<t;n++)this.loggers.push(e[n])},e.prototype.logger=function(e){for(var t=this.loggers,n=t.length,i=0;i<n;i++)e(t[i])},e}();t.UniversalLogger=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.endsWith=function(e,t){return e.substr(-t.length,t.length)===t},t.mapPath=function(e,t){if("/"===t[0])return t;var n=e.lastIndexOf("/");return n<0?"/"+t:e.substring(0,n+1)+t}},,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=function(){function e(e,t,n){var a=this;this.type=e,this._sender=t,this._receiver=n,this._dictionary={},this._guid=i.GuidProvider["default"],this._response=function(e){var t=e.messageId;if(t){var n=a._dictionary[t];delete a._dictionary[t],n&&(e.error?"function"==typeof n.reject&&n.reject(e.error):"function"==typeof n.resolve&&n.resolve(e.response))}},n.addEventListener(e,this._response)}return e.prototype.send=function(e,t,n){var i=this._guid.next();this._dictionary[i]={resolve:t,reject:n};var a=this._sender.postMessage({type:this.type,messageId:i,request:e});a&&"function"==typeof a["catch"]&&a["catch"](n)},e.prototype.dispose=function(){this._receiver.removeEventListener(this.type,this._response)},e}();t.WorkerRequestSender=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e,t){var n=this;this._receiver=e,this._logger=t,this._dic={},this._buffers={},this._handler=function(e){var t,a,o=e.data;if(o&&o.type){var r=n._dic[o.type];if(r)try{for(var s=i.__values(r),l=s.next();!l.done;l=s.next()){var d=l.value;try{d(o)}catch(e){n._logger.error("Error on executing listener for message type "+o.type,e)}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(a=s["return"])&&a.call(s)}finally{if(t)throw t.error}}else(n._buffers[o.type]||(n._buffers[o.type]=[])).push(e)}},e.addEventListener("message",this._handler)}return e.prototype.addEventListener=function(e,t){(this._dic[e]=this._dic[e]||[]).push(t),this.flushBuffer(e)},e.prototype.removeEventListener=function(e,t){var n=this._dic[e];if(n){var i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete this._dic[e]}},e.prototype.dispose=function(){this._dic={},this._buffers={},this._receiver.removeEventListener("message",this._handler)},e.prototype.flushBuffer=function(e){var t=this,n=this._buffers[e];n&&0!==n.length&&setTimeout(function(){for(var e=n.length,i=0;i<e;i++)t._handler(n[i]);n.length=0})},e}();t.MessageReceiver=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e,t){var n=this;this.def=e,this.handler=t,this.invoke=function(e){return n.handler?n.handler(e):n.def}}return e.prototype.stop=function(){this.handler=void 0},e}();t.OptionalResponseEmitter=a;var o=function(){function e(e){var t=this;this._handler=e,this._buffer=new Array,this.invoke=function(e){return t.handler?t.handler(e):new Promise(function(n,i){t._buffer.push({request:e,resolve:n})})}}return Object.defineProperty(e.prototype,"handler",{get:function(){return this._handler},set:function(e){this._handler=e,this.flushBuffer()},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this.handler=void 0},e.prototype.flushBuffer=function(){var e,t;if(this._handler&&this._buffer.length>0)try{for(var n=i.__values(this._buffer),a=n.next();!a.done;a=n.next()){var o=a.value;o.resolve(this.invoke(o.request))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}},e}();t.MandatoryResponseEmitter=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=function(){function e(e,t){var n=this;this.type=e,this._receiver=t,this.event=new i.EventEmitter,this._handler=function(e){e.type===n.type&&n.event.emit(e)},t.addEventListener(e,this._handler)}return e.prototype.dispose=function(){this._receiver.removeEventListener(this.type,this._handler),this.event.clear()},e}();t.WorkerEventReceiver=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,i){var a=this;this.type=e,this._sender=t,this._receiver=n,this._handler=i,this._response=function(e){var t=e.messageId,n=e.type;a.type===n&&(t?a.awaitResponse(n,e.request,t):a.riseEvent(n,e.request))},n.addEventListener(e,this._response)}return e.prototype.dispose=function(){this._receiver.removeEventListener(this.type,this._response),this._handler.stop()},e.prototype.awaitResponse=function(e,t,n){function i(t){var i="";null!=t&&(i=t instanceof Error?t.message:t.toString()),o.postMessage({type:e,messageId:n,error:{message:i}})}function a(t){o.postMessage({type:e,messageId:n,response:t})}var o=this._sender;try{var r=this._handler.invoke(t);"undefined"!=typeof Promise&&r instanceof Promise?r.then(a,i):a(r)}catch(e){i(e)}},e.prototype.riseEvent=function(e,t){try{this._handler.invoke(t)}catch(e){}},e}();t.WorkerRequestReceiver=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(52);t.PseudoWorkerScopeName="MessagingClient-PseudoWorker";var a=function(){function e(e,n){void 0===n&&(n=new i.ScriptLoader);var a=this;this._listeners=[],this._buffer=[],this._global=window,this._pseudoWorker=this._global[t.PseudoWorkerScopeName]=new o(e,n,{raiseEvent:function(e){return a.raiseEvent(e)}}),n.loadScript(e)}return Object.defineProperty(e.prototype,"pseudoWorker",{get:function(){return this._pseudoWorker},enumerable:!0,configurable:!0}),e.prototype.postMessage=function(e){this._pseudoWorker.raiseEvent({data:e})},e.prototype.addEventListener=function(e,t){var n=this;"message"===e&&(this._listeners.push(t),setTimeout(function(){if(n._buffer.length>0){for(var e=n._buffer.slice(),t=e.length,i=0;i<t;i++)n.raiseEvent(e[i]);n._buffer.length=0}}))},e.prototype.removeEventListener=function(e,t){var n=this._listeners.indexOf(t);n>-1&&this._listeners.splice(n,1)},e.prototype.terminate=function(){this._buffer.length=0,this._listeners.length=0,this._pseudoWorker.close()},e.prototype.raiseEvent=function(e){var t=this._listeners,n=t.length;if(n>0)for(var i=0;i<n;i++)(0,t[i])(e);else this._buffer.push(e)},e}();t.PseudoWorker=a;var o=function(){function e(e,t,n){this._scriptLoader=t,this._internal=n,this._listeners=[],this._buffer=[],this.location=e}return e.prototype.postMessage=function(e){var t=this;e=JSON.parse(JSON.stringify(e)),setTimeout(function(){t._internal.raiseEvent({data:e})})},e.prototype.importScripts=function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var a=n.length,o=n.length,r=function(){--o<=0&&(t=!0,e&&e())},s=0;s<a;s++)this._scriptLoader.loadScript(n[s],r);return{then:function(n){t?n():e=n}}},e.prototype.addEventListener=function(e,t){var n=this;"message"===e&&(this._listeners.push(t),setTimeout(function(){if(n._buffer.length){for(var e=n._buffer.slice(),t=e.length,i=0;i<t;i++)n.raiseEvent(e[i]);n._buffer.length=0}}))},e.prototype.removeEventListener=function(e,t){var n=this._listeners.indexOf(t);n>-1&&this._listeners.splice(n,1)},e.prototype.raiseEvent=function(e){if(this._listeners.length)for(var t=this._listeners.length,n=0;n<t;n++)this._listeners[n](e);else this._buffer.push(e)},e.prototype.close=function(){this._buffer.length=0,this._listeners.length=0},e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=function(){function e(t){if(void 0===t&&(t=i.GlobalProvider.current()),void 0===t.document)throw new Error("No DOM environment is not supported.");this.loadScript=function(n,i){return e.loadViaDom(t.document,n,i)}}return e.loadViaDom=function(e,t,n){var i=e.createElement("script");i.type="text/javascript",i.src=t,n&&(i.onload=n),(e.body||e.head).appendChild(i)},e}();t.ScriptLoader=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a="MessagingClient-LiteData",o=function(){function e(){}return e.get=function(){var e=i.GlobalProvider.current();return e[a]||(e[a]={})},e.clear=function(){delete i.GlobalProvider.current()[a]},e}();t.LiteDataContainer=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),a=n(16),o=function(){function e(e,t){this.sender=e,this._time=t}return e.prototype.create=function(e,t){var n={_meta:{type:e}};return t&&a.extend(n,t),n},e.prototype.send=function(e,t){if(!e||!e._meta)throw new Error("Message or message type is undefined");(e=JSON.parse(JSON.stringify(e)))._meta.timestamp=this._time.now(),e._meta.tabId=i.ChromeExtensionData.current().tabId,this.sender.send(e,t)},e.prototype.debug=function(e){this.sender.environment({debug:e})},e.prototype.context=function(e){this.sender.context(e)},e}();t.MessagingClientInstance=o},,,,,,,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),a=function(){function e(){}return e.isSupported=function(){return"undefined"!=typeof navigator&&"serviceWorker"in navigator},e.activate=function(t,n,i){void 0===i&&(i=3);var a=0;return navigator.serviceWorker.register(t,{scope:n}).then(function(o){a++;var r=o.active||o.installing||o.waiting;return r&&"activated"===r.state?{registration:o,serviceWorker:r}:r?new Promise(function(s,l){function d(e){r.onstatechange=r.onerror=void 0,e()}r.onstatechange=function(c){"activated"===r.state&&d(function(){return s({registration:o,serviceWorker:r})}),"redundant"===r.state&&d(a<i?function(){return s(e.activate(t,n))}:function(){return l("Registration was failed with maximum attempts exceeds.")})},r.onerror=function(e){d(function(){return l(e.target)})}}):Promise.reject("ServiceWorker failed the registration.")})},e.absoluteScope=function(e,t){return"undefined"!=typeof location&&location&&location.pathname&&(e=i.mapPath(location.pathname,e)),i.mapPath(e,t)},e}();t.ServiceWorkerUtils=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(139),a=n(15),o=n(53),r=n(142),s=n(40),l=n(41),d=n(42),c=n(143),p=n(144),u=n(54),m=function(){function e(e){this._testEnvironment=e}return e.environment=function(t){return new e(t)},e.create=function(t){return"production"!==t.mode&&console.log("Method MessagingClient.create() is deprecated. Please use MessagingClient.instantiate() method instead."),e.instantiate(t)},e.instantiate=function(t){return(new e).instantiate(t)},e.reinstantiate=function(t){o.LiteDataContainer.get().messagingClient&&(new e).instantiate(t)},e.terminate=function(e){var t=o.LiteDataContainer.get();t.messagingClient?t.messagingClient.sender.dispose(e):e&&e(),o.LiteDataContainer.clear()},e.initialize=function(t){if(!t.environment)throw new Error("Environment parameter is strongly required.");var n=e.sender(t.environment,t.test),i=t.messagingClient;return i?i.sender=n:i=new u.MessagingClientInstance(n,new a.TimeStampProvider),e.sendBufferedData(t,n),t.isFullVersion=!0,i},e.prototype.instantiate=function(t){var n=o.LiteDataContainer.get();if(n.environment&&t)throw new Error("Configuration of MessagingClientJS is already set. Please provide configuration only once.");if(n.messagingClient&&n.isFullVersion)return n.messagingClient;if(n.environment=n.environment||t,n.environment&&(n.test=n.test||this._testEnvironment,n.messagingClient=e.initialize(n)),n.messagingClient)return n.messagingClient;throw new Error("Lite version of MessagingClientJS was not loaded. Please provide a configuration to instantiate a full version.")},e.logger=function(e,t){var n=new d.UniversalLogger([new s.ConsoleLogger({mute:!t.debug}),new r.ChromeExtensionsLogger]);if(e&&e.listeners&&e.listeners.log){var i=new l.EventLogger;i.onlog.subscribe(e.listeners.log),n.loggers.push(i)}return n},e.sender=function(t,n){var a=i.EnvironmentData.merge(t);if(a.validate(),a.disable)return new c.MessageSenderDummy;var o=e.logger(n,t),r=new p.MessageSenderFull(a,o,n?n.configuration:null);return n&&n.listeners&&(n.listeners.ajax&&(r.ajax.handler=function(e){return n.listeners&&n.listeners.ajax&&n.listeners.ajax(e)||""}),r.performance.subscribe(function(e){return n.listeners&&n.listeners.performance&&n.listeners.performance(e)})),r},e.sendBufferedData=function(e,t){e.context&&(t.context(e.context),e.context=void 0),e.buffer&&(t.send(e.buffer.items),e.buffer.items.length=0,e.buffer=void 0)},e}();t.MessagingClient=m,m.reinstantiate()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(140),o=n(7),r=function(){function e(e){void 0===e&&(e=a.ContextDataSource["default"]()),this.context=e,this.workerUrl="",this.polyfillsUrl="/messaging-client-polyfills.js",this.apiKey="",this.forcePolyfills=!1,this.fakeMode=!1,this.debug=!1,this.mode="production",this.performanceAudit=!1,this.disable=!1}return e.merge=function(t,n){return void 0===n&&(n=new e),"development"===t.mode&&"boolean"!=typeof t.debug&&(t.debug=!0),o.override(n,t,{context:i.__assign({},n.context,t.context)})},e.prototype.validate=function(){if(!this.apiKey)throw new Error("ApiKey is required but not defined or empty.");if(!this.workerUrl)throw new Error("WorkerUrl is required but not defined or empty.")},e}();t.EnvironmentData=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(141),a=function(){function e(){}return e["default"]=function(e){return void 0===e&&(e=i.CookieReader.current()),e?{sessionId:this.sessionId(e),userId:this.userId(e)}:{}},e.userId=function(e){var t=e.value("agoda.user.03");if(t){var n=t.split("=");if(2===n.length)return n[1]}},e.sessionId=function(e){return e.value("ASP.NET_SessionId")},e}();t.ContextDataSource=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.cookie=e}return e.current=function(){if("undefined"!=typeof document&&"string"==typeof document.cookie)try{return new e(document.cookie||"")}catch(e){}},e.prototype.value=function(e){var t=("; "+this.cookie).split("; "+e+"=");if(2===t.length){var n=t.pop();if(n)return n.split(";").shift()}},e}();t.CookieReader=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),a=function(){function e(){}return e.prototype.fatal=function(e,t){this.send({type:"log",log:{level:"fatal",message:e,error:t}})},e.prototype.error=function(e,t){this.send({type:"log",log:{level:"error",message:e,error:t}})},e.prototype.log=function(e){this.send({type:"log",log:{level:"log",message:e}})},e.prototype.extensionId=function(){return i.ChromeExtensionData.current().extensionId},e.prototype.send=function(e){if("undefined"!=typeof chrome&&chrome.runtime&&"function"==typeof chrome.runtime.sendMessage){var t=this.extensionId();t&&chrome.runtime.sendMessage(t,e)}},e}();t.ChromeExtensionsLogger=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.send=function(e){},e.prototype.dispose=function(e){e&&e()},e.prototype.environment=function(e){},e.prototype.context=function(e){},e}();t.MessageSenderDummy=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(145),a=n(146),o=n(147),r=n(148),s=n(46),l=n(149),d=function(){function e(e,t,n){void 0===n&&(n=null),this._logger=t,this._disposed=!1,n=n||i.configuration(e.mode);var d=new l.WorkerProvider(e.workerUrl,n.workers||[],t),c=this._worker=d["new"]();this._receiver=new r.MainReceiver(c,t),this._terminateCommand=new s.WorkerRequestSender("terminate",c,this._receiver.receiver),o.MainReceiverLogger.log(this._receiver,this._logger),this._configuration={type:"configuration",configuration:n,environment:e},c.postMessage(this._configuration),this._sendMessages=new a.BufferCall(function(e){c.postMessage({type:"messages",messages:e})}),this.ping()}return Object.defineProperty(e.prototype,"ajax",{get:function(){return this._receiver.ajax},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"performance",{get:function(){return this._receiver.performance},enumerable:!0,configurable:!0}),e.prototype.send=function(e,t){this._sendMessages.call(e,t&&t.sync)},e.prototype.environment=function(e){this._worker.postMessage({type:"environment",environment:e})},e.prototype.context=function(e){this._worker.postMessage({type:"context",data:e})},e.prototype.dispose=function(e){var t=this,n=e||function(){};if(this._disposed)n();else{this._disposed=!0,this._pingIntervalId&&clearInterval(this._pingIntervalId);var i=this._worker,a=function(){try{t._sendMessages.clear(),t._receiver.dispose()}finally{var e=i.terminate();e&&"function"==typeof e.then?e.then(function(){return n()}):n()}};this._terminateCommand.send(void 0,a,a)}},e.prototype.ping=function(){var e=this;this._pingIntervalId=setInterval(function(){e._worker.postMessage(e._configuration)},5e3)},e}();t.MessageSenderFull=d},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.configuration=function(e){return{endpoints:[{type:"fe-analytic-collector",url:"production"===e?["https://analytics.agoda.com","https://bento.agoda.com"]:"//hkg-gc-qa.agoda.local",timeout:6e4,queues:[{id:"default",flushTime:1e3,maxFlushTime:3e4,batchSize:50,maxMessageCount:15e3,maxEnqueueCount:300,persistent:!0,attemptCount:2,fillThreshold:.6}]}]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(28),o=function(){function e(e){var t=this;this._action=e,this._buffer=new Array,this.flush=function(){try{0!==t._buffer.length&&t._action(t._buffer)}finally{t.clear()}}}return e.prototype.call=function(e,t){var n;void 0===t&&(t=!1),(n=this._buffer).push.apply(n,i.__spread(e)),t?this.flush():this.timeoutId||(this.timeoutId=setTimeout(this.flush),a.UnloadEvent.addListener(this.flush))},e.prototype.clear=function(){this._buffer=new Array,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),a.UnloadEvent.removeListener(this.flush)},e}();t.BufferCall=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.log=function(t,n){t.log.subscribe(function(t){return e.printLog(n,t)})},e.printLog=function(e,t){switch(t.level){case"log":e.log(t.message);break;case"error":e.error(t.message,t.error);break;case"fatal":e.fatal(t.message,t.error);break;default:e.log(t.message)}},e}();t.MainReceiverLogger=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),a=n(48),o=n(49),r=n(50),s=function(){function e(e,t){this.ajax=new a.OptionalResponseEmitter("{}"),this.receiver=new i.MessageReceiver(e,t),this._ajax=new r.WorkerRequestReceiver("ajax",e,this.receiver,this.ajax),this._log=new o.WorkerEventReceiver("log",this.receiver),this._performance=new o.WorkerEventReceiver("performance",this.receiver),this.log=this._log.event.map(function(e){return e.log}),this.performance=this._performance.event.map(function(e){return e.report})}return e.prototype.dispose=function(){this._ajax.dispose(),this._log.dispose(),this._performance.dispose()},e}();t.MainReceiver=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(72),a=n(51),o=n(150),r=function(){function e(e,t,n){this._path=e,this._workers=t,this._logger=n}return e.prototype["new"]=function(){var e=this.supportedWorker(this._workers);return this.create(e)},e.prototype.create=function(e){switch(this._logger.log("Creating worker: '"+e+"'"),e){case"service":return this.serviceWorker();case"emulated":return this.emulatedWorker()}},e.prototype.emulatedWorker=function(){return new a.PseudoWorker(this._path)},e.prototype.serviceWorker=function(){var e=this;return new o.ServiceWorkerSynchronous(this._path,function(t){return e._logger.error(t.stack),e.create(e.supportedWorker(["emulated"]))})},e.prototype.supportedWorker=function(e){return void 0===e&&(e=["service","emulated"]),i.ServiceWorkerUtils.isSupported()&&e.indexOf("service")>=0?"service":e.indexOf("emulated")>=0?"emulated":this.supportedWorker()},e}();t.WorkerProvider=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(151),a=n(152),o=function(){function e(e,t){var n=a.ServiceWorkerWrapper.create(e)["catch"](function(e){return t(e)});this._sync=new i.SyncCall(n)}return e.prototype.addEventListener=function(e,t){this._sync.call(function(n){return n.addEventListener(e,t)})},e.prototype.removeEventListener=function(e,t){this._sync.call(function(n){return n.removeEventListener(e,t)})},e.prototype.terminate=function(){return this._sync.call(function(e){return e.terminate()})},e.prototype.postMessage=function(e){this._sync.call(function(t){return t.postMessage(e)})},e}();t.ServiceWorkerSynchronous=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){var t=this;this._async=e,this.call=function(e){return t._obj?e(t._obj):t._async.then(function(t){return e(t)})},this._async.then(function(e){t._obj=e})}}();t.SyncCall=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(72),a=function(){function e(e,t,n){void 0===n&&(n=navigator.serviceWorker),this.registration=e,this.serviceWorker=t,this.container=n,this.subscribe()}return e.create=function(t){if(i.ServiceWorkerUtils.isSupported()){var n=i.ServiceWorkerUtils.absoluteScope(t,"massaging-client");return i.ServiceWorkerUtils.activate(t,n).then(function(t){return new e(t.registration,t.serviceWorker)})}return Promise.reject(new Error("ServiceWorker is unsupported"))},e.prototype.addEventListener=function(e,t){this.container.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.container.removeEventListener(e,t)},e.prototype.terminate=function(){return this.serviceWorker.onstatechange=void 0,this.registration.unregister()},e.prototype.postMessage=function(e){"redundant"!==this.serviceWorker.state&&this.serviceWorker.postMessage(e)},e.prototype.subscribe=function(){var e=this,t=this.serviceWorker;t.onstatechange=function(){"redundant"===t.state&&(t.onstatechange=void 0,e.container.getRegistration.call(e.container,e.registration.scope).then(function(n){n&&(e.registration=n,e.serviceWorker=n.active||n.installing||n.waiting||t,e.subscribe())}))}},e}();t.ServiceWorkerWrapper=a}])})},function(e,t){e.exports="/scripts/assets../../../Scripts/assets/mcjs-worker-bfc31f7cd4.js"},function(e,t,n){e.exports=n.p+"mcjs-polyfills-2c872d74f9.js"},function(e,t,n){"use strict";var i=n(115),a=n(119),o=n(116),r=o.ManifestBuilder,s={get landing(){return i(new r)},get pending(){return i(new r)},get thankyou(){return a(new r)}};e.exports=s},function(e,t,n){(function(t,i){"use strict";function a(e){var n=e.visit().track().data({app_type:c("string","desk-web"),session_id:u("string","rtag_sid"),web_server_name:u("string","rtag_servername"),page_type_id:u("integer","rtag_pagetypeid"),channel_id:u("integer","rtag_cid"),user_id:u("string","rtag_uid"),currency:u("string","rtag_displaycurrency"),language:u("string","rtag_displaylanguage"),member_id:u("integer","rtag_mid"),analytics_session_id:u("string","analytics.session.id"),analytics_session_signature:u("string","analytics.session.signature"),analytics_session_expiry:u("string","analytics.session.expiry"),property_id:u("integer","rtag_hotelid"),booking_id:u("integer","rtag_bookid"),property_is_nha:u("string","property_is_nha"),property_is_singleroom:u("string","property_is_singleroom"),property_is_bookonrequest:u("string","property_is_bookonrequest"),pre_booking_id:u("string","rtag_prebookid"),is_pay_later:u("boolean","rtag_is_pay_later"),is_pay_at_hotel:u("boolean","rtag_is_pay_at_hotel"),checkin_date:u("string","rtag_checkin"),checkout_date:u("string","rtag_checkout"),master_room_id:u("integer","rtag_masterroomid"),supplier_id:u("integer","rtag_supplierid"),booking_occ_no_of_adults:u("string","rtag_searchadult"),booking_occ_no_of_children:u("string","rtag_searchchild"),no_of_rooms:u("string","rtag_searchqty"),property_local_currency:u("string","rtag_property_local_currency"),search_id:u("string","rtag_search_id"),screen_width:u("integer","window.innerWidth"),screen_height:u("integer","window.innerHeight")}).publish().click().elements(["rewards-redemption","add-special-request-link","agoda-price-guarantee-info-icon","airport-transfer-arrival-airport-dropdown","airport-transfer-arrival-flight-number","airport-transfer-pickup-time-dropdown","back-to-step1-button","bf-rd-change-room-link","booking-condition-link","cancellation-policy-link","compare-payment-options","coupon-apply-panel","desktop-agoda-header-link","desktop-agoda-header-nolink","desktop-customer-support-icon-link","desktop-customer-support-text-link","forgot-password-link","forgot-password-submit-button","forgot-password-with-reset-message-link","free-cancellation-link","general-term-link","general-term-on-step2-link","gift-card-toggle-button","guest-phone-number","hotel-name-link","hotel-name-no-link","king-bed-type-preference","logout-on-book-for-someone-else-link","mobile-agoda-header-link","mobile-agoda-header-nolink","mobile-customer-support-icon-link","mobile-customer-support-text-link","no-thanks-apk-peaek-link","non-smoking-preference","pay-later-option","pay-now-option","payment-accordion-header-bankTransfer","payment-accordion-header-counterPayment","payment-accordion-header-creditDebitCard","payment-accordion-header-digitalPayment","payment-accordion-header-mySavedCard","payment-accordion-header-onlineBanking","pinyin-translation-button","privacy-policy-link","privacy-policy-on-step2-link","promotion-code-redemption","redeem-gift-card-with-max","redeem-gift-card-with-none","reward-redemption-button","reward-toggle-button","show-more-or-less-button","sign-out-button","signin-button","signin-email-button","signin-forget-password-link","signin-link","signin-mobile-button","signin-mobile-countrycode-input","signin-with-apk-peek-button","smoking-preference","submit-signin-button","submit-step1-button","switcher-tab-email","switcher-tab-mobile","term-of-use-link","travel-with-kids","twin-bed-type-preference","we-price-match-link","welcome-back-sign-in-link","why-agoda-best-price","why-agoda-customer-support","why-agoda-review","email-typo-suggestion","breakfast-upgrade-btn","special-request-warning-icon","special-request-warning-message","goto-agodahomes-button","payment-method-credit-debit-card","payment-method-online-banking","payment-method-digital-payment","payment-method-counter-payment","payment-method-bank-transfer","guest-details-welcome-back-banner","menu-user-click-toggle","menu-user-logout-click","menu-user-signIn-click","card-number","card-holder-name","expiry-date","cvv-code","issuing-bank","identification-number","up-mobile-phone-number","up-expiry-month","up-expiry-year","up-otp","submit-step2-button","guest-details-review","edit-user-link","book-for-someone-else"]).data().publish().change().elements(["signin-mobile-countrycode-input","signin-mobile-phonenumber-input","special-request-additional-notes","special-request-airport-transfer-text","airport-transfer-arrival-flight-number"]).data().publish().change().elements(["booking-form-transportation-module-checkbox","booking-form-transfer-request-checkbox","special-request-non-smoking-room","special-request-high-floor","special-request-large-bed","special-request-twin-beds","special-request-quiet-room","special-request-adjoining-room","special-request-baby-cot","special-request-airport-transfer","save-card-to-account","no-thanks-installment-checkbox","book-for-someone-else"]).data({
action_element_value:p("string",function(e){return e.checked})}).publish().seen().elements(["transportation-module","transfer-module-greyout","coupon-apply-panel","transportation-module-without-form","alert-message-urgency","transfer-modal","alert-message-cheapest-room","alert-message-great-choice","alert-message-smart-choice","panel-message-urgency","panel-message-cheapest-room","panel-message-great-choice","panel-message-smart-choice","badge-message-cheapest-room","alert-message-agoda-wont-charge-cc","include-breakfast","giftcard-earn-value","mobile-banner-money-back","mobile-banner-availability","mobile-banner-pointmax","payment-accordion-content-mySavedCard","payment-accordion-content-creditDebitCard","payment-accordion-content-onlineBanking","payment-accordion-content-digitalPayment","payment-accordion-content-counterPayment","payment-accordion-content-bankTransfer","best-seller-badge","gift-card-redemption-panel","email-typo-suggestion","new-best-seller-badge","top-value-badge","special-request-warning-message-container","guest-details-welcome-back-banner","message-available-payment-methods-count","contact-info-container"]).data().publish().seen().elements(["banner-default","banner-giftcard","similar-propreties-soldout"]).data({action_element_value:d("string","data-message-value")}).publish().change().elements(["giftcard-optin","make-book-for-someone-else","news-letter-subscription","guest-details-review"]).data({action_element_value:p("string",function(e){return e.checked})}).publish().custom("promotion-code-redemption").data({action_type:c("string","change"),action_element_name:d("string","promotion-code-redemption"),promotion_code:c("string",void 0),promotion_code_is_valid:c("string",void 0)}).publish().custom("giftcard-earn-value").data({action_type:c("string","seen"),action_element_name:d("string","giftcard-earn-value"),giftcard_earn_expiry:c("string",void 0)}).publish().custom("arrival-time-dropdown").data({action_type:c("string","change"),action_element_name:c("string","arrival-time-dropdown")}).publish().custom("airport-transfer-arrival-airport-dropdown").data({action_type:c("string","change"),action_element_name:c("string","airport-transfer-arrival-airport-dropdown")}).publish().custom("airport-transfer-pickup-time-dropdown").data({action_type:c("string","change"),action_element_name:c("string","airport-transfer-arrival-airport-dropdown")}).publish().change().elements(["gift-card-redemption","payment-method","payment-method-credit-debit-card","payment-method-online-banking","payment-method-digital-payment","payment-method-counter-payment","payment-method-bank-transfer","charge-me-in","country-of-residence"]).data({action_element_value:p("string",function(e){return e.value})}).publish().click().elements(["mobile-payment-charge-option"]).data({action_element_value:p("string",function(e){return e.value})}).publish().click().elements(["transfer-modal-with","transfer-modal-without","transfer-modal-close","transfer-modal-backdrop"]).data({action_element_value:p("string",function(e){return e.value})}).publish().hover().elements(["coupon-apply-panel","creditcard-promo-eligible","special-request-warning-icon","special-request-warning-message"]).data().publish().scroll().once().elements(["coupon-apply-panel"]).data().publish().custom("transportation-module-display").data({action_type:c("string","failed"),action_element_value:c("string",void 0),action_element_name:c("string","transportation-module-display"),page_type_id:c("integer",35)}).publish().reveal().elements(["travel-with-kids-container","contact-info-container","price-detail-popover"]).data().publish().reveal().elements(["breakfast-upgrade-modal"]).data({action_element_value:d("string","data-message-value")}).publish().custom("travel-with-kids").data({action_type:c("string","select"),action_element_name:c("string","travel-with-kids")}).publish().custom("transfer-validation-failed").data({action_type:c("string","failed"),action_element_value:c("boolean",void 0),action_element_name:c("string","transfer-validation-failed"),page_type_id:c("integer",35)}).publish().custom("atapi-no-result").data({action_type:c("string","failed"),action_element_value:c("boolean",void 0),action_element_name:c("string","atapi-no-result"),page_type_id:c("integer",35)}).publish().click().elements(["payment-logo-visa","payment-logo-mastercard","payment-logo-american-express","payment-logo-jcb","payment-logo-carte-bleue","payment-logo-diners-club","payment-logo-shinhan","payment-logo-paypal","payment-logo-alipay","payment-logo-wechatpay","payment-logo-wechat-icon","payment-logo-wechatpay-icon","payment-logo-unionpay","payment-logo-ideal","payment-logo-unionpay-debit","payment-logo-unionpay-credit","payment-logo-scb","payment-logo-kbank","payment-logo-bay","payment-logo-bill","payment-logo-ktb","payment-logo-cimb_clicks","payment-logo-mandiriclickpay","payment-logo-epay_bri","payment-logo-maybank2u","payment-logo-hongleongconnect","payment-logo-rhbnow","payment-logo-pbe","payment-logo-bankislam","payment-logo-affinonline","payment-logo-amonline","payment-logo-cimbclicksmalay","payment-logo-dragon","payment-logo-maybank","payment-logo-bdo","payment-logo-bpi","payment-logo-metrobank","payment-logo-rcbc","payment-logo-unionbank","payment-logo-ucpb","payment-logo-chinabank","payment-logo-pnb","payment-logo-robinsonsbank","payment-logo-sterling-bank-of-asia","payment-logo-eastwest-bank","payment-logo-dragonpay","payment-logo-kplus","payment-logo-uob","payment-logo-thanachart","payment-logo-tmb","payment-logo-big-c","payment-logo-tesco-lotus","payment-logo-family-mart","payment-logo-bersama","payment-logo-prima","payment-logo-alto","payment-logo-alfamart","payment-logo-indomaret","payment-logo-seven-eleven","payment-logo-vietcom-bank","payment-logo-bidv","payment-logo-vietin-bank","payment-logo-vp-bank","payment-logo-donga-bank","payment-logo-techcom-bank","payment-logo-sacom-bank","payment-logo-more","payment-logo-yandex","payment-logo-qiwi","payment-logo-mir"]).data().publish().click().elements(["close-unionpay-otp","submit-unionpay-otp","request-new-password-unionpay","input-unionpay-otp"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish().reveal().elements(["submit-unionpay-otp-error","submit-unionpay-otp-client-error"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish().seen().elements(["unionpay-otp-modal"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish().reveal().elements(["payment-error","paymentMethod-span","cardNumber-span","cardHolderName-span","issuingBank-span","expiry-date-div","cvv-code-div","mobilePhoneNumber-span","identificationNumber-span","otp-span","saved-cards-component","payment-method","charge-me-in","identification-number","countrycode-span"]).data({action_element_value:p("string",function(e){return e.value})}).publish();return n.custom("payment-method-credit-debit-card").data({action_type:c("string",void 0),action_element_name:c("string","payment-method-credit-debit-card"),action_element_value:c("string",void 0)}).publish().custom("payment-method-online-banking").data({action_type:c("string",void 0),action_element_name:c("string","payment-method-online-banking"),action_element_value:c("string",void 0)}).publish().custom("payment-method-digital-payment").data({action_type:c("string",void 0),action_element_name:c("string","payment-method-digital-payment"),action_element_value:c("string",void 0)}).publish().custom("payment-method-counter-payment").data({action_type:c("string",void 0),action_element_name:c("string","payment-method-counter-payment"),action_element_value:c("string",void 0)}).publish().custom("payment-method-bank-transfer").data({action_type:c("string",void 0),action_element_name:c("string","payment-method-bank-transfer"),action_element_value:c("string",void 0)}).publish(),o.isApplied(r.KoreaInstallmentPlan)&&n.reveal().elements(["installment-details-block","installment-terms-of-uses-tooltip"]).data().publish().reveal().elements(["installment-plan-radio-button-span"]).data({action_element_value:p("string",function(e){return t(e).parents(".installment-plan-options-container").find('input[name="installmentPlanChoice"]:checked').data("num-of-month")})}).publish().change().elements(["installment-plan-radio-button"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-num-of-month")})}).publish(),o.isApplied(r.GiftCardDisplayRedeemBoxForSoftLogin)&&n.click().elements(["login-to-use-agodacash"]).data({action_element_value:p("string",function(e){return e.getAttribute("ac-balance")})}).publish(),n.reveal().elements(["installment-container-div"]).data({action_element_value:p("string",function(){var e=s.getPageData().jsonViewModel;return[r.KoreaInstallmentPlan,o.isApplied(r.KoreaInstallmentPlan)?"B":"A",i.unwrap(e.priceDetails.totalAmount).toString()].join("_")})}).publish(),n.custom("saved-card-selection-option").data({action_type:c("string",void 0),action_element_name:c("string","saved-card-selection-option"),action_element_value:c("string",void 0)}).publish(),n.reveal().elements(["billingzipcode"]).data({action_element_value:c("string","seen")}).publish(),n.click().elements(["close-unionpay-id","submit-unionpay-id"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish().reveal().elements(["submit-unionpay-id-error"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish().seen().elements(["unionpay-id-modal"]).data({action_element_value:p("string",function(e){return e.getAttribute("data-payment-method")})}).publish(),n.custom("guest-details-reEmail").data({action_type:c("string",void 0),action_element_name:c("string",void 0)}).publish(),n.reveal().elements(["taxid"]).data({action_element_value:c("string","seen")}).publish(),n.custom("card-number-invalid").data({action_type:c("string","change"),action_element_name:c("string","card-number-invalid"),action_element_value:d("string",void 0)}).publish(),n.custom("card-info-invalid").data({action_type:c("string","reveal"),action_element_name:c("string","card-info-invalid"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-handle-devicefingerprint").data({action_type:c("string","reveal"),action_element_name:c("string","payment-server-transaction-id"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-handle-challenge").data({action_type:c("string","reveal"),action_element_name:c("string","payment-server-transaction-id"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-devicefingerprint-success").data({action_type:c("string","reveal"),action_element_name:c("string","response"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-devicefingerprint-timeout").data({action_type:c("string","reveal"),action_element_name:c("string","response"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-challenge-success").data({action_type:c("string","reveal"),action_element_name:c("string","response"),action_element_value:d("string",void 0)}).publish(),n.custom("threedsecure-challenge-timeout").data({action_type:c("string","reveal"),action_element_name:c("string","response"),action_element_value:d("string",void 0)}).publish(),n.custom("back-button-pressed").data({action_type:c("string","click"),action_element_name:c("string","browser-back-button"),page_type_id:c("integer",36)}).publish(),n.create()}var o=n(86),r=n(88),s=n(9),l=n(116),d=l.attribute,c=l.constant,p=l.listener,u=l.variable;e.exports=a}).call(t,n(2),n(3))},function(e,t,n){(function(t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(23);t.getAttributeValue=i.getAttributeValue,t.querySelectorAll=i.querySelectorAll,t.viewport=i.viewport,t.visible=i.visible;var a=n(24);t.getVariable=a.getVariable,t.setVariable=a.setVariable;var o=n(6);t.compact=o.compact,t.each=o.each,t.findIndex=o.findIndex,t.merge=o.merge;var r=n(25);t.getParameterByName=r.getParameterByName},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var a=n(21);t.AnalyticsModule=a.IocContainer,i(n(5));var o=n(18);t.ManifestBuilder=o.ManifestBuilder;var r=n(18);t.attribute=r.attribute,t.constant=r.constant,t.listener=r.listener,t.variable=r.variable},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(28)),i(n(29))},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(22))},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(8),r=5e3,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.connect=function(t){var n=e.prototype.connect.call(this,t);return 1===this.getRefCount()&&(this.notify("connecting"),this.connecting(),this.disposalHandle=setInterval(this.disposeCounter.bind(this),r)),n},t.prototype.disconnect=function(){var t=this.getRefCount();e.prototype.disconnect.call(this);var n=this.getRefCount();t>0&&0===n&&(this.notify("disconnecting"),this.disconnecting(),clearInterval(this.disposalHandle),this.disposalHandle=void 0)},t.prototype.push=function(e,t){e.length>0&&this.next({global:window,element:t.target,context:t.context},e)},t.prototype.onNext=function(e,t){},t.prototype.verify=function(e,t,n){if(e.maximum===a.TimesConstant.Default)return!0;var i,o=e.count.filter(function(e){return e.name===t&&e.element===n});return o.length>0?i=o[0]:(i={name:t,element:n,count:0},e.count.push(i)),++i.count<=e.maximum},t.prototype.disposeCounter=function(){var e=this.getTokens();e.every(function(e){return e.count.filter(function(e){return null!=e.element&&null==e.element.parentElement}).map(function(e,t){return t}).reverse().every(function(t){return e.count.splice(t,1),!0}),!0})},t}(o.Connector);t.Trigger=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypeConstant={Change:"change",Click:"click",Custom:"custom",Hover:"hover",Reveal:"reveal",Scroll:"scroll",Seen:"seen",Visit:"visit"},t.TimesConstant={Default:-1,Once:1,Repeat:-1},t.DataSourceConstant={Attribute:"dom attribute",Constant:"predefined",Listener:"listener",Variable:"js variable"},t.DataTypeConstant={String:"string",Integer:"integer",Float:"float",Boolean:"boolean"},t.PublisherTypeConstant={MessagingClient:"messagingjs",Custom:"custom"},t.PublisherTargetConstant={Default:"WebAnalytics",WebAnalytics:"WebAnalytics"}},function(e,t,n){"use strict";function i(e){return a(e,function(t,n,i){null==t&&delete e[i]},!1),e}function a(e,t,n){void 0===n&&(n=!0);var i=e,a=0;for(var o in i)if(i.hasOwnProperty(o)){var r=i[o];if(n&&null==r)a++;else{var s=t(r,a,o);if(a++,s)return!0}}return!1}function o(e,t){return null!=e?null!=e.findIndex?e.findIndex(t):r(e,t):-1}function r(e,t){for(var n=Object(e),i=n.length,a=e,o=0;o<i;){var r=n[o];if(t.call(a,r,o,n)===!0)return o;o++}return-1}function s(e,t,n){if(void 0===n&&(n=!1),null==e||null==t)return e;for(var i in t)t.hasOwnProperty(i)&&(null!=e[i]&&n===!1||(e[i]=t[i]));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.compact=i,t.each=a,t.findIndex=o,t.merge=s},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(26)),i(n(10)),i(n(27))},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(34))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.Live="live",e.Dev="dev",e.Trace="trace",e}();t.EnvironmentTypeConstant=i,t.DevEnableKey="815e0f54ddca4809a35de1b5179c7944",t.configuration={version:"$version",buildDate:"$buildDate",revision:"$revision",environment:"live",devEnableKey:"ada_dev",devTraceKey:"ada_trace"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.trigger=e,this.collector=t,this.publisher=n,this.isStart=!1}return e.prototype.activate=function(){this.isStart||(this.trigger.connect(this.collector).connect(this.publisher),this.isStart=!0)},e.prototype.deactivate=function(){this.isStart&&(this.trigger.disconnect(),this.collector.disconnect(),this.publisher.disconnect(),this.isStart=!1)},e.prototype.raise=function(e,t){this.trigger.dispatch(e,t)},e}();t.DataFlow=i},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(32)),i(n(33)),i(n(35)),i(n(36)),i(n(37)),i(n(38))},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(13)),i(n(14)),i(n(15)),i(n(43)),i(n(44)),i(n(45)),i(n(56)),i(n(17)),i(n(4))},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=n(2),r=n(0),s=n(4),l=function(e){function t(t,n){var i=e.call(this)||this;return i.adapter=t,i.states=[],i.predicate=n,i}return i(t,e),t.prototype.dispatch=function(e,t){this.adapter.push()},t.prototype.connecting=function(){this.subscriber=this.onBroadcasting.bind(this),this.adapter.attach(this.subscriber)},t.prototype.disconnecting=function(){this.adapter.detach(this.subscriber)},t.prototype.onBroadcasting=function(e){var t=this;o.begin("BroadcastTrigger.onBroadcasting"),this.queries(function(n,i){return null==t.predicate||t.predicate(e,n,i)}).every(function(e){return t.push(e.sources,{target:e.element}),!0}),o.end("BroadcastTrigger.onBroadcasting")},t.prototype.queries=function(e){var t=this,n=this.getTokens();return n.reduce(function(n,i){var o=r.querySelectorAll(document.body,"["+a.Config.attributes.elementName+"="+i.target+"]");return o.filter(function(n){var o=r.getAttributeValue(n,a.Config.attributes.elementName),s=t.states.filter(function(e){return e.name===o});if(0===s.length){var l={name:o};return t.states.push(l),!!e(l,n)&&t.verify(i,o,n)}var d=!1;return s.every(function(a){return e(a,n)&&(d=t.verify(i,o,n)),!0}),d}).every(function(e){var t=r.findIndex(n,function(t){return t.element===e});if(t!==-1){var a=n[t].sources;a.indexOf(i.source)===-1&&a.push(i.source)}else n.push({element:e,sources:[i.source]});return!0}),n},[])},t}(s.Trigger);t.BroadcastTrigger=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.subscribers=[],this.type=e}return e.prototype.attach=function(e){null==this.handler&&(this.handler=this.onEvent.bind(this),document.body.addEventListener(this.type,this.handler,!0)),this.subscribers.push(e)},e.prototype.detach=function(e){var t=this.subscribers.indexOf(e);t!==-1&&(this.subscribers.splice(t,1),0===this.subscribers.length&&document.body.removeEventListener(this.type,this.handler,!0))},e.prototype.push=function(){},e.prototype.onEvent=function(e){var t=e.target;null!=t&&this.subscribers.every(function(e){return e(t),!0})},e}();t.EventAdapter=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=n(2),r=n(0),s=n(4),l=function(e){function t(t,n){var i=e.call(this)||this;return i.adapter=t,i.predicate=n,i}return i(t,e),t.prototype.dispatch=function(e,t){},t.prototype.connecting=function(){this.handler=this.onCapture.bind(this),this.adapter.attach(this.handler)},t.prototype.disconnecting=function(){this.adapter.detach(this.handler)},t.prototype.onCapture=function(e){var t=this;o.begin("EventTrigger.onCapture");for(var n=this.getTokens(),i=[],s=e,l=[],d=function(){var o=r.getAttributeValue(s,a.Config.attributes.elementName),d=n.filter(function(e){return o===e.target});return d.length>0?(i=0===l.length?d.filter(function(n){return t.verify(n,o,e)}).map(function(e){return e.source}):d.filter(function(n){return n.excludes.every(function(e){return l.every(function(t){return t!==e})})&&t.verify(n,o,e)}).map(function(e){return e.source}),"break"):(l.push(o),void(s=s.parentElement))};null!=s;){var c=d();if("break"===c)break}return null==this.predicate||this.predicate(i,e,s)?(null!=i&&i.length>0&&this.push(i,{source:e,target:s}),void o.end("EventTrigger.onCapture")):void o.end("EventTrigger.onCapture")},t}(s.Trigger);t.EventTrigger=l},function(e,t,n){"use strict";(function(e){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),o=n(55),r=function(){function t(){this.registrationsTable=new o.WeakMap,this.setImmediate=window.msSetImmediate,this.isScheduled=!1,this.scheduledObservers=[],this.initialize()}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.scheduleCallback=function(t){this.scheduledObservers.push(t),this.isScheduled||(this.isScheduled=!0,e(this.dispatchCallbacks.bind(this)))},t.prototype.wrapIfNeeded=function(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e},t.prototype.dispatchCallbacks=function(){var e=this;this.isScheduled=!1;var t=this.scheduledObservers;this.scheduledObservers=[],t.sort(function(e,t){return e.uid-t.uid});var n=!1;t.forEach(function(t){var i=t.takeRecords();e.removeTransientObserversFor(t),i.length&&(t.callback(i,t),n=!0)}),n&&this.dispatchCallbacks()},t.prototype.removeTransientObserversFor=function(e){var t=this;e.nodes.forEach(function(n){var i=t.registrationsTable.get(n);i&&i.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})},t.prototype.forEachAncestorAndObserverEnqueueRecord=function(e,t){for(var n=e;n;n=n.parentNode){var a=this.registrationsTable.get(n);if(null!=a)try{for(var o=i(a),r=o.next();!r.done;r=o.next()){var s=r.value,l=s.options;if(n===e||l.subtree){var d=t(l);null!=d&&s.enqueue(d)}}}catch(c){p={error:c}}finally{try{r&&!r.done&&(u=o["return"])&&u.call(o)}finally{if(p)throw p.error}}}var p,u},t.prototype.copyMutationRecord=function(e){if(null==e)throw new ReferenceError;var t=new a.PolyfillRecord(e.type,e.target);return t.addedNodes=null==e.addedNodes?[]:e.addedNodes.slice(),t.removedNodes=null==e.removedNodes?[]:e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t},t.prototype.getRecord=function(e,t){return this.currentRecord=new a.PolyfillRecord(e,t)},t.prototype.getRecordWithOldValue=function(e){return this.recordWithOldValue?this.recordWithOldValue:(this.recordWithOldValue=this.copyMutationRecord(this.currentRecord),this.recordWithOldValue.oldValue=e,this.recordWithOldValue)},t.prototype.clearRecords=function(){this.currentRecord=this.recordWithOldValue=void 0},t.prototype.recordRepresentsCurrentMutation=function(e){return e===this.recordWithOldValue||e===this.currentRecord},t.prototype.selectRecord=function(e,t){return e===t?e:this.recordWithOldValue&&this.recordRepresentsCurrentMutation(e)?this.recordWithOldValue:void 0},t.prototype.initialize=function(){if(!this.setImmediate){var e=[],t=String(Math.random());window.addEventListener("message",function(n){if(n.data===t){var i=e;e=[],i.forEach(function(e){e()})}}),this.setImmediate=function(n){e.push(n),window.postMessage(t,"*")}}},t}();t.StaticContext=r}).call(t,n(50).setImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=function(){function e(e,t){this.subscribers=[],this.subscription=e,this.threshold=t,this.args=[]}return e.prototype.attach=function(e){if(null==this.throttler){var t=this.onThrottling.bind(this);this.subscription.subscribe(t),this.throttler=t}this.subscribers.push(e)},e.prototype.detach=function(e){if(null!=this.throttler){var t=this.subscribers.indexOf(e);t!==-1&&(this.subscribers.splice(t,1),0===this.subscribers.length&&(this.subscription.unsubscribe(this.throttler),null!=this.handle&&clearTimeout(this.handle),delete this.handle,delete this.throttler))}},e.prototype.push=function(){this.onThrottling()},e.prototype.onThrottling=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.begin("ThrottleAdapter.onThrottling"),this.args.push(e),null!=this.handle&&clearTimeout(this.handle),this.handle=setTimeout(this.onTriggered.bind(this),this.threshold),i.end("ThrottleAdapter.onThrottling")},e.prototype.onTriggered=function(){var e=this;this.subscribers.every(function(t){return t(e.args),!0}),clearTimeout(this.handle),this.handle=void 0,this.args.splice(0)},e}();t.ThrottleAdapter=a},function(e,t,n){"use strict";function i(e,t){return{type:e,token:t,source:c.DataSourceConstant.Variable}}function a(e,t){return{type:e,token:t,source:c.DataSourceConstant.Attribute}}function o(e,t){return{type:e,token:t,source:c.DataSourceConstant.Constant}}function r(e,t){return{type:e,token:t,source:c.DataSourceConstant.Listener}}var s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var d=n(5),c=n(5),p=n(5),u=function(){function e(){}return e.cache={},e}();t.ManifestCache=u;var m=function(){function e(){this.counter=0,this.key=(1e17*Math.random()).toFixed(0).substring(0,10),u.cache[this.key]={manifest:{},tags:[]}}return e.prototype.visit=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Visit,explicit:!1,times:d.TimesConstant.Once})})},e.prototype.click=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Click,explicit:!1})})},e.prototype.change=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Change,explicit:!1})})},e.prototype.hover=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Hover,explicit:!1})})},e.prototype.reveal=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Reveal,explicit:!1})})},e.prototype.seen=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Seen,times:d.TimesConstant.Once,explicit:!1})})},e.prototype.scroll=function(){var e=this;return this.validate(function(){return new f({ref:e,key:e.key,name:""+e.key+ ++e.counter,type:d.ActionTypeConstant.Scroll,explicit:!1})})},e.prototype.custom=function(e){var t=this;return this.validate(function(){return new f({name:e,ref:t,key:t.key,type:d.ActionTypeConstant.Custom,explicit:!0})})},e.prototype.create=function(){var e=this;return this.validate(function(){var t=u.cache[e.key].manifest;return delete u.cache[e.key],t})},e.prototype.validate=function(e){if(null==u.cache[this.key])throw new Error("Manifest is already created.");return e.apply(this)},e}();t.ManifestBuilder=m;var h=function(){function e(){}return e}();t.BuildingProps=h;var f=function(){function e(e){this.properties=e}return e.prototype.track=function(){return this.properties.explicit=!0,this.properties.times=d.TimesConstant.Default,this},e.prototype.once=function(){return this.properties.times=d.TimesConstant.Once,this},e.prototype.elements=function(e){return this.properties.elements=e,this},e.prototype.tracks=function(e){return this.properties.tracks=e,this.properties.explicit=!0,this},e.prototype.data=function(e){return null!=e&&(this.properties.dataset=s({},e)),this},e.prototype.publish=function(e){e=e||{type:p.PublisherTypeConstant.MessagingClient,target:p.PublisherTargetConstant.Default};var t=this.properties.dataset||{};e.type===p.PublisherTypeConstant.MessagingClient&&e.target===p.PublisherTargetConstant.Default&&(t=this.verifyFields(t));var n={dataset:t,publisher:e,type:this.properties.type,explicit:this.properties.explicit},i=[];null!=this.properties.tracks?(i=this.properties.tracks,n.tracks=this.properties.tracks):null!=this.properties.elements&&(i=this.properties.elements,n.elements=i),this.verifyElements(i,this.properties.type,e),null!=this.properties.times&&(n.times=this.properties.times);var a=u.cache[this.properties.key].manifest;return this.verifyPublisher(a,n),a[this.properties.name]=n,this.properties.ref},e.prototype.verifyElements=function(e,t,n){var i=u.cache[this.properties.key].tags,a=function(e){var a="string"==typeof e?e:e.name;if(i.some(function(e){return e.elementName===a&&e.actionType===t&&e.publishType===n.type&&e.publishTarget===n.target}))throw new Error("Element '"+a+"' was defined in some prior rule.");i.push({elementName:a,actionType:t,publishType:n.type,publishTarget:n.target})};try{for(var o=l(e),r=o.next();!r.done;r=o.next()){var s=r.value;a(s)}}catch(d){c={error:d}}finally{try{r&&!r.done&&(p=o["return"])&&p.call(o)}finally{if(c)throw c.error}}var c,p},e.prototype.verifyFields=function(e){if(this.properties.type!==d.ActionTypeConstant.Custom){if(this.properties.type===d.ActionTypeConstant.Visit){var t=["session_id","web_server_name","page_type_id","channel_id","analytics_session_id","analytics_session_signature","analytics_session_expiry","user_id","currency","language","member_id"];try{for(var n=l(t),i=n.next();!i.done;i=n.next()){var r=i.value;if(null==e[r])throw new Error("Mandatory field '"+r+"' not found.")}}catch(s){c={error:s}}finally{try{i&&!i.done&&(p=n["return"])&&p.call(n)}finally{if(c)throw c.error}}if(null!=e.action_element_name)throw new Error("Unexpected field 'action_element_name' found.")}else{if(null!=e.action_element_name)throw new Error("Unexpected field 'action_element_name' found.");e.action_element_name=a("string","data-element-name")}if(null!=e.action_type)throw new Error("Unexpected field 'action_type' found.");e.action_type=o("string",this.properties.type);
}else{if(null==e.action_type)throw new Error("Mandatory field 'action_type' not found.");if(null==e.action_element_name)throw new Error("Mandatory field 'action_element_name' not found.")}return e;var c,p},e.prototype.verifyPublisher=function(e,t){t.type===d.ActionTypeConstant.Visit&&Object.keys(e).every(function(n){var i=e[n];if(i.type===t.type){var a=i.publisher,o=t.publisher;if(a.type===o.type&&a.target===o.target)throw new Error("Unexpected action 'visit' with the same publisher found.")}return!0})},e}();t.RuleBuilder=f,t.variable=i,t.attribute=a,t.constant=o,t.listener=r},function(e,t,n){e.exports=n(20)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=n(7),o=n(30),r=n(57),s=n(59),l=function(){function e(){}return e.initialize=function(e){var t=new r.RuleProvider(e.manifest),n=new o.TriggerFactory,i=new o.CollectorFactory,l=new o.MessengerFactory(e.messagingjs,e.dispatcher),d=new a.DataFlowBuilder(n,i,l);this.instance=new s.AnalyticsModule(t,d),this.instance.load(e)},Object.defineProperty(e.prototype,"version",{get:function(){return i.Config.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return i.Config.buildDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revision",{get:function(){return i.Config.revision},enumerable:!0,configurable:!0}),e.prototype.load=function(t){null==e.instance&&e.initialize(t)},e.prototype.visit=function(t){null!=e.instance&&e.instance.visit(t)},e.prototype.track=function(t,n){null!=e.instance&&e.instance.track(t,n)},e}();t.IocContainer=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(9),o=function(){function e(){}return e.load=function(){var e,t;return i.getParameterByName(a.configuration.devEnableKey)===a.DevEnableKey&&(e=a.EnvironmentTypeConstant.Dev,t=i.getParameterByName(a.configuration.devTraceKey),null!=t&&t.length>0&&(e=a.EnvironmentTypeConstant.Trace)),{version:a.configuration.version,buildDate:a.configuration.buildDate,revision:a.configuration.revision,environment:null!=e?e:a.configuration.environment,attributes:{elementName:"data-element-name"},traceVariable:t||""}},e}();t.ConfigLoader=o;var r=o.load();t.Config=r;var s=n(9);t.EnvironmentTypeConstant=s.EnvironmentTypeConstant},function(e,t,n){"use strict";function i(e,t){var n="";return c.each(e.attributes,function(e){if(e.name===t)return null!=e.value&&(n=e.value),!0}),n.toString().trim()}function a(e,t){try{var n=e.querySelectorAll(t);return Array.prototype.slice.call(n)}catch(i){return[]}}function o(e){try{var t=e.getBoundingClientRect();return t.top<(window.innerHeight||window.document.documentElement.clientHeight)&&t.left<(window.innerWidth||window.document.documentElement.clientWidth)&&t.bottom>0&&t.right>0}catch(n){return!1}}function r(e){return s(e)}function s(e,t,n,i,a,o,r){var c=e.parentNode,p=2;return!!d(e)&&(9===c.nodeType||"0"!==l(e,"opacity")&&"none"!==l(e,"display")&&"hidden"!==l(e,"backface-visibility")&&(null!=t&&null!=n&&null!=i&&null!=a&&null!=o&&null!=r||(t=e.offsetTop,a=e.offsetLeft,i=t+e.offsetHeight,n=a+e.offsetWidth,o=e.offsetWidth,r=e.offsetHeight),("hidden"!==l(c,"overflow")&&"scroll"!==l(c,"overflow")||!(a+p>c.offsetWidth+c.scrollLeft||a+o-p<c.scrollLeft||t+p>c.offsetHeight+c.scrollTop||t+r-p<c.scrollTop))&&(e.offsetParent===c&&(a+=c.offsetLeft,t+=c.offsetTop),s(c,t,n,i,a,o,r))))}function l(e,t){var n;null!=window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e)),n=n||e.currentStyle;var i;return null!=n&&(i=n[t],null!=i&&0!==i.length||(i=n["-webkit-"+t]),null!=i&&0!==i.length||(i=n["-moz-"+t]),null!=i&&0!==i.length||(i=n["-ms-"+t])),i}function d(e){for(var t=e.parentNode;null!=t;){if(t===document)return!0;t=t.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0});var c=n(6);t.getAttributeValue=i,t.querySelectorAll=a,t.viewport=o,t.visible=r,t.getStyle=l,t.isDocumentContains=d},function(e,t,n){"use strict";function i(e,t){try{var n=t.split("."),i=e;return r.each(n,function(e){var t=o(e);return null==t.name?(i=void 0,!0):(i=i[t.name],void(null!=t.property&&(i=i[t.property])))},!1),i}catch(a){return}}function a(e,t,n){try{var i=t.split("."),a="",s=e,l=e;return r.each(i,function(e){var t=o(e);return null==t.name?(s=void 0,l=void 0,!0):(s=l,l=l[t.name],a=t.name,void(null!=t.property&&(s=l,l=l[t.property],a=t.property)))},!1),null!=s&&0!==a.length&&(s[a]=n,!0)}catch(d){return!1}}function o(e){if(null==e)return{};var t=/([a-zA-Z_$][0-9a-zA-Z_$]*)(\[(0|[1-9][0-9]*)\])?$/,n=e.match(t);if(null==n||!(n instanceof Array)||n.length<4)return{};var i=n[1];return null==n[3]?{name:i}:{name:i,property:n[3]}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.getVariable=i,t.setVariable=a,t.extract=o},function(e,t,n){"use strict";function i(e){try{var t=window.location.href,n=e.replace(/[\[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),a=i.exec(t);if(null==a)return;return null==a[2]?"":decodeURIComponent(a[2].replace(/\+/g," "))}catch(o){return}}Object.defineProperty(t,"__esModule",{value:!0}),t.getParameterByName=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.schemes={},this.commons={},this.contexts={},this.delegates={}}return e.registerScheme=function(t){var n=e.getInstance();return n.registerScheme_(t)},e.getContext=function(t){var n=e.getInstance();return n.getContext_(t)},e.setContext=function(t,n){var i=e.getInstance();i.setContext_(t,n)},e.getCommonDelegate=function(t){var n=e.getInstance();return n.getCommonDelegate_(t)},e.setCommonDelegate=function(t,n){var i=e.getInstance();i.setCommonDelegate_(t,n)},e.getInstance=function(){return e.instance=e.instance||new e},e.prototype.registerScheme_=function(e){var t=e.source,n=e.target,i=e.common;if(null!=this.schemes[t])return!1;if(i){if(null!=this.commons[n])return!1;this.commons[n]=e}return this.schemes[t]=e,!0},e.prototype.getContext_=function(e){var t=this.schemes[e];if(null!=t)return this.contexts[t.target]},e.prototype.setContext_=function(e,t){var n=this.schemes[e];if(null!=n){var i=n.target,a=n.common;a&&(this.contexts[i]=t)}},e.prototype.getCommonDelegate_=function(e){var t=this.schemes[e];if(null!=t){var n=this.commons[t.target];if(null!=n){var i=n.target;return this.delegates[i]}}},e.prototype.setCommonDelegate_=function(e,t){var n=this.schemes[e];if(null!=n){var i=n.common;i&&(this.delegates[n.target]=t)}},e}();t.ContextStore=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(10),o=function(){function e(e,t,n){this.triggerFactory=e,this.collectorFactory=t,this.publisherFactory=n}return e.prototype.buildDataFlow=function(e){var t=e.id,n=this.triggerFactory.create(t,e.action);if(null!=n){var o=this.collectorFactory.create(t,e.dataset);if(null!=o){var r=this.publisherFactory.create(t,e.publisher);if(null!=r)return i.expose(e),new a.DataFlow(n,o,r)}}},e}();t.DataFlowBuilder=o},function(e,t,n){"use strict";function i(e){if("undefined"!=typeof __ADA_DEVTOOLS_GLOBAL_HOOK__){__ADA_DEVTOOLS_GLOBAL_HOOK__.dataflows_=__ADA_DEVTOOLS_GLOBAL_HOOK__.dataflows_||[];var t=e.action.tracks||e.action.elements||[""];t.reduce(function(e,t){return e.push("string"==typeof t?{name:t,excludes:[]}:{name:t.name,excludes:t.excludes.slice(0)}),e},[]).every(function(t){return __ADA_DEVTOOLS_GLOBAL_HOOK__.dataflows_.push({rule:e.id,type:e.action.type,target:t.name,excludes:t.excludes,dataset:o({},e.dataset),publisher:{type:e.publisher.type,target:e.publisher.target}}),!0})}}function a(e){"undefined"!=typeof __ADA_DEVTOOLS_GLOBAL_HOOK__&&__ADA_DEVTOOLS_GLOBAL_HOOK__.sendCustomVars(e)}var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=i,t.dispatch=a},function(e,t,n){"use strict";function i(e){o.Config.environment===o.EnvironmentTypeConstant.Dev&&performance.mark("begin-"+e)}function a(e){o.Config.environment===o.EnvironmentTypeConstant.Dev&&(performance.mark("end-"+e),performance.measure(e,"begin-"+e,"end-"+e),performance.clearMarks("begin-"+e),performance.clearMarks("end-"+e),performance.clearMeasures(e))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.begin=i,t.end=a},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(31));var a=n(39);t.MessengerFactory=a.MessengerFactory,i(n(42))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(11),o=n(11),r=function(){function e(){}return e.prototype.create=function(e,t){if(null==this.collector){var n={};n[i.DataSourceConstant.Attribute]=new o.AttributeFieldCollector,n[i.DataSourceConstant.Variable]=new o.JsFieldCollector,n[i.DataSourceConstant.Constant]=new o.PredefinedFieldCollector,n[i.DataSourceConstant.Listener]=new o.ListenerFieldCollector,this.collector=new a.Collector(n,new a.TypeConverter)}return this.collector.addToken({source:e,dataset:t}),this.collector},e}();t.CollectorFactory=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(){}return e.prototype.collect=function(e,t){if(null!=t.element){var n=t.element.attributes;if(null!=n){var a;return i.each(n,function(t){if(t.name===""+e.token)return a=t.value,!0}),a}}},e}();t.AttributeFieldCollector=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=n(0),r=n(8),s=function(e){function t(t,n){var i=e.call(this)||this;return i.collectors=t,i.converter=n,i}return i(t,e),t.prototype.onNext=function(e,t){var n=this,i=[],r=this.getTokens();r.filter(function(t){return e.some(function(e){return e===t.source})}).every(function(e){var r=e.source,s=e.dataset,l=function(){return n.getContext(r,t,s)},d=l(),c={source:r,context:d},p=a.ContextStore.getCommonDelegate(r);return null!=p&&o.merge(d,p()),a.ContextStore.setCommonDelegate(r,l),i.push(c),!0}),o.each(i,function(e){n.next(o.compact(e.context),[e.source])})},t.prototype.getContext=function(e,t,n){var i=this,a={};return o.each(n,function(e,n,o){var r;if(null!=t.context&&(r=i.converter.convert(t.context[o],e.type)),null==r){var s=i.collectors[e.source];null!=s&&(r=s.collect(e,t)),r=i.converter.convert(r,e.type)}a[o]=r}),a},t}(r.Connector);t.Collector=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.refCount=0,this.tokens=[],this.handlers={}}return e.prototype.connect=function(e){return++this.refCount,this.endpoint=this.endpoint||e},e.prototype.disconnect=function(){this.refCount>0&&0===--this.refCount&&delete this.endpoint},e.prototype.getRefCount=function(){return this.refCount},e.prototype.getTokens=function(){return this.tokens},e.prototype.addToken=function(e){this.tokens.push(e)},e.prototype.removeToken=function(e){var t=this.tokens.indexOf(e);t!==-1&&this.tokens.splice(t,1)},e.prototype.on=function(e,t){this.handlers[e]=t},e.prototype.notify=function(e){var t=this.handlers[e];null!=t&&t()},e.prototype.next=function(e,t){null!=this.endpoint&&this.endpoint.onNext(t,e)},e}();t.Connector=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(){}return e.prototype.collect=function(e,t){var n=e.token;if(null!=n)return i.getVariable(t.global,n)},e}();t.JsFieldCollector=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.collect=function(e,t){if(null!=e.token)try{return e.token(t.element)}catch(n){return}},e}();t.ListenerFieldCollector=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.collect=function(e,t){return e.token},e}();t.PredefinedFieldCollector=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=function(){function e(){}return e.prototype.convert=function(e,t){var n;switch(t){case i.DataTypeConstant.String:if(null==e)return;if(n=e.toString(),0===n.length)return;return n.replace(/[\n\t]/g," ").replace(/[\r\f]/g,"").trim().toLowerCase();case i.DataTypeConstant.Integer:return n=parseInt(e,10),isNaN(n)?void 0:n;case i.DataTypeConstant.Float:return n=parseFloat(e),isNaN(n)?void 0:n;case i.DataTypeConstant.Boolean:return e===!0||"true"===e||e!==!1&&"false"!==e&&void 0}},e}();t.TypeConverter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=n(1),o=n(0),r=n(40),s=function(){function e(e,t){var n=this;this.messenger=new r.Messenger,this.traces=[],this.dispatchers={},this.messagingjs=e,this.custom=t,i.Config.environment===i.EnvironmentTypeConstant.Trace&&"undefined"!=typeof window&&null==o.getVariable(window,i.Config.traceVariable)&&o.setVariable(window,i.Config.traceVariable,this.traces)&&this.messenger.setDispatcher(function(e,t){return n.traces.push({target:e,context:t})})}return e.prototype.create=function(e,t){var n=t.target;if(null!=n&&0!==n.length){var i=t.type;switch(i){case a.PublisherTypeConstant.MessagingClient:if(null==this.messagingjs)return;this.dispatchers[i]=this.dispatchers[i]||this.messagingjsDispatcher.bind(this);break;case a.PublisherTypeConstant.Custom:if(null==this.custom)return;this.dispatchers[i]=this.dispatchers[i]||this.custom;break;default:return}var o=this.dispatchers[i];return this.messenger.addToken({source:e,endpoint:{publisher:t,dispatcher:o}}),this.messenger}},e.prototype.messagingjsDispatcher=function(e,t){if(null!=this.messagingjs&&null!=t){var n=this.messagingjs.create(e,t);this.messagingjs.send(n)}},e}();t.MessengerFactory=s},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(41))},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(8),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.setDispatcher=function(e){this.dispatcher=e},t.prototype.onNext=function(e,t){var n=this,i={},o=this.getTokens();o.filter(function(t){return e.some(function(e){return e===t.source})}).every(function(e){var o=e.endpoint,r=o.publisher,s=i[r.type];if(null!=s&&s.indexOf(r.target)!==-1)return!0;a.dispatch(t);var l=n.dispatcher||o.dispatcher;return null!=l&&l(r.target,t),s=i[r.type]=i[r.type]||[],s.push(r.target),!0})},t}(o.Connector);t.Messenger=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(0),o=n(12),r=n(12),s=50,l="scroll",d=function(){function e(){this.triggers={},this.tuples=[]}return e.prototype.create=function(e,t){var n=this,r=t.type;if(a.each(i.ActionTypeConstant,function(e){return e===r},!1)){var s=null!=t.tracks?new o.MatchTrigger:this.createTrigger(r),l=null!=t.tracks?t.tracks:t.elements;if(null!=l){var d=this.buildMatchList(l);d.every(function(a){var o={source:e,target:a.target,excludes:a.excludes,count:[],maximum:null!=t.times?t.times:i.TimesConstant.Default};return s.addToken(o),n.tuples.push({trigger:s,token:o}),!0})}else{var c={source:e,target:"",excludes:[],count:[],maximum:null!=t.times?t.times:i.TimesConstant.Default};s.addToken(c),this.tuples.push({trigger:s,token:c})}return s}},e.prototype.buildMatchList=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push({target:t,excludes:[]}):e.push({target:t.name,excludes:t.excludes}),e},[])},e.prototype.createTrigger=function(e){if(null!=this.triggers[e])return this.triggers[e];switch(e){case i.ActionTypeConstant.Visit:case i.ActionTypeConstant.Custom:return new o.SimpleTrigger;case i.ActionTypeConstant.Reveal:return this.keepTrigger(e,new o.MutationTrigger(this.revealStatePredicate.bind(this)));case i.ActionTypeConstant.Seen:return this.keepTrigger(e,new o.MutationTrigger(this.seenStatePredicate.bind(this)));case i.ActionTypeConstant.Scroll:return this.keepTrigger(e,new o.BroadcastTrigger(new r.ThrottleAdapter(this.scrollSubscription(),s),this.scrollStatePredicate.bind(this)));case i.ActionTypeConstant.Hover:return this.keepTrigger(e,new o.HoverTrigger);case i.ActionTypeConstant.Change:case i.ActionTypeConstant.Click:return this.keepTrigger(e,new o.EventTrigger(new r.EventAdapter(e)))}},e.prototype.keepTrigger=function(e,t){return t.on("disconnecting",this.onDisconnecting.bind(this,e)),this.triggers[e]=t,t},e.prototype.onDisconnecting=function(e){var t=this,n=this.triggers[e];null!=n&&(delete this.triggers[e],this.tuples.map(function(e,t){if(e.trigger===n)return t}).reverse().every(function(e){return null!=e&&(n.removeToken(t.tuples[e].token),t.tuples.splice(e,1)),!0}))},e.prototype.revealStatePredicate=function(e,t){var n=this.getElementState(e,t),i=n.visible,o=n.visible=a.visible(t);return i===!1&&o===!0&&a.viewport(t)},e.prototype.seenStatePredicate=function(e,t){var n=this.getElementState(e,t),i=n.visible,o=n.visible=a.visible(t);return i===!1&&o===!0},e.prototype.scrollStatePredicate=function(e,t,n){var i=this.getElementState(t,n),o=i.visible,r=i.visible=a.visible(n)&&a.viewport(n);return o===!1&&r===!0},e.prototype.getElementState=function(e,t){e.value=e.value||[];var n,i=e.value.filter(function(e){return e.element===t});return i.length>0?n=i[0]:(n={element:t,visible:!1},e.value.push(n)),n},e.prototype.scrollSubscription=function(){return{subscribe:function(e){return window.addEventListener(l,e)},unsubscribe:function(e){return window.removeEventListener(l,e)}}},e}();t.TriggerFactory=d},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=n(15),r=n(4),s="mouseenter",l="mouseleave",d=function(e){function t(){var t=e.call(this)||this;return t.targets=[],t}return i(t,e),t.prototype.addToken=function(t){e.prototype.addToken.call(this,t),null!=this.enterTrigger&&null!=this.leaveTrigger&&(this.enterTrigger.addToken(t),this.leaveTrigger.addToken(t))},t.prototype.dispatch=function(e,t){},t.prototype.connecting=function(){if(null==this.enterTrigger&&null==this.leaveTrigger){var e=new o.EventTrigger(new a.EventAdapter(s),this.onMouseEnter.bind(this)),t=new o.EventTrigger(new a.EventAdapter(l),this.onMouseLeave.bind(this));e.connect({}),t.connect({}),this.enterTrigger=e,this.leaveTrigger=t,this.getTokens().every(function(n){return e.addToken(n),t.addToken(n),!0})}},t.prototype.disconnecting=function(){null!=this.enterTrigger&&null!=this.leaveTrigger&&(this.enterTrigger.disconnect(),this.leaveTrigger.disconnect(),delete this.enterTrigger,delete this.leaveTrigger)},t.prototype.onMouseEnter=function(e,t,n){return null!=n&&t===n&&(0!==this.targets.length&&this.targets[this.targets.length-1]===n||this.targets.push(n),e.length>0&&this.push(e,{source:t,target:n}),!1)},t.prototype.onMouseLeave=function(e,t,n){return null!=n&&t===n&&this.targets.pop(),!1},t}(r.Trigger);t.HoverTrigger=d},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(4),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.dispatch=function(e,t){var n=this;if(o.begin("MatchTrigger.dispatch"),null==t||"string"!=typeof t.name)return void o.end("MatchTrigger.dispatch");var i=t.name,r=this.getTokens();r.every(function(t){return t.target===i&&n.push([t.source],{context:a({action_element_name:t.target},e)}),!0}),o.end("MatchTrigger.dispatch")},t.prototype.connecting=function(){},t.prototype.disconnecting=function(){},t}(r.Trigger);t.MatchTrigger=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),o=n(13),r=n(17),s=50,l=function(e){function t(n){var i=this;null==t.mutationAdapter&&(t.mutationAdapter=new r.ThrottleAdapter({subscribe:function(e){1===++t.ref&&(t.mutationObserver=new a.MutationObserver(e),t.mutationObserver.observe(document.body,{childList:!0,attributes:!0,characterData:!1,subtree:!0}))},unsubscribe:function(e){0===--t.ref&&t.mutationObserver.disconnect()}},s));var o=function(e,t,n){return i.predicateAction(e,t,n)};return i=e.call(this,t.mutationAdapter,o)||this,i.broadcastPredicate=o,i.mutationPredicate=n,i}return i(t,e),t.prototype.predicateAction=function(e,t,n){for(var i=e.reduce(function(e,t){return e.concat(t.length>0?t[0].map(function(e){return e.target}):[])},[]),a=n;null!=a&&a!==document;){if(0===i.length||i.indexOf(a)!==-1)return this.mutationPredicate(t,n);a=a.parentElement}return!1},t.ref=0,t}(o.BroadcastTrigger);t.MutationTrigger=l},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(47))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),a=function(){function e(e){"undefined"!=typeof window&&null!=window&&"undefined"!=typeof window.MutationObserver&&null!=window.MutationObserver?this.instance=new window.MutationObserver(e):this.instance=new i.PolyfillObserver(e)}return e.prototype.observe=function(e,t){this.instance.observe(e,t)},e.prototype.disconnect=function(){this.instance.disconnect()},e.prototype.takeRecords=function(){return this.instance.takeRecords()},e}();t.MutationObserver=a},function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),o=n(16),r=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=++e.uidCounter,this.context=o.StaticContext.getInstance()}return e.prototype.observe=function(e,t){if(e=this.context.wrapIfNeeded(e),null==t||!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n=this.context.registrationsTable.get(e);n||this.context.registrationsTable.set(e,n=[]);var o;try{for(var r=i(n),s=r.next();!s.done;s=r.next())if(o=s.value,o.observer===this){o.removeListeners(),o.options=t;break}}catch(l){d={error:l}}finally{try{s&&!s.done&&(c=r["return"])&&c.call(r)}finally{if(d)throw d.error}}o||(o=new a.Registration(this,e,t),n.push(o),this.nodes.push(e)),o.addListeners();var d,c},e.prototype.disconnect=function(){var e=this;this.nodes.forEach(function(t){for(var n=e.context.registrationsTable.get(t),i=0;i<n.length;i++){var a=n[i];if(a.observer===e){a.removeListeners(),n.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var e=this.records;return this.records=[],e},e.uidCounter=0,e}();t.PolyfillObserver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),a=function(){function e(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[],this.context=i.StaticContext.getInstance()}return e.prototype.enqueue=function(e){var t=this.observer.records,n=t.length;if(t.length>0){var i=t[n-1],a=this.context.selectRecord(i,e);if(null!=a)return void(t[n-1]=a);if(null!=i.addedNodes&&i.addedNodes.length>0&&null!=i.addedNodes[0]&&null!=e.addedNodes&&e.addedNodes.length>0&&null!=e.addedNodes[0]){var o=i.addedNodes[0];if(o.contains&&o.contains(e.addedNodes[0]))return}}else this.context.scheduleCallback(this.observer);t[n]=e},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},e.prototype.addTransientObserver=function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=this.context.registrationsTable.get(e);t||this.context.registrationsTable.set(e,t=[]),t.push(this)}},e.prototype.removeTransientObservers=function(){var e=this,t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){e.removeListeners_(t);for(var n=e.context.registrationsTable.get(t),i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1);break}},this)},e.prototype.handleEvent=function(e){var t=this;e.stopImmediatePropagation();var n,i,a;switch(e.type){case"DOMAttrModified":var o=e.attrName,r=e.relatedNode.namespaceURI;n=e.target,i=this.context.getRecord("attributes",n),i.attributeName=o,i.attributeNamespace=r,"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(a=e.prevValue),this.context.forEachAncestorAndObserverEnqueueRecord(n,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(o)!==-1||e.attributeFilter.indexOf(r)!==-1))return e.attributeOldValue?t.context.getRecordWithOldValue(a):i});break;case"DOMCharacterDataModified":n=e.target,i=this.context.getRecord("characterData",n),a=e.prevValue,this.context.forEachAncestorAndObserverEnqueueRecord(n,function(e){if(e.characterData)return e.characterDataOldValue?t.context.getRecordWithOldValue(a):i});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":n=e.relatedNode;var s=e.target,l=void 0,d=void 0;"DOMNodeInserted"===e.type?(l=[s],d=[]):(l=[],d=[s]);var c=s.previousSibling,p=s.nextSibling;i=this.context.getRecord("childList",n),i.addedNodes=l,i.removedNodes=d,i.previousSibling=c,i.nextSibling=p,this.context.forEachAncestorAndObserverEnqueueRecord(n,function(e){if(e.childList)return i})}this.context.clearRecords()},e}();t.Registration=a},function(e,i,a){function o(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;i.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a(51),i.setImmediate=t,i.clearImmediate=n},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return f[h]=i,m(h),h++}function a(e){delete f[e]}function o(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function r(e){if(g)setTimeout(r,0,e);else{var t=f[e];if(t){g=!0;try{o(t)}finally{a(e),g=!1}}}}function s(){m=function(e){t.nextTick(function(){r(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function d(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),m=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;r(t)},m=function(t){e.port2.postMessage(t)}}function p(){var e=b.documentElement;m=function(t){var n=b.createElement("script");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function u(){m=function(e){setTimeout(r,0,e)}}if(!e.setImmediate){var m,h=1,f={},g=!1,b=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():l()?d():e.MessageChannel?c():b&&"onreadystatechange"in b.createElement("script")?p():u(),y.setImmediate=i,y.clearImmediate=a}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,n(52),n(53))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function r(){f&&m&&(f=!1,m.length?h=m.concat(h):g=-1,h.length&&s())}function s(){if(!f){var e=a(r);f=!0;for(var t=h.length;t;){for(m=h,h=[];++g<t;)m&&m[g].run();g=-1,t=h.length}m=null,f=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c,p,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var m,h=[],f=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||f||a(s)},l.prototype.run=function(){
this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[]}return e}();t.PolyfillRecord=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=Date.now()%1e9;this.name="__st"+1e9*Math.random()+(e++ +"__")}return e.prototype.set=function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:Object.defineProperty(e,this.name,{value:[e,t],writable:!0}),this},e.prototype.get=function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},e.prototype["delete"]=function(e){var t=e[this.name];if(!t)return!1;var n=t[0]===e;return t[0]=t[1]=void 0,n},e.prototype.has=function(e){var t=e[this.name];return!!t&&t[0]===e},e}();t.WeakMap=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o="simple",r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.dispatch=function(e,t){var n=this,i=this.getTokens().filter(function(e){return n.verify(e,o)}).map(function(e){return e.source});this.push(i,{context:e})},t.prototype.connecting=function(){},t.prototype.disconnecting=function(){},t}(a.Trigger);t.SimpleTrigger=r},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(58))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(7),o=n(0),r=function(){function e(e){this.manifest=e,this.visits=[],this.actions=[],this.customs=[]}return e.prototype.load=function(){var e=this,t=this.manifest;o.each(t,function(t,n,r){if(null!=r&&0!==r.length&&o.each(i.ActionTypeConstant,function(e){return e===t.type},!1)){var s=t.dataset,l=t.publisher;if(null!=s&&null!=l&&a.ContextStore.registerScheme({source:r,target:l.type+"_"+l.target,common:t.type===i.ActionTypeConstant.Visit})){var d;switch(t.type){case i.ActionTypeConstant.Visit:d=e.visits;break;case i.ActionTypeConstant.Custom:d=e.customs;break;default:d=e.actions}d.push({id:r,action:t,dataset:s,publisher:l})}}})},e.prototype.getVisitRules=function(){return this.visits},e.prototype.getActionRules=function(){return this.actions},e.prototype.getCustomRules=function(){return this.customs},e}();t.RuleProvider=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=n(2),o=n(0),r=function(){function e(e,t){this.ruleProvider=e,this.dataFlowBuilder=t,this.actions=[],this.tracks=[],this.customs=[]}return Object.defineProperty(e.prototype,"version",{get:function(){return i.Config.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return i.Config.buildDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revision",{get:function(){return i.Config.revision},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var t=this;if(a.begin("AnalyticsModule.load"),this.ruleProvider.load(),this.ruleProvider.getVisitRules().filter(function(e){return!e.action.explicit}).every(function(e){var n=t.dataFlowBuilder.buildDataFlow(e);return null!=n&&(n.activate(),n.raise()),!0}),"loading"===document.readyState){var n=function(){document.removeEventListener("DOMContentLoaded",n),t.onLanding()};document.addEventListener("DOMContentLoaded",n)}else this.onLanding();a.end("AnalyticsModule.load")},e.prototype.visit=function(e){var t=this;if(a.begin("AnalyticsModule.visit"),null==this.visits){var n=[];this.ruleProvider.getVisitRules().filter(function(e){return e.action.explicit}).every(function(e){var i=t.dataFlowBuilder.buildDataFlow(e);return null!=i&&(i.activate(),n.push({dataflow:i,id:e.id})),!0}),this.visits=n}this.visits.every(function(t){var n=t.dataflow;return n.raise(e),!0}),a.end("AnalyticsModule.visit")},e.prototype.track=function(e,t){a.begin("AnalyticsModule.track");var n=o.findIndex(this.customs,function(t){return t.id===e});if(n===-1)return this.tracks.every(function(n){return n.dataflow.raise(t,{name:e}),!0}),void a.end("AnalyticsModule.track");var i=this.customs[n].dataflow;i.raise(t),a.end("AnalyticsModule.track")},e.prototype.onLanding=function(){var e=this;a.begin("AnalyticsModule.onLanding"),this.ruleProvider.getActionRules().every(function(t){var n=e.dataFlowBuilder.buildDataFlow(t);if(null!=n){n.activate();var i=null==t.action.tracks?e.actions:e.tracks;i.push({dataflow:n,id:t.id}),null==t.action.tracks&&n.raise()}return!0}),this.ruleProvider.getCustomRules().every(function(t){var n=e.dataFlowBuilder.buildDataFlow(t);return null!=n&&(n.activate(),e.customs.push({dataflow:n,id:t.id})),!0}),a.end("AnalyticsModule.onLanding")},e}();t.AnalyticsModule=r}])})}).call(t,n(117).setImmediate,n(117).clearImmediate)},function(e,t,n){(function(e,i){function a(e,t){this._id=e,this._clearFn=t}var o=n(118).nextTick,r=Function.prototype.apply,s=Array.prototype.slice,l={},d=0;t.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=d++,i=!(arguments.length<2)&&s.call(arguments,1);return l[n]=!0,o(function(){l[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete l[e]}}).call(t,n(117).setImmediate,n(117).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function r(){f&&m&&(f=!1,m.length?h=m.concat(h):g=-1,h.length&&s())}function s(){if(!f){var e=a(r);f=!0;for(var t=h.length;t;){for(m=h,h=[];++g<t;)m&&m[g].run();g=-1,t=h.length}m=null,f=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c,p,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var m,h=[],f=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||f||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e.visit().data({app_type:r("string","desk-web"),session_id:s("string","rtag_sid"),web_server_name:s("string","rtag_servername"),page_type_id:s("integer","rtag_pagetypeid"),channel_id:s("integer","rtag_cid"),user_id:s("string","rtag_uid"),currency:s("string","rtag_displaycurrency"),language:s("string","rtag_displaylanguage"),member_id:s("integer","rtag_mid"),analytics_session_id:s("string","analytics.session.id"),analytics_session_signature:s("string","analytics.session.signature"),analytics_session_expiry:s("string","analytics.session.expiry"),property_id:s("integer","rtag_hotelid"),booking_id:s("integer","rtag_bookid"),pre_booking_id:s("string","rtag_prebookid"),checkin_date:s("string","rtag_checkin"),checkout_date:s("string","rtag_checkout"),no_of_rooms:s("integer","rtag_qty"),inclusive_total_price:s("float","rtag_totalprice_lcl_taxinc"),exclusive_rooms_price:s("float","rtag_roomprice"),giftcard_earn_amount_usd:s("string","rtag_gc_earn_amt"),property_is_nha:s("string","property_is_nha"),property_is_singleroom:s("string","property_is_singleroom"),property_is_bookonrequest:s("string","property_is_bookonrequest"),search_id:s("string","rtag_search_id"),screen_width:s("integer","window.innerWidth"),screen_height:s("integer","window.innerHeight")}).publish().seen().elements(["alert-message-urgency","alert-message-cheapest-room","alert-message-great-choice","alert-message-smart-choice","panel-message-urgency","panel-message-cheapest-room","panel-message-great-choice","panel-message-smart-choice","badge-message-cheapest-room","alert-message-agoda-wont-charge-cc","include-breakfast","giftcard-earn-value","mobile-banner-money-back","mobile-banner-availability","mobile-banner-pointmax"]).data().publish().seen().elements(["banner-default","banner-giftcard"]).data({action_element_value:o("string","data-message-value")}).publish().click().elements(["transportation-button-linkout","transportation-banner","typ-thingstodo-links","confirmation-deeplink-button","hotel-name-link","free-cancellation-link","desktop-agoda-header-link","mobile-agoda-header-link","your-booking-id-link","get-new-password-link","book-another-hotel-button","book-another-room-button","manage-my-booking-button","manage-my-booking-button-new","score-item-button","booking-condition-link","desktop-customer-support-text-link","tell-friends-tc-link","tell-friends-policy-text-link","next-trip-item-link","desktop-customer-support-icon-link","typ-insurance-banner-links","why-agoda-review","why-agoda-best-price","why-agoda-customer-support","goto-agodahomes-button"]).data().publish().seen().elements(["transportation-typ-message-1"]).data({action_element_value:r("string","1")}).publish().seen().elements(["transportation-typ-message-2"]).data({action_element_value:r("string","2")}).publish().seen().elements(["transportation-typ-message-3"]).data({action_element_value:r("string","3")}).publish().create()}var a=n(116),o=a.attribute,r=a.constant,s=a.variable;e.exports=i},function(e,t){"use strict";var n=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie),i=n.split(";"),a=0;a<i.length;a++){for(var o=i[a];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},i=function(e,t){for(var n=e.split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(decodeURIComponent(a[0])===t)return decodeURIComponent(a[1])}return"0"},a=function(){var e=n("agoda.analytics");return{id:i(e,"Id"),signature:i(e,"Signature"),expiry:i(e,"Expiry")}};e.exports={getAnalyticsSession:a}},function(e,t){e.exports="<div class=\"form-group has-feedback charge-me-in\" data-bind=\"validationElement: paymentCurrencyCode\"><!-- ko component: {\r\n\t\tname: \"form-dropdown\",\r\n\t\tparams : {\r\n\t\t\tlabelText: chargeMeInText,\r\n\t\t\toptions: availablePaymentCurrencies,\r\n            optionsText: 'text',\r\n            optionsValue: 'value',\r\n            value : paymentCurrencyCode,\r\n            css: { 'has-value': ko.unwrap(paymentCurrencyCode) },\r\n\t\t\tinputAttributes: {\r\n\t\t\t\tname: 'chargeMeIn',\r\n\t\t\t\tid: 'chargeMeIn',\r\n\t\t\t\t'data-element-name': 'charge-me-in'\r\n\t\t\t},\r\n\t\t}\r\n\t} --><!-- /ko --><!-- ko ifnot: isAddMoreLifeExperiment --> <i class=\"ficon form-control-feedback\"></i><!-- /ko --> </div>"},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.availablePaymentCurrencies=e.availablePaymentCurrencies,this.chargeMeInText=e.chargeMeInText,this.paymentCurrencyCode=e.paymentCurrencyCode,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm)}return e}();e.exports=o},function(e,t){e.exports='<div class=my-saved-cards-details><!-- ko ifnot: shouldAlomostDoneTextApplied--><!-- ko if: lastStepYouAreAlmostDoneText --><!-- ko component: {\r\n            name: "almost-done",\r\n            params: {\r\n                almostDoneText: lastStepYouAreAlmostDoneText\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: ko.unwrap(paymentMethod.creditCardOnFileErrorMessage) --> <span class="alert alert-error" data-bind="text: paymentMethod.creditCardOnFileErrorMessage"></span><!-- /ko --><!-- ko if: paymentMethod.creditCardOnFileList() && paymentMethod.creditCardOnFileList().length > 0 --> <div class="table table-hover saved-payment-method-details" data-element-name=saved-cards-component> <div id=creditCardContainer data-bind="foreach: { data: displayedCreditCardOnFileList() }"> <div class=row data-bind="click: $parent.clickCreditCard, css: { \'disabled-card\': $parent.isCardDisabled($data), \'row-focus\': $parent.paymentMethod.creditCard.cardId() == $data.cardId()}, popover: !$parent.isChromeOrFirefox() ? $parent.getPopoverBindingOptions($data) : []"> <div data-bind="class: $parent.getSectionOneCssClass() "><!-- ko ifnot: $parent.isCardDisabled($data) --> <input type=radio data-bind="attr: { value: $data.cardId, \'data-payment-type-value\': $data.typeName }, checked: $parent.selectedCardId" data-element-name=saved-card-selection-option /> <label> <span class=radio-check></span> </label><!-- /ko --><!-- ko if: $parent.isCardDisabled($data) --><!-- /ko --> <div class=card-logo data-bind="attr: { title: $data.typeName }"><i class="payment-logo payment-logo-s col-sm-2" data-bind="css: $parent.getLogoClass($data)"></i></div><!-- StartMouseStatsHide --><!-- ko ifnot: $parent.isShowCvcNotRequireText($data) --> <div class=card-holder-name data-bind="html: $data.cardTypeWithMaskedLast4Digits"></div><!-- /ko --><!-- ko if: $parent.isShowCvcNotRequireText($data) --> <div class=card-holder-name> <div data-bind="html: $data.cardTypeWithMaskedLast4Digits"></div> <div class=no-cvv-text data-bind="text: $parent.paymentMethod.noCvcNeededToBookText"> </div> </div><!-- /ko --><!-- EndMouseStatsHide --> </div> <div data-bind="class: $parent.getSectionTwoCssClass(), css: { \'no-padding\': $parent.isAddMoreLifeExperiment }"><!-- ko if: !$parent.isCardDisabled($data) --><!-- ko if: $parent.isRequiredCvv() && $parent.paymentMethod.creditCard.cardId() == $data.cardId() --> <div class=cvv-block data-bind="visible: $parent.isRequiredCvv"> <div class="form-group has-feedback cvv-code" data-bind="validationElement: $parent.paymentMethod.creditCard.cvcCode,validationOptions: {insertMessages: false}, css: { \'no-padding\': $parent.isAddMoreLifeExperiment }"><!-- ko component: {\r\n                                    name: "form-input",\r\n                                    params : {\r\n                                    iconClass: \'ficon ficon-secure-icon ficon-left\',\r\n                                    value: $parent.paymentMethod.creditCard.cvcCode,\r\n                                    numericOnly: $parent.paymentMethod.creditCard.cvcCode,\r\n                                    hasFocus: $parent.hasFocusOnCvv,\r\n                                    event: { keyup: $parent.shouldNumericTypeOnlyApplied() ? $parent.limitMaxlength : \'\' },\r\n                                    inputAttributes: {\r\n                                    name: \'cvvCode\',\r\n                                    id: \'cvvCode\',\r\n                                    placeholder: $parent.paymentMethod.cvcCvvText,\r\n                                    type: $parent.shouldNumericTypeOnlyApplied() ? \'number\' : \'password\',\r\n                                    autocomplete: \'off\',\r\n                                    \'maxlength\': $parent.cvcMaxLength\r\n                                    },\r\n                                    }\r\n                                    } --><!-- /ko --> <img data-bind="attr:{ srcset: $parent.cdnUrl + \'/images/new-bf/cvv-icon.png 1x, \' + $parent.cdnUrl + \'/images/new-bf/cvv-icon@2x.png 2x\', src: $parent.cdnUrl + \'/images/new-bf/cvv-icon.png\' }" class=cvv-icon /> </div> </div><!-- /ko --><!-- ko if: $parent.isShowCvcNotRequireText($data) --> <div class="no-cvv-block no-cvv-text" data-bind="text: $parent.paymentMethod.noCvcNeededToBookText"> </div><!-- /ko --><!-- /ko --> </div> </div> </div> <div class=show-all><!-- ko if: paymentMethod.isHasMoreCreditCardOnFile() && ko.unwrap(creditCardOnFilesListCount) > maximumDisplayCreditCardOnFiles --> <td colspan=6> <a data-element-name=show-more-or-less-button href=javascript:void(0) class="simple-toggle show-all-saved-cards" id=showAllSavedCardsToggle data-bind="text: showAllSavedCardOrShowFewerCardText, click: showAllSavedCardsToggle, collapse: isShowFewerCards"></a> </td><!--/ko--> </div> </div><!--/ko--><!-- ko if: !paymentMethod.creditCardOnFileList() || paymentMethod.creditCardOnFileList().length == 0 --> <div class="alert alert-info text-center" data-bind="text: paymentMethod.noValidCreditCardsSavedToThisAccountText"></div><!-- /ko --><!-- ko if: ko.unwrap(paymentChargeOption) == 1 && paymentMethod.creditCardOnFileList().length > 0 && !hasAnyCardValidForBnpl() --> <div class="alert alert-info text-center" data-bind="text: paymentMethod.noValidCardsForPayLaterText"></div><!-- /ko --><!-- ko component: {\r\n        name: "identification-card-details",\r\n        params: {\r\n            pleaseEnterYourIdentificationNumberText: paymentMethod.pleaseEnterYourIdentificationNumberText,\r\n            identificationNumber: paymentMethod.creditCard.identificationNumber,\r\n            identificationCardNumberText: paymentMethod.identificationCardNumberText,\r\n            isFocused: isFocused.identificationNumber,\r\n            cardDetailsPattern: 1\r\n        }\r\n    } --><!-- /ko --> <div class=row> <div class=col-sm-6><!-- ko component: {\r\n            name: "billing-zip-code",\r\n            params: {\r\n                billingZipCode: paymentMethod.creditCard.billingZipCode,\r\n                billingZipCodeText: paymentMethod.billingZipCodeText,\r\n                requiredBillingZipCodePaymentMethodTypes: paymentMethod.requiredBillingZipCodePaymentMethodTypes,\r\n                creditCardType: paymentMethod.creditCard.type(),\r\n            }\r\n        } --><!-- /ko --> </div> </div><!-- ko if: availablePaymentCurrencies()\r\n        && availablePaymentCurrencies().length > 0 --> <div class=row> <div class=col-sm-6><!-- ko component: {\r\n                name: "taxid-details",\r\n                params: {\r\n                    paymentCurrency: paymentMethod.paymentCurrencyCode,\r\n                    requiredTaxIdCurrencies: paymentMethod.requiredTaxIdCurrencies,\r\n                    creditCardType: paymentMethod.creditCard.type,\r\n                    requiredTaxIdPaymentMethodTypes: paymentMethod.requiredTaxIdPaymentMethodTypes,\r\n                    taxId: paymentMethod.creditCard.taxId,\r\n                    taxIdText: paymentMethod.taxIdText,\r\n                    taxIdDetailsText: paymentMethod.taxIdDetailsText\r\n                }\r\n            } --><!-- /ko --> </div> </div><!-- /ko --><!-- ko if: availablePaymentCurrencies()\r\n                && availablePaymentCurrencies().length > 1\r\n                && paymentMethod.paymentMethodOption() === 1 --> <div class=row> <div class=col-sm-6><!-- ko component: {\r\n                name: "charge-me-in",\r\n                params: {\r\n                    availablePaymentCurrencies: availablePaymentCurrencies,\r\n                    paymentCurrencyCode: paymentMethod.paymentCurrencyCode,\r\n                    chargeMeInText: paymentMethod.chargeMeInText\r\n                }\r\n            } --><!-- /ko --> </div> </div><!-- /ko --> </div> <script type=text/html id=blockedCardsPopover><div class="blocked-cards-content">\r\n\t\t<div class="blocked-cards">\r\n\t\t\t<p data-bind="text: textContent"></p>\r\n\t\t</div>\r\n\t</div></script>'},function(e,t,n){(function(t){"use strict";var i=n(86),a=n(67),o=n(71),r=n(11),s=n(88),l=n(9),d=n(83),c=n(68),p=n(91),u=n(89),m=n(97),h=n(96),f=n(99),g=n(107),b=n(109),y=n(90),v=function(){function e(e){var n=this;this.onDisabledCcofClicked=function(e){return n.isLoggedIn()?n.setCardId(e):(n.tempCard=e,n.selectedCardId(""),t.postbox.publish(r.OPEN_LOGIN_PANEL,{email:"",isFromCcof:!0})),!0},this.isShowCvcNotRequireText=function(e){return n.isShowAssuranceMessageForNoCvv&&!n.isRequiredCvv()&&n.paymentMethod.creditCard.cardId()===e.cardId()},this.limitMaxlength=function(e,t){var i=Number(n.cvcMaxLength());t.target.value.length>i&&(t.target.value=t.target.value.substr(0,i))},this.cdnUrl=l.getPageData().cdnUrl,this.paymentMethod=e.paymentMethod,this.paymentChargeOption=e.paymentChargeOption,this.selectedPaymentMethodType=e.selectedPaymentMethodType,this.availablePaymentCurrencies=e.availablePaymentCurrencies,this.isFocused=e.isFocused,this.lastStepYouAreAlmostDoneText=e.lastStepYouAreAlmostDoneText,this.cardsNotAcceptedText=e.cardsNotAcceptedText,this.isShowCCOFForL1User=l.isDesktop()&&i.isApplied(s.ShowCcofForL1User),this.creditCardOnFilesListCount=e.creditCardOnFilesListCount;var a=l.getPageData().viewModel;a&&a.airportTransferPanel&&a.airportTransferPanel.details&&(this.isSelectedAirportTransfer=a.airportTransferPanel.details.isSelectedAirportTransfer()),this.allValidationRules=new Array,this.isAddMoreLifeExperiment=l.getFeature(p.AddMoreLifeToBookingForm),this.isRedesignPaymentCard=e.isRedesignPaymentCard,this.hasFocusOnCvv=t.observable(!e.isRequireMoreGuestDetails()),this.isDesktop=!(l.getPageData().jsonViewModel&&l.getPageData().jsonViewModel.isMobile),this.shouldAlomostDoneTextApplied=this.isDesktop&&i.isApplied(s.MakeAlmostDoneForCreditDebitCardOnly),this._experimentApiService=new y,this.shouldNumericTypeOnlyApplied=t.pureComputed(function(){return!(!l.isMobile()||!CSS.supports("( -webkit-text-security:unset )"))&&(n._experimentApiService.experimentSeen(s.SwitchToNumberKeyboardForCVC),i.isApplied(s.SwitchToNumberKeyboardForCVC))}),this.isShowCCOFForL1User&&(this.isLoggedIn=e.isLoggedIn,t.isObservable(this.paymentMethod.creditCardOnFileErrorMessage)||(this.paymentMethod.creditCardOnFileErrorMessage=t.observable("")),this._isLogginSubscription=t.postbox.subscribe(r.LOGIN_SUCCESSFUL,function(e){n.tempCard&&(n.setCardId(n.tempCard),setTimeout(function(){t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION)},0))})),this.isShowAssuranceMessageForNoCvv=t.unwrap(this.paymentMethod.isAssuranceMessageWhenCvcIsNotRequiredApplied),this._init(),this.isRedesignPaymentCard||this._setValidation(),this._subscribeEvents(),this._subscribeErrors();var o=[];this.paymentMethod.creditCardOnFileList&&(o=!this.paymentChargeOption||this.paymentChargeOption()!==d.PayLater&&this.paymentChargeOption()!==d.PayOnCheckIn?this.paymentMethod.creditCardOnFileList():this.paymentMethod.creditCardOnFileList().filter(function(e){return e.isValidForBnpl()})),this.isShowCCOFForL1User&&!t.unwrap(this.isLoggedIn)||(o.length>0?(b.instance.track("saved-card-selection-option",{action_type:"reveal",action_element_value:o[0].typeName().toString()?o[0].typeName().toString():""}),this.selectedCardId(o[0].cardId().toString())):this.isRedesignPaymentCard||t.postbox.publish(r.RESET_PAYMENT_METHOD)),this.initializeShowMoreShowLess(),this.isRedesignPaymentCard&&this._setValidation(),this.isMobile()&&(this.modalService=new f)}return e.prototype._subscribeErrors=function(){var e=this;this.paymentMethodValidationErrors=t.validation.group(this.selectedPaymentMethodType,{deep:!1,observable:!0}),this.paymentMethodValidationErrors.subscribe(function(n){n&&0===n.length&&0===e.validationErrors().length?setTimeout(function(){t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION,[e.validationErrors,e.paymentMethodValidationErrors])},0):t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION,[e.validationErrors,e.paymentMethodValidationErrors])}),this.validationErrors=t.validation.group(this.paymentMethod.creditCard.cvcCode,{deep:!1,observable:!0}),this.validationErrors.subscribe(function(n){n&&0===n.length&&0===e.paymentMethodValidationErrors().length?setTimeout(function(){t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION,[e.validationErrors,e.paymentMethodValidationErrors])},0):t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION,[e.validationErrors,e.paymentMethodValidationErrors])}),t.postbox.publish(r.CHECK_SECOND_STEP_VALIDATION,[this.validationErrors,this.paymentMethodValidationErrors])},e.prototype.initializeShowMoreShowLess=function(){var e=this;this.maximumDisplayCreditCardOnFiles=this.paymentMethod.maximumNumberDisplayedCreditCardOnFile(),this.isShowFewerCards=t.observable(!0),this.showAllSavedCardOrShowFewerCardText=t.observable(this.paymentMethod.showAllSavedCardsText()),this.isRedesignPaymentCard&&(this.creditCardOnFilesListCount=t.computed(function(){return e.paymentMethod.creditCardOnFileList()?e.paymentChargeOption&&e.paymentChargeOption()===d.PayLater?e.paymentMethod.creditCardOnFileList().filter(function(e){return e.isValidForBnpl()}).length:e.paymentMethod.creditCardOnFileList().length:0})),this.displayedCreditCardOnFileList=t.computed(function(){var n=[];return e.paymentMethod.creditCardOnFileList&&e.paymentMethod.creditCardOnFileList()?(n=e.paymentMethod.creditCardOnFileList(),!e.paymentChargeOption||e.paymentChargeOption()!==d.PayLater&&e.paymentChargeOption()!==d.PayOnCheckIn||(n=n.filter(function(e){return e.isValidForBnpl()})),e.paymentMethod.isHasMoreCreditCardOnFile()&&e.isShowFewerCards()&&(n=n.slice(0,e.maximumDisplayCreditCardOnFiles),e.isShowCCOFForL1User&&!t.unwrap(e.isLoggedIn)?e.selectedCardId(""):e.isSelectedCardInCreditCardOnFilesList(n)||e.selectFirstCard()),n):n})},e.prototype.setCardId=function(e){return!this.isCardDisabled(e)&&(this.selectedCardId(e.cardId().toString()),!0)},e.prototype.getPopoverBindingOptions=function(e){var n=void 0;return this.isCardDisabled(e)&&!this.isMobile()&&(n=new u,n.template=h.BLOCKED_CARDS_POPOVER,n.data={textContent:t.unwrap(this.cardsNotAcceptedText).replace("{0}",e.typeName().toUpperCase())},n.options={container:"body",placement:"top",trigger:"hover",template:'\n                    <div class="popover blocked-cards-container">\n                        <div class="arrow position-left"></div>\n                        <div class="popover-content"></div>\n                    </div>\n                ',html:!0}),n},e.prototype.getLogoClass=function(e){return this.isCardDisabled(e)?e.typeName()+" disabled":e.typeName()},e.prototype.isCardDisabled=function(e){return!!e.isDisabled()},e.prototype.isChromeOrFirefox=function(){return g.isChrome()||g.isFireFox()},e.prototype.openCardsNotAcceptedModal=function(e){this.cardsNotAcceptedModalBindingOptions=new m,this.cardsNotAcceptedModalBindingOptions.header.data={title:"",isCloseBtnDisplayed:!0},this.cardsNotAcceptedModalBindingOptions.body.name=h.CARDS_NOT_ACCEPTED_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.cardsNotAcceptedModalBindingOptions.body.name,n(125)),this.cardsNotAcceptedModalBindingOptions.body.data={cardsNotAcceptedText:t.unwrap(this.cardsNotAcceptedText).replace("{0}",e.typeName().toUpperCase())},this.cardsNotAcceptedModalBindingOptions.dialogCss="cards-not-accepted-modals",this.cardsNotAcceptedModalBindingOptions.options.keyboard=!0,this.modalService.open(this.cardsNotAcceptedModalBindingOptions)},e.prototype.clickCreditCard=function(e){this.isShowCCOFForL1User?this.onDisabledCcofClicked(e):this.isCardDisabled(e)?this.isMobile()&&this.openCardsNotAcceptedModal(e):this.setCardId(e),b.instance.track("saved-card-selection-option",{action_type:"click",action_element_value:e.typeName().toString()?e.typeName().toString():""})},e.prototype.isMobile=function(){return!!l.getPageData().jsonViewModel&&l.getPageData().jsonViewModel.isMobile},e.prototype.selectFirstCard=function(){this.displayedCreditCardOnFileList&&this.displayedCreditCardOnFileList()&&this.displayedCreditCardOnFileList().length>0?this.selectedCardId(this.displayedCreditCardOnFileList()[0].cardId().toString()):t.postbox.publish(r.RESET_PAYMENT_METHOD)},e.prototype.isSelectedCardInCreditCardOnFilesList=function(e){for(var t=!1,n=this.selectedCardId(),i=0;i<e.length;i++)if(this.paymentMethod.creditCardOnFileList()[i].cardId().toString()===n){t=!0;break}return t},e.prototype.updateIsShowFewerCardsAndShowAllSavedCardOrShowFewerCardText=function(){this.isShowFewerCards()?this.showAllSavedCardOrShowFewerCardText(this.paymentMethod.showFewerCardsText()):this.showAllSavedCardOrShowFewerCardText(this.paymentMethod.showAllSavedCardsText())},e.prototype.showAllSavedCardsToggle=function(){this.updateIsShowFewerCardsAndShowAllSavedCardOrShowFewerCardText()},e.prototype._init=function(){var e=this,n=new a;t.mapping.fromJS(n,{},this.paymentMethod.creditCard),this.paymentMethod.creditCard.cardId=t.observable(),this.paymentMethod.isAbleToPayWithOutCvv||(this.paymentMethod.isAbleToPayWithOutCvv=t.observable(!1)),this.selectedCardId=t.observable(""),this.paymentMethod.creditCardOnFileList().forEach(function(e){e.cvcCode||(e.cvcCode=t.observable(null)),e.cardNumber||(e.cardNumber=t.observable(null)),e.countryIdOfIssuingBank||(e.countryIdOfIssuingBank=t.observable(null)),e.issuingBank||(e.issuingBank=t.observable(null)),e.typeName||(e.typeName=t.observable(null))}),this.paymentMethod.creditCardOnFileList().forEach(function(e){e.displayExpiryDate=t.pureComputed(function(){return e.expiryMonth()+"/"+e.expiryYear().substring(2,4)})}),this.cvcMaxLength=t.pureComputed(function(){return c.getCvcMaxLength(t.unwrap(e.paymentMethod.creditCard.type))}),this._cardType=t.pureComputed(function(){return c.getCardTypeString(t.unwrap(e.paymentMethod.creditCard.type))}),this.isRequiredCvv=t.pureComputed(function(){var n;return n=!t.unwrap(e.paymentMethod.isAbleToPayWithOutCvv)||!!e.paymentChargeOption&&(e.paymentChargeOption()===d.PayLater||e.paymentChargeOption()===d.PayOnCheckIn||e.paymentChargeOption()===d.PayNow&&e.isSelectedAirportTransfer),i.isApplied(s.CvvValidation)?n||!e.paymentMethod.isAbleToPayWithOutCvv():n}),this.hasAnyCardValidForBnpl=t.pureComputed(function(){var t=!1;if(e.paymentMethod.creditCardOnFileList()&&e.paymentMethod.creditCardOnFileList().length>0)for(var n=0;n<e.paymentMethod.creditCardOnFileList().length;n++)if(e.paymentMethod.creditCardOnFileList()[n].isValidForBnpl()){t=!0;break}return t}),this.getSectionOneCssClass=t.pureComputed(function(){return e.isShowAssuranceMessageForNoCvv?"col-md-7 col-sm-12 section-one":"col-md-8 col-sm-12 section-one"}),this.getSectionTwoCssClass=t.pureComputed(function(){return e.isShowAssuranceMessageForNoCvv?"col-md-5 col-sm-12 form-group section-two":"col-md-4 col-sm-12 form-group section-two"})},e.prototype._subscribeEvents=function(){var e=this;this._selectFirstCardSubscription=t.postbox.subscribe(r.SELECT_FIRST_CARD_OF_MY_SAVE_CARD,function(){if(t.unwrap(e.paymentMethod.creditCardOnFileList)){
var n=[];if(e.paymentMethod.creditCardOnFileList){var i=e.isRedesignPaymentCard?e.paymentChargeOption&&(e.paymentChargeOption()===d.PayLater||e.paymentChargeOption()===d.PayOnCheckIn):e.paymentChargeOption&&e.paymentChargeOption()===d.PayLater||e.paymentChargeOption()===d.PayOnCheckIn;n=i?e.paymentMethod.creditCardOnFileList().filter(function(e){return e.isValidForBnpl()}):e.paymentMethod.creditCardOnFileList()}n.length?(e.selectedCardId(n[0].cardId().toString()),e.isRedesignPaymentCard&&t.isObservable(e.selectedCardId)&&(e.selectedCardId.valueHasMutated(),t.unwrap(e.paymentMethod.creditCard.cvcCode.rules).length<=2&&(e._clearCvvValidation(),e._setValidation()))):t.postbox.publish(r.RESET_PAYMENT_METHOD)}}),this._selectedCardIdSubscription=this.selectedCardId.subscribe(function(n){var i=e.paymentMethod.creditCardOnFileList(),a=i.filter(function(e){var i=t.unwrap(e.cardId);return i&&i.toString()===n});if(a&&a.length>0){var o=a[0];t.mapping.fromJS(o,{},e.paymentMethod.creditCard),t.postbox.publish(r.PAYMENT_METHOD_UPDATED),t.postbox.publish(r.HIDE_IDENTIFICATION_NUMBER),t.validation.group(e.paymentMethod.creditCard).showAllMessages(!1),e.isShowCCOFForL1User&&t.unwrap(e.paymentMethod.creditCardOnFileErrorMessage)&&e.paymentMethod.creditCardOnFileErrorMessage("")}}),t.postbox.subscribe(r.SUBMIT_SECOND_STEP,function(){e.isFocused.identificationNumber(!1)}),i.isApplied(s.CvvValidation)&&(this._cvvRulesUpdateSubscription=t.postbox.subscribe(r.IS_ABLE_TO_PAY_WITHOUT_CVV_UPDATED,function(t){e.paymentMethod.isAbleToPayWithOutCvv(!t)}))},e.prototype.validateCreditCardCvc=function(e,t){if("None"!==t)return o.isCvcValid(e,t)},e.prototype._clearCvvValidation=function(){this.allValidationRules.forEach(function(e){e.removeAll()}),this.allValidationRules.length=0},e.prototype._setValidation=function(){var e=this;this.isRedesignPaymentCard?(this.paymentMethod.creditCard.cvcCode.extend({required:{params:!0,message:" ",onlyIf:function(){return t.unwrap(e.isRequiredCvv)&&t.unwrap(e.displayedCreditCardOnFileList).length>0}},validation:{validator:function(t,n){return e.validateCreditCardCvc(t,n)},params:this._cardType,message:" ",onlyIf:function(){return t.unwrap(e.isRequiredCvv)&&t.unwrap(e.displayedCreditCardOnFileList).length>0}}}),this.allValidationRules.push(this.paymentMethod.creditCard.cvcCode.rules)):(this.paymentMethod.creditCard.cvcCode.extend({required:{params:!0,message:" ",onlyIf:this.isRequiredCvv},validation:{validator:function(t,n){return e.validateCreditCardCvc(t,n)},params:this._cardType,message:" ",onlyIf:this.isRequiredCvv}}),this.allValidationRules.push(this.paymentMethod.creditCard.cvcCode.rules))},e.prototype.dispose=function(){this._selectedCardIdSubscription&&this._selectedCardIdSubscription.dispose(),this._selectFirstCardSubscription&&this._selectFirstCardSubscription.dispose(),this._cvvRulesUpdateSubscription&&this._cvvRulesUpdateSubscription.dispose(),this.allValidationRules.forEach(function(e){e.removeAll()}),this.paymentMethodValidationErrors&&this.paymentMethodValidationErrors.dispose(),this.validationErrors&&this.validationErrors.dispose()},e}();e.exports=v}).call(t,n(3))},function(e,t){e.exports='<div data-bind="html: cardsNotAcceptedText"></div>'},function(e,t){e.exports='<!-- ko ifnot: isFakePaymentMethodSelected--> <div class="well confident-message m-t-1 m-b-0"> <ul class="list-default m-b-0" data-bind="foreach: messageItemList()"> <li data-bind="html: $data.text, css: $data.className"></li> </ul> </div><!-- /ko --><!-- ko if: isFakePaymentMethodSelected --> <div id=div-fake-payment-method-test> <div class=please-select-another-payment-option> <span data-bind=text:paymentDetails.paymentMethod.pleaseSelectAnotherPaymentOptionErrorText></span> </div> <div class=sorry-payment-option-not-available-container> <table> <tr> <td class=td-warning-triangle-format> <i class="ficon ficon-triangle-warning"></i> </td> <td> <span class=sorry-text data-bind=text:paymentDetails.paymentMethod.paymentOptionIsNotCurrentlyAvailableErrorText></span> </td> </tr> </table> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(68),a=n(10),o=n(21),r=n(70),s=n(88),l=n(86),d=n(93),c=function(){function e(e){var n=this;this.isEnableJapanConvenienceStoreFakePaymentMethods=l.isApplied(s.EnableJapanConvenientStoreFakePaymentOptions),this.paymentDetails=e.paymentDetails,this.selectedPaymentMethod=e.selectedPaymentMethod,null!==t.unwrap(e.selectedPaymentMethodObs)&&(this.selectedPaymentMethodObs=e.selectedPaymentMethodObs),null!==t.unwrap(e.responseFormattedPaymentAmount)&&(this._responseFormattedPaymentAmount=e.responseFormattedPaymentAmount),this.youHaveChosenToPayByTextComputed=t.computed(function(){var i=null,o=null;void 0!==n.selectedPaymentMethodObs&&null!==t.unwrap(n.selectedPaymentMethodObs)&&(o=n.selectedPaymentMethodObs());var r=e.isRedesignPaymentCard?o:n.selectedPaymentMethod;return void 0!==r&&null!==r&&(i=a.format(n.paymentDetails.paymentMethod.youHaveChosenToPayByText(),r.text())),i}),this.pleaseNoteThatChoosingToPayByTextComputed=t.computed(function(){var i=null,o=null;void 0!==n.selectedPaymentMethodObs&&null!==t.unwrap(n.selectedPaymentMethodObs)&&(o=n.selectedPaymentMethodObs());var r=e.isRedesignPaymentCard?o:n.selectedPaymentMethod;return void 0!==r&&null!==r&&(i=a.format(n.paymentDetails.paymentMethod.pleaseNoteThatChoosingToPayByText(),r.text(),n._responseFormattedPaymentAmount())),i}),this.paymentsToAgodaAreHandledByTextComputed=t.computed(function(){switch(i.getThirdPartyPaymentServiceGateway(t.unwrap(n.paymentDetails.selectedPaymentMethodType))){case r.OneTwoThree:return n.paymentDetails.paymentMethod.paymentsToAgodaAreHandledByOneTwoThreeText();case r.Doku:return n.paymentDetails.paymentMethod.paymentsToAgodaAreHandledByDoKuText();case r.MolPay:return n.paymentDetails.paymentMethod.paymentsToAgodaAreHandledByMolPayText();case r.Adyen:return n.paymentDetails.paymentMethod.paymentsToAgodaAreHandledByAdyenText();case r.CounterService:return n.paymentDetails.paymentMethod.paymentsToAgodaAreHandledByCounterServiceText();default:return""}}),this.messageItemList=t.computed(function(){var e=[];return void 0!==n.paymentDetails.selectedPaymentMethodType&&(i.isOnlineBanking(n.paymentDetails.selectedPaymentMethodType())||i.isConvenientStore(n.paymentDetails.selectedPaymentMethodType())?(n.paymentDetails.selectedPaymentMethodType()===o.Kplus&&e.push({className:"ensure-you-have-installed-kplus",text:n.paymentDetails.paymentMethod.ensureYouHaveInstalledKappOnMobileDeviceText()}),i.isConvenientStore(n.paymentDetails.selectedPaymentMethodType())?(e.push({className:"payment-instructions-will-be-provided",text:n.paymentDetails.paymentMethod.paymentInstructionsWillBeProvidedText()}),n.paymentDetails.selectedPaymentMethodType()===o.SevenElevenTH&&l.isApplied(s.IncreaseTimeoutSevenEleven)?e.push({className:"please-complete-your-payment-in-two-hours",text:n.paymentDetails.paymentMethod.timeoutText}):e.push({className:"please-complete-your-payment-in-two-hours",text:n.paymentDetails.paymentMethod.pleaseCompleteYourPaymentWithinTwoHoursText()})):n.paymentDetails.selectedPaymentMethodType()!==o.Kplus&&e.push({className:"forwarded-to-banks-website",text:n.paymentDetails.paymentMethod.youWillNowBeForwardedToBanksWebsiteText()}),t.unwrap(n.paymentDetails.paymentMethod.showChargeInBankCurrencyMessage)&&e.push({className:"charged-in-bank-currency",text:n.paymentDetails.paymentMethod.youWillBeChargedInTheCurrencyOfTheBankText()}),e.push({className:"payments-are-handled-by",text:n.paymentsToAgodaAreHandledByTextComputed()}),i.isRequiresProcessingFee(n.paymentDetails.selectedPaymentMethodType())&&(i.isConvenientStore(n.paymentDetails.selectedPaymentMethodType())?e.push({className:"your-payment-point-provider",text:n.paymentDetails.paymentMethod.yourPaymentPointProviderMayChargeProcessingFeeText()}):e.push({className:"processing-fee",text:n.paymentDetails.paymentMethod.yourBankMayChargeProcessingFeeText()}))):(n.paymentDetails.selectedPaymentMethodType()!==o.WeChat&&e.push({className:"chosen-to-pay-by",text:n.youHaveChosenToPayByTextComputed()}),e.push({className:"note-that-choosing-to-pay-by",text:n.pleaseNoteThatChoosingToPayByTextComputed()})),t.unwrap(n.paymentDetails.paymentMethod.isDownTime)&&e.push({className:"system-maintenance",text:n.paymentDetails.paymentMethod.thisPaymentMethodMayBeOfflineDuringSystemMaintenanceText()})),e}),this.isFakePaymentMethodSelected=t.computed(function(){return!(void 0===n.paymentDetails.selectedPaymentMethodType||!n.isEnableJapanConvenienceStoreFakePaymentMethods||!d.isFakePaymentMethodNumber(n.paymentDetails.selectedPaymentMethodType()))})}return e.prototype.isOnlineBankingOrConvenientStoreSelected=function(){return i.isOnlineBanking(this.paymentDetails.selectedPaymentMethodType())||i.isConvenientStore(this.paymentDetails.selectedPaymentMethodType())},e.prototype.isRequiresProcessingFee=function(){return i.isRequiresProcessingFee(this.paymentDetails.selectedPaymentMethodType())},e}();e.exports=c}).call(t,n(3))},function(e,t){e.exports="<!-- union pay details starts --> <div class=union-pay-credit-card-details> <div class=row> <div class=\"col-sm-6 form-group has-feedback card-number\" data-element-name=card-number-error data-bind=\"validationElement: paymentMethod.creditCard.cardNumber\"><!-- ko component: {\r\n\t\t\t\tname: \"form-input\",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: cardNumberText,\r\n\t\t\t\t\tvalue: paymentMethod.creditCard.cardNumber,\r\n\t\t\t\t\tccFormat: { value: paymentMethod.creditCard.cardNumber,\r\n\t\t\t\t\tpaymentMethodType: paymentMethod.creditCard.type },\r\n\t\t\t\t\thasFocus: isFocused.cardNumber,\r\n                    iconClass: 'ficon-secure-icon ficon-left hidden',\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: 'cardNumber',\r\n\t\t\t\t\t\tid: 'cardNumber',\r\n\t\t\t\t\t\ttype: 'tel',\r\n\t\t\t\t\t\t'data-element-name': 'card-number',\r\n\t\t\t\t\t\tautocomplete: 'off',\r\n\t\t\t\t\t\t'maxlength': ccNumberMaxLengthAfterFormatted\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div><!-- ko if: requireIdNumber--> <div class=\"col-sm-6 form-group has-feedback phone-number\" data-element-name=up-mobile-phone-number-error data-bind=\"validationElement: paymentMethod.creditCard.mobilePhoneNumber\"><!-- ko component: {\r\n\t\t\t\tname: \"form-input\",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: paymentMethod.mobileNumberText,\r\n\t\t\t\t\tvalue: paymentMethod.creditCard.mobilePhoneNumber\r\n                    intlTelInput: combinedPhoneNumber,\r\n                    phoneCharacterOnly: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    css: { 'has-value': ko.unwrap(paymentMethod.creditCard.mobilePhoneNumber) != null },\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: 'mobilePhoneNumber',\r\n\t\t\t\t\t\tid: 'mobilePhoneNumber',\r\n\t\t\t\t\t\ttype: 'tel',\r\n\t\t\t\t\t\t'data-element-name': 'up-mobile-phone-number',\r\n\t\t\t\t\t\tautocomplete: 'off',\r\n\t\t\t\t\t\tmaxlength: '16'\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div><!-- /ko --> </div><!-- ko if: paymentMethod.creditCard.cardClass() === 1 --> <div class=row> <div class=\"col-sm-6 form-group has-feedback expiry-date\" data-bind=\"validationElement: paymentMethod.creditCard.expiryDate\"><!-- ko ifnot: isAddMoreLifeExperiment --> <label class=control-label data-bind=\"text: paymentMethod.expiryDateText\"></label> <div class=row> <div class=\"col-xs-6 expiry-month\"> <select class=form-control name=expiryMonth id=expiryMonth data-element-name=up-expiry-month data-bind=\"options: expiryMonthList,\r\n                            value: paymentMethod.creditCard.expiryMonth,\r\n                            optionsCaption: 'mm',\r\n                            valueAllowUnset: true,\r\n                            allowEmpty,\r\n                            selectElement\"></select> </div> <div class=\"col-xs-6 expiry-year\"> <select class=form-control name=expiryYear id=expiryYear data-element-name=up-expiry-year data-bind=\"options: expiryYearList,\r\n                            value: paymentMethod.creditCard.expiryYear,\r\n                            optionsCaption: 'yyyy',\r\n                            valueAllowUnset: true,\r\n                            allowEmpty,\r\n                            selectElement\"></select> </div> </div> <span class=help-block data-element-name=up-expiry-date-error data-bind=\"validationMessage: paymentMethod.creditCard.expiryDate\"></span> <i class=\"ficon form-control-feedback\"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <div class=row> <div class=\"col-xs-6 expiry-month form-select\"> <select class=form-control name=expiryMonth id=expiryMonth data-element-name=up-expiry-month data-bind=\"options: expiryMonthList,\r\n                            value: paymentMethod.creditCard.expiryMonth,\r\n                            optionsCaption: 'mm',\r\n                            valueAllowUnset: true,\r\n                            allowEmpty,\r\n                            selectElement\"></select> <i class=\"ficon ficon-desktop-ic-black-down select-icon\"></i> </div> <div class=\"col-xs-6 expiry-year form-select\"> <select class=form-control name=expiryYear id=expiryYear data-element-name=up-expiry-month data-bind=\"options: expiryYearList,\r\n                            value: paymentMethod.creditCard.expiryYear,\r\n                            optionsCaption: 'yyyy',\r\n                            valueAllowUnset: true,\r\n                            allowEmpty,\r\n                            selectElement\"></select> <i class=\"ficon ficon-desktop-ic-black-down select-icon\"></i> </div> </div> <label class=floating-label data-bind=\"text: paymentMethod.expiryDateText\"></label> <span class=help-block data-bind=\"validationMessage: paymentMethod.creditCard.expiryDate\"></span><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback cvv-code\" data-bind=\"validationElement: paymentMethod.creditCard.cvcCode\"><!-- ko component: {\r\n\t\t\t\tname: \"form-input\",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: paymentMethod.cvcCvvText,\r\n\t\t\t\t\tvalue: paymentMethod.creditCard.cvcCode,\r\n\t\t\t\t\tnumericOnly: paymentMethod.creditCard.cvcCode,\r\n                    iconClass: 'ficon-secure-icon ficon-left hidden',\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: 'cvvCode',\r\n\t\t\t\t\t\tid: 'cvvCode',\r\n\t\t\t\t\t\ttype: 'password',\r\n\t\t\t\t\t\t'data-element-name': 'cvv-code',\r\n\t\t\t\t\t\tautocomplete: 'off',\r\n\t\t\t\t\t\tmaxlength: cvcMaxLength\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/new-bf/cvv-icon.png 1x, ' + cdnUrl + '/images/new-bf/cvv-icon@2x.png 2x',\r\n\t\t\t\tsrc: cdnUrl + '/images/new-bf/cvv-icon.png' }\" class=cvv-icon /> </div> </div><!-- /ko --> <div class=row> <div class=col-sm-12> <div class=\"pull-left flip\"> <i class=\"ficon ficon-24 ficon-room-promotion-for-mobiledeal ficon-left\"></i> </div> <div class=\"mobile-phone-text flip\"> <span data-bind=\"html: paymentMethod.pleaseEnterTheMobileNumberRegisteredWithYourBankText\"></span> </div> </div> </div><!-- ko if: isUnionPayGen2 --> <div class=row> <div class=col-sm-6><!-- ko component: {\r\n            name: \"card-registered-phone-details\",\r\n            params: {\r\n                paymentMethod: paymentMethod\r\n            }\r\n        } --><!-- /ko --> </div> </div><!-- /ko --><!-- ko ifnot: isUnionPayGen2 --><!-- ko ifnot: requireIdNumber--> <div class=row> <div class=\"col-sm-6 form-group has-feedback phone-number\" data-bind=\"validationElement: paymentMethod.creditCard.mobilePhoneNumber\"><!-- ko component: {\r\n\t\t\t\tname: \"form-input\",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: paymentMethod.mobileNumberText,\r\n\t\t\t\t\tvalue: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    intlTelInput: combinedPhoneNumber,\r\n                    phoneCharacterOnly: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    css: { 'has-value': ko.unwrap(paymentMethod.creditCard.mobilePhoneNumber) != null },\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: 'mobilePhoneNumber',\r\n\t\t\t\t\t\tid: 'mobilePhoneNumber',\r\n\t\t\t\t\t\ttype: 'tel',\r\n\t\t\t\t\t\t'data-element-name': 'up-mobile-phone-number',\r\n\t\t\t\t\t\tautocomplete: 'tel',\r\n\t\t\t\t\t\tautocorrect: 'off',\r\n\t\t\t\t\t\tmaxlength: '16'\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div> </div><!-- /ko --><!-- /ko --><!-- ko if: paymentMethod.creditCard.cardClass() === 1 --> <p data-bind=\"text: paymentMethod.pleaseEnsureYourMobileIsSwitchedOnForOtpText\"></p><!-- /ko --><!-- ko if: paymentMethod.creditCard.cardClass() === 2 --> <p data-bind=\"text: paymentMethod.pleaseEnsureYourMobileIsSwitchedOnText\"></p> <p data-bind=\"text: paymentMethod.customersWhoHaventUsedThisServiceBeforeMayBeAskedForANationalIdText\"></p><!-- /ko --><!-- ko if: paymentMethod.creditCard.cardClass() === 2 --><!-- ko component: {\r\n            name: \"identification-card-details\",\r\n            params: {\r\n                pleaseEnterYourIdentificationNumberText: paymentMethod.pleaseEnterYourIdentificationNumberText,\r\n                identificationNumber: paymentMethod.creditCard.identificationNumber,\r\n                identificationCardNumberText: paymentMethod.identificationCardNumberText,\r\n                isFocused: isFocused.identificationNumber,\r\n                cardDetailsPattern: 2,\r\n                isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n            }\r\n        } --><!-- /ko --><!-- /ko --> </div> <!-- union pay details ends -->"},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(81),o=n(105),r=n(71),s=n(11),l=n(52),d=n(9),c=n(21),p=n(75),u=n(88),m=n(91),h=function(e){function n(n){var i=this;e.call(this,n),this.cdnUrl=d.getPageData().cdnUrl,this.isFocused=n.isFocused,this.isAddMoreLifeExperiment=d.getFeature(m.AddMoreLifeToBookingForm),this.isUnionPayGen2=t.pureComputed(function(){return i.selectedPaymentMethodType()===c.UnionPayDebitCard&&d.getFeature(u.UnionPayGen2DebitCard)}),this.paymentMethod.creditCard&&(this._init(),this._setValidation(),this._subscribeEventForCreditCardNumber(),this.combinedPhoneNumber=this.getCombinedPhoneNumber()),t.postbox.subscribe(s.SUBMIT_SECOND_STEP,function(){i.isFocused.cardNumber(!1),i.isFocused.mobilePhoneNumber(!1),i.isFocused.identificationNumber(!1)})}return i(n,e),n.prototype.getCombinedPhoneNumber=function(){var e=t.unwrap(this.paymentMethod.creditCard.mobilePhoneCountryCode)&&"default"!==this.paymentMethod.creditCard.mobilePhoneCountryCode()?this.paymentMethod.creditCard.mobilePhoneCountryCode():"",n=t.unwrap(this.paymentMethod.creditCard.mobilePhoneNumber);return n&&n.indexOf(e)<0?t.observable(e+n):t.observable(n)},n.prototype._initIntlTelInput=function(){var e=this;this.isUnionPayGen2()||(this.paymentMethod.creditCard.mobilePhoneCountryCode=t.observable("default"),this.paymentMethod.creditCard.mobilePhoneNumber(this.paymentMethod.phoneNumber())),this._intlTelInputService.onCountryChangeCallback(function(t,n){e.paymentMethod.creditCard.mobilePhoneCountryCode("+"+n.dialCode)},this),this._mobilePhoneNumberSubscription=this.paymentMethod.creditCard.mobilePhoneNumber.subscribe(function(t){e._intlTelInputService.intlTelInput("setNumber",t)})},n.prototype._init=function(){var e=this;this.requireIdNumber=t.observable(!1),this._intlTelInputService=new l("mobilePhoneNumber"),this.cardNumberText=t.pureComputed(function(){return e.paymentMethod.creditCard.cardClass()===a.Credit?e.paymentMethod.creditCardNumberText():e.paymentMethod.debitCardNumberText()}),this._initIntlTelInput(),this._subscribeUnionPayProperties()},n.prototype._subscribeUnionPayProperties=function(){var e=this;this._cardClassSubscription=this.paymentMethod.creditCard.cardClass.subscribe(function(){e.requireIdNumber(!1)}),this._displayRequiredIdNumberSubscription=t.postbox.subscribe(s.DISPLAY_REQUIRE_ID_NUMBER_MESSAGE,function(){e.requireIdNumber(!0)})},n.prototype.getCardNumberMaxLength=function(){return this.paymentMethod.creditCard.cardClass()===a.Debit?"22":"19"},n.prototype.validateCreditCardNumber=function(e,t){var n=this.paymentMethod.creditCard.cardClass()===a.Credit?"UnionPay":"UnionPayDebitCard";return r.isValid(e,n)},n.prototype.validationCreditCardNumberRule=function(){var t=this,n=e.prototype.validationCreditCardNumberRule.call(this);return n.push({validator:function(){return!t.paymentMethod.creditCardNumberErrorMessage()||""===t.paymentMethod.creditCardNumberErrorMessage()},message:function(){return p.getValidationMessage(t.paymentMethod.creditCardNumberErrorMessage(),"cardNumber-span")},onlyIf:function(){return!t.isFocused.cardNumber()&&t.selectedPaymentMethodType()===c.UnionPayDebitCard}}),n},n.prototype._subscribeEventForCreditCardNumber=function(){var e=this;this._creditCardNumberSubscription=this.paymentMethod.creditCard.cardNumber.subscribe(function(){e.paymentMethod.creditCardNumberErrorMessage?e.paymentMethod.creditCardNumberErrorMessage(""):e.paymentMethod.creditCardNumberErrorMessage=t.observable(""),t.validation.validateObservable(e.paymentMethod.creditCard.cardNumber)})},n.prototype._isCvcRequired=function(){return t.unwrap(this.paymentMethod.creditCard.cardClass)===a.Credit},n.prototype._isExpiryRequired=function(){return t.unwrap(this.paymentMethod.creditCard.cardClass)===a.Credit},n.prototype._setValidation=function(){var e=this;this.paymentMethod.creditCard.mobilePhoneNumber.extend({required:{message:p.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span"),params:!0},pattern:{message:p.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span"),params:this.paymentMethod.mobilePhoneRegex()},validation:[{validator:function(){return!e.paymentMethod.creditCard.mobilePhoneCountryCode()||"default"===e.paymentMethod.creditCard.mobilePhoneCountryCode()||e._intlTelInputService.intlTelInput("getNumber").length<=20&&e._intlTelInputService.intlTelInput("isValidNumber")},message:p.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span")},{validator:function(){return e.paymentMethod.creditCard.mobilePhoneCountryCode()&&"default"!==e.paymentMethod.creditCard.mobilePhoneCountryCode()},message:p.getValidationMessage(this.paymentMethod.pleaseEnterCountryCodeText(),"countrycode-span")},{validator:function(){return!e.paymentMethod.creditCard.mobilePhoneCountryCode()||"default"===e.paymentMethod.creditCard.mobilePhoneCountryCode()||e._intlTelInputService.intlTelInput("getNumber").length>=8&&e._intlTelInputService.intlTelInput("isValidNumber")},message:p.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span")}]}),this.paymentMethod.creditCard.mobilePhoneNumber()&&this.paymentMethod.creditCard.mobilePhoneNumber.isModified(!0),this.allValidationRules.push(this.paymentMethod.creditCard.mobilePhoneNumber.rules)},n.prototype.dispose=function(){this._cardClassSubscription&&this._cardClassSubscription.dispose(),this._creditCardNumberSubscription&&this._creditCardNumberSubscription.dispose(),this._displayRequiredIdNumberSubscription&&this._displayRequiredIdNumberSubscription.dispose(),e.prototype.dispose.call(this)},n}(o);e.exports=h}).call(t,n(3))},,,,,,,,,function(e,t,n){(function(e,t){"use strict";var i=n(6),a=n(7),o=n(139),r=n(12),s=n(60),l=n(464),d=n(9),c=n(467),p=n(64),u=n(63),m=n(152),h=n(109),f=n(548),g=n(61),b=n(8);e(document).ready(function(){i.load(),a.load(),u.init(),s.register(),r.register(),l.register(),p.load();var e=window.bfsplitvm,y=function(){var e,i=d.getPageData(),a=t.mapping.fromJS(i.jsonViewModel);if(i.viewModel=a,e=new c(a),o.register(),setTimeout(function(){n.e(21,function(t){var i=n(549),a=new i;a.init(e.page.idleWarningTimeout(),e.page.idleTimeout(),e.page.idleTimeoutAfterSubmitBooking(),e.page.chatInfo)})},5e3),!document.addEventListener){var r=new m;r.countByMetricName("InternetExplorerLessThanNineLandingPage")}t.applyBindings(e);var s=document.querySelector(".overlay");s&&setTimeout(function(){s.parentNode&&s.parentNode.removeChild(s)},200),h.load("landing"),h.instance.visit(),f.execute()};if(e){var v=window.initPromise;v.then(function(e){var t=JSON.parse(e);return null!=t.errorAction?void b.redirect(t.errorAction):(setTimeout(function(){var e=t.appliedExperiments.split(",");e.forEach(function(e){document.querySelector("html").classList.add(e.toLocaleLowerCase())}),t.analyticsRetargetingModel.retargetingScriptVariable.forEach(function(e){window[e.key]=e.value}),t.analyticsRetargetingModel.visitAnalyticsVariable.forEach(function(e){window[e.key]=e.value});var n=window.initTealiumScript;if(null!=n)n(t.analyticsRetargetingModel.tealiumScriptEnvironment),window.initTealiumScript=void 0;else{var i=window.initTealiumScriptV2;null!=i&&(i(t.analyticsRetargetingModel),window.initTealiumScriptV2=void 0)}},0),d.updateJsonViewModel(JSON.parse(t.jsonViewModel)),d.updateClientSideExperiment(JSON.parse(t.clientSideExperimentsJson)),void y())})["catch"](function(e){var t=new g;t.goToErrorPageWithErrorCode(e.toString())})}else y()})}).call(t,n(2),n(3))},function(e,t,n){(function(t){"use strict";var i=n(86),a=n(88),o=function(){function e(){}return e.register=function(){t.components.register("gift-card-redemption",{template:n(140),viewModel:n(141)}),t.components.register("agoda-header",{template:n(145),viewModel:n(146)}),t.components.register("agoda-footer",{template:n(147),viewModel:n(148)}),t.components.register("booking-details",{template:n(149),viewModel:n(150)}),t.components.register("booking-details-review",{template:n(155),viewModel:n(156)}),t.components.register("progress-tracker",{template:n(157),viewModel:n(158)}),t.components.register("guest-details",{template:n(159),viewModel:n(160)}),t.components.register("guest-more-details",{template:n(173),viewModel:n(174)}),t.components.register("guest-name",{template:n(175),viewModel:n(176)}),t.components.register("guest-visa",{template:n(177),viewModel:n(178)}),t.components.register("guest-flight",{template:n(179),viewModel:n(180)}),t.components.register("pinyin-panel",{template:n(181),viewModel:n(182)}),t.components.register("room-confident-messages",{template:n(185),viewModel:n(186)}),t.components.register("room-details-benefits",{template:n(188),viewModel:n(186)}),t.components.register("room-details",{template:n(189),viewModel:n(186)}),t.components.register("checkin-checkout-details-panel",{template:n(190),viewModel:n(191)}),t.components.register("special-requests",{template:n(192),viewModel:n(193)}),t.components.register("urgency-message",{template:n(194),viewModel:n(195)}),t.components.register("price-details",{template:n(196),viewModel:n(197)}),t.components.register("email-login",{template:n(199),viewModel:n(200)}),t.components.register("mobile-login",{template:n(201),viewModel:n(202)}),t.components.register("login-panel",{template:n(203),viewModel:n(204)}),t.components.register("login-panel-v2",{template:n(320),viewModel:n(204)}),t.components.register("forgot-password-mobile",{template:n(321),viewModel:n(322)}),t.components.register("password-verification",{template:n(323),viewModel:n(324)}),t.components.register("rewards-redemption",{template:n(325),viewModel:n(326)}),t.components.register("promo-code-redemption",{template:n(328),viewModel:n(329)}),t.components.register("airline-promotion-redemption",{template:n(331),viewModel:n(332)}),t.components.register("payment-charge-option-selector",{template:n(333),viewModel:n(334)}),t.components.register("payment-details",{template:n(79),viewModel:n(80)}),t.components.register("almost-done",{template:n(336),viewModel:n(337)}),t.components.register("dynamic-card",{template:n(101),viewModel:n(102)}),t.components.register("direct-card",{template:n(103),viewModel:n(104)}),t.components.register("direct-card-wrapper",{template:n(338),viewModel:n(339)}),t.components.register("charge-me-in",{template:n(121),viewModel:n(122)}),t.components.register("billing-zip-code",{template:n(340),viewModel:n(92)}),t.components.register("taxid-details",{template:n(341),viewModel:n(94)}),t.components.register("identification-card-details",{template:n(342),viewModel:n(343)}),t.components.register("saved-cards",{template:n(123),viewModel:n(124)}),t.components.register("redirect-payment",{template:n(126),viewModel:n(127)}),t.components.register("union-pay-debit-card",{template:n(128),viewModel:n(129)}),t.components.register("money-back-details",{template:n(344),viewModel:n(345)}),t.components.register("your-booking-includes",{template:n(346),viewModel:n(347)}),t.components.register("arrival-time",{template:n(348),viewModel:n(349)}),t.components.register("terms-and-privacy",{template:n(350),viewModel:n(351)}),t.components.register("fast-login-panel",{template:n(352),viewModel:n(353)}),t.components.register("user-menu",{template:n(354),viewModel:n(355)}),t.components.register("fast-facebook-login",{template:n(356),viewModel:n(357)}),t.components.register("facebook-login-button",{template:n(358),viewModel:n(359)}),t.components.register("banner",{template:n(360),viewModel:n(361)}),t.components.register("coupon-panel",{template:n(373),viewModel:n(374)}),t.components.register("total-saving-banner",{template:n(375),viewModel:n(376)}),t.components.register("captcha",{template:n(377),viewModel:n(378)}),t.components.register("bestprice-guarantee",{template:n(379),viewModel:n(380)}),t.components.register("installment-panel",{template:n(381),viewModel:n(382)}),i.isApplied(a.AddImageToHotelDetails)?t.components.register("hotel-details",{template:n(383),viewModel:n(384)}):t.components.register("hotel-details",{template:n(385),viewModel:n(384)}),t.components.register("special-requests-room-and-bed",{template:n(386),viewModel:n(387)}),t.components.register("component-selector",{template:n(389),viewModel:n(390)}),t.components.register("accordion-item",{template:n(393),viewModel:n(394)}),t.components.register("accordion-group",{template:n(395),viewModel:n(396)}),t.components.register("bf-accordion",{template:n(397),viewModel:n(398)}),t.components.register("payment-methods-accordion",{template:n(399),viewModel:n(400)}),t.components.register("travel-with-kids",{template:n(404),viewModel:n(405)}),t.components.register("self-service-free",{template:n(406),viewModel:n(407)}),(i.isApplied(a.AirportTransferPanel)||i.isApplied(a.AirportTransferPanelOnMobileWeb))&&(t.components.register("airport-transfer",{template:n(408),viewModel:n(409)}),t.components.register("airport-transfer-payment-modal",{template:n(413),viewModel:n(414)})),t.components.register("payment-options-panel",{template:n(415),viewModel:n(416)}),t.components.register("message-list",{template:n(417),viewModel:n(418)}),t.components.register("promotion-message",{template:n(419),viewModel:n(420)}),t.components.register("gift-card-earn",{template:n(421),viewModel:n(422)}),t.components.register("why-agoda",{template:n(423),viewModel:n(424)}),i.isApplied(a.CreditCardPromoEligiblePanel)&&t.components.register("creditcard-promo-eligible",{template:n(425),viewModel:n(426)}),i.isApplied(a.AddContactDetailsSummaryOnStep2)&&t.components.register("contact-details-summary",{template:n(427),viewModel:n(428)}),t.components.register("installment-details",{template:n(429),viewModel:n(430)}),t.components.register("card-registered-phone-details",{template:n(431),viewModel:n(432)}),t.components.register("china-compliance-notification",{template:n(433),viewModel:n(434)}),t.components.register("form-input",{template:n(435),viewModel:n(436)}),t.components.register("form-dropdown",{template:n(437),viewModel:n(438)}),t.components.register("form-textarea",{template:n(439),viewModel:n(440)}),t.components.register("component-wrapper",{template:n(441),viewModel:n(442)
}),t.components.register("about-payment",{template:n(443),viewModel:n(444)}),t.components.register("payment-method-dropdown",{template:n(445),viewModel:n(446)}),t.components.register("payment-type-panel",{template:n(448),viewModel:n(449)}),t.components.register("leaving-booking-form",{template:n(450),viewModel:n(451)}),t.components.register("agoda-vip-banner",{template:n(454),viewModel:n(455)}),i.isApplied(a.UmrahMVP)&&(t.components.register("travel-packages-summary",{template:n(456),viewModel:n(457)}),t.components.register("ground-transportation-details",{template:n(458),viewModel:n(459)})),t.components.register("hotel-treat-banner",{template:n(460),viewModel:n(461)}),t.components.register("session-countdown",{template:n(462),viewModel:n(463)})},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class=gift-card-redemption data-element-name=gift-card-redemption-panel><!-- ko if: isExperimentLOY3185Applied --> <dl class="dl-horizontal dd-align-right m-b-0 gift-card-balance"> <dt> <strong><span data-bind="text: giftCardRedemption.saveMoneyByUsingAgodaGiftCardsText"></span></strong> </dt> <dd> <span class=balance-container> <i class="ficon ficon-left balance-container-icon" data-bind="css: iconClass()"></i> <strong class=balance-container-text data-bind="text: giftCardRedemption.formattedGiftCardBalance"></strong> </span> </dd> </dl><!-- /ko --><!-- ko ifnot: isExperimentLOY3185Applied --> <dl class="dl-horizontal dd-align-right m-b-0 gift-card-balance"> <dt> <i class="ficon ficon-left" data-bind="css: iconClass()"></i> <strong><span data-bind="text: giftCardRedemption.balanceText"></span></strong> </dt> <dd><strong data-bind="text: giftCardRedemption.formattedGiftCardBalance"></strong></dd> </dl><!-- /ko --><!-- ko if: giftCardRedemption.isSoftLogin() --> <div class="panel panel-default bg-white signin-container" data-element-name=login-to-use-agodacash data-bind="click: signIn, attr: { ac-balance: giftCardRedemption.formattedGiftCardBalance}"> <span class=redemption-signin data-bind="text: giftCardRedemption.signInToUseAgodaCashText"></span> </div><!-- /ko --><!-- ko ifnot: giftCardRedemption.isSoftLogin() --> <fieldset><!-- ko ifnot: isAddMoreLifeExperiment --> <div class="form-group gift-card-redemption-choice-container"> <div class=radio> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=saveGiftCardForLaterRadio data-bind="checkedValue: 0, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span data-bind="text: giftCardRedemption.saveMyGiftCardForLaterText"></span> </label> </div> <div class=radio data-bind="visible: !giftCardRedemption.canStayForFree()"> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemFullGiftCardBalanceRadio data-bind="checkedValue: 1, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span><strong data-bind="html: giftCardRedemption.redeemMyFullGiftCardBalanceOfXText"></strong></span> </label> </div> <div class=radio data-bind="visible: giftCardRedemption.canStayForFree"> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemGiftCardForFreeStayRadio data-bind="checkedValue: 2, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span><strong data-bind="html: giftCardRedemption.stayForFreeRedeemXText"></strong></span> </label> </div> <div class=radio> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemSpecificGiftCardAmountRadio class=sensitive data-bind="checkedValue: 3, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span data-bind="text: giftCardRedemption.chooseSpecificGiftCardAmountText"></span> </label> </div> </div><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <div class="form-group no-padding gift-card-redemption-choice-container"> <div class=radio> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=saveGiftCardForLaterRadio data-bind="checkedValue: 0, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span data-bind="text: giftCardRedemption.saveMyGiftCardForLaterText"></span> </label> </div> <div class=radio data-bind="visible: !giftCardRedemption.canStayForFree()"> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemFullGiftCardBalanceRadio data-bind="checkedValue: 1, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span><strong data-bind="html: giftCardRedemption.redeemMyFullGiftCardBalanceOfXText"></strong></span> </label> </div> <div class=radio data-bind="visible: giftCardRedemption.canStayForFree"> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemGiftCardForFreeStayRadio data-bind="checkedValue: 2, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span><strong data-bind="html: giftCardRedemption.stayForFreeRedeemXText"></strong></span> </label> </div> <div class=radio> <label> <input type=radio data-element-name=gift-card-redemption name=giftCardRedemptionChoice id=redeemSpecificGiftCardAmountRadio class=sensitive data-bind="checkedValue: 3, checked: giftCardRedemption.giftCardRedemptionChoice"/> <span data-bind="text: giftCardRedemption.chooseSpecificGiftCardAmountText"></span> </label> </div> </div><!-- /ko --><!-- ko if: giftCardRedemption.giftCardRedemptionChoice() == 3 --><!-- ko ifnot: isAddMoreLifeExperiment --> <div class=form-group> <p data-bind="text: giftCardRedemption.enterTheAmountText"></p> <div class=input-group> <span class=input-group-btn> <button data-element-name=redeem-gift-card-with-none class="btn btn-primary redeem-none" type=button data-bind="text: giftCardRedemption.noneText, click: redeemNone"></button> </span><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: giftCardRedemption.formattedGiftCardRedeemAmount,\r\n                        hasFocus: formattedGiftCardRedeemAmountHasFocus,\r\n                        inputAttributes: {\r\n                            id: \'redeemAmount\',\r\n                            type: \'text\',\r\n                            class: \'form-control text-center gift-card-redeem-amount\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> <span class=input-group-btn> <button data-element-name=redeem-gift-card-with-max class="btn btn-primary redeem-max" type=button data-bind="text: giftCardRedemption.maxText, click: redeemMax"></button> </span> </div> </div><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <div class="form-group no-padding"> <p data-bind="text: giftCardRedemption.enterTheAmountText"></p> <div class=input-group> <span class=input-group-btn> <button data-element-name=redeem-gift-card-with-none class="btn btn-primary redeem-none" type=button data-bind="text: giftCardRedemption.noneText, click: redeemNone"></button> </span><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: giftCardRedemption.formattedGiftCardRedeemAmount,\r\n                        hasFocus: formattedGiftCardRedeemAmountHasFocus,\r\n                        inputAttributes: {\r\n                            id: \'redeemAmount\',\r\n                            type: \'text\',\r\n                            class: \'form-control text-center gift-card-redeem-amount\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> <span class=input-group-btn> <button data-element-name=redeem-gift-card-with-max class="btn btn-primary redeem-max" type=button data-bind="text: giftCardRedemption.maxText, click: redeemMax"></button> </span> </div> </div><!-- /ko --><!-- /ko --><!-- ko if: errorMessage != "" --> <span class="help-block error-message" data-bind="text: errorMessage"></span><!-- /ko --> </fieldset> <div class="alert alert-success stay-for-free m-b-0" id=greatNewsYouCanStayForFreeText greatnewsyoucanstayforfreetext data-bind="visible: giftCardRedemption.canStayForFree"> <span data-bind="text: giftCardRedemption.greatNewsYouCanStayForFreeText"> </span> </div> <div class=expire-first-text id=expireFirstText> <span data-bind="text: giftCardRedemption.expireFirstText"> </span> </div><!-- /ko --> </div>'},function(e,t,n){(function(t){"use strict";var i=n(142),a=n(9),o=n(143),r=n(88),s=n(86),l=n(91),d=function(){function e(e){this.giftCardRedemption=e.giftCardRedemption,this.guestDetails=e.guestDetails,this.isAddMoreLifeExperiment=a.getFeature(l.AddMoreLifeToBookingForm),this._init(),this._subscribeEvents(),this.installmentDetailsMaster=e.installmentDetailsMaster}return e.prototype.redeemMax=function(){this.giftCardRedemption.formattedGiftCardRedeemAmount(this.giftCardRedemption.maxGiftCardRedeemAmount().toString())},e.prototype.redeemNone=function(){this.giftCardRedemption.formattedGiftCardRedeemAmount("0")},e.prototype.dispose=function(){this._formattedGiftCardRedeemAmountHasFocusSubscription&&this._formattedGiftCardRedeemAmountHasFocusSubscription.dispose(),this._formattedGiftCardRedeemAmountSubscription&&this._formattedGiftCardRedeemAmountSubscription.dispose(),this._giftCardRedemptionChoiceSubscription&&this._giftCardRedemptionChoiceSubscription.dispose()},e.prototype.signIn=function(){var e=new o;e.signIn(this.guestDetails.customer.email())},e.prototype._init=function(){var e=0;this.giftCardRedemption.formattedGiftCardRedeemAmount||(this.giftCardRedemption.formattedGiftCardRedeemAmount=t.observable("0")),this.giftCardRedemption&&this.giftCardRedemption.giftCardRedemptionChoice&&this.giftCardRedemption.giftCardRedemptionChoice()>0&&(e=this.giftCardRedemption.giftCardRedemptionChoice()),this.isExperimentLOY3185Applied=s.isApplied(r.GiftCardDisplayRedeemBoxForSoftLogin);var n=s.isApplied(r.NewAgodaCashIcon),i=n?"ficon-16 ficon-agoda-cash":this.isExperimentLOY3185Applied?"ficon-cash-line-new":"ficon-cash-s";this.formattedGiftCardRedeemAmountHasFocus=t.observable(!1),this.formattedRedeemedAmount=t.observable("0"),this.minimumAmountForGateWay=t.observable(0),this.minimumGiftCardRedeemAmount=t.observable(0),this.minimumGiftCardRedeemUsdAmount=t.observable(0),this.minimumUsdAmountForGateway=t.observable(0),this.giftCardRedemption.giftCardRedemptionChoice(e),this.errorMessage=t.observable(""),this.formattedRedeemedAmountHasFocus=t.observable(!1),this.giftcardRedeemSignIn=t.observable(""),this.iconClass=t.observable("ficon-18 "+i+" agodacash")},e.prototype._handleGiftCardRedemptionResponse=function(e){if(this._formattedGiftCardRedeemAmountSubscription.dispose(),e.isSuccess)this.minimumAmountForGateWay(e.minimumAmountForGateWay),this.minimumGiftCardRedeemAmount(e.minimumGiftCardRedeemAmount),this.minimumGiftCardRedeemUsdAmount(e.minimumGiftCardRedeemUsdAmount),this.minimumUsdAmountForGateway(e.minimumUsdAmountForGateway),this.giftCardRedemption.formattedGiftCardRedeemAmount(e.formattedGiftCardRedeemAmount),this.errorMessage(""),this.installmentDetailsMaster&&this.installmentDetailsMaster(e.installmentDetailsMaster);else if(e.errorList){var t=e.errorList[0];this.errorMessage(t.message)}this._subscribeFormattedGiftCardRedeemAmount()},e.prototype._onGiftCardRedeemAmountChanged=function(e){var t=this;if(e&&!isNaN(e)){var i=Number(e);i>=0&&i<=this.giftCardRedemption.maxGiftCardRedeemAmount()?(this._lastRedeemedAmount=i,!function(e){var n=new o;n.redeemGiftCard(i).then(function(e){return t._handleGiftCardRedemptionResponse(e)})}(n)):(i<0&&this._updateRedeemAmount((i*-1).toString()),i>this.giftCardRedemption.maxGiftCardRedeemAmount()&&this._updateMaxRedeemAmount())}},e.prototype._updateRedeemAmount=function(e){this.giftCardRedemption.formattedGiftCardRedeemAmount(e)},e.prototype._updateMaxRedeemAmount=function(){this.giftCardRedemption.formattedGiftCardRedeemAmount(this.giftCardRedemption.maxGiftCardRedeemAmount().toString())},e.prototype._onGiftCardRedemptionChoiceChanged=function(e){switch(this.errorMessage(""),Number(e)){case i.SaveForLater:this.redeemNone();break;case i.RedeemFullGiftCardBalance:this.redeemMax();break;case i.StayForFree:this.redeemMax();break;case i.SpecificGiftCardAmount:}},e.prototype._subscribeFormattedGiftCardRedeemAmount=function(){var e=this;this._formattedGiftCardRedeemAmountSubscription=this.giftCardRedemption.formattedGiftCardRedeemAmount.subscribe(function(t){e._onGiftCardRedeemAmountChanged(t)})},e.prototype._subscribeEvents=function(){var e=this;this._subscribeFormattedGiftCardRedeemAmount(),this._giftCardRedemptionChoiceSubscription=this.giftCardRedemption.giftCardRedemptionChoice.subscribe(function(t){e._onGiftCardRedemptionChoiceChanged(t)}),this._formattedGiftCardRedeemAmountHasFocusSubscription=this.formattedGiftCardRedeemAmountHasFocus.subscribe(function(t){t?e.giftCardRedemption.formattedGiftCardRedeemAmount(""):e.giftCardRedemption.formattedGiftCardRedeemAmount(e._lastRedeemedAmount?e._lastRedeemedAmount.toString():"0")})},e}();e.exports=d}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){e[e.SaveForLater=0]="SaveForLater",e[e.RedeemFullGiftCardBalance=1]="RedeemFullGiftCardBalance",e[e.StayForFree=2]="StayForFree",e[e.SpecificGiftCardAmount=3]="SpecificGiftCardAmount"}(n||(n={})),e.exports=n},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(144),s=function(){function e(){this._apiEndPointService=new a}return e.prototype.redeemGiftCard=function(e){var n=this._apiEndPointService.create("giftCardRedemption/redeemGiftCards"),s={giftCardAmount:e},l=a.registerApiCall(t.post(n,s),r.RedeemGiftCard);return l.then(function(e){return i.postbox.publish(o.PRICE_DETAILS_UPDATED,e.priceDetails),e.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,e.priceDetails.smartChoiceYouSaveText),e})},e.prototype.signIn=function(e){i.postbox.publish(o.OPEN_LOGIN_PANEL,e)},e}();e.exports=s}).call(t,n(2),n(3))},function(e,t){"use strict";var n;!function(e){e[e.UpdateEmail=0]="UpdateEmail",e[e.UpdateUserEmail=1]="UpdateUserEmail",e[e.RedeemGiftCard=2]="RedeemGiftCard",e[e.UpdateAirlinePromotion=3]="UpdateAirlinePromotion",e[e.GetPseudoCouponRoom=4]="GetPseudoCouponRoom",e[e.Logout=5]="Logout",e[e.LoginV2=6]="LoginV2",e[e.FacebookLogin=7]="FacebookLogin",e[e.FacebookAutoLogin=8]="FacebookAutoLogin",e[e.UpdatePromoCode=9]="UpdatePromoCode"}(n||(n={})),e.exports=n},function(e,t){e.exports="<!-- head starts --> <nav style=display:none data-bind=\"style: {display: 'block'}\" class=\"navbar navbar-default\"> <div class=container> <div class=navbar-header> <div class=navbar-brand itemscope=\"\" itemtype=http://schema.org/Organization><!-- ko if: ko.unwrap(progress) === 3 --> <a data-element-name=desktop-agoda-header-link id=agodaHeaderLogoDesktop class=\"agoda-header-logo hidden-xs\" target=_blank href=# itemprop=url data-bind=\"attr: { href: agodaHeader.homeUrl }\"> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/agoda-logo-desktop-1.png 1x, ' + cdnUrl + '/images/MVC/default/agoda-logo-desktop-1@2X.png 2x',\r\n                                src: cdnUrl + '/images/MVC/default/agoda-logo-desktop-1.png' }\" itemprop=logo alt=www.agoda.com /><!-- ko if: secondaryLogoSuffix --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png 1x, ' + cdnUrl + '/images/MVC/default/logo-2x-' + secondaryLogoSuffix + '.png 2x',\r\n                                src: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png' }\" itemprop=logo onerror='this.style.display=\"none\"'/><!-- /ko --> </a> <a data-element-name=mobile-agoda-header-link id=agodaHeaderLogo class=\"agoda-header-logo table-visible-xs hidden-sm hidden-md hidden-lg\" target=_blank href=# itemprop=url data-bind=\"attr: { href: agodaHeader.homeUrl }\"> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/agoda-logo.png 1x, ' + cdnUrl + '/images/MVC/default/agoda-logo@2X.png 2x',\r\n                            src: cdnUrl + '/images/MVC/default/agoda-logo.png' }\" itemprop=logo width=89 height=37 alt=www.agoda.com /><!-- ko if: secondaryLogoSuffix --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png 1x, ' + cdnUrl + '/images/MVC/default/logo-2x-' + secondaryLogoSuffix + '.png 2x',\r\n                            src: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png' }\" itemprop=logo onerror='this.style.display=\"none\"'/><!-- /ko --> </a><!-- /ko --><!-- ko if: ko.unwrap(progress) !== 3  --> <div data-element-name=desktop-agoda-header-nolink class=\"agoda-header-logo hidden-xs\" target=_blank> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/agoda-logo-desktop-1.png 1x, ' + cdnUrl + '/images/MVC/default/agoda-logo-desktop-1@2X.png 2x',\r\n                        src: cdnUrl + '/images/MVC/default/agoda-logo-desktop-1.png' }\" itemprop=logo alt=www.agoda.com /><!-- ko if: secondaryLogoSuffix --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png 1x, ' + cdnUrl + '/images/MVC/default/logo-2x-' + secondaryLogoSuffix + '.png 2x',\r\n                                src: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png' }\" itemprop=logo onerror='this.style.display=\"none\"'/><!-- /ko --> </div> <div data-element-name=mobile-agoda-header-nolink class=\"agoda-header-logo table-visible-xs hidden-sm hidden-md hidden-lg\" target=_blank> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/agoda-logo.png 1x, ' + cdnUrl + '/images/MVC/default/agoda-logo@2X.png 2x',\r\n                            src: cdnUrl + '/images/MVC/default/agoda-logo.png' }\" itemprop=logo width=89 height=37 alt=www.agoda.com /><!-- ko if: secondaryLogoSuffix --> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png 1x, ' + cdnUrl + '/images/MVC/default/logo-2x-' + secondaryLogoSuffix + '.png 2x',\r\n                                src: cdnUrl + '/images/MVC/default/logo-' + secondaryLogoSuffix + '.png' }\" itemprop=logo onerror='this.style.display=\"none\"'/><!-- /ko --> </div> <!-- /ko --> </div><!-- ko if: agodaHeader.progressTracker --><!-- ko component: {\r\n                name: \"progress-tracker\",\r\n                params: {\r\n                    progressTracker: agodaHeader.progressTracker,\r\n                    progress: progress,\r\n                    isCreditCardRequired: isCreditCardRequired,\r\n                    hasSecondaryLogoSuffix: secondaryLogoSuffix\r\n                }\r\n            } --><!-- /ko --><!-- /ko --> <div class=\"call-center pull-right flip table-visible-xs hidden-sm hidden-md hidden-lg\"> <a data-element-name=mobile-customer-support-icon-link class=customer-support-icon target=_blank href=# data-bind=\"attr: { href: agodaHeader.customerSupportUrl }\"><i class=\"ficon ficon-22 ficon-left ficon-callcenter\"></i></a> <a data-element-name=mobile-customer-support-text-link class=customer-support-text target=_blank href=# data-bind=\"text: agodaHeader.customerSupportText, attr: { href: agodaHeader.customerSupportUrl }\"></a> </div><!-- ko if: ko.unwrap(progress) === 1 --><!-- ko component: {\r\n                    name: \"user-menu\",\r\n                    params: params.userMenuData\r\n                }--><!-- /ko --><!-- /ko --> </div> </div> </nav> <!-- head ends -->"},function(e,t,n){(function(t){"use strict";var i=n(9),a=function(){function e(e){this.agodaHeader=e.agodaHeader,this.progress=e.progress,this.isCreditCardRequired=e.isCreditCardRequired,this.cdnUrl=i.getPageData().cdnUrl,this.secondaryLogoSuffix=t.unwrap(e.agodaHeader.secondaryLogoSuffix),this.params=e}return e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports='<!-- footer starts --> <div class="row partner"> <div class="col-xs-12 text-center"> <div class=hidden-xs> <p data-bind="text: agodaFooter.allMaterialHereinDesktopText "> </p> <p data-bind="text: agodaFooter.partOfPricelineDesktopText"> </p> </div> <div class="visible-xs white-text"> <p data-bind="text: agodaFooter.allMaterialHereinMobileText "> </p> <p data-bind="text: agodaFooter.partOfPricelineMobileText"> </p> </div> <div class=hidden-xs> <ul class="list-inline m-b-0 footer-icon-list"> <li><i class="icon icon-agoda"></i></li> <li><i class="icon icon-priceline"></i></li> <li><i class="icon icon-kayak"></i></li> <li><i class="icon icon-rentalcars"></i></li> <li><i class="icon icon-bcom"></i></li> <li><i class="icon icon-opentable"></i></li> </ul> </div> <small data-bind="text : agodaFooter.serverNameText"></small> </div> </div> <!-- footer ends -->'},function(e,t){"use strict";var n=function(){function e(e){this.agodaFooter=e}return e}();e.exports=n},function(e,t){e.exports='<div class=booking-details data-bind="template: {afterRender: renderComplete}"> <div class=visible-xs> <h4 class=m-b-0><!-- ko ifnot: shouldRemoveLinkFromHotelName --> <a class=hotel-name data-element-name=hotel-name-link target=_blank data-bind="text: bookingDetails.hotelDetails.name, attr: { title: bookingDetails.hotelDetails.name, href: referralUrl }" href=#></a><!-- /ko--><!-- ko if: shouldRemoveLinkFromHotelName --> <span class=hotel-name data-element-name=hotel-name-no-link data-bind="text: bookingDetails.hotelDetails.name, attr: { title: bookingDetails.hotelDetails.name }"> </span><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i data-bind="css: bookingDetails.hotelDetails.starRatingFontIcon() + \' \' + bookingDetails.hotelDetails.starRatingColor(), popover : starRatingPopoverBindingOptions" class="ficon text-warning ficon-s ficon-right"></i><!-- /ko--><!-- ko ifnot: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i data-bind="css: \'ficon-star-\' + bookingDetails.hotelDetails.starRating()" class="ficon text-warning ficon-s ficon-right"></i><!-- /ko--> </h4> <address class="m-t-1 m-b-2"> <span data-bind="text: bookingDetails.hotelDetails.address"></span> </address> </div> <div class="media media-ribbon media-xs-responsive"><!-- ko ifnot: isPhone --> <div class=media-left><!-- ko ifnot: isBetterLayoutForReviews  --><!-- ko if: bookingDetails.hotelDetails.reviewScore() >= 7 --> <div class="ribbon ribbon-left"> <span class="ribbon-content review-score" data-bind="text: bookingDetails.hotelDetails.reviewScoreDescription"></span><!-- ko if: bookingDetails.hotelDetails.baseOnReviews --> <small class="ribbon-content review-number" data-bind="html: bookingDetails.hotelDetails.baseOnReviews"></small><!-- /ko--> </div><!-- /ko--><!-- /ko --><!-- ko if: (isCrossOutRateDiscountRibbonVisible && ( isBetterLayoutForReviews || bookingDetails.hotelDetails.reviewScore() < 7 ))  --> <div class="crossout-discount-ribbon hidden-xs hidden-sm" data-bind="foreach: bookingDetails.formattedCrossOutRateDiscountOrderedTexts "> <div data-bind="text: $data, class: $parent.containsNumber($data) ? \'discount-number\' : \'discount-text\'"></div> </div><!-- /ko --><!-- ko if: ko.unwrap(shouldShowThumbnailImages) || ko.unwrap(shouldShowRoomAndHotelThumbnailImages) --> <div class="media-object hidden-xs hidden-sm" data-bind={css:hotelImageWidthClassName197}> <div class="media-object hotel-image" data-bind="css:hotelImageWidthClassName197,style: {backgroundImage: \'url(\\\'\' + selectedHotelImageUrl() +\'\\\')\'}, popover: thumbnailImagesPopoverOptions()[0], popupMouseOver:\'thumbnail-popover\'"></div> <div class="thumbnail-bottom pull-left flip" data-bind="css:hotelImageWidthClassName197, foreach: thumbnailImages"> <div class="media-object hotel-image" data-bind="\r\n                            css: $parent.mediaObject63,\r\n                            style: {backgroundImage: \'url(\\\'\' + $data +\'\\\')\'},\r\n                            popover: $parent.thumbnailImagesPopoverOptions()[$index() + 1],\r\n                            popupMouseOver: \'thumbnail-popover\'\r\n                        "> </div> </div> </div> <div class="media-object visible-xs-block visible-sm-block hotel-image hotel-placeholder-image" data-bind=css:hotelImageWidthClassName200> <div class=media-object data-bind="css:hotelImageWidthClassName200,style: {backgroundImage: \'url(\\\'\' + bookingDetails.hotelDetails.panoramaHotelImageUrl()+\'\\\')\'}"></div> </div><!-- /ko --><!-- ko ifnot: ko.unwrap(shouldShowThumbnailImages) || ko.unwrap(shouldShowRoomAndHotelThumbnailImages) --> <div class="media-object hotel-image hotel-placeholder-image" data-bind={css:hotelImageWidthClassName197}> <div class="media-object hidden-xs" data-bind="css:hotelImageWidthClassName197,style: {backgroundImage: \'url(\\\'\' + bookingDetails.hotelDetails.squareHotelImageUrl()+\'\\\')\'}"></div> <div class="media-object visible-xs-block" data-bind="css:hotelImageWidthClassName197,style: {backgroundImage: \'url(\\\'\' + bookingDetails.hotelDetails.panoramaHotelImageUrl()+\'\\\')\'}"></div> </div><!-- /ko--> </div><!-- /ko --> <div class=media-body> <div class=hidden-xs> <h4 class=m-b-0><!-- ko ifnot: shouldRemoveLinkFromHotelName --> <a class=hotel-name data-element-name=hotel-name-link target=_blank data-bind="text: bookingDetails.hotelDetails.name, attr: { title: bookingDetails.hotelDetails.name, href: referralUrl }" href=#></a><!-- /ko--><!-- ko if: shouldRemoveLinkFromHotelName --> <span class=hotel-name data-element-name=hotel-name-no-link data-bind="text: bookingDetails.hotelDetails.name, attr: { title: bookingDetails.hotelDetails.name }"> </span><!-- /ko--><!-- ko if: ko.unwrap(bookingDetails.hotelDetails.isPapiStarRatingApplied) && !ko.unwrap(bookingDetails.shouldShowAgodaHomesLogo()) --> <i data-bind="css: bookingDetails.hotelDetails.starRatingFontIcon() + \' \' + bookingDetails.hotelDetails.starRatingColor(), popover : starRatingPopoverBindingOptions" class="ficon text-warning ficon-s"></i><!-- /ko--><!-- ko ifnot: bookingDetails.hotelDetails.isPapiStarRatingApplied --><!-- ko if: bookingDetails.hotelDetails.starRating() > 0 --> <i data-bind="css: \'ficon-star-\' + bookingDetails.hotelDetails.starRating()" class="ficon text-warning ficon-s mt-1"></i><!-- /ko--><!-- ko ifnot: bookingDetails.hotelDetails.starRating() > 0 --> <i class="text-warning ficon-s"></i><!-- /ko--><!-- /ko--> </h4><!-- ko if: bookingDetails.shouldShowAgodaHomesLogo --> <p class=agoda-homes-badge> <i class="ficon ficon-logo-ah"></i> <span data-bind="text: bookingDetails.agodaHomesText()"></span> </p><!-- ko if: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i data-bind="css: bookingDetails.hotelDetails.starRatingFontIcon() + \' \' + bookingDetails.hotelDetails.starRatingColor(), popover : starRatingPopoverBindingOptions" class="ficon text-warning ficon-s m-t-1 m-b-0"></i><!-- /ko --><!-- /ko--> <address class="m-t-1 m-b-2"> <span data-bind="text: bookingDetails.hotelDetails.address"></span> </address> </div> <dl class="dl-horizontal dl-horizontal-left"><!-- ko if: isMobile --><!-- ko ifnot: isPhone --> <dt data-bind="text: bookingDetails.locationText() + \' :\'"></dt> <dd id=location class=location-mobile> <span data-bind="text: bookingDetails.location"></span><!-- ko if: isShowInGoogleMapsLinkDisplayed --> <a target=_blank href=# data-bind="attr: { href: bookingDetails.hotelDetails.hotelMapUrl }, text: bookingDetails.showInGoogleMapsText"></a><!-- /ko --> </dd><!-- /ko --><!-- /ko --> <dt data-bind="text: bookingDetails.checkinText() + \' :\'"></dt> <dd id=checkin data-bind="text: bookingDetails.checkin"></dd> <dt data-bind="text: bookingDetails.checkoutText() + \' :\'"></dt> <dd id=checkout data-bind="text: bookingDetails.checkout"></dd> <dt data-bind="text: bookingDetails.stayText() + \' :\'"></dt> <dd id=occupancyDetails class=occupancy-details data-bind="text: bookingDetails.occupancy"></dd><!-- ko if:bookingDetails.isMaxOccupancyWithChildren && bookingDetails.capacity --> <dt data-bind="text: bookingDetails.capacityText() + \' :\'"></dt> <dd id=capacity data-bind="text: bookingDetails.capacity"></dd><!-- /ko --><!-- ko if: isMobile && bookingDetails.roomTypeListText --><!-- ko ifnot: isPhone --> <dt data-bind="text: bookingDetails.roomText() + \' :\'"></dt> <dd id=room class=room data-bind="text: bookingDetails.roomTypeListText"></dd><!-- /ko --><!-- /ko --><!-- ko ifnot: isMobile --> <dt data-bind="text: bookingDetails.locationText() + \' :\'"></dt> <dd id=location> <span data-bind="text: bookingDetails.location"></span><!-- ko if: isShowInGoogleMapsLinkDisplayed --> <a target=_blank href=# data-bind="attr: { href: bookingDetails.hotelDetails.hotelMapUrl }, text: bookingDetails.showInGoogleMapsText"></a><!-- /ko --> </dd><!-- /ko --><!-- ko if: isShowClickToCheckText && bookingDetails.bookingStatusText --> <dt data-bind="text: bookingDetails.bookingStatusText"></dt> <dd id=pending-host class=room data-bind="html: bookingDetails.clickToCheckText"></dd><!-- /ko --> </dl> </div> </div><!-- ko ifnot: isPhone --><!-- ko ifnot: isBetterLayoutForReviews --><!-- ko if: isShowReviewSnippet && ko.unwrap(bookingDetails.hotelDetails.reviewSnippet) --> <div class="review-snippet well m-t-2 m-b-0"> <span class="review-snippet-icon ficon ficon-mmb-reviews ficon-18"></span> <div class=review-snippet-text data-bind="text: bookingDetails.hotelDetails.reviewSnippet"></div> </div><!-- /ko--><!-- /ko--><!-- /ko--> </div>'},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(151),o=n(152),r=n(9),s=n(89),l=n(153),d=n(154),c=function(){function e(e){var n=this;if(this.bookingDetails=e.bookingDetails,this.isBetterLayoutForReviews=e.isBetterLayoutForReviews,this.isShowInGoogleMapsLinkDisplayed=e.isShowInGoogleMapsLinkDisplayed,this.isShowClickToCheckText=e.isShowClickToCheckText,this.isShowReviewSnippet=e.isShowReviewSnippet,this.isChangeRoomSelection=e.isChangeRoomSelection,this.isMobile=e.isMobile,this.referralUrl=e.referralUrl,this.scrollToMultiRoomSuggestionUrl=e.scrollToMultiRoomSuggestionUrl,this.shouldShowRoomAndHotelThumbnailImages=e.bookingDetails.shouldShowRoomAndHotelThumbnailImages?e.bookingDetails.shouldShowRoomAndHotelThumbnailImages:t.observable(!1),this.shouldShowThumbnailImages=t.observable(!1),this.thumbnailImageUrlList=t.observable([]),this.selectedHotelImageUrl=t.observable(""),this.initializeThumbnaiImage(),this.isCrossOutRateDiscountRibbonVisible=t.unwrap(e.bookingDetails.formattedCrossOutRateDiscountOrderedTexts)&&e.bookingDetails.formattedCrossOutRateDiscountOrderedTexts().length>0,t.unwrap(this.bookingDetails.hotelDetails.isPapiStarRatingApplied)){var i=t.unwrap(this.bookingDetails.hotelDetails.starRatingTooltipContent);i&&(this.starRatingPopoverBindingOptions=new s,this.starRatingPopoverBindingOptions.options.content=this.bookingDetails.hotelDetails.starRatingTooltipContent)}if(this.shouldShowRoomAndHotelThumbnailImages()){var a=t.observable(e.bookingDetails.roomAndHotelThumbnailUrls()[0]).extend({preloadImage:null});a.subscribe(function(t){0===t&&(n.shouldShowRoomAndHotelThumbnailImages(!1),n.initializeHotelImageThumbnailImages(e.bookingDetails))}),this.thumbnailImageUrlList(e.bookingDetails.hotelDetails.hotelThumbnailUrls().slice(0,4)),this.selectedHotelImageUrl(e.bookingDetails.roomAndHotelThumbnailUrls()[0])}else this.initializeHotelImageThumbnailImages(e.bookingDetails);this._measurementService=new o,this.hotelImageWidthClassName197=t.observable("media-object-197"),this.hotelImageWidthClassName200=t.observable("media-object-200"),this.mediaObject63=t.observable("media-object-63 hotel-placeholder-image-63"),this.isPhone=null!=r.getPageData()&&null!=r.getPageData().jsonViewModel&&r.getPageData().jsonViewModel.isPhone,this.shouldRemoveLinkFromHotelName=null!=r.getPageData().jsonViewModel&&!(r.getPageData().jsonViewModel.progress===l.Typ)}return e.prototype.renderComplete=function(){t.postbox.publish(i.SEND_CRITICAL_MARK,d.BookingDetails)},e.prototype.onMouseOver=function(e){this.selectedHotelImageUrl(e)},e.prototype.onMouseOut=function(){t.unwrap(this.shouldShowRoomAndHotelThumbnailImages)?this.selectedHotelImageUrl(this.bookingDetails.roomAndHotelThumbnailUrls()[0]):t.unwrap(this.shouldShowThumbnailImages)&&this.selectedHotelImageUrl(this.bookingDetails.hotelDetails.hotelThumbnailUrls()[0]);
},e.prototype.initializeThumbnaiImage=function(){var e=this;this.thumbnailImages=t.computed(function(){return e.thumbnailImageUrlList()}),this.thumbnailImagesPopoverOptions=t.computed(function(){if(e.shouldShowThumbnailImages()||e.shouldShowRoomAndHotelThumbnailImages()){for(var t=r.getPageData().isRtl,n=e.thumbnailImageUrlList(),i=new Array(n.length),o=0,s=n.length;o<s;o++){var l={imageUrl:e.thumbnailImageUrlList()[o],isRtl:t};i[o]=new a(l)}return e.thumbnailImageUrlList(n.slice(1)),i}})},e.prototype.initializeHotelImageThumbnailImages=function(e){e.hotelDetails.hotelThumbnailUrls&&e.hotelDetails.hotelThumbnailUrls()&&e.hotelDetails.hotelThumbnailUrls().length>=2&&this.shouldShowThumbnailImages(!0),this.shouldShowThumbnailImages()&&(this.thumbnailImageUrlList(e.hotelDetails.hotelThumbnailUrls().slice(0,4)),this.selectedHotelImageUrl(e.hotelDetails.hotelThumbnailUrls()[0]))},e.prototype.containsNumber=function(e){return null!=e.match(/\d+/g)},e}();e.exports=c}).call(t,n(3))},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(89),o=function(e){function t(t){e.call(this),t&&(this.options.delay={show:0,hide:0},this.options.html=!0,this.options.content='<img src="'+t.imageUrl+'" />',this.options.placement=t.isRtl?"left":"right",this.options.template='<div class="popover thumbnail-popover"><div class="popover-content" /></div>')}return i(t,e),t.prototype.removePopOver=function(){return this.template=null,this.options.content=null,this.options.container=null,this.options.html=!1,this},t}(a);e.exports=o},function(e,t,n){(function(t){"use strict";var i=n(62),a=function(){function e(){this._apiEndpointService=new i}return e.prototype.count=function(e){var n=this._apiEndpointService.create("measurementapi/count"),i={metric:e};t.post(n,i)},e.prototype.countByMetricName=function(e){var n=this._apiEndpointService.create("measurementapi/count"),i={metric:-1,metricName:e};t.post(n,i)},e.prototype.countByMetricNameWithTags=function(e,n){var i=this._apiEndpointService.create("measurementapi/count"),a={metric:-1,metricName:e,tags:n};t.post(i,a)},e.prototype.sendMessage=function(e,n){var i=this._apiEndpointService.create("measurementapi/sendMessage"),a={metricName:e,data:n};t.post(i,a)},e.prototype.sendEvent=function(e,n){var i=this._apiEndpointService.create("measurementapi/sendEvent"),a={metricName:e,data:n};t.post(i,a)},e}();e.exports=a}).call(t,n(2))},function(e,t){"use strict";var n;!function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Typ=3]="Typ"}(n||(n={})),e.exports=n},function(e,t){"use strict";var n;!function(e){e[e.Undefined=0]="Undefined",e[e.BookingDetails=1]="BookingDetails",e[e.ContinueButton=2]="ContinueButton",e[e.GuestDetails=4]="GuestDetails",e[e.PricingDetails=8]="PricingDetails",e[e.RoomDetails=16]="RoomDetails",e[e.LoginPanel=32]="LoginPanel"}(n||(n={})),e.exports=n},function(e,t){e.exports='<div class="container review-snippet well m-b-0"> <div class="row ribbon ribbon-left"> <div class=row> <div class="pull-left flip"><!-- ko if: params.reviewScore() >= 7 --> <span class=review-snippet-icon data-bind="text: params.reviewScore"></span> <span class="ribbon-content review-score text-primary" data-bind="text: params.reviewScoreDescription"></span> |<!-- ko if: params.numberOfReviewsText --> <small class="ribbon-content review-number" data-bind="html: params.numberOfReviewsText"></small><!-- /ko--><!-- /ko--> </div> </div> <div class="row one-line-review"><!-- ko if: params.reviewScore() < 7 --> <span class="review-snippet-icon review-snippet-icon-no-score"></span><!-- /ko --><!-- ko if: ko.unwrap(params.reviewSnippet) --> <div class=review-snippet-text data-bind="text: params.reviewSnippet"></div><!-- /ko --> </div> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.params=e}return e}();e.exports=n},function(e,t){e.exports='<ul class=header-progress data-bind="css: { has-secondary-logo: hasSecondaryLogoSuffix}"><!-- ko if: !isCreditCardRequired() --> <li class=step-length-2 data-bind="css: step1Class"> <span class=content>1</span> <div class=information><span data-bind="text: progressTracker.customerInformationText"></span></div> </li> <li class=step-length-2 data-bind="css: step3Class"> <span class=content> <i class="ficon ficon-10 ficon-noti-check-mark-sharp"></i> </span> <div class=information><span data-bind="text: progressTracker.bookingCompletedText"></span></div> </li><!-- /ko--><!-- ko if: isCreditCardRequired() --> <li data-bind="css: step1Class"> <span class=content>1</span> <div class=information><span data-bind="text: progressTracker.customerInformationText"></span></div> </li> <li data-bind="css: step2Class"> <span class=content>2</span> <div class=information><span data-bind="text: progressTracker.paymentInformationText"></span></div> </li> <li data-bind="css: step3Class"> <span class=content> <i class="ficon ficon-10 ficon-noti-check-mark-sharp"></i> </span> <div class=information><span data-bind="text: progressTracker.bookingCompletedText"></span></div> </li><!-- /ko--> </ul>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){var n=this;this.progress=e.progress,this.progressTracker=e.progressTracker,this.isCreditCardRequired=e.isCreditCardRequired,this.hasSecondaryLogoSuffix=null!=e.hasSecondaryLogoSuffix,this.step1Class=t.computed(function(){return n.computeStep(1,n.progress)}),this.step2Class=t.pureComputed(function(){return n.computeStep(2,n.progress)}),this.step3Class=t.pureComputed(function(){return n.computeStep(3,n.progress)})}return e.prototype.computeStep=function(e,n){var i=t.utils.unwrapObservable(n);return e===i?"step-"+e+" active":"step-"+e},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div id=guestDetails class=guest-details data-bind="template: {afterRender: renderComplete}, css: containerDynamicCss"> <div class=customer-info><!-- ko component: {\r\n            name: "guest-name",\r\n            params : {\r\n                firstName: guestDetails.customer.firstName,\r\n                lastName: guestDetails.customer.lastName,\r\n                fullName: guestDetails.customer.fullName,\r\n                firstNameText: guestDetails.firstNameText,\r\n                lastNameText: guestDetails.lastNameText,\r\n                fullNameRegex: guestDetails.fullNameRegex,\r\n                firstAndLastNameText: firstAndLastNameTextLabel,\r\n                isCombineFirstNameLastName: guestDetails.isCombineFirstNameLastName,\r\n                isFirstNameDisabled: isLoggedIn,\r\n                isLastNameDisabled: isLoggedIn,\r\n                translatedFirstName: guestDetails.customer.translatedFirstName,\r\n                translatedLastName: guestDetails.customer.translatedLastName,\r\n                pinyinPanel: guestDetails.pinyinPanel,\r\n                pleaseEnterFirstNameAndLastNameText: guestDetails.pleaseEnterFirstNameAndLastNameText,\r\n                pleaseEnterTextInEnglishOnlyText: guestDetails.pleaseEnterTextInEnglishOnlyText,\r\n                isLoggedIn : isLoggedIn,\r\n                showLastNameFirst : guestDetails.showLastNameFirst,\r\n                isAllowLoggedInUserToChangeFirstNameAndLastName : guestDetails.isAllowLoggedInUserToChangeFirstNameAndLastName,\r\n                isClickBackToFirstStep: isClickBackToFirstStep,\r\n                firstNameOnlyRegex: guestDetails.firstNameOnlyRegex,\r\n                isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n                isMakingThisBookingForSomeoneElse: guestDetails.isMakingThisBookingForSomeoneElse,\r\n                hasFocus: hasFocusOnName\r\n            }\r\n            } --><!-- /ko --> <div class=row data-bind="css: emailCssClass()"> <div class="col-sm-12 form-group has-feedback email" data-bind="validationElement: guestDetails.customer.email"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: guestDetails.customer.email,\r\n                        labelText: emailLabelText,\r\n                        disable: isEmailDisable,\r\n                        inputAttributes: {\r\n                            name: \'email\',\r\n                            id: \'email\',\r\n                            type: \'email\',\r\n                            autocapitalize: \'false\',\r\n                            autocomplete: \'email\',\r\n                            autocorrect: \'off\',\r\n                            placeHolder: emailPlaceholder()\r\n                        }\r\n                    }\r\n                } --><!-- /ko --><!-- ko if: !guestDetails.customer.email.error() && suggestedEmail() --> <div class="alert alert-info email-suggestion-message help-block" data-element-name=email-typo-suggestion data-bind="click: replaceEmailWithSuggestedEmail"> <small data-bind="html: suggestedEmailDisplayMessage"></small> </div><!-- /ko --><!-- ko if: guestDetails.welcomeBackText() && !isLoggedIn() && !ko.unwrap(guestDetails.isPhoneNumberLoginUser) --> <div class="alert alert-info help-block welcome-back-message" data-bind="click: openLoginPanel" data-element-name=guest-details-welcome-back-banner> <small data-bind="html: guestDetails.welcomeBackText"></small> </div><!-- /ko --> </div> </div><!-- ko if: shouldShowRetypeEmail() --> <div class=row> <div class="col-sm-12 form-group has-feedback email re-email" data-bind="validationElement: guestDetails.customer.reEmail"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: guestDetails.customer.reEmail,\r\n                        labelText: guestDetails.reEmailAddressText,\r\n                        event: { paste: disablePaste },\r\n                        inputAttributes: {\r\n                            name: \'reEmail\',\r\n                            id: \'reEmail\',\r\n                            type: \'email\',\r\n                            autocomplete: \'reEmail\',\r\n                            autocorrect: \'off\',\r\n                            \'data-element-name\': \'guest-details-reEmail\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --><!-- ko if: guestDetails.customer.reEmail() && guestDetails.customer.reEmail.isValid() --> <span class="help-block email-matched" style="" data-bind="html: guestDetails.emailAndReEmailMatchText"></span><!-- /ko --> </div> </div><!-- /ko --> <div class=row><!-- ko if: !isRemovePhoneNumberFieldApplied() || isEligibleForTravelPackages --> <div class="col-sm-6 form-group has-feedback phone-number" data-bind="validationElement: guestDetails.customer.phoneNumber"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: guestDetails.customer.phoneNumber,\r\n                        labelText: guestDetails.phoneNumberText,\r\n                        disable: isPhoneDisable,\r\n                        inputAttributes: {\r\n                            name: \'phoneNumber\',\r\n                            id: \'phoneNumber\',\r\n                            type: \'tel\',\r\n                            autocomplete: \'tel\',\r\n                            autocorrect: \'off\',\r\n                            maxlength: \'16\',\r\n                            \'data-element-name\': \'guest-phone-number\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div><!-- /ko --> <div class="col-sm-6 form-group has-feedback country-of-residence" data-bind="validationElement: guestDetails.customer.countryOfResidenceId, css: { \'full-width\': isRemovePhoneNumberFieldApplied()}"><!-- ko component: {\r\n                    name: "form-dropdown",\r\n                    params : {\r\n                        value: guestDetails.customer.countryOfResidenceId,\r\n                        labelText: guestDetails.countryOfResidenceText,\r\n                        hasFocus: hasFocusOnCountry,\r\n                        valueAllowUnset: true,\r\n                        emptyOptionLabel: guestDetails.pleaseSelectOneText,\r\n                        css: { \'has-value\': guestDetails.customer.countryOfResidenceId },\r\n                        inputAttributes: {\r\n                            name: \'countryOfResidence\',\r\n                            id: \'countryOfResidence\',\r\n                            \'data-element-name\': \'country-of-residence\'\r\n                        },\r\n                        optionGroups: [\r\n                            {\r\n                                options: countrySelectList()[0].options,\r\n                                label: countrySelectList()[0].label\r\n                            },\r\n                            {\r\n                                options: countrySelectList()[1].options,\r\n                                label: countrySelectList()[1].label\r\n                            }\r\n                        ]\r\n                    }\r\n                } --><!-- /ko --> </div> <div class="col-sm-12 form-group has-feedback email"><!-- ko if: guestDetails.welcomeBackTextForPhone() && !isLoggedIn() && guestDetails.isPhoneNumberLoginUser() --> <div class="alert alert-info help-block welcome-back-message" data-bind="click: openLoginPanel"> <small data-bind="html: guestDetails.welcomeBackTextForPhone"></small> </div><!-- /ko --> </div> </div><!-- ko if: shouldShowUSPostCodeInputInGuestDetailsForm() --> <div class=row> <div class="col-sm-6 form-group has-feedback postcode" data-bind="validationElement: guestDetails.customer.postcode"><!-- ko component: {\r\n                        name: "form-input",\r\n                        params : {\r\n                            labelText: guestDetails.postcodeText,\r\n                            value: guestDetails.customer.postcode,\r\n                            usPostCodeFormat: { value: guestDetails.customer.postcode },\r\n                            inputAttributes: {\r\n                                name: \'postcode\',\r\n                                id: \'postcode\',\r\n                                type: \'text\',\r\n                                autocomplete: \'off\',\r\n                            }\r\n                        }\r\n                    } --><!-- /ko --> <i class="ficon form-control-feedback"></i> </div> </div><!-- /ko --><!-- ko if: (guestDetails.isPointsMaxBooking() && !isShowPointsMaxPanel) --><!-- ko if: guestDetails.isPointsMaxPlaceHolderDisplayed --> <div class=row> <div class="col-sm-12 form-group has-feedback points-max-member-id" data-bind="validationElement: guestDetails.customer.pointsMaxMemberId"><!-- ko if: guestDetails.isPointsMaxLabelForMembershipDisplayed --> <label for=pointsMaxMemberId class=control-label data-bind="html: guestDetails.pointsMaxMemberNumberText"></label> <div class=pointsmax-input-control><!-- ko component: {\r\n                        name: "form-input",\r\n                        params : {\r\n                            value: guestDetails.customer.pointsMaxMemberId,\r\n                            inputAttributes: {\r\n                                name: \'pointsMaxMemberId\',\r\n                                id: \'pointsMaxMemberId\',\r\n                                type: \'text\',\r\n                                autocomplete: \'off\',\r\n                                maxlength: \'50\',\r\n                                placeholder: guestDetails.pointsMaxMemberIdFormat\r\n                            }\r\n                        }\r\n                    } --><!-- /ko --> </div><!-- /ko --><!-- ko ifnot: guestDetails.isPointsMaxLabelForMembershipDisplayed --><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: guestDetails.customer.pointsMaxMemberId,\r\n                        labelText: guestDetails.pointsMaxMemberNumberText,\r\n                        inputAttributes: {\r\n                            name: \'pointsMaxMemberId\',\r\n                            id: \'pointsMaxMemberId\',\r\n                            type: \'text\',\r\n                            autocomplete: \'off\',\r\n                            maxlength: \'50\',\r\n                            placeholder: guestDetails.pointsMaxMemberIdFormat\r\n                        }\r\n                    }\r\n                } --><!-- /ko --><!-- /ko --> </div> </div><!-- /ko --><!-- ko ifnot: guestDetails.isPointsMaxPlaceHolderDisplayed --> <div class=row> <div class="col-sm-12 form-group has-feedback points-max-member-id" data-bind="validationElement: guestDetails.customer.pointsMaxMemberId"><!-- ko if: guestDetails.isPointsMaxLabelForMembershipDisplayed --> <label for=pointsMaxMemberId class=control-label data-bind="html: guestDetails.pointsMaxMemberNumberText"></label> <div class=pointsmax-input-control> <input type=text class="form-control sensitive" name=pointsMaxMemberId id=pointsMaxMemberId autocomplete=off data-bind="value: guestDetails.customer.pointsMaxMemberId, allowEmpty" maxlength=50 /> <i class="ficon form-control-feedback"></i> </div><!-- /ko --><!-- ko ifnot: guestDetails.isPointsMaxLabelForMembershipDisplayed --> <label for=pointsMaxMemberId class=control-label data-bind="text: guestDetails.pointsMaxMemberNumberText"></label> <input type=text class="form-control sensitive" name=pointsMaxMemberId id=pointsMaxMemberId autocomplete=off data-bind="value: guestDetails.customer.pointsMaxMemberId, allowEmpty" maxlength=50 /> <i class="ficon form-control-feedback"></i><!-- /ko --> </div> </div><!-- /ko --><!-- /ko --><!-- ko if: guestDetails.isBookOnRequestBooking --> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: guestDetails.customer.greetingMessage"><!-- ko component: {\r\n                        name: "form-textarea",\r\n                        params : {\r\n                            value: guestDetails.customer.greetingMessage,\r\n                            labelText: guestDetails.introduceYourselfAndTellHostWhyYouAreComingText,\r\n                            inputAttributes: {\r\n                                name: \'greetingMessage\',\r\n                                id: \'greetingMessage\',\r\n                                rows: 3,\r\n                                cols: 29\r\n                            }\r\n                        }\r\n                    } --><!-- /ko --> </div> </div><!-- /ko --> </div><!-- ko ifnot: guestDetails.guestVisa --> <div class="checkbox making-booking-for-someone-else"> <label data-bind="collapse: guestDetails.isMakingThisBookingForSomeoneElse, invert: true, afterShow: toggleFocusOnGuestName, afterHide: toggleFocusOnGuestName" data-target=#guestInfo aria-controls=guestInfo> <input type=checkbox data-element-name=make-book-for-someone-else name=isMakingThisBookingForSomeoneElse id=isMakingThisBookingForSomeoneElse data-bind="checked: guestDetails.isMakingThisBookingForSomeoneElse"/> <span data-bind="text: guestDetails.makingThisBookingForSomeoneElseText"></span> </label> </div><!-- /ko --> <div id=guestInfo class="guest-info collapse"> <div class=well><!-- ko ifnot: isRemovePhoneNumberFieldApplied() --> <h4 data-bind="text: guestDetails.guestInformationText"></h4><!-- /ko --><!-- ko component: {\r\n                name: "guest-name",\r\n                params : {\r\n                    firstName: guestDetails.guest.firstName,\r\n                    lastName: guestDetails.guest.lastName,\r\n                    firstNameText: guestDetails.firstNameText,\r\n                    lastNameText: guestDetails.lastNameText,\r\n                    firstAndLastNameText: guestFirstAndLastNameTextLabel,\r\n                    fullNameRegex: guestDetails.fullNameRegex,\r\n                    translatedFirstName: guestDetails.guest.translatedFirstName,\r\n                    translatedLastName: guestDetails.guest.translatedLastName,\r\n                    pinyinPanel: guestDetails.pinyinPanel,\r\n                    pleaseEnterFirstNameAndLastNameText: guestDetails.pleaseEnterFirstNameAndLastNameText,\r\n                    pleaseEnterTextInEnglishOnlyText: guestDetails.pleaseEnterTextInEnglishOnlyText,\r\n                    showLastNameFirst : guestDetails.showLastNameFirst,\r\n                    isClickBackToFirstStep: isClickBackToFirstStep,\r\n                    isCombineFirstNameLastName: guestDetails.isCombineFirstNameLastName,\r\n                    fullName : guestDetails.guest.fullName,\r\n                    firstNameOnlyRegex: guestDetails.firstNameOnlyRegex,\r\n                    isMakingThisBookingForSomeoneElse: guestDetails.isMakingThisBookingForSomeoneElse,\r\n                    hasFocus: hasFocusOnGuestName\r\n                }\r\n                } --><!-- /ko --><!-- ko if: isGuestLastNameDifferentFromCustomer() && isRewardsRedemptionAvailable() --> <p class=guest-restriction-for-rewards-redemption data-bind="text: guestDetails.pleaseNoteYouCannotRedeemText"></p><!-- /ko --> <div class=row> <div class="col-sm-6 form-group has-feedback guest-country-of-residence" data-bind="validationElement: guestDetails.guest.countryOfResidenceId, css: { \'full-width\': isRemovePhoneNumberFieldApplied()}"><!-- ko component: {\r\n                            name: "form-dropdown",\r\n                            params : {\r\n                                value: guestDetails.guest.countryOfResidenceId,\r\n                                labelText: countryOfResidenceTextLabel,\r\n                                valueAllowUnset: true,\r\n                                emptyOptionLabel: guestDetails.pleaseSelectOneText,\r\n                                css: { \'has-value\': guestDetails.guest.countryOfResidenceId },\r\n                                inputAttributes: {\r\n                                    name: \'guestCountryOfResidence\',\r\n                                    id: \'guestCountryOfResidence\',\r\n                                    \'data-element-name\': \'country-of-residence\'\r\n                                },\r\n                                optionGroups: [\r\n                                    {\r\n                                        options: countrySelectList()[0].options,\r\n                                        label: countrySelectList()[0].label\r\n                                    },\r\n                                    {\r\n                                        options: countrySelectList()[1].options,\r\n                                        label: countrySelectList()[1].label\r\n                                    }\r\n                                ]\r\n                            }\r\n                        } --><!-- /ko --> </div> </div> </div> </div><!-- ko if: guestDetails.guestVisa --> <div class=guest-visa data-bind="foreach: { data: guestDetails.guestVisa.visas, as: \'visa\' }"><!-- ko component: {\r\n            name: "guest-visa",\r\n            params : {\r\n                guestDetails: $parent.guestDetails,\r\n                countrySelectList: $parent.countrySelectList,\r\n                number: $index() + 1,\r\n                visa: visa\r\n            }\r\n        } --><!-- /ko --> </div> <div class=guest-flight><!-- ko component: {\r\n            name: "guest-flight",\r\n            params : {\r\n                guestFlight: guestDetails.guestFlight\r\n            }\r\n        } --><!-- /ko --> </div><!-- /ko --> </div>'},function(e,t,n){(function(t,i){"use strict";var a=n(161),o=n(167),r=n(11),s=n(10),l=n(154),d=n(9),c=n(88),p=n(86),u=n(91),m=n(106),h=n(90),f=n(110),g=n(109),b=n(153),y=n(168),v=n(169),C=function(){function e(n){var l=this;if(this.countrySelectList=n.countrySelectList,this.guestDetails=n.guestDetails,this.isPhoneNumberFocused=t.observable(!1),this.passwordVerification=n.passwordVerification,this.isLoggedIn=n.isLoggedIn,this.guestService=new o,this.isRewardsRedemptionAvailable=n.isRewardsRedemptionAvailable,this.isPasswordVerificationFailed=t.observable(!1),this.isExperimentMarkedSeen=!1,this.isShowPointsMaxPanel=n.isShowPointsMaxPanel,this.isClickBackToFirstStep=n.isClickBackToFirstStep,this.isAddMoreLifeExperiment=d.getFeature(u.AddMoreLifeToBookingForm),this._experimentApiService=new h,this.isExperimentPHONE675Applied=p.isApplied(c.GuestEmailOptionForPhoneTypeUsers),this.isContactDetailsCollapsed=n.isContactDetailsCollapsed,this.isEligibleForTravelPackages=n.isEligibleForTravelPackages,this.isEmailDisable=t.computed(function(){return l._showEmailAsOptionalForPhoneTypeUser()}),this.isPhoneDisable=t.computed(function(){return l.isLoggedIn()&&l.guestDetails.isPhoneNumberLoginUser()}),this.isEmailRegexEnabled=t.computed(function(){return!(l.isLoggedIn()&&l.guestDetails.isPhoneNumberLoginUser()&&l.isExperimentPHONE675Applied)}),this.emailLabelText=t.computed(function(){return l._returnEmailLabelText()}),this.isWarnUserForPossibleTypoEmailExperiment=d.getFeature(u.ShowEmailSuggestionForPossibleTypo),this.suggestedEmail=this.isWarnUserForPossibleTypoEmailExperiment?t.observable(this.detectEmailTypoAndGiveSuggestion(n.guestDetails.customer.email())):t.observable(null),this.shouldShowRetypeEmail=t.computed(function(){return!l.isLoggedIn()&&d.getFeature(u.ShowRetypeEmail)}),this.emailPlaceholder=t.observable(this.shouldShowRetypeEmail()?this.guestDetails.doubleCheckEmailTypoText():null),this.emailCssClass=t.observable(this.shouldShowRetypeEmail()?"ceghz-111":""),this.hasFocusOnName=t.observable(!this.isLoggedIn()),this.hasFocusOnPhoneNumber=t.observable(this._hasFocusOnPhoneNumber(this.isLoggedIn(),this.guestDetails.customer)),this.hasFocusOnCountry=t.observable(this._hasFocusOnCountry(this.isLoggedIn(),this.hasFocusOnPhoneNumber(),this.guestDetails.customer)),this._hideBlockUISubscription=t.postbox.subscribe(r.HIDE_BLOCK_UI,function(){var e=l._hasFocusOnPhoneNumber(l.isLoggedIn(),l.guestDetails.customer);l.hasFocusOnPhoneNumber(e),l.hasFocusOnCountry(l._hasFocusOnCountry(l.isLoggedIn(),e,l.guestDetails.customer)),l.hasFocusOnName(!l.isLoggedIn())}),this.hasFocusOnGuestName=t.observable(!1),this.isCollapseGuestDetailsInit=!1,this.isCollapseGuestDetailsApplied=n.isCollapseGuestDetailsApplied,this.isDesktop=d.isDesktop(),this.isNotTYP=!(d.getPageData().jsonViewModel&&d.getPageData().jsonViewModel.progress===b.Typ),this.isRemovePhoneNumberFieldApplied=t.pureComputed(function(){return!l.isLoggedIn()&&p.isApplied(c.RemovePhoneNumberField)&&l.isDesktop&&l.isNotTYP}),this.containerDynamicCss=p.isApplied(c.ShowCollapsedContactDetails)?t.computed(function(){return t.isObservable(l.isContactDetailsCollapsed)&&l.isContactDetailsCollapsed(),l.isCollapseGuestDetailsInit?{sliderAnimation:!0}:t.isObservable(l.isContactDetailsCollapsed)&&t.unwrap(l.isCollapseGuestDetailsApplied)?(l.isCollapseGuestDetailsInit=!0,{"slideUp collapse":t.unwrap(l.isContactDetailsCollapsed),"slideDown collapse in":!t.unwrap(l.isContactDetailsCollapsed())}):{}}):t.computed(function(){return{}}),this.toggleFocusOnGuestName=function(){t.unwrap(l.isCollapseGuestDetailsApplied)?setTimeout(function(){l.hasFocusOnGuestName(!l.hasFocusOnGuestName())},300):l.hasFocusOnGuestName(!l.hasFocusOnGuestName())},this.isRemovePhoneNumberFieldApplied()?(this.firstAndLastNameTextLabel=this.guestDetails.firstAndLastNameTextIkki9502,this.guestFirstAndLastNameTextLabel=this.guestDetails.guestFirstAndLastNameText,this.countryOfResidenceTextLabel=this.guestDetails.guestCountryOfResidenceText):(this.firstAndLastNameTextLabel=this.guestDetails.firstAndLastNameText,this.guestFirstAndLastNameTextLabel=this.guestDetails.firstAndLastNameText,this.countryOfResidenceTextLabel=this.guestDetails.countryOfResidenceText),this.guestDetails.isCombineFirstNameLastName()&&(this.guestDetails.guest.fullName||(this.guestDetails.guest.fullName=t.observable("")),this.guestDetails.customer.fullName||(this.guestDetails.customer.fullName=t.observable(""))),this.guestDetails.welcomeBackText||(this.guestDetails.welcomeBackText=t.observable("")),this.guestDetails.welcomeBackTextForPhone||(this.guestDetails.welcomeBackTextForPhone=t.observable("")),this.guestDetails.customer.pointsMaxMemberId||(this.guestDetails.customer.pointsMaxMemberId=t.observable("")),this.guestDetails.customer.greetingMessage||(this.guestDetails.customer.greetingMessage=t.observable("")),this.guestDetails.customer.phoneNumber||(this.guestDetails.customer.phoneNumber=t.observable("")),this.guestDetails.customer.reEmail||(this.guestDetails.customer.reEmail=t.observable("")),this.isGuestLastNameDifferentFromCustomer=t.pureComputed(function(){return""!==l.guestDetails.guest.lastName()&&l.guestDetails.customer.lastName().toUpperCase()!==l.guestDetails.guest.lastName().toUpperCase()}),this.suggestedEmailDisplayMessage=t.pureComputed(function(){var e=t.unwrap(l.suggestedEmail());if(e){var n='<a href="javascript:void(0)">'+e+"</a>";return s.formatZeroBased(l.guestDetails.emailTypoSuggestionText(),n)}return null}),this.shouldShowUSPostCodeInputInGuestDetailsForm=t.pureComputed(function(){var e=t.unwrap(l.guestDetails.customer.countryOfResidenceId())===m.UnitedStates;return e&&l._experimentApiService.experimentSeen(c.AddUSPostCodeInputForGuestDetailsForm),e&&p.isApplied(c.AddUSPostCodeInputForGuestDetailsForm)}),this.restrictedCountriesData=[],this.guestDetails.restrictedCountries&&this.guestDetails.restrictedCountries().length>0){var f=[];f.push.apply(f,this.countrySelectList()[0].options()),f.push.apply(f,this.countrySelectList()[1].options()),i.each(this.guestDetails.restrictedCountries(),function(e,t){i.each(f,function(e,n){if(n.value()===t)return void l.restrictedCountriesData.push(n)})})}this._setValidation(),this.subscribeEvents();var g=d.getPageData().viewModel;e._apsPeekViewModel||(e._apsPeekViewModel=g&&t.unwrap(g.isApsPeekEligible)?new a(g.guestDetails,g.progress,g.isSubmitStepProcessing):null)}return e.prototype._showEmailAsOptionalForPhoneTypeUser=function(){return(!this.guestDetails.isPhoneNumberLoginUser()||!this.isExperimentPHONE675Applied)&&this.isLoggedIn()&&this.guestDetails.hasValidEmail()},e.prototype._returnEmailLabelText=function(){return this.guestDetails.isPhoneNumberLoginUser()&&this.isExperimentPHONE675Applied?this.guestDetails.emailOptionalText():this.guestDetails.emailAddressText()},e.prototype._hasFocusOnPhoneNumber=function(e,n){var i=t.unwrap(n.phoneNumber());return e&&(!i||""===i.trim())},e.prototype._hasFocusOnCountry=function(e,n,i){var a=t.unwrap(i.countryOfResidenceId());return e&&!n&&(!a||0===a)},e.prototype.openLoginPanel=function(){return this.guestDetails.isPhoneNumberLoginUser()?void t.postbox.publish(r.OPEN_PHONE_LOGIN_PANEL,this.guestDetails.customer.email()):void t.postbox.publish(r.OPEN_LOGIN_PANEL,this.guestDetails.customer.email())},e.prototype.replaceEmailWithSuggestedEmail=function(){var e=t.unwrap(this.suggestedEmail());this.guestDetails.customer.email(e)},e.prototype.disablePaste=function(){return!1},e.prototype.dispose=function(){this._emailSubscription&&this._emailSubscription.dispose(),this.emailComputed&&this.emailComputed.dispose(),this._loginSuccessfulSubscription&&this._loginSuccessfulSubscription.dispose(),this._guestDetailsUpdatedSubscription&&this._guestDetailsUpdatedSubscription.dispose(),this._passwordVerificationFailedSubscription&&this._passwordVerificationFailedSubscription.dispose(),this._isMakingThisBookingForSomeoneElseSubscription&&this._isMakingThisBookingForSomeoneElseSubscription.dispose(),this._phoneNumberSubscription&&this._phoneNumberSubscription.dispose(),this._guestPhoneNumberSubscription&&this._guestPhoneNumberSubscription.dispose(),this._hideBlockUISubscription&&this._hideBlockUISubscription.dispose()},e.prototype.renderComplete=function(){t.postbox.publish(r.SEND_CRITICAL_MARK,l.GuestDetails)},e.prototype._setValidation=function(){
var e=this;this._setCustomerNameValidation(),this.isWarnUserForPossibleTypoEmailExperiment?this.guestDetails.customer.email.extend({required:{message:this.guestDetails.pleaseEnterAValidEmailAddressText(),params:!0,onlyIf:function(){return e.isEmailRegexEnabled()}},pattern:{message:this.guestDetails.pleaseEnterAValidEmailAddressText(),params:this.guestDetails.emailRegex()},validation:[{validator:function(t){return!e.detectEmailTypoAndGiveSuggestion(t)},message:"",severityLevel:1}]}):this.guestDetails.customer.email.extend({required:{message:this.guestDetails.pleaseEnterAValidEmailAddressText(),params:!0,onlyIf:function(){return e.isEmailRegexEnabled()}},pattern:{message:this.guestDetails.pleaseEnterAValidEmailAddressText(),params:this.guestDetails.emailRegex()}}),this.guestDetails.customer.email()&&this.guestDetails.customer.email.isModified(!0);var n=this.guestDetails.pleaseEnterPhoneNumberText();if(this.guestDetails.customer.phoneNumber.extend({pattern:{message:n,params:this.guestDetails.phoneNumberRegex()},maxLength:{message:n,params:16},minLength:{message:n,params:8}}),this.guestDetails.customer.phoneNumber()&&this.guestDetails.customer.phoneNumber.isModified(!0),this.guestDetails.customer.countryOfResidenceId.extend({required:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:!0},notEqual:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:0}}),this.guestDetails.customer.countryOfResidenceId()&&this.guestDetails.customer.countryOfResidenceId.isModified(!0),this.guestDetails.customer.postcode||(this.guestDetails.customer.postcode=t.observable()),this.guestDetails.customer.postcode.extend({required:{message:this.guestDetails.pleaseEnterPostcodeText(),params:!0,onlyIf:function(){return e.shouldShowUSPostCodeInputInGuestDetailsForm()}},pattern:{message:this.guestDetails.pleaseEnterAValidUSPostCodeText(),params:this.guestDetails.postcodeRegex(),onlyIf:function(){return e.shouldShowUSPostCodeInputInGuestDetailsForm()}}}),this.guestDetails.customer.postcode()&&this.guestDetails.customer.postcode.isModified(!0),this._setPointsMaxValidation(),this._setGreetingMessageValidation(),this._setGuestNameValidation(),this.guestDetails.guest.countryOfResidenceId.extend({required:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:!0,onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}},notEqual:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:0,onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}}}),this.guestDetails.restrictedCountries()&&this.guestDetails.restrictedCountries().length){var i=this.createRestrictedCountryValidation();this.guestDetails.customer.countryOfResidenceId.extend(i),this.guestDetails.guest.countryOfResidenceId.extend(i)}this.shouldShowRetypeEmail()&&this._setReEmailValidation()},e.prototype.createRestrictedCountryValidation=function(){var e=this,t={validation:{message:function(t,n){var i=e.restrictedCountriesData.filter(function(e){return e.value()===n()})[0],a="";return i&&(a=i.text()),s.format(e.guestDetails.theseRatesDoNotApplyToNationalsText(),a)},validator:function(e,t){return t.indexOf(e)===-1},params:this.guestDetails.restrictedCountries()}};return t},e.prototype.subscribeEmailComputed=function(){var t=this;return this.emailComputed.subscribe(function(n){var i;if(i=t.guestDetails.customer.email.isValid()?n:"",t.suggestedEmail(t.detectEmailTypoAndGiveSuggestion(n)),t.isLoggedIn()){if(!t.guestDetails.hasValidEmail()){var a={email:i};t.guestService.updateUserEmail(a)}}else{var o={email:i,isApsPeekAvailable:!(!e._apsPeekViewModel||!e._apsPeekViewModel.isApsPeekAvailable)};t.guestService.updateEmail(o).then(function(e){t.guestDetails.welcomeBackText(e.welcomeBackText)})}})},e.prototype.subscribeEvents=function(){var n=this;this.emailComputed=t.pureComputed(this.guestDetails.customer.email).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:100}}),this._emailSubscription=this.subscribeEmailComputed(),this.phoneComputed=t.pureComputed(this.guestDetails.customer.phoneNumber).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:100}}),this._phoneNumberSubscription=this.phoneComputed.subscribe(function(t){var i;if(i=n.guestDetails.customer.email.isValid()?n.guestDetails.customer.email():"",!n.isLoggedIn()){var a={phoneNumber:i,isApsPeekAvailable:!(!e._apsPeekViewModel||!e._apsPeekViewModel.isApsPeekAvailable)},o=n.guestService.updatePhoneNumber(a);o&&o.then(function(e){n.guestDetails.welcomeBackTextForPhone(e.welcomeBackText)})}}),this._guestPhoneNumberSubscription=this.guestDetails.customer.phoneNumber.subscribe(function(e){n.guestDetails.customer.phoneNumber(e?e:"")}),this._guestLoginTypes=t.postbox.subscribe(r.UPDATE_LOGIN_TYPES,function(e){if(0!==e.loginTypes.length){e.loginTypes.indexOf("email")!==-1&&n.guestDetails.welcomeBackTextForPhone("");var t=e.loginTypes.indexOf("phoneNumber")!==-1;t&&n.guestDetails.welcomeBackTextForPhone(""),n.guestDetails.isPhoneNumberLoginUser(t)}}),this._isMakingThisBookingForSomeoneElseSubscription=this.guestDetails.isMakingThisBookingForSomeoneElse.subscribe(function(e){e?(n.guestDetails.guest.firstName()&&n.guestDetails.guest.firstName.isModified(!0),n.guestDetails.guest.lastName()&&n.guestDetails.guest.lastName.isModified(!0),n.guestDetails.guest.countryOfResidenceId()&&n.guestDetails.guest.countryOfResidenceId.isModified(!0),n.isAddMoreLifeExperiment&&(t.postbox.publish(r.ON_COMPONENT_RENDER,{name:"fullname",id:"guest-name"}),t.postbox.publish(r.ON_COMPONENT_RENDER,{name:"pinyin-panel",id:"guest-name"}))):t.validation.group(n.guestDetails.guest).showAllMessages(!1)}),this._guestLastNameDifferentComputed=t.computed(function(){return n.guestDetails.isMakingThisBookingForSomeoneElse()&&n.isGuestLastNameDifferentFromCustomer()}),this._guestLastNameDifferentComputed.subscribe(function(e){t.postbox.publish(r.GUEST_LASTNAME_DIFFERENT_FROM_CUSTOMER,e)}),this._loginSuccessfulSubscription=t.postbox.subscribe(r.LOGIN_SUCCESSFUL,function(){n.guestDetails.welcomeBackText(""),n.guestDetails.customer.reEmail("");var e=""===n.guestDetails.customer.email();n.guestDetails.customer.email.isModified(!e)}),this._guestDetailsUpdatedSubscription=t.postbox.subscribe(r.GUEST_DETAILS_UPDATED,function(e){var i=t.mapping.toJS(n.guestDetails.guest);e.guest=i,e.isMakingThisBookingForSomeoneElse=n.guestDetails.isMakingThisBookingForSomeoneElse(),t.mapping.fromJS(e,{},n.guestDetails),p.isApplied(c.ReactHeaderComponent)&&y["default"]("ko/LOGIN",{firstName:e.customer.firstName,lastName:e.customer.lastName}),n.guestDetails.isPointsMaxBooking()&&!n.guestDetails.customer.pointsMaxMemberId()&&(n.InitPointsMaxValue(),t.validation.group(n.guestDetails.customer.pointsMaxMemberId).showAllMessages(!1))}),this._passwordVerificationFailedSubscription=t.postbox.subscribe(r.PASSWORD_VERIFICATION_FAILED_AND_LET_CUSTOMER_FIX,function(){n.passwordVerification.password(""),n.isPasswordVerificationFailed(!0)});var i=/<(?:.|\n)*?>/gm;this.guestDetails.customer.greetingMessage.subscribe(function(e){var t=e.replace(i,"");n.guestDetails.customer.greetingMessage(t)}),this._isPhoneNumberFocusedSubscription=t.postbox.subscribe(r.FOCUS_PHONE_NUMBER,function(){n.isPhoneNumberFocused(!0)})},e.prototype.InitPointsMaxValue=function(){this.guestDetails.customer.pointsMaxMemberId("")},e.prototype.detectEmailTypoAndGiveSuggestion=function(t){if(this.isWarnUserForPossibleTypoEmailExperiment&&!this.isLoggedIn()&&(!this.suggestedEmail||this.suggestedEmail&&t!==this.suggestedEmail())){var n=v.MailChecker.getSuggestion(t,!1);return e.sendSuspectedEmailTypoAnalytics(t,n),n&&n!==t?n:null}return null},e.prototype._setCustomerNameValidation=function(){this.guestDetails.isCombineFirstNameLastName()||(this.guestDetails.customer.firstName.extend({required:{message:this.guestDetails.pleaseEnterFirstNameText(),params:!0},pattern:{message:this.guestDetails.pleaseEnterTextInEnglishOnlyText(),params:this.guestDetails.nameRegex()}}),this.guestDetails.customer.firstName()&&this.guestDetails.customer.firstName.isModified(!0),this.guestDetails.customer.lastName.extend({required:{message:this.guestDetails.pleaseEnterLastNameText(),params:!0},pattern:{message:this.guestDetails.pleaseEnterTextInEnglishOnlyText(),params:this.guestDetails.nameRegex()}}),this.guestDetails.customer.lastName()&&this.guestDetails.customer.lastName.isModified(!0))},e.prototype._setGreetingMessageValidation=function(){this.guestDetails.isBookOnRequestBooking()&&(this.guestDetails.customer.greetingMessage.extend({required:{message:this.guestDetails.pleaseEnterGreetingMessageText(),params:!0},pattern:{message:this.guestDetails.pleaseEnterGreetingMessageInEnglishOrText(),params:this.guestDetails.greetingMessageRegex()}}),this.guestDetails.customer.greetingMessage()&&this.guestDetails.customer.greetingMessage.isModified(!0))},e.prototype._setPointsMaxValidation=function(){this.guestDetails.isPointsMaxBooking()&&(this.guestDetails.customer.pointsMaxMemberId.extend({pattern:{message:this.guestDetails.pleaseEnterAValidPointsMaxMemberNumberText(),params:this.guestDetails.pointsMaxMemberIdRegex,severityLevel:1}}),this.guestDetails.customer.pointsMaxMemberId()&&this.guestDetails.customer.pointsMaxMemberId.isModified(!0))},e.prototype._setGuestNameValidation=function(){var e=this;this.guestDetails.guest.firstName.extend({required:{message:this.guestDetails.pleaseEnterFirstNameText(),params:!0,onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}},pattern:{message:this.guestDetails.pleaseEnterTextInEnglishOnlyText(),params:this.guestDetails.nameRegex(),onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}}}),this.guestDetails.guest.lastName.extend({required:{message:this.guestDetails.pleaseEnterLastNameText(),params:!0,onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}},pattern:{message:this.guestDetails.pleaseEnterTextInEnglishOnlyText(),params:this.guestDetails.nameRegex(),onlyIf:function(){return e.guestDetails.isMakingThisBookingForSomeoneElse()}}})},e.prototype._setReEmailValidation=function(){var e=this;this.guestDetails.customer.reEmail.extend({validation:[{validator:function(t,n){return e.validateEmailAndRetype(n,t)},message:this.guestDetails.emailAndReEmailDoNotMatchText(),severityLevel:0,onlyIf:function(){return e.shouldShowRetypeEmail()},params:this.guestDetails.customer.email}],required:{message:"",params:!0,onlyIf:function(){return e.shouldShowRetypeEmail()}}})},e.prototype.validateEmailAndRetype=function(e,t){this._experimentApiService.experimentSeen(c.EmailAndRetypeEmailShouldNotBeCaseSensitive);var n=p.isApplied(c.EmailAndRetypeEmailShouldNotBeCaseSensitive)?null==t&&null==e||null!=t&&null!=e&&0===t.localeCompare(e,void 0,{sensitivity:"accent"}):t===e;return t&&!n&&g.instance.track("guest-details-reEmail",{action_type:"validation-failure",action_element_name:"guest-details-reEmail"}),n},e.sendSuspectedEmailTypoAnalytics=function(e,t){var n=f.create("EmailTypoDetection",{originalEmail:e,suggestedEmail:t});f.send(n)},e}();e.exports=C}).call(t,n(3),n(2))},function(e,t,n){(function(t){"use strict";var i=n(162),a=n(163),o=n(11),r=n(99),s=n(10),l=function(){function e(e,t,n){this._guestDetails=e,this._pageProgress=t,this.isSubmitStepProcessing=n,this._init(),this._subscribeEvents()}return e.prototype.openLoginPanel=function(){this._guestDetails.isPhoneNumberLoginUser&&this._guestDetails.isPhoneNumberLoginUser()?t.postbox.publish(o.OPEN_PHONE_LOGIN_PANEL,this._guestDetails.customer.email()):t.postbox.publish(o.OPEN_LOGIN_PANEL,this._guestDetails.customer.email())},e.prototype.proceedWithoutLogin=function(){t.postbox.publish(o.FOCUS_PHONE_NUMBER)},e.prototype.dispose=function(){this._memberFirstNameSubscription&&this._memberFirstNameSubscription.dispose(),this._updateEmailSuccessfulSubscription&&this._updateEmailSuccessfulSubscription.dispose()},e.prototype._init=function(){var e=this;this.isApsPeekAvailable=!1,this._modalService=new r,this._apsPeekService=new a,this._memberFirstName=t.observable(""),this._apsPeekService.getApsPeek().then(function(t){e._handleApsPeekResponse(t)})},e.prototype._handleApsPeekResponse=function(e){var t=this;this._apsPeekModal=e.apsPeekModal,this._apsPeekModal?(this.isApsPeekAvailable=!0,this._memberFirstNameSubscription=this._memberFirstName.subscribe(function(e){t._apsPeekModal.hiXYouHaveAnAgodaAccountText=s.format(t._apsPeekModal.hiXYouHaveAnAgodaAccountTemplate,e)}),e.shouldDisplayApsPeekModalInstantly&&1===this._pageProgress()&&(this._memberFirstName(e.memberFirstName),this._displayApsPeekModal())):this.isApsPeekAvailable=!1},e.prototype._displayApsPeekModal=function(){this.isSubmitStepInProgress()||(this._modalService.open(new i(this._apsPeekModal,this)),t.postbox.publish(o.APS_PEEK_MODAL_DISPLAYED,this._apsPeekModal.discountAmount))},e.prototype._subscribeEvents=function(){var e=this;this._updateEmailSuccessfulSubscription=t.postbox.subscribe(o.UPDATE_EMAIL_SUCCESSFUL,function(n){n&&(n.isExistingMember||t.postbox.publish(o.APS_PEEK_MODAL_DISPLAYED,0),n.memberFirstName&&e._memberFirstName(n.memberFirstName),n.shouldDisplayApsPeekModal&&e._displayApsPeekModal())})},e.prototype.isSubmitStepInProgress=function(){return t.unwrap(this.isSubmitStepProcessing)},e}();e.exports=l}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(163),s=n(164),l=function(e){function a(t,n){e.call(this),this._apsPeekModal=t,this._apsPeekHelper=n,this._initBindingOptions()}return i(a,e),a.prototype._initBindingOptions=function(){var e=this;this._apsPeekModal.close=function(){return e._close()},this._apsPeekModal.login=function(){return e._login()},this._apsPeekModal.noThanks=function(){return e._noThanks()},this.header={name:o.APS_PEEK_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{isCloseBtnDisplayed:!0,close:function(){return e._close()},title:this._apsPeekModal.title}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(165)),this.body.name=o.APS_PEEK_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(166)),this.body.data=this._apsPeekModal,this.dialogCss=o.APS_PEEK_MODAL_CLASS,this.options.backdrop="static"},a.prototype._login=function(){this._logApsPeekUserAction(s.ApsPeekClickLogin),this._apsPeekHelper.openLoginPanel(),this.visible(!1)},a.prototype._close=function(){this._logApsPeekUserAction(s.ApsPeekClickCloseModal),this._apsPeekHelper.proceedWithoutLogin(),this.visible(!1)},a.prototype._noThanks=function(){this._logApsPeekUserAction(s.ApsPeekClickNoThanks),this._apsPeekHelper.proceedWithoutLogin(),this.visible(!1)},a.prototype._logApsPeekUserAction=function(e){var t=new r;t.logApsPeekUserAction(e)},a}(a);e.exports=l}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=n(62),a=n(9),o=function(){function e(){this._apiEndpointService=new i;var e=a.getPageData();e.jsonViewModel&&e.jsonViewModel.apsPeek&&(this._apsPeek=e.jsonViewModel.apsPeek)}return e.prototype.getApsPeek=function(){if(this._apsPeek){var e=t.Deferred();return e.resolve(this._apsPeek),e.promise()}},e.prototype.logApsPeekUserAction=function(e){var n=this._apiEndpointService.create("apsPeekApi/logApsPeekUserAction"),i={userAction:e};t.post(n,i)},e}();e.exports=o}).call(t,n(2))},function(e,t){"use strict";var n;!function(e){e[e.ApsPeekClickLogin=1]="ApsPeekClickLogin",e[e.ApsPeekClickCloseModal=2]="ApsPeekClickCloseModal",e[e.ApsPeekClickNoThanks=3]="ApsPeekClickNoThanks"}(n||(n={})),e.exports=n},function(e,t){e.exports='<button type=button class="ficon ficon-close-popup close close-btn" data-dismiss=modal aria-hidden=true data-bind="click: close"></button> <h4 class=modal-title data-bind="text: title"></h4>'},function(e,t){e.exports='<div class=row> <div class="col-sm-7 col-xs-12 aps-peek-message"> <p data-bind="text: hiXYouHaveAnAgodaAccountText"></p> <p data-bind="text: noStringsAttachedText"></p> <div class=m-b-2> <button data-element-name=signin-with-apk-peek-button class="btn btn-lg btn-primary" data-bind="text: signInAndSaveXText, click:login"></button> </div> <a data-element-name=no-thanks-apk-peaek-link href=javascript:void(0) data-bind="text: noThanksIWantToPayFullPriceText, click:noThanks"></a> </div> <div class="col-sm-5 hidden-xs"> <div class=aps-peek-image></div> </div> </div>'},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(144),s=!1,l=function(){function e(){this._apiEndpointService=new a}return e.prototype.updateEmail=function(e){var n=this._apiEndpointService.create("guest/updateEmail"),l=a.registerApiCall(t.post(n,e),r.UpdateEmail);return l.then(function(e){i.postbox.publish(o.UPDATE_EMAIL_SUCCESSFUL,e),i.postbox.publish(o.PRICE_DETAILS_UPDATED,e.priceDetails),i.postbox.publish(o.PROMO_CODE_REDEMPTION_UPDATED,e.promoCodeRedemption),i.postbox.publish(o.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,e.isDisplayNewsletterSubscription),i.postbox.publish(o.SUBSCRIBED_TO_NEWSLETTER_UPDATED,e.isSubscribedToNewsletter),i.postbox.publish(o.MONEYBACK_DETAILS_UPDATED,e.moneyBackDetails),i.postbox.publish(o.DISCOUNT_BANNER_TEXT,e.discountBannerText),e.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,e.priceDetails.smartChoiceYouSaveText),s=!0;var t={loginTypes:e.isExistingMember?["email"]:[]};return i.postbox.publish(o.UPDATE_LOGIN_TYPES,t),e})},e.prototype.updatePhoneNumber=function(e){if(!s)return this.updateEmail({email:e.phoneNumber,isApsPeekAvailable:e.isApsPeekAvailable})},e.prototype.checkSuspicious=function(e){var n=this._apiEndpointService.create("guest/checkDetail");return e.action||(e.action="FE.BF.CheckSuspicious"),t.post(n,e).then(function(e){return i.postbox.publish(o.CHECK_SUSPICIOUS_RESPONSE,e),e})},e.prototype.updateUserEmail=function(e){var n=this._apiEndpointService.create("guest/updateUserEmail");return a.registerApiCall(t.post(n,e),r.UpdateUserEmail)},e}();e.exports=l}).call(t,n(2),n(3))},function(e,t){"use strict";var n=function(e,t){var n=new CustomEvent("knockoutToRedux_dispatch",{detail:{type:e,payload:t}});window.dispatchEvent(n)};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(170),o=n(171),r=1,s=.5,l=5;!function(e){e.getSuggestion=function(e,n){var i=a.EmailHelper.splitEmail(e),o=i&&t(i,n);return i&&o!==e?o:null};var t=function(e,t){var i=function(e){return Math.floor(s*e)},a=n(e.domain,o.DomainHelper.getDefaultDomains(),i(e.sld.length));if(a)return a===e.domain?null:e.name+"@"+a;if(t){var r=n(e.sld,o.DomainHelper.getDefaultSecondLevelDomains(),i(e.sld.length)),l=n(e.tld,o.DomainHelper.getDefaultTopLevelDomains(),i(e.tld.length));return r&&(e.sld=r),l&&(e.tld=l),e.name+"@"+e.sld+"."+e.tld}return null},n=function(e,t,n){if(!t||!e)return null;if(t.indexOf(e)>-1)return e;for(var a=1/0,o=null,s=0;s<t.length;s++){var d=i(e,t[s],n);if(d===r){o=t[s];break}d<=l&&d<a&&(a=d,o=t[s])}return o},i=function(e,t,n){if(!e||!t)return 1/0;for(var i=0,a=0,o=e.length,r=t.length,s=0,l=0,c=[];i<o&&a<r;){if(d(e,i,t,a)){s++;for(var p=0,u=!1;p<c.length;){var m=c[p];if(u=!1,i<=m.index1||a<=m.index2){u=Math.abs(a-i)>=Math.abs(m.index2-m.index1),u?l++:m.isTransposition||(m.isTransposition=!0,l++);break}i>m.index2&&a>m.index1?c.splice(p,1):p++}c.push({index1:i,index2:a,isTransposition:u})}else{i=a=Math.min(i,a);for(var h=0;h<n&&(i+h<o||a+h<r);h++){if(i+h<o&&d(e,i+h,t,a)){i+=h-1,a--;break}if(a+h<r&&d(e,i,t,a+h)){a+=h-1,i--;break}}}i++,a++,(i>=o||a>=r)&&(i=a=Math.min(i,a))}return Math.max(o,r)-s+l},d=function(e,t,n,i){return e.charCodeAt(t)===n.charCodeAt(i)}}(i=t.MailChecker||(t.MailChecker={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(171);!function(e){var t=/@/;e.splitEmail=function(e){if(!e)return null;var n=e.trim().toLocaleLowerCase(),i=n.split(t);if(i&&2===i.length){var o=a.DomainHelper.splitDomain(i[1]);if(o)return{name:i[0],domain:o.fullDomain,sld:o.secondLevelDomain,tld:o.topLevelDomain}}return null}}(i=t.EmailHelper||(t.EmailHelper={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(172);!function(e){var t=[],n=[],i=/\.(.+)/;e.getDefaultDomains=function(){return a.Domains},e.getDefaultTopLevelDomains=function(){return t&&t.length?t:(o(a.Domains),t)},e.getDefaultSecondLevelDomains=function(){return n&&n.length?n:(o(a.Domains),n)},e.splitDomains=function(t){return t&&t.map(e.splitDomain)},e.splitDomain=function(e){var t=null;if(e){var n=e.split(i);n&&n.length>=1&&(t={fullDomain:e,secondLevelDomain:n[0],topLevelDomain:n.length>=2?n[1]:null})}return t};var o=function(i){var a=e.splitDomains(i);if(a){var o=[],s=[];a.forEach(function(e){o.push(e.topLevelDomain),s.push(e.secondLevelDomain)}),t=o.filter(r),n=s.filter(r)}},r=function(e,t,n){return n.indexOf(e)===t}}(i=t.DomainHelper||(t.DomainHelper={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Domains=["gmail.com","hotmail.com","yahoo.com","naver.com","qq.com","yahoo.com.tw","yahoo.com.hk","hanmail.net","163.com","yahoo.co.jp","icloud.com","nate.com","outlook.com","yahoo.com.sg","live.com","ymail.com","msn.com","126.com","mail.ru","hotmail.co.uk","yahoo.com.my","yahoo.co.uk","agoda.com","yahoo.co.id","docomo.ne.jp","ezweb.ne.jp","daum.net","aol.com","me.com","i.softbank.jp","web.de","gmx.de","hotmail.fr","yahoo.com.ph","hotmail.co.th","yahoo.com.au","sina.com","yahoo.fr","rocketmail.com","bigpond.com","yandex.ru","googlemail.com","hotmail.co.jp","msa.hinet.net","windowslive.com","yahoo.de","yahoo.co.in","t-online.de","singnet.com.sg","mail.com","btinternet.com","foxmail.com","gmx.net","nifty.com","orange.fr","live.com.au","netvigator.com","yahoo.com.vn","softbank.ne.jp","live.co.uk","kimo.com","mac.com","hotmail.com.tw","yahoo.ca","hotmail.de","yahoo.co.th","bluewin.ch","139.com","livemail.tw","comcast.net","live.com.my","rediffmail.com","libero.it","optusnet.com.au","ybb.ne.jp","live.com.sg","hotmail.it","korea.kr","live.fr","outlook.co.th","gmx.ch","bk.ru","hotmail.sg","aliyun.com","wanadoo.fr","yeah.net","free.fr","live.hk","sbcglobal.net","yahoo.it","tnb.com.my","sky.com","seznam.cz","sohu.com","outlook.jp","ntu.edu.tw","gmx.at","live.cn","walla.com","live.jp","laposte.net","rambler.ru","hotmail.com.hk","pchome.com.tw","live.nl","yahoo.es","list.ru","inbox.ru","bigpond.net.au","freenet.de","iinet.net.au","outlook.fr","xtra.co.nz","wp.pl","y7mail.com","shaw.ca","mail2000.com.tw","seed.net.tw","singaporeair.com.sg","empal.com","protonmail.com","vip.qq.com","att.net","yahoo.co.kr","arcor.de","online.no","tm.com.my","yahoo.in","jcom.home.ne.jp","sfr.fr","live.se","tpg.com.au","yahoo.ne.jp","sina.com.cn","gmx.com","ntlworld.com","samsung.com","sina.cn","live.de","korea.com","paran.com","rogers.com"]},function(e,t){e.exports="<div class=guest-more-details data-bind=\"template: {afterRender: renderComplete}\"> <div class=customer-info> <div class=row> <div class=\"col-sm-6 form-group has-feedback place-of-birth\" data-bind=\"validationElement: guestDetails.customer.placeOfBirth, validationOptions: {insertMessages: false}\"><!-- ko component: {\r\n                    name: \"form-dropdown\",\r\n                    params : {\r\n                        labelText: guestDetails.placeOfBirthText,\r\n                        value: guestDetails.customer.placeOfBirth,\r\n                        hasFocus: true,\r\n                        emptyOptionLabel:  guestDetails.pleaseSelectOneText,\r\n                        valueAllowUnset: false,\r\n                        inputAttributes: {\r\n                            name: 'pob',\r\n                            id: 'pob'\r\n                        },\r\n                        optionGroups: [\r\n                            {\r\n                                options: getCountrySelectOptionsForBaseInputComponents(0),\r\n                                label: countrySelectList()[0].label\r\n                            },\r\n                            {\r\n                                options: getCountrySelectOptionsForBaseInputComponents(1),\r\n                                label: countrySelectList()[1].label\r\n                            }\r\n                        ]\r\n                    }\r\n                } --><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback date-of-birth\" data-bind=\"validationElement: guestDetails.customer.dateOfBirth, validationOptions: {insertMessages: false}\"><!-- ko component: {\r\n\t\t\t\t\tname: \"form-input\",\r\n\t\t\t\t\tparams : {\r\n\t\t\t\t\t\tlabelText: guestDetails.dateOfBirthText,\r\n\t\t\t\t\t\tvalue: guestDetails.customer.dateOfBirth,\r\n\t\t\t\t\t\tdobFormat: guestDetails.customer.dateOfBirth,\r\n\t\t\t\t\t\thasFocus: isFocused.dateOfBirth,\r\n\t\t\t\t\t\tvalueUpdate: ['keyup', 'paste', 'change'],\r\n\t\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\t\tname: 'dob',\r\n\t\t\t\t\t\t\tid: 'dob',\r\n\t\t\t\t\t\t\ttype: 'tel',\r\n\t\t\t\t\t\t\tautocomplete: 'off',\r\n\t\t\t\t\t\t\tmaxlength: '10',\r\n\t\t\t\t\t\t\tplaceholder: 'dd/mm/yyyy'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t} --><!-- /ko --> </div> </div> </div> </div>"},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(9),o=n(91),r=function(){function e(e){this.guestDetails=e.guestDetails,this.countrySelectList=e.countrySelectList,this.countryIdSelect||(this.countryIdSelect=t.observable(0)),this.isFocused||(this.isFocused={dateOfBirth:t.observable(!1),placeOfBirth:t.observable(!1)}),this.guestDetails.placeOfBirthText||(this.guestDetails.placeOfBirthText=t.observable("")),this.guestDetails.dateOfBirthText||(this.guestDetails.dateOfBirthText=t.observable("")),this.guestDetails.customer.placeOfBirth||(this.guestDetails.customer.placeOfBirth=t.observable("")),this.guestDetails.customer.dateOfBirth||(this.guestDetails.customer.dateOfBirth=t.observable("")),this.isAddMoreLifeExperiment=a.getFeature(o.AddMoreLifeToBookingForm),this._setValidation(),this.subscribeEvents()}return e.prototype.renderComplete=function(){},e.prototype.dispose=function(){this._dobSubscription&&this._dobSubscription.dispose()},e.prototype.getCountrySelectOptionsForBaseInputComponents=function(e){return this.countrySelectList()[e].options().map(function(e){return{text:e.text,value:e.text}})},e.prototype._setValidation=function(){this.guestDetails.customer.placeOfBirth.extend({required:{message:this.guestDetails.placeOfBirthText(),params:!0}}),this.guestDetails.customer.dateOfBirth.extend({required:{message:this.guestDetails.dateOfBirthText(),params:!0},validation:{validator:function(e){var t=/^(31\/(0?[13578]|1[02])|(29|30)\/(0?[1,3-9]|1[0-2]))\/(1[6-9]|[2-9]\d)?\d{2}$|^29\/0?2\/((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][29])|(16|[2468][048]|[3579][26])00)$|^(0?[1-9]|1\d|2[0-8])\/(0?[1-9]|1[0-2])\/(1[6-9]|[2-9]\d)?\d{2}$/g;return 10===e.length&&t.test(e)}}})},e.prototype.subscribeEvents=function(){var e=this;t.postbox.subscribe(i.SUBMIT_SECOND_STEP,function(){e.isFocused.dateOfBirth(!1),e.isFocused.placeOfBirth(!1)})},e}();e.exports=r}).call(t,n(3))},function(e,t){e.exports="<div class=row><!-- ko if: isCombineFirstNameLastName --> <div data-bind=\"template: { name: 'full-name-template'}\"></div><!-- /ko --><!-- ko ifnot: isCombineFirstNameLastName --><!-- ko ifnot: ko.unwrap(showLastNameFirst) --> <div data-bind=\"template: { name: 'first-name-template'}\"></div> <div data-bind=\"template: { name: 'last-name-template'}\"></div><!-- /ko --><!-- ko if: ko.unwrap(showLastNameFirst) --> <div data-bind=\"template: { name: 'last-name-template'}\"></div> <div data-bind=\"template: { name: 'first-name-template'}\"></div><!-- /ko --><!-- /ko --> </div><!-- ko if:  ko.unwrap(pinyinPanel) &&  !isLoggedIn() --><!-- ko component: {\r\n        name: \"pinyin-panel\",\r\n        params : {\r\n        firstName: firstName,\r\n        lastName: lastName,\r\n        translatedFirstName: translatedFirstName,\r\n        translatedLastName: translatedLastName,\r\n        pinyinPanel: pinyinPanel,\r\n        showLastNameFirst : showLastNameFirst,\r\n        isClickBackToFirstStep: isClickBackToFirstStep,\r\n        id: \"guest-name\"\r\n    }\r\n} --><!-- /ko --><!-- /ko --> <template id=first-name-template> <div class=\"col-sm-6 form-group has-feedback first-name\" data-bind=\"validationElement: firstName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: firstName,\r\n                labelText: firstNameText,\r\n                disable: isAllowLoggedInUserToChangeFirstNameAndLastName,\r\n                hasFocus: hasFocusOnFirstName,\r\n                inputAttributes: {\r\n                    name: 'firstName',\r\n                    id: 'firstName',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </template> <template id=last-name-template class=last-name-template> <div class=\"col-sm-6 form-group has-feedback last-name\" data-bind=\"validationElement: lastName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: lastName,\r\n                labelText: lastNameText,\r\n                disable: isAllowLoggedInUserToChangeFirstNameAndLastName,\r\n                hasFocus: hasFocusOnLastName,\r\n                inputAttributes: {\r\n                    name: 'lastName',\r\n                    id: 'lastName',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </template> <template id=full-name-template class=full-name-template> <div class=\"col-sm-12 form-group has-feedback last-name\" data-bind=\"validationElement: fullName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: fullName,\r\n                labelText: firstAndLastNameText,\r\n                disable: isAllowLoggedInUserToChangeFirstNameAndLastName,\r\n                hasFocus: hasFocus,\r\n                inputAttributes: {\r\n                    name: 'fullName',\r\n                    id: 'fullName',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </template>"},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(167),o=n(9),r=n(88),s=n(86),l=n(91),d=function(){function e(e){var n=this;this._guestService=new a,this.firstName=e.firstName,this.lastName=e.lastName,this.firstNameText=e.firstNameText,this.lastNameText=e.lastNameText,this.showLastNameFirst=e.showLastNameFirst,this.translatedFirstName=e.translatedFirstName,this.translatedLastName=e.translatedLastName,this.pinyinPanel=e.pinyinPanel,this.isClickBackToFirstStep=e.isClickBackToFirstStep,this.firstAndLastNameText=e.firstAndLastNameText,this.pleaseEnterFirstNameAndLastNameText=e.pleaseEnterFirstNameAndLastNameText,this.pleaseEnterTextInEnglishOnlyText=e.pleaseEnterTextInEnglishOnlyText,this.isCombineFirstNameLastName=e.isCombineFirstNameLastName,this.labelPrefix=e.labelPrefix?e.labelPrefix:"",this.isAddMoreLifeExperiment=o.getFeature(l.AddMoreLifeToBookingForm),this.isExperimentIKKI9495Applied=s.isApplied(r.MakeFirstAndLastNameFormFieldEditableForL2),this.hasFocus=t.isObservable(e.hasFocus)?e.hasFocus:t.observable(!1),this.hasFocusOnFirstName=t.observable(this.hasFocus()&&!t.unwrap(this.showLastNameFirst)),this.hasFocusOnLastName=t.observable(this.hasFocus()&&t.unwrap(this.showLastNameFirst)),
e.isFirstNameDisabled?this.isFirstNameDisabled=e.isFirstNameDisabled:this.isFirstNameDisabled=t.observable(!1),e.isLastNameDisabled?this.isLastNameDisabled=e.isLastNameDisabled:this.isLastNameDisabled=t.observable(!1),e.isLoggedIn?this.isLoggedIn=e.isLoggedIn:this.isLoggedIn=t.observable(!1),this.isGuestDetailsPanel=!1,e.isAllowLoggedInUserToChangeFirstNameAndLastName?t.isObservable(this.isAllowLoggedInUserToChangeFirstNameAndLastName)?this.isExperimentIKKI9495Applied&&this.isLoggedIn()?this.isAllowLoggedInUserToChangeFirstNameAndLastName(!1):this.isAllowLoggedInUserToChangeFirstNameAndLastName(e.isAllowLoggedInUserToChangeFirstNameAndLastName()):this.isAllowLoggedInUserToChangeFirstNameAndLastName=t.observable(e.isAllowLoggedInUserToChangeFirstNameAndLastName()):(t.isObservable(this.isAllowLoggedInUserToChangeFirstNameAndLastName)||(this.isAllowLoggedInUserToChangeFirstNameAndLastName=t.observable(!1)),this.isGuestDetailsPanel=!0),this.isLoggedIn()&&t.isObservable(this.isAllowLoggedInUserToChangeFirstNameAndLastName)&&(this.isExperimentIKKI9495Applied?this.isAllowLoggedInUserToChangeFirstNameAndLastName(!1):this.isAllowLoggedInUserToChangeFirstNameAndLastName(!this.isGuestDetailsPanel&&!this.isAllowLoggedInUserToChangeFirstNameAndLastName())),this.isCombineFirstNameLastName()?(this.fullNameRegex=e.fullNameRegex,this.fullName=e.fullName,this.firstNameOnlyRegex=e.firstNameOnlyRegex,this._setValidation(),this._subscribeEvents(),(this.isLoggedIn()||o.getFeature(l.IsPrefillForL1LoggedinUser))&&this._setFullNameBinding(),this.fullName.isValid()||this.hasFocus(!0)):(this._logoutSuccessfullSubscription=t.postbox.subscribe(i.LOGOUT_SUCCESSFUL,function(){n.isAllowLoggedInUserToChangeFirstNameAndLastName(!1)}),this._guestDetailsUpdatedSubscription=t.postbox.subscribe(i.GUEST_DETAILS_UPDATED,function(e){null!=e.isAllowLoggedInUserToChangeFirstNameAndLastName&&t.isObservable(n.isAllowLoggedInUserToChangeFirstNameAndLastName)&&(n.isExperimentIKKI9495Applied?n.isAllowLoggedInUserToChangeFirstNameAndLastName(!1):n.isAllowLoggedInUserToChangeFirstNameAndLastName(!n.isGuestDetailsPanel&&!e.isAllowLoggedInUserToChangeFirstNameAndLastName))}),this.hasFocus.subscribe(function(e){n.hasFocusOnFirstName(e&&!t.unwrap(n.showLastNameFirst)),n.hasFocusOnLastName(e&&t.unwrap(n.showLastNameFirst))}),this._subscribeSeparatedNameEvents()),this.isExperimentIKKI9495Applied&&this.isLoggedIn()&&this.isAllowLoggedInUserToChangeFirstNameAndLastName(!1)}return e.prototype._setFullNameBinding=function(){t.unwrap(this.showLastNameFirst)?this.fullName(((t.unwrap(this.lastName())?this.lastName():"")+" "+(t.unwrap(this.firstName())?this.firstName():"")).trim()):this.fullName(((t.unwrap(this.firstName())?this.firstName():"")+" "+(t.unwrap(this.lastName())?this.lastName():"")).trim())},e.prototype._setValidation=function(){var e=this;this.fullName.extend({required:{message:this.pleaseEnterFirstNameAndLastNameText(),params:!0},validation:[{validator:function(t){return!RegExp(e.firstNameOnlyRegex()).test(t)},message:this.pleaseEnterFirstNameAndLastNameText()},{validator:function(t){return RegExp(e.fullNameRegex()).test(t)},message:this.pleaseEnterTextInEnglishOnlyText()}]}),this.fullName()&&this.fullName.isModified(!0)},e.prototype._subscribeEvents=function(){var e=this;this._logoutSuccessfullSubscription=t.postbox.subscribe(i.LOGOUT_SUCCESSFUL,function(){e.isAllowLoggedInUserToChangeFirstNameAndLastName(!1),e.isCombineFirstNameLastName()&&e.fullName.isModified(!1)}),this._guestDetailsUpdatedSubscription=t.postbox.subscribe(i.GUEST_DETAILS_UPDATED,function(n){null!=n.isAllowLoggedInUserToChangeFirstNameAndLastName&&t.isObservable(e.isAllowLoggedInUserToChangeFirstNameAndLastName)&&(e.isExperimentIKKI9495Applied?e.isAllowLoggedInUserToChangeFirstNameAndLastName(!1):e.isAllowLoggedInUserToChangeFirstNameAndLastName(!e.isGuestDetailsPanel&&!n.isAllowLoggedInUserToChangeFirstNameAndLastName)),e._setFullNameBinding()}),this._fullNameSubscription=this.fullName.subscribe(function(n){if(null!=n){var i=n.trim().replace(/\s+/g," "),a=i.indexOf(" "),o=i.substring(0,a)||"",r=i.substring(a+1)||"",s=t.unwrap(e.showLastNameFirst);e.fullName(i),e.firstName(s?r:o),e.lastName(s?o:r),e._checkSuspicious(e.firstName(),e.lastName())}}),this.isAddMoreLifeExperiment&&(this._visibilityUpdateSubscription=t.postbox.subscribe(i.ON_COMPONENT_RENDER,function(n){null!=n&&"fullname"===n.name&&"guest-name"===n.id&&e.isCombineFirstNameLastName()&&t.unwrap(e.fullName)&&e.fullName.notifySubscribers()}))},e.prototype._subscribeSeparatedNameEvents=function(){var e=this;this._firstNameSubscription=this.firstName.subscribe(function(t){var n=t.trim().replace(/\s+/g," ");e.firstName(n)}),this._lastNameSubscription=this.lastName.subscribe(function(t){var n=t.trim().replace(/\s+/g," ");e.lastName(n)})},e.prototype._checkSuspicious=function(e,t){null!=e&&0!==e.length&&null!=t&&0!==t.length&&this._guestService.checkSuspicious({firstName:e,lastName:t})},e.prototype.dispose=function(){this._logoutSuccessfullSubscription&&this._logoutSuccessfullSubscription.dispose(),this._guestDetailsUpdatedSubscription&&this._guestDetailsUpdatedSubscription.dispose(),this.isCombineFirstNameLastName()&&this._fullNameSubscription.dispose(),this._firstNameSubscription&&this._firstNameSubscription.dispose(),this._lastNameSubscription&&this._lastNameSubscription.dispose(),this._visibilityUpdateSubscription&&this._visibilityUpdateSubscription.dispose()},e}();e.exports=d}).call(t,n(3))},function(e,t){e.exports="<h4><span data-bind=\"text: guestOrderTitle\"></span></h4> <div class=row> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: visa.firstName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: visa.firstName ,\r\n                labelText: guestDetails.firstNameText,\r\n                disable: false,\r\n                hasFocus: false,\r\n                inputAttributes: {\r\n                    name: 'visa-firstName',\r\n                    id: 'visa-firstName',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: visa.lastName\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: visa.lastName,\r\n                labelText: guestDetails.lastNameText,\r\n                disable: false,\r\n                hasFocus: false,\r\n                inputAttributes: {\r\n                    name: 'visa-lastName',\r\n                    id: 'visa-lastName',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </div> <div class=row> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: visa.passportNumber\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: visa.passportNumber,\r\n                labelText: guestDetails.guestVisa.passportNumberText,\r\n                disable: false,\r\n                hasFocus: false,\r\n                inputAttributes: {\r\n                    name: 'visa-passportNumber',\r\n                    id: 'visa-passportNumber',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: visa.dateOfBirthTextBox\"><!-- ko component: {\r\n        name: \"form-input\",\r\n        params : {\r\n            value: visa.dateOfBirthTextBox,\r\n            labelText: guestDetails.guestVisa.dateOfBirthText,\r\n            disable: false,\r\n            hasFocus: false,\r\n            inputAttributes: {\r\n                name: 'visa-dateOfBirth',\r\n                id: 'visa-dateOfBirth',\r\n                type: 'text',\r\n                autocapitalize: 'false',\r\n                autocomplete: 'name',\r\n                autocorrect: 'off',\r\n                placeHolder: guestDetails.guestVisa.dateOfBirthPlaceHolderText\r\n            }\r\n        }\r\n    } --><!-- /ko --> </div> </div> <div class=row> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: visa.countryOfResidenceId\"><!-- ko component: {\r\n            name: \"form-dropdown\",\r\n            params : {\r\n                value: visa.countryOfResidenceId,\r\n                labelText: guestDetails.guestVisa.nationalityText,\r\n                hasFocus: false,\r\n                valueAllowUnset: true,\r\n                emptyOptionLabel: guestDetails.pleaseSelectOneText,\r\n                css: { 'has-value': visa.countryOfResidenceId },\r\n                inputAttributes: {\r\n                    name: 'visa-countryOfResidence',\r\n                    id: 'visa-countryOfResidence',\r\n                    'data-element-name': 'country-of-residence'\r\n                },\r\n                optionGroups: [\r\n                {\r\n                    options: countrySelectList()[0].options,\r\n                    label: countrySelectList()[0].label\r\n                },\r\n                {\r\n                    options: countrySelectList()[1].options,\r\n                    label: countrySelectList()[1].label\r\n                }\r\n                ]\r\n            }\r\n        } --><!-- /ko --> </div> </div>"},function(e,t,n){(function(t){"use strict";var i=n(10),a=function(){function e(e){var n=this;this.guestDetails=e.guestDetails,this.countrySelectList=e.countrySelectList,this.visa=e.visa,this.guestOrderTitle=t.pureComputed(function(){return n.computeGuestTitleOrder(e.number)}),this.visa.firstName||(this.visa.firstName=t.observable("")),this.visa.lastName||(this.visa.lastName=t.observable("")),this.visa.passportNumber||(this.visa.passportNumber=t.observable("")),this.visa.dateOfBirthTextBox||(this.visa.dateOfBirthTextBox=t.observable("")),this.visa.dateOfBirth||(this.visa.dateOfBirth=t.observable("")),this._setValidation()}return e.prototype._setValidation=function(){var e=this;this.visa.firstName.extend({required:{message:this.guestDetails.pleaseEnterFirstNameText(),params:!0},validation:[{validator:function(t){return RegExp(e.guestDetails.nameRegex()).test(t)},message:this.guestDetails.pleaseEnterTextInEnglishOnlyText()}]}),this.visa.lastName.extend({required:{message:this.guestDetails.pleaseEnterLastNameText(),params:!0},validation:[{validator:function(t){return RegExp(e.guestDetails.nameRegex()).test(t)},message:this.guestDetails.pleaseEnterTextInEnglishOnlyText()}]}),this.visa.passportNumber.extend({required:{message:this.guestDetails.guestVisa.pleaseEnterPassportNumberText(),params:!0}}),this.visa.dateOfBirthTextBox.extend({required:{message:this.guestDetails.guestVisa.pleaseEnterDateOfBirthText(),params:!0},validation:[{validator:function(t){return e.validateDateOfBirth(t)},message:this.guestDetails.guestVisa.pleaseEnterValidDateOfBirthText()}]}),this.visa.countryOfResidenceId.extend({required:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:!0},notEqual:{message:this.guestDetails.pleaseSelectACountryOfResidenceText(),params:0}})},e.prototype.validateDateOfBirth=function(e){try{var t=/(\d{2})\-(\d{2})\-(\d{4})/,n=new Date(e.replace(t,"$3-$2-$1"));if("[object Date]"===Object.prototype.toString.call(n)){if(isNaN(n.getTime()))return!1;var i=""+(n.getMonth()+1),a=""+n.getDate(),o=n.getFullYear();return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),this.visa.dateOfBirth([o,i,a].join("-")),!0}return!1}catch(r){return!1}},e.prototype.computeGuestTitleOrder=function(e){return 1===e?this.guestDetails.guestVisa.guestLeadText():i.formatZeroBased(this.guestDetails.guestVisa.guestNumberText(),e.toString())},e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports="<h4 data-bind=\"text: guestFlight.flightDetailsText\"></h4> <div class=row> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: guestFlight.guestFlight.flightNumberArrival\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: guestFlight.guestFlight.flightNumberArrival ,\r\n                labelText: guestFlight.flightNumberArrivalText,\r\n                disable: false,\r\n                hasFocus: false,\r\n                inputAttributes: {\r\n                    name: 'flight-flightNumberArrival',\r\n                    id: 'flight-flightNumberArrival',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: guestFlight.guestFlight.estimatedPickupTime\"><!-- ko component: {\r\n            name: \"form-dropdown\",\r\n            params : {\r\n                value: guestFlight.guestFlight.estimatedPickupTime,\r\n                labelText: guestFlight.estimatedPickupTimeText,\r\n                emptyOptionLabel: guestFlight.selectTimeText,\r\n                options: guestFlight.arrivalDateTimeList.options,\r\n                optionsText: 'text',\r\n                optionsValue: 'value',\r\n                hasFocus: false,\r\n                valueAllowUnset: true,\r\n                css: { 'has-value': guestFlight.estimatedPickupTime},\r\n                inputAttributes: {\r\n                    name: 'flight-estimatedPickupTime',\r\n                    id: 'flight-estimatedPickupTime'\r\n                },\r\n            }\r\n        } --><!-- /ko --> </div> </div> <div class=row> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: guestFlight.guestFlight.flightNumberDeparture\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: guestFlight.guestFlight.flightNumberDeparture ,\r\n                labelText: guestFlight.flightNumberDepartureText,\r\n                disable: false,\r\n                hasFocus: false,\r\n                inputAttributes: {\r\n                    name: 'flight-flightNumberDeparture',\r\n                    id: 'flight-flightNumberDeparture',\r\n                    type: 'text',\r\n                    autocapitalize: 'false',\r\n                    autocomplete: 'name',\r\n                    autocorrect: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> <div class=\"col-sm-6 form-group has-feedback\" data-bind=\"validationElement: guestFlight.guestFlight.estimatedDropoffTime\"><!-- ko component: {\r\n            name: \"form-dropdown\",\r\n            params : {\r\n                value: guestFlight.guestFlight.estimatedDropoffTime,\r\n                labelText: guestFlight.estimatedDropoffTimeText,\r\n                emptyOptionLabel: guestFlight.selectTimeText,\r\n                options: guestFlight.departureDateTimeList.options,\r\n                optionsText: 'text',\r\n                optionsValue: 'value',\r\n                hasFocus: false,\r\n                valueAllowUnset: true,\r\n                css: { 'has-value': guestFlight.estimatedDropoffTime },\r\n                inputAttributes: {\r\n                    name: 'flight-estimatedDropoffTime',\r\n                    id: 'flight-estimatedDropoffTime'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </div>"},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.guestFlight=e.guestFlight,this.guestFlight.guestFlight.flightNumberArrival||(this.guestFlight.guestFlight.flightNumberArrival=t.observable("")),0===this.guestFlight.guestFlight.estimatedPickupTime()&&(this.guestFlight.guestFlight.estimatedPickupTime=t.observable(void 0)),this.guestFlight.guestFlight.flightNumberDeparture||(this.guestFlight.guestFlight.flightNumberDeparture=t.observable("")),0===this.guestFlight.guestFlight.estimatedDropoffTime()&&(this.guestFlight.guestFlight.estimatedDropoffTime=t.observable(void 0)),this._setValidation()}return e.prototype._setValidation=function(){this.guestFlight.guestFlight.flightNumberArrival.extend({required:{message:this.guestFlight.pleaseEnterFlightNumberText(),params:!0}}),this.guestFlight.guestFlight.flightNumberDeparture.extend({required:{message:this.guestFlight.pleaseEnterFlightNumberText(),params:!0}}),this.guestFlight.guestFlight.estimatedPickupTime.extend({required:{message:this.guestFlight.pleaseSelectScheduledArrivalTimeText(),params:!0},notEqual:{message:this.guestFlight.pleaseSelectScheduledArrivalTimeText(),params:0}}),this.guestFlight.guestFlight.estimatedDropoffTime.extend({required:{message:this.guestFlight.pleaseSelectScheduledDepartureTimeText(),params:!0},notEqual:{message:this.guestFlight.pleaseSelectScheduledDepartureTimeText(),params:0}})},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div class="row pinyin-panel"><!-- ko if: isTranslateToPinyin() && !isEditPinyinTextMode() --> <div class="col-sm-12 form-group has-feedback"> <label for=translatedFullName class=control-label data-bind="text: pinyinPanel.pinyinFullNameText"></label> <div class=pinyin-result> <span data-bind="text: translatedName()"></span> <button data-element-name=pinyin-translation-button class="btn btn-primary pull-right flip" data-bind="text: pinyinPanel.editButtonText, click: editButtonClicked"></button> </div> </div><!-- /ko --><!-- ko if: isEditPinyinTextMode --><!-- ko ifnot: showLastNameFirst --> <div data-bind="template: { name: \'translated-first-name-template\'}"></div> <div data-bind="template: { name: \'translated-last-name-template\'}"></div><!-- /ko --><!-- ko if: showLastNameFirst --> <div data-bind="template: { name: \'translated-last-name-template\'}"></div> <div data-bind="template: { name: \'translated-first-name-template\'}"></div><!-- /ko --><!-- /ko --> </div> <template type=text/html id=translated-first-name-template> <div class="col-sm-6 form-group has-feedback translated-first-name" data-bind="validationElement: translatedFirstName"><!-- ko component: {\r\n            name: "form-input",\r\n            params : {\r\n                value: translatedFirstName,\r\n                labelText: pinyinPanel.pinyinFirstNameText,\r\n                inputAttributes: {\r\n                    name: \'translatedFirstName\',\r\n                    id: \'translatedFirstName\',\r\n                    type: \'text\',\r\n                    autocomplete: \'off\',\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </template> <template type=text/html id=translated-last-name-template> <div class="col-sm-6 form-group has-feedback translated-last-name" data-bind="validationElement: translatedLastName"><!-- ko component: {\r\n            name: "form-input",\r\n            params : {\r\n                value: translatedLastName,\r\n                labelText: pinyinPanel.pinyinLastNameText,\r\n                inputAttributes: {\r\n                    name: \'translatedLastName\',\r\n                    id: \'translatedLastName\',\r\n                    type: \'text\',\r\n                    autocomplete: \'off\',\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </template>'},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(167),o=n(9),r=n(183),s=n(184),l=n(91),d=function(){function e(e){this.init(e),this._translateIfNeeded(),this._setValidation(),this._subscribeEvents(),this.transtalteComputed()}return e.prototype.init=function(e){this._pinyinService=new r,this._guestService=new a,this.firstName=e.firstName,this.isTranslateToPinyin=t.observable(!1),this.isEditPinyinTextMode=t.observable(!1),this.lastName=e.lastName,this.pinyinPanel=e.pinyinPanel,this.translatedFirstName=e.translatedFirstName,this.translatedLastName=e.translatedLastName,this._cachedTranslatedFirstName=t.observable(),this._cachedTranslatedLastName=t.observable(),this._chineseRegExp=new RegExp(this.pinyinPanel.chineseRegex()),this._pinyinRegExp=new RegExp(this.pinyinPanel.pinyinRegex()),this.showLastNameFirst=e.showLastNameFirst,this.isClickBackToFirstStep=e.isClickBackToFirstStep||t.observable(!1),this.isAddMoreLifeExperiment=o.getFeature(l.AddMoreLifeToBookingForm),this.id=e.id},e.prototype.editButtonClicked=function(){this.isEditPinyinTextMode(!0)},e.prototype._setValidation=function(){var e=this;this.translatedFirstName.extend({required:{message:this.pinyinPanel.pleaseEnterYourPinyinFirstNameText(),params:!0,onlyIf:function(){return e.isEditPinyinTextMode()}},pattern:{message:this.pinyinPanel.pleaseEnterTextInEnglishOrPinyinText(),params:this.pinyinPanel.pinyinRegex()}}),this.translatedFirstName()&&this.translatedFirstName.isModified(!0),this.translatedLastName.extend({required:{message:this.pinyinPanel.pleaseEnterYourPinyinLastNameText(),params:!0,onlyIf:function(){return e.isEditPinyinTextMode()}},pattern:{message:this.pinyinPanel.pleaseEnterTextInEnglishOrPinyinText(),params:this.pinyinPanel.pinyinRegex()}}),this.translatedLastName()&&this.translatedLastName.isModified(!0)},e.prototype.dispose=function(){this._firstNameSubscription&&this._firstNameSubscription.dispose(),this._lastNameSubscription&&this._lastNameSubscription.dispose(),this._translatedFirstNameSubscription&&this._translatedFirstNameSubscription.dispose(),this._translatedLastNameSubscription&&this._translatedLastNameSubscription.dispose(),this._visibilityUpdateSubscription&&this._visibilityUpdateSubscription.dispose()},e.prototype._translate=function(e,t){var n=this;this._pinyinService.translate(e,t).then(function(e){n.firstName()&&n.lastName()&&!n._containsChineseCharacter(n.firstName())&&!n._containsChineseCharacter(n.lastName())?n._resetState():(n.translatedFirstName(e.translatedFirstName),n.translatedLastName(e.translatedLastName),n._cachedTranslatedFirstName(e.translatedFirstName),n._cachedTranslatedLastName(e.translatedLastName),n.isTranslateToPinyin(!0),e.translatedFirstName&&e.translatedLastName||n.isEditPinyinTextMode(!0))})},e.prototype._translateIfNeeded=function(){this.isClickBackToFirstStep&&this.isClickBackToFirstStep()?this.isTranslateToPinyin(!0):this.firstName()&&this.lastName()&&(this._containsChineseCharacter(this.firstName())||this._containsChineseCharacter(this.lastName()))?this._translate(this.firstName(),this.lastName()):this._resetState()},e.prototype._resetState=function(){this.isTranslateToPinyin(!1),this.isEditPinyinTextMode(!1),this._cachedTranslatedFirstName(""),this._cachedTranslatedLastName(""),this.translatedFirstName(""),this.translatedLastName("")},e.prototype._containsChineseCharacter=function(e){return this._chineseRegExp.test(e)&&!this._pinyinRegExp.test(e)},e.prototype._subscribeEvents=function(){var e=this;this._firstNameSubscription=this.firstName.subscribe(function(t){e.isClickBackToFirstStep(!1),e._translateIfNeeded()}),this._lastNameSubscription=this.lastName.subscribe(function(t){e.isClickBackToFirstStep(!1),e._translateIfNeeded()}),this._translatedFirstNameSubscription=this.translatedFirstName.subscribe(function(t){if(t){var n=t.trim().replace(/\s+/g," ");e.translatedFirstName(n),e._checkSuspicious(e.translatedFirstName(),e.translatedLastName())}else e.translatedFirstName(e._cachedTranslatedFirstName())}),this._translatedLastNameSubscription=this.translatedLastName.subscribe(function(t){if(t){var n=t.trim().replace(/\s+/g," ");e.translatedLastName(n),e._checkSuspicious(e.translatedFirstName(),e.translatedLastName())}else e.translatedLastName(e._cachedTranslatedLastName())}),this.isAddMoreLifeExperiment&&(this._visibilityUpdateSubscription=t.postbox.subscribe(i.ON_COMPONENT_RENDER,function(n){null!=n&&"pinyin-panel"===n.name&&n.id===e.id&&(t.unwrap(e.translatedFirstName)&&e.translatedFirstName.notifySubscribers(),t.unwrap(e.translatedLastName)&&e.translatedLastName.notifySubscribers())}))},e.prototype.transtalteComputed=function(){var e=this;this.translatedName=t.computed(function(){return s.TranslatedName(e.translatedFirstName(),e.translatedLastName(),e.showLastNameFirst())})},e.prototype._checkSuspicious=function(e,t){null!=e&&0!==e.length&&null!=t&&0!==t.length&&this._guestService.checkSuspicious({firstName:e,lastName:t})},e}();e.exports=d}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=n(62),a=n(9),o=function(){function e(){this._apiEndpointService=new i}return e.prototype.translate=function(e,n){var i=this._apiEndpointService.create("pinyin/Translate"),o={firstName:e,lastName:n,language:a.getPageData().culture};return t.post(i,o)},e}();e.exports=o}).call(t,n(2))},function(e,t,n){(function(t){"use strict";var n=function(){function e(){}return e.FullName=function(e,n,i){return t.unwrap(i)?((t.unwrap(n())?n():"")+" "+(t.unwrap(e())?e():"")).trim():((t.unwrap(e())?e():"")+" "+(t.unwrap(n())?n():"")).trim()},e.TranslatedName=function(t,n,i){return i?e.ConcatFirstLastName(n,t):e.ConcatFirstLastName(t,n)},e.ConcatFirstLastName=function(e,t){return e+" "+t},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: roomDetails.breakfastDuringYourStayText--> <div class=room-confident-message> <div class="well confident-message"> <div> <label class=breakfast data-element-name=include-breakfast> <span class="ficon ficon-16 ficon-menu-bookings ficon-left text-success"></span> <span data-bind="text: roomDetails.breakfastDuringYourStayText"></span> <strong class=text-success data-bind="text: roomDetails.includedText"></strong><br/> <small class=subtitle data-bind="text: roomDetails.yesXWouldLikeBreakfastText"></small> </label> </div> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t,i){"use strict";var a=n(86),o=n(11),r=n(88),s=n(97),l=n(96),d=n(99),c=n(9),p=n(83),u=n(89),m=n(154),h=n(153),f=function(){function e(e){var n=this;if(this.isRTL=!1,this.roomDetails=e.roomDetails,this.paymentChargeOptionSelector=e.paymentChargeOptionSelector,this.isRoomConfidentMessageDisplayed=e.isRoomConfidentMessageDisplayed,this.checkinCheckoutDetails=e.checkinCheckoutDetails,this.bookingId=e.bookingId,this.referralUrl=e.referralUrl,this.scrollToMultiRoomSuggestionUrl=e.scrollToMultiRoomSuggestionUrl,this.isMobile=t.observable(e.isMobile),this.isRTL=c.getPageData().isRtl,this._modalService=new d,this.freeCancellationText=t.unwrap(this.roomDetails.roomTypes()[0].freeCancellationBeforeDateText),this.referralPageTypeId=e.referralPageTypeId,this.isDesktop=!(c.getPageData().jsonViewModel&&c.getPageData().jsonViewModel.isMobile),this.isNotTYP=!(c.getPageData().jsonViewModel.progress===h.Typ),this.isHotelAndRoomDetailsCombine=a.isApplied(r.CutTheRightPanelDonwToBeAllAboveTheFold)&&this.isDesktop&&this.isNotTYP,this.isShowChangeLink=t.unwrap(this.roomDetails.roomTypeListText)&&this.isChangeRoomLinkVisible(),i.touchevents||(this.initPopoverBindingOptions(),this._originalBNPLMessage=t.unwrap(e.roomDetails.bnplMessage)),this.roomDetails.shouldShowBnplMessage){var s=c.getPageData();s&&s.jsonViewModel&&s.jsonViewModel.features&&(s.jsonViewModel.features.shouldShowPaymentOptionForSingleRoom||s.jsonViewModel.features.shouldShowPaymentOptionPanel)&&(this.paymentChargeOptionSubscription=t.postbox.subscribe(o.PAYMENT_CHARGE_OPTION_UPDATED,function(e){n.updatePaymentChargeOptionText(e)})),t.unwrap(this.paymentChargeOptionSelector)&&(this.paymentChargeOptionSelector.paymentChargeOption()===p.PayLater?this.roomDetails.bnplMessage(t.unwrap(e.roomDetails.bnplMessage)):t.unwrap(e.roomDetails.bnplMessage)&&this.roomDetails.bnplMessage(this.roomDetails.payNowText()))}this.isHotelAndRoomDetailsCombine?this.roomDetailContainerCssColumn="col-sm-9":this.roomDetailContainerCssColumn=t.unwrap(this.roomDetails.roomTypeListText)&&this.isChangeRoomLinkVisible()?"col-sm-9":"col-sm-12"}return e.prototype.dispose=function(){this.paymentChargeOptionSubscription&&this.paymentChargeOptionSubscription.dispose()},e.prototype.renderComplete=function(){if(t.postbox.publish(o.SEND_CRITICAL_MARK,m.RoomDetails),window.performanceClient){var e=function(){setTimeout(function(){var e=window.performanceClient;window.agoda.pmc_bundle&&e&&e.measureFirstImportantRenderMoment?window.performanceClient.measureFirstImportantRenderMoment():e&&e.mark&&window.performanceClient.mark("TIME.FIRST.IMPORTANT.RENDER")},0)};window.requestAnimationFrame(e)}},e.prototype.openBookingConditionsModal=function(){var e=new s;e.header.data={isCloseBtnDisplayed:!0,title:this.roomDetails.roomTypes()[0].bookingConditionsModal.title()},e.body.name=l.BOOKING_CONDITIONS_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(e.body.name,n(187)),e.body.data={vm:this.roomDetails.roomTypes()[0].bookingConditionsModal},e.dialogCss="booking-conditions-modals",e.options.keyboard=!0,this._modalService.open(e)},e.prototype.isReferralPageIsSearch=function(){return 103===this.referralPageTypeId},e.prototype.isChangeRoomLinkVisible=function(){return 32!==c.getPageData().pageId&&!this.isReferralPageIsSearch()},e.prototype.isEnhancedChangeRoomLinkVisible=function(){return 32!==c.getPageData().pageId&&this.isReferralPageIsSearch()},e.prototype.isDisplayCheapestRoomBadge=function(){return t.unwrap(this.roomDetails.isCheapestRoom)||this.isReferralPageIsSearch()},e.prototype.getChangeRoomHref=function(){return this.scrollToMultiRoomSuggestionUrl||this.referralUrl},e.prototype.updatePaymentChargeOptionText=function(e){e===p.PayLater?this.roomDetails.bnplMessage(this._originalBNPLMessage):this._originalBNPLMessage&&this.roomDetails.bnplMessage(this.roomDetails.payNowText())},e.prototype.initPopoverBindingOptions=function(){var e=this.roomDetails.roomTypes()[0].bookingConditionsModal,n=c.getPageData(),i=n&&n.jsonViewModel&&n.jsonViewModel.features&&n.jsonViewModel.features.isuseroriginkorea;if(this.freeCancellationPopoverOptions=new u,this.freeCancellationPopoverOptions.template=l.BOOKING_CONDITIONS_POPOVER,this.freeCancellationPopoverOptions.options={container:"body",placement:"top",title:i&&0===e.cancellationPolicyId()?"<span class='korea-non-refundable'>"+e.bookingConditionsText()+"</span>":e.bookingConditionsText(),trigger:"hover",html:!0,template:'\n                <div class="popover free-cancellation-popover-container">\n                    <div class="arrow free-cancellation-popover-arrow"></div>\n                    <h3 class="popover-title free-cancellation-popover-title"></h3>\n                    <div class="popover-content free-cancellation-popover-content"></div>\n                </div>\n            '},this.freeCancellationPopoverOptions.data={additionalCancellationPolicyText:t.unwrap(e.additionalCancellationPolicyText),cancellationPolicy:t.unwrap(e.cancellationPolicy),cancellationPolicyId:t.unwrap(e.cancellationPolicyId),freeCancellationPeriod:t.unwrap(e.freeCancellationPeriod),roomPolicyText:e.roomPolicyText,shouldShowRoomPolicyInPopover:e.shouldShowRoomPolicyInPopover},a.isApplied(r.CancellationPolicyNotShowPopover)){this.bookingConditionsPopoverBindingOptions=new u;var o="left";n.isRtl&&(o="right"),this.bookingConditionsPopoverBindingOptions.template=l.BOOKING_CONDITIONS_POPOVER,this.bookingConditionsPopoverBindingOptions.options.placement=o,this.bookingConditionsPopoverBindingOptions.options.title=i&&0===this.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicyId()?"<span class='korea-non-refundable'>"+this.roomDetails.roomTypes()[0].bookingConditionsModal.bookingConditionsText()+"</span>":this.roomDetails.roomTypes()[0].bookingConditionsModal.bookingConditionsText(),this.bookingConditionsPopoverBindingOptions.data={additionalCancellationPolicyText:t.unwrap(this.roomDetails.roomTypes()[0].bookingConditionsModal.additionalCancellationPolicyText),
cancellationPolicy:this.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicy(),cancellationPolicyId:this.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicyId(),freeCancellationPeriod:this.roomDetails.roomTypes()[0].bookingConditionsModal.freeCancellationPeriod(),roomPolicyText:this.roomDetails.roomTypes()[0].bookingConditionsModal.roomPolicyText,shouldShowRoomPolicyInPopover:this.roomDetails.roomTypes()[0].bookingConditionsModal.shouldShowRoomPolicyInPopover}}},e}();e.exports=f}).call(t,n(3),n(25))},function(e,t){e.exports='<!-- ko if: vm.amendAndCancelMyBookingText --> <h5 class=amend-my-booking-title data-bind="text: vm.amendAndCancelMyBookingText"></h5><!-- /ko --><!-- ko if: vm.amendAndCancelMyBookingDescriptionsText --> <p class=amend-my-booking-description data-bind="text: vm.amendAndCancelMyBookingDescriptionsText"></p><!-- /ko --> <h5 class=cancellation-policy-title data-bind="text: vm.cancellationPolicyText"></h5><!-- ko if: vm.freeCancellationPeriod --> <p class=cancellation-period data-bind="text: vm.freeCancellationPeriod"></p><!-- /ko --> <p data-bind="class: vm.cancellationPolicyId() == 0 ? \'cancellation-policy korea-non-refundable\':\'cancellation-policy\', text: vm.cancellationPolicy"></p><!-- ko if: vm.prepaymentText --> <h5 class=amend-my-booking-title data-bind="text: vm.prepaymentText"></h5><!-- /ko --><!-- ko if: vm.prepaymentDescriptionText --> <p class=amend-my-booking-description data-bind="text: vm.prepaymentDescriptionText"></p><!-- /ko --><!-- ko if: vm.roomPolicyText --> <p class=room-policy data-bind="html: vm.roomPolicyText"></p><!-- /ko --><!-- ko if: vm.additionalCancellationPolicyText --> <p class=cancellation-policy data-bind="text: vm.additionalCancellationPolicyText"></p><!-- /ko --><!-- ko if: vm.yourRoomText --> <h5 class=your-room-title data-bind="text: vm.yourRoomText"></h5><!-- /ko --> <ul data-bind="foreach: vm.yourRoomDescriptionsText"> <li data-bind="text: $data" class=room-description></li> </ul> <h5 class=children-and-extra-beds-title data-bind="text: vm.childrenAndExtraBedsText"></h5> <ul data-bind="foreach: vm.childrenAndExtraBedsDescriptions"> <li class=children-and-extra-beds-description data-bind="text: $data"></li> </ul><!-- ko if: vm.isCreditCardRequired --><!-- ko if: vm.creditCardRefundsText --> <h5 class=creditcard-refunds-title data-bind="text: vm.creditCardRefundsText"></h5><!-- /ko --><!-- ko if: vm.creditCardRefundsDescriptionsText --> <p class=creditcard-refunds-description data-bind="text: vm.creditCardRefundsDescriptionsText"></p><!-- /ko --><!-- /ko --><!-- ko if: vm.localTaxReceiptsAreOnlyAvailableText --> <h5 class=tax-receipts-title data-bind="text: vm.taxReceiptsText"></h5> <ul> <li class=tax-receipts-description data-bind="text: vm.localTaxReceiptsAreOnlyAvailableText"></li> </ul> <!-- /ko -->'},function(e,t){e.exports='<ul class="list-default m-b-0"><!-- ko if: roomDetails.roomTypes()[0].benefitListText --> <li class=breakfast-included data-bind="text: roomDetails.roomTypes()[0].benefitListText"></li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].promotionCssText --> <li class=promotion data-bind="css: roomDetails.roomTypes()[0].promotionCssText.cssClass"><!-- ko if: roomDetails.roomTypes()[0].flashDealText --> <span data-bind="text: roomDetails.roomTypes()[0].flashDealText() + \' -\'"></span><!-- /ko --> <span data-bind="text: roomDetails.roomTypes()[0].promotionCssText.text"></span> </li><!-- /ko --> <li class=booking-conditions> <a data-element-name=cancellation-policy-link href=# data-bind="class: roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicyId() == 0 ? \'korea-non-refundable\':\'\', click: openBookingConditionsModal, popover: bookingConditionsPopoverBindingOptions, text: roomDetails.roomTypes()[0].bookingConditionsText"></a> </li><!-- ko if: roomDetails.benefitConfirmByMinsText --> <li class="text-success bnpl-message" data-bind="text: roomDetails.benefitConfirmByMinsText"></li><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.bnplMessage) --> <li class="text-success bnpl-message" data-bind="text: roomDetails.bnplMessage"></li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].freeCancellationBeforeDateText --> <li class="text-success bnpl-message" data-bind="text: roomDetails.roomTypes()[0].freeCancellationBeforeDateText"></li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].payAtHotelText --> <li class="text-success pay-at-hotel" data-bind="text: roomDetails.roomTypes()[0].payAtHotelText"></li><!-- /ko --><!-- ko if:roomDetails.roomTypes()[0].availabilityMessage --> <li class=availability-message data-bind="css: roomDetails.roomTypes()[0].availabilityMessage.cssClass, html: roomDetails.roomTypes()[0].availabilityMessage.text"></li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].taxReceiptAvailableText --> <li class=tax-receipt data-bind="text: roomDetails.roomTypes()[0].taxReceiptAvailableText"></li><!-- /ko --><!-- ko if: roomDetails.extraBedIncludedText --> <li class=extra-bed-included data-bind="text: roomDetails.extraBedIncludedText"></li><!-- /ko --> </ul>'},function(e,t){e.exports='<div class=room-details data-bind="template: {afterRender: renderComplete}"><!-- ko if: isHotelAndRoomDetailsCombine --> <div class=divider-solid-bottom></div><!-- /ko --><!-- ko if: !isMobile() && isDisplayCheapestRoomBadge() --> <div class=cheapest-room-badge data-bind="text: roomDetails.ourCheapestRoomText(), css: { \'with-combine\': isHotelAndRoomDetailsCombine }" data-element-name=badge-message-cheapest-room> </div><!-- /ko --><!-- ko ifnot: isHotelAndRoomDetailsCombine--><!-- ko if: checkinCheckoutDetails --><!-- ko component: {\r\n                name: "checkin-checkout-details-panel",\r\n                params : {\r\n                    checkinCheckout: checkinCheckoutDetails,\r\n                    roomDetails: roomDetails,\r\n                    isShowChangeLink: isShowChangeLink,\r\n                    scrollToMultiRoomSuggestionUrl: scrollToMultiRoomSuggestionUrl,\r\n                    referralUrl: referralUrl,\r\n                    isMobile: isMobile\r\n                }\r\n            } --><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: !ko.unwrap(isMobile) --> <div class=room-details-info-container> <div class=row> <div data-bind="css: roomDetailContainerCssColumn"><!-- ko if: isHotelAndRoomDetailsCombine && checkinCheckoutDetails && ko.unwrap(checkinCheckoutDetails.checkinCheckoutDate) --> <p> <i class="ficon ficon-16 ficon-calendar-onmap"></i> <span class=booking-period data-bind="html: checkinCheckoutDetails.checkinCheckoutDate"> </span> </p><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.roomTypeListText) && !ko.unwrap(roomDetails.isNewDesign) || isHotelAndRoomDetailsCombine --> <p> <i class="ficon ficon-16 ficon-single-bed"></i> <span data-bind="text: roomDetails.roomTypeListText"></span> </p><!-- /ko --><!-- ko if: isHotelAndRoomDetailsCombine && ko.unwrap(roomDetails.isNewDesign) && ko.unwrap(roomDetails.subReviewScoreText) && ko.unwrap(roomDetails.formattedSubReviewScore) --> <div class=review-score-container> <span class=score-container> <i class="ficon ficon-review-icon review-icon"></i> <span class=review-score data-bind="text: roomDetails.formattedSubReviewScore"></span> </span> <span class=review-text data-bind="text: roomDetails.subReviewScoreText"></span> </div><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.occupancy) --> <p> <i class="ficon ficon-16 ficon-solo"></i> <span id=occupancyDetails data-bind="text: roomDetails.occupancy"></span> </p><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.capacity) --> <p> <i class="ficon ficon-16 ficon-group-travelers"></i><!-- ko ifnot: roomDetails.isShowAsHtmlText --> <span class=room-details-capacity-text data-bind="text: roomDetails.capacity"></span><!-- /ko --><!-- ko if: roomDetails.isShowAsHtmlText --> <span class=room-details-capacity-text data-bind="html: roomDetails.capacity"></span><!-- /ko --> </p><!-- /ko --><!-- ko if: !isDesktop && ko.unwrap(roomDetails.roomTypes) && ko.unwrap(roomDetails.roomTypes()[0].size) --> <p> <i class="ficon ficon-16 ficon-domestic-rates"></i> <span id=roomdetails-room-size-text data-bind="text: roomDetails.roomTypes()[0].size"></span> </p><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.roomTypes) && ko.unwrap(roomDetails.roomTypes()[0].sizeType) --> <p> <span class=roomdetails-room-size-type-text data-bind="text: roomDetails.roomTypes()[0].sizeType"></span> </p><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.benefits) --> <p> <i class="ficon ficon-16 ficon-noti-check-mark-sharp"></i> <span id=roomdetails-room-benefits data-bind="text: roomDetails.benefits"></span> </p><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.breakfastIncludedText) --> <p> <i class="ficon ficon-16 ficon-noti-check-mark-sharp"></i> <span id=roomdetails-room-breakfast data-bind="text: roomDetails.breakfastIncludedText"></span> </p><!-- /ko --><!-- /ko --> </div><!-- ko ifnot: isHotelAndRoomDetailsCombine --><!-- ko if: isShowChangeLink && !ko.unwrap(isMobile) && !ko.unwrap(roomDetails.isNewDesign) --> <div class="col-sm-3 side-column"><!-- ko if: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: scrollToMultiRoomSuggestionUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --><!-- ko ifnot: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: referralUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --> </div><!-- /ko --><!-- /ko --><!-- ko if: isHotelAndRoomDetailsCombine --><!-- ko if: !ko.unwrap(isMobile) --> <div class="col-sm-3 side-column"><!-- ko if: ko.unwrap(checkinCheckoutDetails) && ko.unwrap(checkinCheckoutDetails.nightsText) --> <div class=nights-box data-bind="text: checkinCheckoutDetails.nightsText"></div><!-- /ko --><!-- ko if: isShowChangeLink && !ko.unwrap(isMobile) --><!-- ko if: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: scrollToMultiRoomSuggestionUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --><!-- ko ifnot: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: referralUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --><!-- /ko --> </div><!-- /ko --><!-- /ko --> </div><!-- ko if: freeCancellationText || ko.unwrap(roomDetails.bnplMessage) || (ko.unwrap(roomDetails.roomTypes) && roomDetails.roomTypes()[0].policyItems) --> <div class=room-details-footer-container><!-- ko ifnot: isHotelAndRoomDetailsCombine --> <div class=divider-solid-bottom></div><!-- /ko --><!-- ko if: freeCancellationText --> <div class=row> <a target=_blank data-bind="click: openBookingConditionsModal" href=# data-element-name=free-cancellation-link class=free-cancellation-link> <span data-bind="text: freeCancellationText"></span> </a> </div><!-- /ko --><!-- ko if: roomDetails.roomTypes() && ko.unwrap(roomDetails.roomTypes()[0].policyItems) --> <div class="row room-policy-item" data-bind="foreach: { data: roomDetails.roomTypes()[0].policyItems(), as: \'policyItem\'}"> <div data-bind="css: policyItem.cssClass ? policyItem.cssClass() + \' m-b-1\': \'m-b-1\'"><!-- ko if: policyItem.isShowModal() --> <a href=# data-bind="click: $parent.openBookingConditionsModal, popover: $parent.bookingConditionsPopoverBindingOptions, text: policyItem.text"></a><!-- /ko --><!-- ko ifnot: policyItem.isShowModal() --> <span data-bind="html: policyItem.text"></span><!-- /ko --> </div> </div><!-- /ko --><!-- ko if: ko.unwrap(roomDetails.bnplMessage) --> <div class="row room-policy-item" data-bind="text: roomDetails.bnplMessage"></div><!-- /ko --> </div><!-- /ko --> </div><!-- /ko --><!-- ko if: ko.unwrap(isMobile) --> <h5 class="room-details-title m-t-0 hidden-xs" data-bind="text: roomDetails.roomTypes()[0].title()"></h5> <div class="media media-xs-responsive"> <div class=media-body> <ul class="list-default m-b-0"> <li class="room-type-name visible-xs-list-item"> <span data-bind="text: roomDetails.roomTypes()[0].title() + \' (\' + roomDetails.roomTypes()[0].size() + \')\'"></span><!-- ko if: roomDetails.roomTypes()[0].domesticRateText --> <span class=room-type-domestic data-bind="text: roomDetails.roomTypes()[0].domesticRateText"></span><!-- /ko --> </li><!-- ko if: bookingId --> <li class=booking-id> <span data-bind="text: roomDetails.bookingIdText() + \' : \'"></span> <a data-bind="text: bookingId, attr: { href: roomDetails.mmbUrl, target: \'_blank\' }"></a> </li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].size --> <li class="room-size hidden-xs" data-bind="text: roomDetails.roomTypes()[0].size()"></li><!-- /ko --><!-- ko if: roomDetails.roomTypes()[0].breakfastIncludedText --> <li class=breakfast-included data-bind="text: roomDetails.roomTypes()[0].breakfastIncludedText"></li><!-- /ko --> </ul><!-- ko component: {\r\n                name: "room-details-benefits",\r\n                params: {\r\n                    roomDetails: roomDetails,\r\n                    paymentChargeOptionSelector: paymentChargeOptionSelector,\r\n                    referralUrl: referralUrl,\r\n                    isMobile: isMobile,\r\n                    scrollToMultiRoomSuggestionUrl: scrollToMultiRoomSuggestionUrl,\r\n                    referralPageTypeId: referralPageTypeId\r\n                }\r\n            } --><!-- /ko --> </div> </div><!-- /ko --><!-- The below code For mobile version only, For desktop RoomConfidentMessageDisplayed is not a part of RoomDetails --><!-- ko if: isRoomConfidentMessageDisplayed --><!-- ko if: roomDetails.breakfastDuringYourStayText --> <div class="room-confident-message visible-xs-block"> <div class="well confident-message"> <div> <label class=breakfast data-element-name=include-breakfast> <span class="ficon ficon-16 ficon-menu-bookings ficon-left text-success"></span> <span data-bind="text: roomDetails.breakfastDuringYourStayText"></span> <strong class=text-success data-bind="text: roomDetails.includedText"></strong><br/> <small class=subtitle data-bind="text: roomDetails.yesXWouldLikeBreakfastText"></small> </label> </div> </div> </div><!-- /ko --><!-- /ko --> </div>'},function(e,t){e.exports='<div class=checkin-checkout-details-panel data-bind="css: { \'with-combine\': isHotelAndRoomDetailsCombine }"> <div> <div class=dates-container> <h4 data-bind="html: checkinCheckoutDetails.checkinCheckoutDate"></h4> </div> <div class=nights-container> <h4 data-bind="text: checkinCheckoutDetails.nightsText"></h4> </div> </div><!-- ko if: ko.unwrap(roomDetails.isNewDesign) --> <div class=room-details-panel><!-- ko if: ko.unwrap(roomDetails.roomTypeListText) --> <strong data-bind="text: roomDetails.roomTypeListText"></strong><!-- /ko --><!-- ko if: isShowChangeLink && !ko.unwrap(isMobile) --> <div><!-- ko if: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: scrollToMultiRoomSuggestionUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --><!-- ko ifnot: scrollToMultiRoomSuggestionUrl --> <a target=_blank data-bind="attr: { href: referralUrl }" href=# data-element-name=bf-rd-change-room-link> <span data-bind="text: roomDetails.changeRoomText"></span> </a><!-- /ko --> </div><!-- /ko --> </div><!-- ko if: ko.unwrap(roomDetails.subReviewScoreText) && ko.unwrap(roomDetails.formattedSubReviewScore) --> <div class=review-score-container> <span class=score-container> <i class="ficon ficon-review-icon review-icon"></i> <span class=review-score data-bind="text: roomDetails.formattedSubReviewScore"></span> </span> <span class=review-text data-bind="text: roomDetails.subReviewScoreText"></span> </div><!-- /ko --><!-- /ko --><!-- ko ifnot: isHotelAndRoomDetailsCombine --> <div class=divider-solid-bottom></div><!-- /ko --> </div>'},function(e,t,n){"use strict";var i=n(86),a=n(88),o=n(9),r=n(153),s=function(){function e(e){this.isShowChangeLink=e.isShowChangeLink,this.scrollToMultiRoomSuggestionUrl=e.scrollToMultiRoomSuggestionUrl,this.referralUrl=e.referralUrl,this.checkinCheckoutDetails=e.checkinCheckout,this.roomDetails=e.roomDetails,this.isMobile=e.isMobile,this.isDesktop=!(o.getPageData().jsonViewModel&&o.getPageData().jsonViewModel.isMobile),this.isNotTYP=!(o.getPageData().jsonViewModel.progress===r.Typ),this.isHotelAndRoomDetailsCombine=i.isApplied(a.CutTheRightPanelDonwToBeAllAboveTheFold)&&this.isDesktop&&this.isNotTYP}return e}();e.exports=s},function(e,t){e.exports='<!-- ko ifnot: specialRequests.isExperimentIKKI7807Applied --> <fieldset class=special-requests><!-- ko ifnot: isExpandedSpecialRequestsWithCheckbox --> <p class=special-requests-notice>{{specialRequests.specialRequestNoticeText}}</p><!-- /ko --><!-- ko if: isExpandedSpecialRequestsWithCheckbox --> <p class=special-requests-other>{{specialRequests.otherPopularRequests}}</p><!-- /ko --> <div class=row> <div class=col-sm-6> <div class="checkbox high-floor"> <label> <input type=checkbox id=isRequestHighFloor name=isRequestHighFloor data-bind="checked: specialRequests.specialRequest.isRequestHighFloor" data-element-name=special-request-high-floor /> <span>{{specialRequests.isRequestHighFloorText}}</span> </label> </div> <div class="checkbox quiet-room"> <label> <input type=checkbox id=isRequestQuietRoom name=isRequestQuietRoom data-bind="checked: specialRequests.specialRequest.isRequestQuietRoom" data-element-name=special-request-quiet-room /> <span>{{specialRequests.isRequestQuietRoomText}}</span> </label> </div> </div> <div class=col-sm-6><!-- ko if: specialRequests.specialRequest.isRequestTwoSameRooms --> <div class="checkbox adjoining-room"> <label> <input type=checkbox id=isRequestAdjoiningRoom name=isRequestAdjoiningRoom data-bind="checked: specialRequests.specialRequest.isRequestAdjoiningRoom" data-element-name=special-request-adjoining-room /> <span>{{specialRequests.isRequestAdjoiningRoomText}}</span> </label> </div><!-- /ko --> <div class="checkbox baby-cot"> <label> <input type=checkbox id=isRequestBabyCot name=isRequestBabyCot data-bind="checked: specialRequests.specialRequest.isRequestBabyCot" data-element-name=special-request-baby-cot /> <span>{{specialRequests.isRequestBabyCotText}}</span> <br/> <span>{{specialRequests.additionalChargesMayApplyText}}</span> </label> </div> </div> <div class=clearfix></div> <div class=col-sm-12> <div class="divider-dotted-bottom m-b-0 p-b-0"></div> </div> </div> <div class=row> <div class=col-sm-12> <div class="checkbox airport-transfer"> <label> <input type=checkbox id=isRequestAirportTransfer name=isRequestAirportTransfer data-bind="checked: specialRequests.specialRequest.isRequestAirportTransfer" data-element-name=special-request-airport-transfer /> <span>{{specialRequests.airportTransferText}}</span> </label> </div><!-- ko if: specialRequests.specialRequest.isRequestCheckinEarly() || specialRequests.specialRequest.isRequestAirportTransfer() --> <div> <p class=addition-payment-text> <span>{{specialRequests.noteText}} {{specialRequests.additionalPaymentText}} <span class=air-transfer-message data-bind="html: specialRequests.airportTransferInvalidMessage"></span></span> </p> </div><!-- /ko --><!-- ko if: specialRequests.specialRequest.isRequestAirportTransfer() --> <div class="form-group airport-transfer" data-bind=validationElement:specialRequests.specialRequest.airportTransferBuffer><!-- ko ifnot: isAddMoreLifeExperiment --> <textarea rows=3 cols=29 maxlength=50 id=airportTransfer name=airportTransfer class="form-control fixed-text-area" data-bind="value: specialRequests.specialRequest.airportTransferBuffer, attr:{ placeholder: specialRequests.isRequestAirportTransferText() + \'\\n\' + specialRequests.transfersAreNotGuaranteedText()}" data-element-name=special-request-airport-transfer-text></textarea><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                        name: "form-textarea",\r\n                        params : {\r\n                            value: specialRequests.specialRequest.airportTransferBuffer,\r\n                            labelText: specialRequests.isRequestAirportTransferText(),\r\n                            css: { \'has-value\': ko.unwrap(specialRequests.specialRequest.airportTransferBuffer) != "" },\r\n                            inputAttributes: {\r\n                                name: \'airportTransfer\',\r\n                                id: \'airportTransfer\',\r\n                                \'data-element-name\': \'special-request-airport-transfer-text\',\r\n                                rows: 3,\r\n                                cols: 29,\r\n                                maxlength: 50,\r\n                                placeholder: specialRequests.transfersAreNotGuaranteedText()\r\n                            }\r\n                        }\r\n                    } --><!-- /ko --><!-- /ko --> </div><!-- /ko --> </div> <div class=clearfix></div> <div class=col-sm-12> <div class="divider-dotted-bottom p-b-0"></div> </div> </div> <div class=row> <div class="col-sm-12 form-group additional-notes" data-bind="validationElement: specialRequests.specialRequest.additionalNotesBuffer"><!-- ko component: {\r\n                    name: "form-textarea",\r\n                    params : {\r\n                        value: specialRequests.specialRequest.additionalNotesBuffer,\r\n                        labelText: specialRequests.additionalNotesText,\r\n                        hasFocus: hasFocusOnSpecialRequestTextArea,\r\n                        css: { \'has-value\': ko.unwrap(specialRequests.specialRequest.additionalNotesBuffer) != "" }, \r\n                        inputAttributes: {\r\n                            name: \'additionalNotes\',\r\n                            id: \'additionalNotes\',\r\n                            \'data-element-name\': \'special-request-additional-notes\',\r\n                            rows: 3,\r\n                            cols: 29\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> </div> </fieldset><!-- /ko --><!-- ko if: specialRequests.isExperimentIKKI7807Applied --> <div class=row> <div class="col-sm-12 form-group additional-notes" data-bind="validationElement: specialRequests.specialRequest.additionalNotesBuffer"><!-- ko component: {\r\n                    name: "form-textarea",\r\n                    params : {\r\n                        value: specialRequests.specialRequest.additionalNotesBuffer,\r\n                        labelText: specialRequests.additionalNotesText,\r\n                        hasFocus: hasFocusOnSpecialRequestTextArea,\r\n                        css: { \'has-value\': ko.unwrap(specialRequests.specialRequest.additionalNotesBuffer) != "" }, \r\n                        inputAttributes: {\r\n                            name: \'additionalNotes\',\r\n                            id: \'additionalNotes\',\r\n                            placeholder: specialRequests.roomOnAHighFloorText,\r\n                            \'data-element-name\': \'special-request-additional-notes\',\r\n                            rows: 3,\r\n                            cols: 29\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(9),a=n(91),o=n(107),r=n(88),s=n(86),l=function(){function e(e){this.specialRequests=e.specialRequests,this.isRoomConfidentMessageDisplayed=e.isRoomConfidentMessageDisplayed,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm),this.isExpandedSpecialRequestsWithCheckbox=s.isApplied(r.ExpandedSpecialRequestsWithCheckbox),this.specialRequests.specialRequest.additionalNotesBuffer||(this.specialRequests.specialRequest.additionalNotesBuffer=t.observable("")),this.specialRequests.specialRequest.airportTransferBuffer||(this.specialRequests.specialRequest.airportTransferBuffer=t.observable("")),this.specialRequests.transfersAreNotGuaranteedText=this.isAddMoreLifeExperiment&&o.isIE()?t.observable(""):this.specialRequests.transfersAreNotGuaranteedText,this.isSpecialRequestsCollapsed=t.observable(!0),this.hasFocusOnSpecialRequestTextArea=e.hasFocusOnSpecialRequestTextArea,this._setValidation(),this._subscribeEvents()}return e.prototype._setValidation=function(){var e=this;this.specialRequests.specialRequest.additionalNotesBuffer.extend({pattern:{message:this.specialRequests.additionalNotesInvalidMessage(),params:this.specialRequests.specialRequestRegex(),onlyIf:function(){return e.isAddMoreLifeExperiment&&t.unwrap(e.hasFocusOnSpecialRequestTextArea)&&e.specialRequests.specialRequest.additionalNotesBuffer().length>0&&e.hasFocusOnSpecialRequestTextArea(!1),e.specialRequests.specialRequest.additionalNotesBuffer().length>0}}}),this.specialRequests.specialRequest.airportTransferBuffer.extend({pattern:{message:this.specialRequests.airportTransferInvalidMessage(),params:this.specialRequests.specialRequestRegex(),onlyIf:function(){return e.specialRequests.specialRequest.airportTransferBuffer().length>0}}})},e.prototype._subscribeEvents=function(){var e=this,t=/<(?:.|\n)*?>/gm;this.specialRequests.specialRequest.additionalNotesBuffer.subscribe(function(n){var i=n.replace(t,"");e.specialRequests.specialRequest.additionalNotes(i)}),this.specialRequests.specialRequest.airportTransferBuffer.subscribe(function(n){var i=n.replace(t,"");e.specialRequests.specialRequest.airportTransfer(i)})},e}();e.exports=l}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: showPanel --> <div class="panel panel-default urgency-messages"><!-- ko if: urgencyMessageText --> <div class="text-warning message urgency-message" data-bind="html: urgencyMessageText" data-element-name=panel-message-urgency> </div><!-- /ko --><!-- ko if: congratulationsText --> <div class="text-success message cheapest-room-message" data-bind="html: congratulationsText" data-element-name=panel-message-cheapest-room> </div><!-- /ko --><!-- ko if: greatChoiceText --> <div class="text-success message great-choice-message" data-bind="html: greatChoiceText" data-element-name=panel-message-great-choice> </div><!-- /ko --><!-- ko if: smartChoiceText --> <div class="text-success message smart-choice-message" data-bind="html: smartChoiceText" data-element-name=panel-message-smart-choice> </div><!-- /ko --> </div><!-- /ko --><!-- ko ifnot: isNewPanelForUrgencyMessages --><!-- ko if: urgencyMessageText --> <div class="alert alert-warning urgency-message" data-bind="html: urgencyMessageText" data-element-name=alert-message-urgency> </div><!-- /ko --><!-- ko if: congratulationsText --> <div class="alert alert-success cheapest-room-message" data-bind="html: congratulationsText" data-element-name=alert-message-cheapest-room> </div><!-- /ko --><!-- ko if: greatChoiceText --> <div class="alert alert-success great-choice-message" data-bind="html: greatChoiceText" data-element-name=alert-message-great-choice> </div><!-- /ko --><!-- ko if: smartChoiceText --> <div class="alert alert-success smart-choice-message" data-bind="html: smartChoiceText" data-element-name=alert-message-smart-choice> </div><!-- /ko --> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(9),a=function(){function e(e){this.urgencyMessageText=e.urgencyMessageText,this.congratulationsText=e.congratulationsText,this.greatChoiceText=e.greatChoiceText,this.smartChoiceText=e.smartChoiceText,this.isNewPanelForUrgencyMessages=e.isNewPanelForUrgencyMessages,this.showPanel=t.observable(!1);var n=i.getPageData(),a=n&&n.jsonViewModel&&n.jsonViewModel.banners;!a&&this.isNewPanelForUrgencyMessages()&&(t.unwrap(this.congratulationsText)||t.unwrap(this.urgencyMessageText)||t.unwrap(this.greatChoiceText)||t.unwrap(this.smartChoiceText))&&this.showPanel(!0)}return e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports='<template id=totalAmountTemplate><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=totalAmount class="total-amount h5" data-bind="text: priceDetails.formattedTotalAmount"></strong><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=totalAmount class="total-amount h5" data-bind="text: priceDetails.formattedTotalAmount, popover: priceDetailPopoverBindingOptions"></strong><!-- /ko --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: priceDetails.formattedShadowRateAmount --> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small><!-- /ko --><!-- /ko --> </template> <template id=totalAmountBeforeLoyaltyDiscountTemplate><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=totalAmount class="total-amount h5" data-bind="text: priceDetails.formattedTotalAmountBeforeLoyaltyDiscount"></strong><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=totalAmount class="total-amount h5" data-bind="text: priceDetails.formattedTotalAmountBeforeLoyaltyDiscount, popover: priceDetailPopoverBindingOptions"></strong><!-- /ko --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: isFixDuplicateShadowRate() --><!-- ko if: priceDetails.formattedShadowRateAmount --> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small><!-- /ko --><!-- /ko --><!-- /ko --> </template> <template id=mandatoryOptionsTemplate> <dl class="dl-horizontal dd-align-right mandatory-options-list" data-bind="foreach: { data: basePrice.mandatoryOptions(), as: \'option\'}"> <dt data-bind="text: option.description, attr: {\'data-type\': option.chargeType}"></dt> <dd data-bind="text: option.formattedAmount"></dd> </dl> </template> <template id=activeOptionListTemplate> <dl class="dl-horizontal dd-align-right active-optional-options" data-bind="foreach: { data: basePrice.activeOptionalOptions(), as: \'option\'}"> <dt data-bind="text: option.description, attr: {\'data-type\': option.chargeType}"></dt> <dd data-bind="text: option.formattedAmount"></dd> </dl> </template> <template id=totalPriceTemplate> <dl class="dl-horizontal dd-align-right price-conclusion total-price"> <dt> <strong class=h5 data-bind="text: priceDetails.totalPriceText"></strong> <i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary" data-bind="popover: taxesAndFeesPopoverBindingOptions"></i> </dt> <dd> <span data-bind="template: { name: \'totalAmountTemplate\' }"></span> </dd> </dl> </template> <template id=finalPriceTemplate> <dl class="dl-horizontal dd-align-right price-conclusion final-price"> <dt><!-- ko if: priceDetails.isFinalPriceDisplayed() --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong class=h5 data-bind="text: priceDetails.finalPriceText"></strong><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong class=h5 data-bind="text: priceDetails.priceText"></strong><!-- /ko --> <i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary" data-bind="popover: taxesAndFeesPopoverBindingOptions"></i><!-- /ko --><!-- ko ifnot: priceDetails.isFinalPriceDisplayed() --> <strong class=h5 data-bind="text: priceDetails.totalPriceText"></strong><!-- /ko --> </dt> <dd><!-- ko if: priceDetails.isFinalPriceDisplayed --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=finalAmount class="final-amount h5" data-bind="text: priceDetails.formattedFinalAmountBeforeLoyaltyDiscount"></strong><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <strong id=totalAmount class="final-amount h5" data-bind="text: priceDetails.formattedFinalAmountBeforeLoyaltyDiscount, popover: priceDetailPopoverBindingOptions"></strong><!-- /ko --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko ifnot: priceDetails.isFinalPriceDisplayed() && priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length --><!-- ko if: priceDetails.formattedShadowRateAmount --> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko --> </dd> </dl> </template> <template id=totalPriceBeforeLoyaltyDiscountTemplate> <dl class="dl-horizontal dd-align-right price-conclusion total-price"> <dt><!-- ko if: installmentPriceDetails.isNoThanksInstallment --> <strong class=h5 data-bind="text: priceDetails.priceText"></strong><!-- /ko --><!-- ko ifnot: installmentPriceDetails.isNoThanksInstallment --> <strong class=h5 data-bind="text: installmentPriceDetails.totalCostText"></strong><!--- Korea Installment Box 5 --><!-- /ko --> <i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary" data-bind="popover: taxesAndFeesPopoverBindingOptions"></i><!-- ko ifnot: installmentPriceDetails.isNoThanksInstallment --> <small id=payableToBank class=payable-to-bank><strong data-bind="text: installmentPriceDetails.payableToBankText"></strong></small><!--- Korea Installment Box 5 --><!-- /ko --> </dt> <dd><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko ifnot: ko.unwrap(priceDetails.isNewPriceBreakDownExperiment) --> <span data-bind="template: { name: \'totalAmountBeforeLoyaltyDiscountTemplate\' }"></span><!-- /ko --><!-- ko if: ko.unwrap(priceDetails.isNewPriceBreakDownExperiment) --> <span data-bind="template: { name: \'totalAmountTemplate\' }"></span><!-- /ko --><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <span data-bind="template: { name: \'totalAmountTemplate\' }"></span><!-- /ko --> </dd> </dl> </template> <template id=totalPriceBeforeLoyaltyDiscountTemplateV2> <dl class="dl-horizontal dd-align-right price-conclusion total-price pay-later"> <dt class=today-you-pay-message> <strong class=pay-later-text data-bind="text: priceDetails.todayYouPayText"></strong> </dt> <dd> <strong class=pay-later-text data-bind="text: priceDetails.todayYouPayPrice"></strong> </dd> <dt> <strong class=pay-later-text data-bind="text: priceDetails.payOnCheckinDay"></strong> <i class="ficon ficon-14 ficon-right ficon-info-with-circle text-primary" data-bind="popover: taxesAndFeesPopoverBindingOptions"></i> </dt> <dd><!-- ko ifnot: ko.unwrap(priceDetails.isNewPriceBreakDownExperiment) --> <strong id=totalAmount class="total-amount pay-later-text" data-bind="text: priceDetails.formattedTotalAmountBeforeLoyaltyDiscount"></strong><!-- /ko --><!-- ko if: ko.unwrap(priceDetails.isNewPriceBreakDownExperiment) --> <strong id=totalAmount class="total-amount pay-later-text" data-bind="text: priceDetails.formattedTotalAmount"></strong><!-- /ko --> </dd> <dt class=check-in-date-and-shadow-rate-amount> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.checkinDate"></span>)</small> </dt> <dd class=check-in-date-and-shadow-rate-amount><!-- ko if: isFixDuplicateShadowRate() --><!-- ko if: priceDetails.formattedShadowRateAmount --> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small><!-- /ko --><!-- /ko --> </dd> </dl> </template> <template id=couponDiscountTemplate> <span data-bind="css: { coupon-discount: ko.unwrap(basePrice.isCouponNewDesign) }"> <dt><!-- ko ifnot: ko.unwrap(basePrice.isCouponNewDesign) --><!-- ko ifnot: $parent.priceDetails.isCouponPromoCodeRequired --><!-- ko ifnot: ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment) --> <i class="ficon ficon-24 ficon-left ficon-coupon-card"></i><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: ko.unwrap(basePrice.isCouponNewDesign) --> <i class="ficon ficon-16 ficon-left ficon-check-circle"></i><!-- /ko --> <span class=coupon-description data-bind="attr: { id: \'couponAmountDescription\' + $index() }, text: basePrice.couponAmountDescription"></span> </dt> <dd><!-- ko ifnot: $parent.priceDetails.isCouponPromoCodeRequired --> <span class=badge-price data-bind="text: basePrice.formattedCouponAmount"></span><!-- /ko --><!-- ko if: $parent.priceDetails.isCouponPromoCodeRequired --><!-- ko if: $parent.priceDetails.isNewPriceBreakDownExperiment--> <span class=coupon-amount data-bind="text: basePrice.formattedCouponAmount"></span><!-- /ko --><!-- ko ifnot: $parent.priceDetails.isNewPriceBreakDownExperiment--> <span data-bind="text: basePrice.formattedCouponAmount"></span><!-- /ko --><!-- /ko --> </dd> </span> </template> <template id=originalAmountDetailsTemplate><!-- original detail start --><!--original price start--> <dt data-bind="attr: { id: \'originalAmountDescription\' + $index() }, html: basePrice.originalAmountDescription"></dt> <dd> <del class=crossed-out-rate data-bind="text: basePrice.formattedOriginalAmount"></del> </dd><!--original price end--><!--insider deal discount start--><!-- ko if:  ko.unwrap(basePrice.insiderDealText) --> <dt><!-- ko if:  ko.unwrap(basePrice.isVIPBenefit) --> <span class=agoda-vip data-bind="html: basePrice.vipBenefitText"></span><!-- /ko --><!-- ko ifnot:  ko.unwrap(basePrice.isVIPBenefit) --> <i class="ficon ficon-14 ficon-left ficon-unlock"></i><!-- /ko --> <span claas=insider-deal-text data-bind="html: basePrice.insiderDealText"></span> </dt> <dd> <span class=insider-deal-badge-price data-bind="text: basePrice.formattedInsiderDealAmount"></span> </dd><!-- /ko --><!--insider deal discount end--><!--coupon discount start--><!-- ko if: basePrice.shouldShowCouponDetails() --><!-- ko template: { name: \'couponDiscountTemplate\' } --><!-- /ko --><!-- /ko --><!--coupon discount end--><!-- original detail end --> </template> <template id=originalAmountDetailsTemplatePriceDetailsPopover><!-- original detail start --><!--original price start--> <dt data-bind="attr: { id: \'originalAmountDescription\' + $index() }, html: basePrice.originalAmountDescription"></dt> <dd> <del class=crossed-out-rate data-bind="text: basePrice.formattedOriginalAmount"></del> </dd><!--original price end--><!--insider deal discount start--><!-- ko if:  ko.unwrap(basePrice.insiderDealText) --> <dt><!-- ko if:  ko.unwrap(basePrice.isVIPBenefit) --> <span class=agoda-vip data-bind="html: basePrice.vipBenefitText"></span><!-- /ko --><!-- ko ifnot:  ko.unwrap(basePrice.isVIPBenefit) --> <i class="ficon ficon-14 ficon-left ficon-unlock"></i><!-- /ko --> <span claas=insider-deal-text data-bind="html: basePrice.insiderDealText"></span> </dt> <dd> <span class=insider-deal-badge-price data-bind="text: basePrice.formattedInsiderDealAmount"></span> </dd><!-- /ko --><!--insider deal discount end--><!-- original detail end --> </template> <template id=crossoutRateTemplate><!-- ko if: basePrice.crossedOutRateDescriptions --> <dt data-bind="html: basePrice.crossedOutRateDescriptions"></dt> <dd> <del data-bind="attr: { id: \'crossedOutRate\' + $index() }, text: basePrice.formattedCrossedOutRate" class="crossed-out-rate text-right"></del> </dd><!-- /ko --><!-- ko ifnot: basePrice.crossedOutRateDescriptions --> <dt></dt> <dd><!-- ko if: basePrice.crossedOutRate --> <small><del data-bind="attr: { id: \'crossedOutRate\' + $index() }, text: basePrice.formattedCrossedOutRate" class="crossed-out-rate text-right"></del></small><!-- /ko --> </dd><!-- /ko --> </template> <template id=installationBreakdownTemplate> <dl class="dl-horizontal dd-align-right padding-top-16px"> <dt><strong data-bind=text:installmentPriceDetails.installmentBreakdownText></strong></dt> <dd></dd> <dt data-bind=text:installmentPriceDetails.interestChargedByBankText></dt> <dd><span data-bind=text:installmentPriceDetails.interestChargedByBank></span></dd> <dt data-bind=text:installmentPriceDetails.installmentsPayableText></dt> <dd><span data-bind=text:installmentPriceDetails.installmentPayable></span></dd> </dl> </template> <template id=promotionDiscountTemplate><!-- ko if: priceDetails.promotionDiscount && priceDetails.promotionDiscount.description  --> <dl class="dl-horizontal dd-align-right text-discounts discounts"> <dt> <span id=discountsDescription data-bind="text: priceDetails.promotionDiscount.description"></span> </dt> <dd> <span id=discountsAmount data-bind="text: priceDetails.promotionDiscount.formattedAmount"></span> </dd> </dl><!-- /ko --> </template> <template id=discountMessagesTemplate><!-- discount messages detail start --><!--original price start--><!-- ko if: (basePrice.crossedOutRate() > 0) && (basePrice.crossedOutRate() > basePrice.preDiscountAmount()) --> <dt data-bind="html: basePrice.crossedOutRateDescriptions()"></dt> <dd> <del data-bind="attr: { id: \'crossedOutRate\' + $index() }, text: basePrice.formattedCrossedOutRate()" class="crossed-out-rate text-right"></del> </dd><!-- /ko --><!--original price end--><!--agoda price start--><!-- ko if: basePrice.crossedOutRate() > 0 --> <dt data-bind="attr: { id: \'preDiscountAmountDescription\' + $index() }, text: basePrice.preDiscountAmountDescription()"></dt><!-- /ko --><!-- ko if: basePrice.crossedOutRate() <= 0 --> <dt data-bind="attr: { id: \'preDiscountAmountDescription\' + $index() }, text: basePrice.preDiscountAmountDescription() + \' (\' + basePrice.nightContent() + \')\'"></dt><!-- /ko --> <dd> <del data-bind="text: basePrice.formattedPreDiscountAmount()"></del> </dd><!--original price end --><!-- discount start--><!-- ko foreach: { data: basePrice.discountMessages(), as: \'discount\'} --> <dt> <i class="ficon ficon-24 ficon-left" data-bind="css: discount.icon()"></i> <span class=coupon-description data-bind="attr: { id: discount.identifier() + $index() }, text: discount.description()"></span> </dt> <dd> <span class=badge-price data-bind="text: discount.formattedAmount()"></span> </dd><!-- discount end--><!-- /ko --><!-- discount messages detail end --> </template><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <div class=panel-body><!-- ko if: formattedDiscountBadgeText --> <div class=discount-badge><p data-bind="text: formattedDiscountBadgeText"></p></div><!-- /ko --><!-- base prices starts --> <div class=base-price data-bind="foreach: { data: priceDetails.basePrices(), as: \'basePrice\'}"><!--room price starts--> <dl class="dl-horizontal dd-align-right room-price"><!-- ko if: basePrice.discountMessages().length > 0 && basePrice.preDiscountAmount() > 0 --><!-- ko template: { name: \'discountMessagesTemplate\' } --><!-- /ko --><!-- /ko --><!-- non discount messages detail start --><!-- non total saving new formular starts --><!-- ko ifnot: $parent.priceDetails.totalSavingText --><!-- ko if: basePrice.discountMessages().length <= 0 --><!-- ko if: basePrice.shouldShowCouponDetails() ||  ko.unwrap(basePrice.insiderDealText) --><!-- ko template: { name: \'originalAmountDetailsTemplate\' } --><!-- /ko --><!-- /ko --><!-- /ko --><!-- crossed out rate starts --><!-- ko if: basePrice.discountMessages().length <= 0 && !basePrice.shouldShowCouponDetails() && ! ko.unwrap(basePrice.insiderDealText) --><!-- ko template: { name: \'crossoutRateTemplate\' } --><!-- /ko --><!-- /ko --><!-- crossed out rate ends --><!-- /ko --><!-- non total saving new formular ends--><!-- total saving new formular starts--><!-- ko if: $parent.priceDetails.totalSavingText --><!-- ko if: basePrice.discountMessages().length <= 0 --><!-- crossout rate starts--><!-- ko template: { name: \'crossoutRateTemplate\' } --><!-- /ko --><!-- crossout rate ends--><!-- Coupon discount without original price starts --><!-- ko if: basePrice.shouldShowCouponDetails --><!-- ko template: { name: \'couponDiscountTemplate\' } --><!-- /ko --><!-- /ko --><!-- Coupon discount without original price ends --><!-- /ko --><!-- /ko --><!-- total saving new formular ends--><!-- non discount messages detail end --><!-- room description starts --> <dt data-bind="attr: { id: \'roomDescription\' + $index() }, html: basePrice.description" class=description></dt> <dd> <span class=amount data-bind="text: basePrice.formattedAmount"></span> </dd><!-- room description ends --><!-- new price breakdown starts--><!-- ko if: ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment)--><!--mandatory options starts--><!-- ko if: basePrice.mandatoryOptions() && basePrice.mandatoryOptions().length --> <span data-bind="template: { name: \'mandatoryOptionsTemplate\' }"></span><!-- /ko --><!--mandatory options ends--><!-- active optional options starts --><!-- ko if: basePrice.isActiveOptionalOptionsListDisplayed --> <span data-bind="template: { name: \'activeOptionListTemplate\' }"></span><!-- /ko --><!-- active optional options ends --><!-- Giftcard redeemption starts --><!-- ko if: $parent.priceDetails.loyaltyDiscount != null && $parent.priceDetails.loyaltyDiscount.description --> <dl class="dl-horizontal dd-align-right text-discounts discounts"> <dt> <span id=discountsDescription data-bind="text: $parent.priceDetails.loyaltyDiscount.description"></span> </dt> <dd> <span id=discountsAmount data-bind="text: $parent.priceDetails.loyaltyDiscount.formattedAmount"></span> </dd> </dl><!-- /ko --><!-- Giftcard redeemption ends --><!-- Airport transfer starts --><!-- ko if: ko.unwrap($parent.priceDetails.formattedAirportTransferAmount) --> <dl class="dl-horizontal dd-align-right"> <dt> <span id=airportTransferText data-bind="text: $parent.priceDetails.airportTransferText"></span> </dt> <dd> <span id=airportTransferAmount data-bind="text: $parent.priceDetails.formattedAirportTransferAmount"></span> </dd> </dl><!-- /ko --><!-- Airport transfer ends --><!-- /ko --><!-- new price breakdown ends--><!-- mobile rate starts --><!-- ko if: basePrice.mobileOnlyDealText --> <dt class="mobile-rate-text text-primary text-left" data-bind="html: basePrice.mobileOnlyDealText"></dt> <dd></dd><!-- /ko --><!-- mobile rate ends --> </dl><!--room price ends--><!--promotion discount starts--> <span data-bind="template: { name: \'promotionDiscountTemplate\', data: { priceDetails: $parent.priceDetails }}"></span><!-- promotion discount ends--><!--mandatory options starts--><!-- ko if: basePrice.mandatoryOptions() && basePrice.mandatoryOptions().length && !ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment) --> <span data-bind="template: { name: \'mandatoryOptionsTemplate\' }"></span><!-- /ko --><!--mandatory options ends--><!--active optional options list starts--><!-- active optional options start --><!-- ko if: basePrice.isActiveOptionalOptionsListDisplayed && !ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment) --> <span data-bind="template: { name: \'activeOptionListTemplate\' }"></span><!-- /ko --><!-- active optional options ends --><!-- mandatory surcharges starts --><!-- ko if: basePrice.isMandatorySurchargeListDisplayed() --> <dl class="dl-horizontal dd-align-right mandatory-surcharge-list" data-bind="foreach: { data: basePrice.mandatorySurcharges(), as: \'surcharge\' }"> <dt data-bind="text: surcharge.description"></dt> <dd data-bind="text: surcharge.formattedAmount"></dd> </dl><!-- /ko --><!-- mandatory surcharges ends --><!--active optional options list ends--><!-- room booking fees starts --><!-- ko if: $parent.priceDetails.bookingFeesDescription && $parent.priceDetails.bookingFeesAmount  --> <dl class="dl-horizontal dd-align-right" data-bind="css: { text-primary: $parent.priceDetails.isNewPriceBreakDownExperiment }"> <dt data-bind="text: $parent.priceDetails.bookingFeesDescription"></dt> <dd> <strong class=text-primary data-bind="text: $parent.priceDetails.bookingFeesAmount"></strong> </dd> </dl><!-- /ko --><!-- room booking fees ends --> </div><!-- base prices ends --><!-- Umrah starts --><!-- ko if: priceDetails.additionalCharges && priceDetails.additionalCharges().length > 0 --> <div class=divider-solid-bottom></div> <div class=additional-charges> <strong class=h6 data-bind="text: priceDetails.additionalChargesText"></strong> <dl class="dl-horizontal dd-align-right" data-bind="foreach: { data: priceDetails.additionalCharges(), as: \'additionalCharge\'}"> <dt data-bind="text: additionalCharge.description"></dt> <dd data-bind="text: additionalCharge.formattedAmount"></dd> </dl><!-- ko if: priceDetails.bookingFeesDescription && priceDetails.bookingFeesAmount  --> <dl class="dl-horizontal dd-align-right" data-bind="css: { text-primary: priceDetails.isNewPriceBreakDownExperiment }"> <dt data-bind="text: priceDetails.bookingFeesDescription"></dt> <dd> <strong class=text-primary data-bind="text: priceDetails.bookingFeesAmount"></strong> </dd> </dl><!-- /ko --> </div><!-- /ko --><!-- Umrah ends --> </div><!-- /ko --><!--Korea Installment Box 4--><!-- ko if: (installmentPriceDetails.isInstallmentApplicable)  --> <div class=installment-breakdown-box data-bind="ifnot: installmentPriceDetails.isNoThanksInstallment"><!--Korea Installment Box 4 Seperation Line--> <div class=installment-breakdown-line-container> <hr class="line m-b-0 m-t-0"> </div><!-- ko template: { name: \'installationBreakdownTemplate\' } --><!-- /ko --> </div><!-- /ko --> <div class=panel-footer><!-- badge start --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied && isDividerLineShown--> <dl class="dl-horizontal dd-align-right"> <dt> </dt> <dd><!-- ko if: formattedDiscountBadgeText --> <div class=discount-badge> <p data-bind="text: formattedDiscountBadgeText"></p> </div><!-- /ko --> </dd> </dl><!-- /ko --><!-- number night and badge end --><!-- Coupon discount without original price starts --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <dl class="dl-horizontal dd-align-right coupon-discount" data-bind="foreach: { data: priceDetails.basePrices(), as: \'basePrice\'}"><!-- ko if: basePrice.shouldShowCouponDetails --><!-- ko template: { name: \'couponDiscountTemplate\' } --><!-- /ko --><!-- /ko --> </dl><!-- /ko --><!-- Coupon discount without original price ends --><!--promotion discount starts--><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <span data-bind="template: { name: \'promotionDiscountTemplate\', data: { priceDetails: priceDetails }}"></span><!-- /ko --><!-- promotion discount ends--><!--loyalty discount starts--><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: !ko.unwrap(priceDetails.isNewPriceBreakDownExperiment)--><!-- ko if: priceDetails.loyaltyDiscount != null && priceDetails.loyaltyDiscount.description --> <dl class="dl-horizontal dd-align-right discounts text-agodacash-discounts }"> <dt> <span id=discountsDescription data-bind="text: priceDetails.loyaltyDiscount.description"></span> </dt> <dd> <span id=discountsAmount data-bind="text: priceDetails.loyaltyDiscount.formattedAmount"></span> </dd> </dl><!-- /ko --><!-- /ko --><!-- /ko --><!--loyalty discount ends--><!--divider starts --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: isDividerLineShown --> <div class=price-detail-divider-solid></div><!-- /ko --><!-- /ko --><!--divider end --><!-- night number and badge start --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied--> <dl class="dl-horizontal dd-align-right"> <dt data-bind="foreach: { data: priceDetails.basePrices(), as: \'basePrice\'}"> <div class=night-content data-bind="text: basePrice.nightContentText"></div> </dt> <dd><!-- ko ifnot: isDividerLineShown --><!-- ko if: formattedDiscountBadgeText --> <div class=discount-badge> <p data-bind="text: formattedDiscountBadgeText"></p> </div><!-- /ko --><!-- /ko --> </dd> </dl><!-- /ko --><!-- number night and badge end --><!-- total price starts --><!-- ko if: priceDetails.isFinalPriceDisplayed --> <p class=m-b-0 data-bind="template: { name: \'finalPriceTemplate\' }"></p><!-- /ko --><!-- ko ifnot: priceDetails.isFinalPriceDisplayed() --><!-- ko ifnot: priceDetails.isPayOnCheckin() --> <p class=m-b-0 data-bind="template: { name: \'totalPriceBeforeLoyaltyDiscountTemplate\' }"></p><!-- /ko --><!-- ko if: priceDetails.isPayOnCheckin() --> <p class=m-b-0 data-bind="template: { name: \'totalPriceBeforeLoyaltyDiscountTemplateV2\' }"></p><!-- /ko --><!-- /ko --><!-- total price ends --><!--- inclusive text and shallow price  start--><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!--- inclusive text and shallow price  start--> <dl class="dl-horizontal dd-align-right"> <dt> </dt> <dd><!-- ko ifnot: priceDetails.isFinalPriceDisplayed() && priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length --><!-- ko if: priceDetails.formattedShadowRateAmount --> <small id=shadowRateAmount class=shadow-rate-amount>(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small><!-- /ko --><!-- /ko --> </dd> </dl><!-- /ko --><!--- inclusive text and shallow price end   --><!-- ko if: bestpriceGuarantee != null --> <div class=price-panel><!-- ko component: {\r\n                name: "bestprice-guarantee",\r\n                params: bestpriceGuarantee\r\n            } --><!-- /ko --> </div><!-- /ko --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <p id=hotelLevelChargeSummary class=m-b-0><!-- ko if: ko.unwrap(priceDetails.allIncludedCharges) && priceDetails.allIncludedCharges().length --> <small id=hotelLevelIncludedChargeSummary class=charge-summary> <strong data-bind="text: priceDetails.includedText"></strong> <span data-bind="text: priceDetails.formattedAllIncludedCharges"></span> </small><!-- /ko --><!-- ko if: priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length && !priceDetails.displayOptions.isExcludedSurchargeIncluded() --> <small id=hotelLevelExcludedChargeSummary class=charge-summary> <strong data-bind="text: priceDetails.notIncludedCollectedByHotelText"></strong> <span data-bind="text: priceDetails.formattedAllExcludedCharges"></span> </small><!-- /ko --> </p><!-- /ko --><!-- ko if: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --> <p id=hotelLevelChargeSummary class=m-b-0><!-- ko if: priceDetails.allIncludedCharges && priceDetails.allIncludedCharges().length --> <small id=hotelLevelIncludedChargeSummary class=charge-summary> <strong data-bind="text: priceDetails.includedText"></strong> <span data-bind="text: priceDetails.formattedAllIncludedCharges"></span> </small><!-- /ko --><!-- ko if: priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length && !priceDetails.displayOptions.isExcludedSurchargeIncluded() --> <small id=hotelLevelExcludedChargeSummary class=charge-summary> <strong data-bind="text: priceDetails.notIncludedCollectedByHotelText"></strong> <span data-bind="text: priceDetails.formattedAllExcludedCharges"></span> </small><!-- /ko --> </p><!-- /ko --><!--loyalty discount starts--><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: !ko.unwrap(priceDetails.isNewPriceBreakDownExperiment)--><!-- ko if: priceDetails.loyaltyDiscount != null && priceDetails.loyaltyDiscount.description --> <dl class="dl-horizontal dd-align-right discounts text-agodacash-discounts divider-space-top }"> <dt> <span id=discountsDescription data-bind="text: priceDetails.loyaltyDiscount.description"></span> </dt> <dd> <span id=discountsAmount data-bind="text: priceDetails.loyaltyDiscount.formattedAmount"></span> </dd> </dl><!-- /ko --><!-- /ko --><!-- /ko --><!--loyalty discount ends--><!-- ko if: priceDetails.loyaltyDiscount != null && priceDetails.loyaltyDiscount.description  --><!-- total price starts --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko ifnot: ko.unwrap(priceDetails.isNewPriceBreakDownExperiment)--><!-- ko ifnot: priceDetails.isFinalPriceDisplayed() --> <p class="m-b-0 divider-dotted-top" data-bind="template: { name: \'totalPriceTemplate\' }"></p><!-- /ko --><!-- /ko --><!-- /ko --><!-- total price ends --><!-- /ko --><!-- collected at hotel starts --><!-- ko if: priceDetails.isFinalPriceDisplayed() && priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length --> <div id=toBeCollectedAtHotel class=divider-dotted-top> <strong class=h5 data-bind="text: priceDetails.toBeCollectedAtTheHotelText"></strong> <dl class="dl-horizontal dd-align-right" data-bind="foreach: { data: priceDetails.allExcludedCharges(), as: \'excludedCharge\'}"> <dt data-bind="text: excludedCharge.description"></dt> <dd data-bind="text: excludedCharge.formattedAmount"></dd> </dl> </div><!-- /ko --><!-- collected at hotel ends --><!-- today you pay starts --><!-- ko if: priceDetails.isFinalPriceDisplayed() && priceDetails.allExcludedCharges && priceDetails.allExcludedCharges().length --> <div id=todayYouPay class=divider-dotted-top> <dl class="dl-horizontal dd-align-right total-price"> <dt> <strong class=h5 data-bind="text: priceDetails.toBeChargedByAgodaText"></strong> </dt> <dd> <div data-bind="template: { name: \'totalAmountTemplate\', data: priceDetails, as: \'priceDetails\' }"></div> </dd> </dl> </div><!-- /ko --><!-- today you pay ends --><!-- Israeli citizens vat starts--><!-- ko if: priceDetails.israeliVatText --> <div class=divider-dotted-top id=israeliCitizensVatNotice> <small data-bind="text: priceDetails.israeliVatText"></small> </div><!-- /ko --><!-- israeli citizens vat ends--><!-- you will pay x hotel alert starts --><!-- ko if: priceDetails.youWillPayXHotelText --> <div class="divider-dotted-top pay-hotel-notice" id=youWillPayHotelNotice> <small data-bind="text: priceDetails.youWillPayXHotelText"></small> </div><!-- /ko --><!-- ko if: priceDetails.isPayOnCheckin --> <div class="divider-dotted-top paylater-exchange-rate-notice"> <small data-bind="text: priceDetails.pleaseNoteThatYourCreditCardMayBeAuthorizedByBookingAmountPriorToCheckinDate"></small> </div><!-- /ko --><!-- ko if: priceDetails.youWillBeChargedTheXEquivalentOfXText --> <div class="divider-dotted-top paylater-exchange-rate-notice"> <small data-bind="html: priceDetails.youWillBeChargedTheXEquivalentOfXText"></small> </div><!-- /ko --><!-- you will pay x hotel alert ends --><!-- ko if: isDisplayHostWillReplyText && priceDetails.yourHostWillReplyYourRequestText --> <div class="divider-dotted-top book-on-request-notice" id=bookOnRequestNotice> <small data-bind="text: priceDetails.yourHostWillReplyYourRequestText"></small> </div><!-- /ko --><!-- aft book now pay later --><!-- ko ifnot: isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied --><!-- ko if: priceDetails.airportTransferPayNowPrice() && priceDetails.airportTransferPayNowPrice().length > 0 --> <section data-selenium=airport-transfer-pay-now> <dl class="dl-horizontal dd-align-right price-conclusion total-price"> <dt> <strong class=h5 data-bind="text: priceDetails.airportTransferPayNowMessage"></strong> </dt> <dd> <strong class=h5 data-bind="text: priceDetails.airportTransferPayNowPrice"></strong> </dd> </dl> <small class=charge-summary> <span class=airport-charge data-bind="text: priceDetails.airportTransferPayNowVendor"></span> <br> <span class=airport-charge data-bind="text: priceDetails.airportTransferPayNowTerms"></span> </small> </section><!-- /ko --><!-- /ko --> <div><!-- ko if: isPriceMatchMessageDisplayed --> <p class=we-price-match-message> <span class=arrow-up></span> <span data-bind="html: priceDetails.wePriceMatchText"></span> <i class="ficon ficon-12 ficon-right ficon-info-with-circle" data-bind="click: openAgodaPriceGuaranteeModal, popover: agodaPriceGuaranteePopoverBindingOptions" data-element-name=agoda-price-guarantee-info-icon></i> </p><!-- /ko --><!-- ko if: priceDetails.showGiftcardText --> <p class=price-details-giftcard-banner><!-- ko if: priceDetails.isHighlightGCEarn --><!-- ko if: priceDetails.isNewAgodaCashIcon --> <i class="ficon ficon-16 ficon-agoda-cash price-details-giftcard-banner-icon"></i><!-- /ko --><!-- ko ifnot: priceDetails.isNewAgodaCashIcon --> <i class="ficon ficon-20 ficon-cash-s price-details-giftcard-banner-icon"></i><!-- /ko --><!-- /ko --> <span class=price-details-giftcard-banner-text data-bind="html: priceDetails.youWillGetTotalGiftcardText" data-element-name=price-details-giftcard-banner-text></span> </p><!-- /ko --><!-- ko ifnot: priceDetails.isNewPriceBreakDownExperiment --><!-- ko if: ko.unwrap(priceDetails.smartChoiceYouSaveText) --><!-- ko if: priceDetails.smartChoiceYouSaveText --> <div class=smart-choice-container> <small data-bind="text: priceDetails.smartChoiceYouSaveText"></small> </div><!-- /ko --><!-- /ko --><!-- /ko --> </div> </div> <script type=text/html id=priceDetailPopover><!-- base prices starts -->\r\n    <div class="base-price" data-bind="foreach: { data: priceDetails.basePrices(), as: \'basePrice\'}" data-element-name="price-detail-popover">\r\n        <!--room price starts-->\r\n        <dl class="dl-horizontal dd-align-right room-price">\r\n            <!-- ko if: basePrice.discountMessages().length > 0 && basePrice.preDiscountAmount() > 0 -->\r\n            <!-- ko template: { name: \'discountMessagesTemplate\' } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- non discount messages detail start -->\r\n            <!-- non total saving new formular starts -->\r\n            <!-- ko ifnot: $parent.priceDetails.totalSavingText -->\r\n            <!-- ko if: basePrice.discountMessages().length <= 0 -->\r\n            <!-- ko if: basePrice.shouldShowCouponDetails() ||  ko.unwrap(basePrice.insiderDealText) -->\r\n            <!-- ko template: { name: \'originalAmountDetailsTemplatePriceDetailsPopover\' } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- crossed out rate starts -->\r\n            <!-- ko if: basePrice.discountMessages().length <= 0 && !basePrice.shouldShowCouponDetails() && ! ko.unwrap(basePrice.insiderDealText) -->\r\n            <!-- ko template: { name: \'crossoutRateTemplate\' } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- crossed out rate ends -->\r\n            <!-- /ko -->\r\n            <!-- non total saving new formular ends-->\r\n            <!-- total saving new formular starts-->\r\n            <!-- ko if: $parent.priceDetails.totalSavingText -->\r\n            <!-- ko if: basePrice.discountMessages().length <= 0 -->\r\n            <!-- crossout rate starts-->\r\n            <!-- ko template: { name: \'crossoutRateTemplate\' } -->\r\n            <!-- /ko -->\r\n            <!-- crossout rate ends-->\r\n            <!-- Coupon discount without original price starts -->\r\n            <!-- ko if: basePrice.shouldShowCouponDetails -->\r\n            <!-- ko template: { name: \'couponDiscountTemplate\' } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- Coupon discount without original price ends -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- total saving new formular ends-->\r\n            <!-- non discount messages detail end -->\r\n            <!-- room description starts -->\r\n            <dt data-bind="attr: { id: \'roomDescription\' + $index() }, html: basePrice.description" class="description"></dt>\r\n            <dd>\r\n                <span class="amount" data-bind="text: basePrice.formattedAmount"></span>\r\n            </dd>\r\n            <!-- room description ends -->\r\n            <!-- new price breakdown starts-->\r\n            <!-- ko if: ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment)-->\r\n            <!--mandatory options starts-->\r\n            <!-- ko if: basePrice.mandatoryOptions() && basePrice.mandatoryOptions().length -->\r\n            <span data-bind="template: { name: \'mandatoryOptionsTemplate\' }"></span>\r\n            <!-- /ko -->\r\n            <!--mandatory options ends-->\r\n            <!-- active optional options starts -->\r\n            <!-- ko if: basePrice.isActiveOptionalOptionsListDisplayed -->\r\n            <span data-bind="template: { name: \'activeOptionListTemplate\' }"></span>\r\n            <!-- /ko -->\r\n            <!-- active optional options ends -->\r\n            <!-- Giftcard redeemption starts -->\r\n            <!-- ko if: $parent.priceDetails.loyaltyDiscount != null && $parent.priceDetails.loyaltyDiscount.description -->\r\n            <dl class="dl-horizontal dd-align-right text-discounts discounts">\r\n                <dt>\r\n                    <span id="discountsDescription" data-bind="text: $parent.priceDetails.loyaltyDiscount.description"></span>\r\n                </dt>\r\n                <dd>\r\n                    <span id="discountsAmount" data-bind="text: $parent.priceDetails.loyaltyDiscount.formattedAmount"></span>\r\n                </dd>\r\n            </dl>\r\n            <!-- /ko -->\r\n            <!-- Giftcard redeemption ends -->\r\n            <!-- Airport transfer starts -->\r\n            <!-- ko if: ko.unwrap($parent.priceDetails.formattedAirportTransferAmount) -->\r\n            <dl class="dl-horizontal dd-align-right">\r\n                <dt>\r\n                    <span id="airportTransferText" data-bind="text: $parent.priceDetails.airportTransferText"></span>\r\n                </dt>\r\n                <dd>\r\n                    <span id="airportTransferAmount" data-bind="text: $parent.priceDetails.formattedAirportTransferAmount"></span>\r\n                </dd>\r\n            </dl>\r\n            <!-- /ko -->\r\n            <!-- Airport transfer ends -->\r\n            <!-- /ko -->\r\n            <!-- new price breakdown ends-->\r\n        </dl>\r\n        <!--room price ends-->\r\n        <!-- ko ifnot: $parent.isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied -->\r\n        <!--promotion discount starts-->\r\n        <span data-bind="template: { name: \'promotionDiscountTemplate\', data: { priceDetails: $parent.priceDetails }}"></span>\r\n        <!-- promotion discount ends-->\r\n        <!--mandatory options starts-->\r\n        <!-- ko if: basePrice.mandatoryOptions() && basePrice.mandatoryOptions().length && !ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment) -->\r\n        <span data-bind="template: { name: \'mandatoryOptionsTemplate\' }"></span>\r\n        <!-- /ko -->\r\n        <!--mandatory options ends-->\r\n        <!--active optional options list starts-->\r\n        <!-- active optional options start -->\r\n        <!-- ko if: basePrice.isActiveOptionalOptionsListDisplayed && !ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment) -->\r\n        <span data-bind="template: { name: \'activeOptionListTemplate\' }"></span>\r\n        <!-- /ko -->\r\n        <!-- active optional options ends -->\r\n        <!-- mandatory surcharges starts -->\r\n        <!-- ko if: basePrice.isMandatorySurchargeListDisplayed() -->\r\n        <dl class="dl-horizontal dd-align-right mandatory-surcharge-list" data-bind="foreach: { data: basePrice.mandatorySurcharges(), as: \'surcharge\' }">\r\n            <dt data-bind="text: surcharge.description"></dt>\r\n            <dd data-bind="text: surcharge.formattedAmount"></dd>\r\n        </dl>\r\n        <!-- /ko -->\r\n        <!-- mandatory surcharges ends -->\r\n        <!--coupon discount start-->\r\n        <!-- ko if: basePrice.shouldShowCouponDetails() -->\r\n        <dl class="dl-horizontal dd-align-right coupon-discount">\r\n            <!-- ko template: { name: \'couponDiscountTemplate\' } -->\r\n            <!-- /ko -->\r\n        </dl>\r\n        <!-- /ko -->\r\n        <!--coupon discount end-->\r\n        <!--loyalty discount starts-->\r\n        <!-- ko if: !ko.unwrap($parent.priceDetails.isNewPriceBreakDownExperiment)-->\r\n        <!-- ko if: $parent.priceDetails.loyaltyDiscount != null && $parent.priceDetails.loyaltyDiscount.description -->\r\n        <dl class="dl-horizontal dd-align-right discounts text-agodacash-discounts }">\r\n            <dt>\r\n                <span id="discountsDescription" data-bind="text: $parent.priceDetails.loyaltyDiscount.description"></span>\r\n            </dt>\r\n            <dd>\r\n                <span id="discountsAmount" data-bind="text: $parent.priceDetails.loyaltyDiscount.formattedAmount"></span>\r\n            </dd>\r\n        </dl>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n        <!--loyalty discount ends-->\r\n        <!--active optional options list ends-->\r\n        <!-- room booking fees starts -->\r\n        <!-- ko if: $parent.priceDetails.bookingFeesDescription && $parent.priceDetails.bookingFeesAmount  -->\r\n        <dl class="dl-horizontal dd-align-right" data-bind="css: { text-primary: $parent.priceDetails.isNewPriceBreakDownExperiment }">\r\n            <dt data-bind="text: $parent.priceDetails.bookingFeesDescription"></dt>\r\n            <dd>\r\n                <strong class="text-primary" data-bind="text: $parent.priceDetails.bookingFeesAmount"></strong>\r\n            </dd>\r\n        </dl>\r\n        <!-- /ko -->\r\n        <!-- room booking fees ends -->\r\n        <!-- /ko -->\r\n        <div class="divider-solid-bottom"></div>\r\n    </div>\r\n    <!-- base prices ends -->\r\n    <!-- Umrah starts -->\r\n    <!-- ko if: priceDetails.additionalCharges && priceDetails.additionalCharges().length > 0 -->\r\n\r\n    <div class="additional-charges">\r\n        <strong class="h6" data-bind="text: priceDetails.additionalChargesText"></strong>\r\n        <dl class="dl-horizontal dd-align-right" data-bind="foreach: { data: priceDetails.additionalCharges(), as: \'additionalCharge\'}">\r\n            <dt data-bind="text: additionalCharge.description"></dt>\r\n            <dd data-bind="text: additionalCharge.formattedAmount"></dd>\r\n        </dl>\r\n        <!-- ko if: priceDetails.bookingFeesDescription && priceDetails.bookingFeesAmount  -->\r\n        <dl class="dl-horizontal dd-align-right" data-bind="css: { text-primary: priceDetails.isNewPriceBreakDownExperiment }">\r\n            <dt data-bind="text: priceDetails.bookingFeesDescription"></dt>\r\n            <dd>\r\n                <strong class="text-primary" data-bind="text: priceDetails.bookingFeesAmount"></strong>\r\n            </dd>\r\n        </dl>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <div class="divider-solid-bottom"></div>\r\n    <!-- Umrah ends -->\r\n    <!-- total price starts -->\r\n    <dl class="dl-horizontal dd-align-right price-conclusion total-price">\r\n        <dt>\r\n            <strong class="h5" data-bind="text: priceDetails.priceText"></strong>\r\n        </dt>\r\n        <dd>\r\n            <strong id="totalAmount" class="total-amount h5" data-bind="text: priceDetails.formattedTotalAmount, popover: priceDetailPopoverBindingOptions"></strong>\r\n        </dd>\r\n    </dl>\r\n    <!-- total price ends -->\r\n    <!--- inclusive text and shallow price  start-->\r\n    <dl class="dl-horizontal dd-align-right">\r\n        <dt>\r\n        </dt>\r\n        <dd>\r\n            <!-- ko ifnot: priceDetails.isFinalPriceDisplayed() && priceDetails.allExcludedCharges && priceDetails.allExcludedCharges() !== null -->\r\n            <!-- ko if: priceDetails.formattedShadowRateAmount -->\r\n            <small id="shadowRateAmount" class="shadow-rate-amount">(<span data-bind="text: priceDetails.formattedShadowRateAmount"></span>)</small>\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </dd>\r\n    </dl>\r\n    <!--- inclusive text and shallow price ends -->\r\n    <!-- ko if: ko.unwrap(priceDetails.airportTransferPayNowPrice) && ko.unwrap(priceDetails.airportTransferPayNowPrice).length > 0 -->\r\n    <section data-selenium="airport-transfer-pay-now">\r\n        <dl class="dl-horizontal dd-align-right price-conclusion total-price">\r\n            <dt>\r\n                <strong class="h5" data-bind="text: priceDetails.airportTransferPayNowMessage"></strong>\r\n            </dt>\r\n            <dd>\r\n                <strong class="h5" data-bind="text: priceDetails.airportTransferPayNowPrice"></strong>\r\n            </dd>\r\n        </dl>\r\n        <small class="charge-summary">\r\n            <span class="airport-charge" data-bind="text: priceDetails.airportTransferPayNowVendor"></span> <br>\r\n            <span class="airport-charge" data-bind="text: priceDetails.airportTransferPayNowTerms"></span>\r\n        </small>\r\n    </section>\r\n    <!-- /ko --></script>';
},function(e,t,n){(function(t){"use strict";var i=n(198),a=n(11),o=n(89),r=n(90),s=n(86),l=n(88),d=n(96),c="gc_opt_in",p=function(){function e(e){var n=this;this._updateDividerStatus=function(){var e=t.unwrap(n.priceDetails.loyaltyDiscount),i=t.unwrap(n.priceDetails.promotionDiscount),a=i&&t.unwrap(i.description).length>0,o=e&&t.unwrap(e.description).length>0,r=!!t.unwrap(n.priceDetails.basePrices)[0].shouldShowCouponDetails();n.isDividerLineShown(o||a||r)},this._priceDetailPopover=function(){n.priceDetails&&(n.priceDetailPopoverBindingOptions=new o,n.priceDetailPopoverBindingOptions.template=d.PRICE_DETAIL_POPOVER,n.priceDetailPopoverBindingOptions.data={priceDetails:n.priceDetails},n.priceDetailPopoverBindingOptions.options={container:"body",placement:"auto",trigger:"hover",title:"",template:'\n                        <div class="popover price-detail-popover-container">\n                            <div class="arrow position-left"></div>\n                            <h3 class="popover-title"></h3>\n                            <div class="popover-content"></div>\n                        </div>\n                    ',html:!0})},this.isExperimentCutTheRightPanelDownToBeAllAboveTheFoldApplied=s.isApplied(l.CutTheRightPanelDonwToBeAllAboveTheFold),this.priceDetails=e.priceDetails,this.bestpriceGuarantee=e.bestpriceGuarantee,this.isDisplayHostWillReplyText=e.isDisplayHostWillReplyText,this.taxesAndFeesPopoverBindingOptions=new o,this.experimentApiService=new r,this.taxesAndFeesPopoverBindingOptions.options.title=this.priceDetails.taxesAndFeesModal.title,this.taxesAndFeesPopoverBindingOptions.options.content=this.priceDetails.taxesAndFeesModal.taxesAndFeesInfo,this.paymentChargeOption=t.unwrap(e.priceDetails.paymentChargeOption),this.isPriceMatchMessageDisplayed=e.isPriceMatchMessageDisplayed,this.agodaPriceGuaranteePopoverBindingOptions=e.agodaPriceGuaranteePopoverBindingOptions,this.priceDetails.isGiftcardEarnOptIn=t.observable(this.priceDetails.youWillGetTotalGiftcardText&&"true"===i.getSessionStorageItem(c)),this.priceDetails.showGiftcardText=t.computed(function(){return""!==n.priceDetails.youWillGetTotalGiftcardText()&&(n.priceDetails.isGiftcardEarnOptIn()||n.priceDetails.isEarnGiftCardApplied())},this),this.priceDetails.isNewAgodaCashIcon=t.computed(function(){return t.unwrap(n.priceDetails.showGiftcardText)&&s.isApplied(l.NewAgodaCashIcon)},this),this.isFixDuplicateShadowRate=t.computed(function(){var e=t.unwrap(n.priceDetails.loyaltyDiscount);return!(e&&e.description&&e.description()&&n.priceDetails.isDifferentCurrencyCode())&&(!!t.unwrap(n.priceDetails.formattedShadowRateAmount)||void 0)}),this.priceDetails.airportTransferPayNowPrice=t.observable(""),this.priceDetails.airportTransferPayNowVendor=t.observable(""),this.formattedDiscountBadgeText=t.unwrap(this.priceDetails.formattedDiscountBadgeText),t.unwrap(this.priceDetails.isNewPriceBreakDownExperiment)&&(this.priceDetails.airportTransferText=t.observable(""),this.priceDetails.formattedAirportTransferAmount=t.observable("")),this.installmentPriceDetails=t.mapping.fromJS({installmentBreakdownText:"",interestChargedByBankText:"",interestChargedByBank:"",installmentsPayableText:"",installmentPayable:"",totalCostText:"",payableToBankText:"",isInstallmentApplicable:!1,isNoThanksInstallment:!0}),this.isDividerLineShown=t.observable(!1),this._updateDividerStatus(),this._subscribeEvents(),this._priceDetailPopover()}return e.prototype._subscribeEvents=function(){var e=this;this._paymentMethodUpdatedSubscription=t.postbox.subscribe(a.PRICE_DETAILS_UPDATED,function(n){t.mapping.fromJS(n,{},e.priceDetails),e._updateDividerStatus()}),this._paymentMethodUpdatedSubscription=t.postbox.subscribe(a.AIRPORT_TRANSFER_PRICE_UPDATE,function(n){t.mapping.fromJS(n,{},e.priceDetails),e._updateDividerStatus()}),t.unwrap(this.priceDetails.isEarnGiftCardApplied)||(this._giftcardEarnOptinUpdateSubscription=t.postbox.subscribe(a.GIFTCARD_EARN_OPTIN_UPDATED,function(n){return t.mapping.fromJS(n,{},e.priceDetails.isGiftcardEarnOptIn)})),this._noThanksInstallmentSubscription=t.postbox.subscribe(a.NO_THANKS_INSTALLMENT,function(t){e.installmentPriceDetails.isNoThanksInstallment(t)}),this._monthlyInstallmentTextSubscription=t.postbox.subscribe(a.MONTHLY_INSTALLMENT_TEXT_UPDATE,function(n){t.mapping.fromJS(n,{},e.installmentPriceDetails)}),this._installmentDetailsMasterSubscription=t.postbox.subscribe(a.INSTALLMENT_DETAILS_MASTER,function(n){t.mapping.fromJS(n,{},e.installmentPriceDetails)})},e.prototype.dispose=function(){this._paymentMethodUpdatedSubscription&&this._paymentMethodUpdatedSubscription.dispose(),t.unwrap(this.priceDetails.isEarnGiftCardApplied)||this._giftcardEarnOptinUpdateSubscription&&this._giftcardEarnOptinUpdateSubscription.dispose(),this._installmentDetailsMasterSubscription&&this._installmentDetailsMasterSubscription.dispose(),this._noThanksInstallmentSubscription&&this._noThanksInstallmentSubscription.dispose(),this._monthlyInstallmentTextSubscription&&this._monthlyInstallmentTextSubscription.dispose()},e.prototype.openAgodaPriceGuaranteeModal=function(){t.postbox.publish(a.DISPLAY_PRICE_GUARANTEE_POPUP)},e}();e.exports=p}).call(t,n(3))},function(e,t){"use strict";var n=function(e,t){var n=null;try{n=t.getItem(e)}catch(i){n=null}return n},i=function(e,t,n){var i=!0;try{n.setItem(e,t),i=!0}catch(a){i=!1}return i},a=function(e,t){return i(e,t,localStorage)};t.setLocalStorageItem=a;var o=function(e,t){return i(e,t,sessionStorage)};t.setSessionStorageItem=o;var r=function(e){return n(e,localStorage)};t.getLocalStorageItem=r;var s=function(e){return n(e,sessionStorage)};t.getSessionStorageItem=s},function(e,t){e.exports="<!-- ko if: params.errorMessage --><!-- ko if: params.loginErrorStatus() == 5 --> <div class=\"row respond-warning\"> <span class=\"\" data-bind=\"html: params.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText\"> </span> </div><!-- /ko --><!-- ko if: params.loginErrorStatus() != 5 --> <div class=\"row respond-warning\"> <p class=\"error-message m-b-05\" data-bind=\"html: params.errorMessage\"></p> <a data-element-name=signin-forget-password-link id=signin-forget-password-link href=# data-bind=\"text: params.clickHereToGetNewPasswordText, click: params.openForgotPasswordPanel\"></a> </div><!-- /ko --><!-- /ko --> <div class=row> <div class=\"col-sm-12 form-group has-feedback\" data-bind=\"validationElement: params.username\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: params.username,\r\n                labelText: params.yourEmailAddressText,\r\n                labelCss: 'email',\r\n                iconCss: 'ficon-20 ficon-email-envelope',\r\n                enter: params.login,\r\n                event: { change: params.clearErrorMessage },\r\n                inputAttributes: {\r\n                    name: 'loginEmail',\r\n                    id: 'loginEmail',\r\n                    type: 'email',\r\n                    autocapitalize: 'off',\r\n                    autocomplete: 'email',\r\n                    autocorrect: 'off',\r\n                    disabled: isDisableEmailInput,\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </div> <div class=row> <div class=\"col-sm-12 form-group has-feedback\" data-bind=\"validationElement: params.password\"><!-- ko component: {\r\n            name: \"form-input\",\r\n            params : {\r\n                value: params.password,\r\n                labelText: params.passwordText,\r\n                labelCss: 'password',\r\n                iconCss: 'ficon-20 ficon-lockers',\r\n                enter: params.login,\r\n                inputAttributes: {\r\n                    name: 'loginPassword',\r\n                    id: 'loginPassword',\r\n                    type: 'password',\r\n                    autocomplete: 'off'\r\n                }\r\n            }\r\n        } --><!-- /ko --> </div> </div>"},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.params=e,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm),this.isDisableEmailInput=this.params.isShowLoginFromCCOF}return e}();e.exports=o},function(e,t){e.exports='<div class=login-switcher> <div class="login-tab-header row" data-bind="attr: { \'data-tab\': params.loginTab }"><!-- ko if: isLoginSwitcherVisible --> <div id=switcher-tab-email class="switcher-tab col-xs-6" data-tab-active=0 data-bind="click: onClickEmailTab" data-element-name=switcher-tab-email> <i class="ficon ficon-24 ficon-email-envelope"></i> <span data-bind="text: params.emailText"></span> </div> <div id=switcher-tab-mobile class="switcher-tab col-xs-6" data-bind="click: onClickMobileTab" data-element-name=switcher-tab-mobile> <i class="ficon ficon-24 ficon-room-promotion-for-mobiledeal"></i> <span data-bind="text: params.mobileText"></span> </div><!-- /ko --> </div> <div class="login-tab-container row"> <div class=login-tab-content data-bind="attr: { \'data-tab\': params.loginTab }"><!-- ko if: isLoginSwitcherVisible --> <div class="email-section content-container"><!-- ko component: {\r\n            name: "email-login",\r\n            params: {\r\n                username: params.username,\r\n                password: params.password,\r\n                yourEmailAddressText: params.yourEmailAddressText,\r\n                passwordText: params.passwordText,\r\n                login: params.login,\r\n                clearErrorMessage: params.clearErrorMessage,\r\n                errorMessage: params.errorMessage,\r\n                loginErrorStatus: params.loginErrorStatus,\r\n                youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText: params.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText,\r\n                clickHereToGetNewPasswordText: params.clickHereToGetNewPasswordText,\r\n                openForgotPasswordPanel: params.openForgotPasswordPanel,\r\n                isShowLoginFromCCOF: params.isShowLoginFromCCOF\r\n            }} --><!-- /ko --> </div> <div class="phone-section content-container"><!-- ko if: params.phoneErrorMessage --><!-- ko if: params.phoneNumberLoginErrorStatus() == 5 --> <div class="row respond-warning"> <span class="" data-bind="html: params.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText"> </span> </div><!-- /ko --><!-- ko if: params.phoneNumberLoginErrorStatus() != 5 && params.phoneNumberLoginErrorStatus() != 7 --> <div class="row respond-warning"> <p class="error-message m-b-05" data-bind="html: params.phoneErrorMessage"></p> <a data-element-name=signin-forget-password-link id=signin-forget-password-link href=# data-bind="text: params.clickHereToGetNewPasswordText, click: params.openForgotPasswordPanel"></a> </div><!-- /ko --><!-- /ko --> <div class=row> <div class="col-sm-12 form-group has-feedback phonenumber-form" data-bind="validationElement: params.mobilePhoneWithCountryCode"> <label for=loginPhoneNumber class="control-label mobile-label" data-bind="text: params.mobilePhoneText"></label> <div class="phonenumber-group clearfix"> <input id=loginCountryCode type=tel class="form-control sensitive countrycode" maxlength=5 data-bind="value: params.countryCode, countryCodeFormat: params.countryCode, enter: params.login, allowEmpty" name=loginCountryCode data-element-name=signin-mobile-countrycode-input /> <input class="form-control sensitive phonenumber" id=loginPhoneNumber type=tel maxlength=16 name=loginPhoneNumber data-bind="value: params.mobilePhone, numericOnly: params.mobilePhone, enter: params.login, allowEmpty" data-element-name=signin-mobile-phonenumber-input /> </div> <div class="help-block phonenumber-error" data-bind="validationMessage: params.mobilePhoneWithCountryCode"></div> <i class="ficon ficon-20 ficon-room-promotion-for-mobiledeal" data-bind="css: { \'form-control-feedback\': !isAddMoreLifeExperiment }"></i> </div> </div> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: params.mobilePassword"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=loginPhonePassword class="control-label password" data-bind="text: params.passwordText"></label> <input id=loginPhonePassword type=password class="form-control sensitive" name=loginPhonePassword data-bind="value: params.mobilePassword,\r\n                                    enter: params.login,\r\n                                    allowEmpty"> <i class="ficon ficon-20 ficon-lockers form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                            name: "form-input",\r\n                            params : {\r\n                                value: params.mobilePassword,\r\n                                labelText: params.passwordText,\r\n                                css: { \'has-value\': ko.unwrap(params.mobilePassword) != null },\r\n                                enter: params.login,\r\n                                allowEmpty: true,\r\n                                iconClass: \'ficon-lockers ficon-20\',\r\n                                inputAttributes: {\r\n                                    name: \'loginPhonePassword\',\r\n                                    id: \'loginPhonePassword\',\r\n                                    type: \'password\',\r\n                                }\r\n                            }\r\n                        } --><!-- /ko --><!-- /ko --> </div> </div> </div><!-- /ko --><!-- ko ifnot: isLoginSwitcherVisible --><!-- ko ifnot: isLoginWithMobile --> <div class="email-section content-container"><!-- ko component: {\r\n                    name: "email-login",\r\n                    params: {\r\n                        username: params.username,\r\n                        password: params.password,\r\n                        yourEmailAddressText: params.yourEmailAddressText,\r\n                        passwordText: params.passwordText,\r\n                        login: params.login,\r\n                        clearErrorMessage: params.clearErrorMessage,\r\n                        errorMessage: params.errorMessage,\r\n                        loginErrorStatus: params.loginErrorStatus,\r\n                        youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText: params.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText,\r\n                        clickHereToGetNewPasswordText: params.clickHereToGetNewPasswordText,\r\n                        openForgotPasswordPanel: params.openForgotPasswordPanel,\r\n                        isShowLoginFromCCOF: params.isShowLoginFromCCOF\r\n                    }} --><!-- /ko --> </div><!-- /ko --><!-- ko if: isLoginWithMobile --> <div class="phone-section content-container"><!-- ko if: params.phoneErrorMessage --><!-- ko if: params.phoneNumberLoginErrorStatus() == 5 --> <div class="row respond-warning"> <span class="" data-bind="html: params.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText"> </span> </div><!-- /ko --><!-- ko if: params.phoneNumberLoginErrorStatus() != 5 && params.phoneNumberLoginErrorStatus() != 7 --> <div class="row respond-warning"> <p class="error-message m-b-05" data-bind="html: params.phoneErrorMessage"></p> <a data-element-name=signin-forget-password-link id=signin-forget-password-link href=# data-bind="text: params.clickHereToGetNewPasswordText, click: params.openForgotPasswordPanel"></a> </div><!-- /ko --><!-- /ko --> <div class=row> <div class="col-sm-12 form-group has-feedback phonenumber-form" data-bind="validationElement: params.mobilePhoneWithCountryCode, css: { \'no-padding\': isAddMoreLifeExperiment }"> <label for=loginPhoneNumber class="control-label mobile-label" data-bind="text: params.mobilePhoneText"></label> <div class="phonenumber-group clearfix"> <input id=loginCountryCode type=tel class="form-control sensitive countrycode" maxlength=5 data-bind="value: params.countryCode, countryCodeFormat: params.countryCode, enter: params.login, allowEmpty, enable: false" name=loginCountryCode data-element-name=signin-mobile-countrycode-input /> <input class="form-control sensitive phonenumber" id=loginPhoneNumber type=tel maxlength=16 name=loginPhoneNumber data-bind="value: params.mobilePhone, numericOnly: params.mobilePhone, enter: params.login, allowEmpty, enable: false" data-element-name=signin-mobile-phonenumber-input /> </div> <div class="help-block phonenumber-error" data-bind="validationMessage: params.mobilePhoneWithCountryCode"></div> <i class="ficon ficon-20 ficon-room-promotion-for-mobiledeal form-control-feedback" data-bind="css: { \'inline-icon\': isAddMoreLifeExperiment }"></i> </div> </div> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: params.mobilePassword, css: { \'no-padding\': isAddMoreLifeExperiment }"> <label for=loginPhonePassword class="control-label password" data-bind="text: params.passwordText"></label> <input id=loginPhonePassword type=password class="form-control sensitive" name=loginPhonePassword data-bind="value: params.mobilePassword,\r\n                                    enter: params.login,\r\n                                    allowEmpty"> <i class="ficon ficon-20 ficon-lockers form-control-feedback" data-bind="css: { \'inline-icon\': isAddMoreLifeExperiment }"></i> </div> </div> </div><!-- /ko --><!-- /ko --> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(9),a=n(91),o=function(){function e(e){var n=this;this.onClickEmailTab=function(){n.params.loginTab(0)},this.onClickMobileTab=function(){n.params.loginTab(1)},this.params=e,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm),this.isLoginWithMobile=!!t.unwrap(this.params.mobilePhone),this.isLoginSwitcherVisible=t.observable(!this.params.isShowLoginFromCCOF)}return e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class=login-panel data-bind="scrollToElement: scrollToLoginPanel"> <div data-bind="visible: !isForgotPasswordPanelDisplayed()"><!-- ko ifnot: isDisplayCaptcha --> <div class=row> <div class="col-sm-6 form-group has-feedback" data-bind="validationElement: loginPanel.username"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: loginPanel.username,\r\n                        labelText: loginPanel.yourEmailAddressText,\r\n                        labelCss: \'email\',\r\n                        enter: login,\r\n                        event: { change: clearErrorMessage },\r\n                        inputAttributes: {\r\n                            name: \'loginEmail\',\r\n                            id: \'loginEmail\',\r\n                            type: \'email\',\r\n                            autocapitalize: \'off\',\r\n                            autocomplete: \'email\',\r\n                            autocorrect: \'off\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> <div class="col-sm-6 form-group has-feedback" data-bind="validationElement: loginPanel.password"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: loginPanel.password,\r\n                        labelText: loginPanel.passwordText,\r\n                        labelCss: \'password\',\r\n                        enter: login,\r\n                        inputAttributes: {\r\n                            name: \'loginPassword\',\r\n                            id: \'loginPassword\',\r\n                            type: \'password\',\r\n                            autocomplete: \'off\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> </div><!-- /ko --><!-- ko if: isDisplayCaptcha --> <div class=row><!-- ko component: {\r\n                name: "captcha",\r\n                params: {\r\n                    isCaptchaValidated: loginPanel.isCaptchaValidated,\r\n                    captchaValidationResult: loginPanel.captchaValidationResult,\r\n                    errorMessage:  pleaseCompleteTheCaptchaAbove,\r\n                    isRenderOnModal: isLoginModalExperimentIsApplied\r\n                }\r\n            } --><!-- /ko --> </div><!-- /ko --> <div class=row> <div class=col-sm-12><!-- ko if: loginPanel.errorMessage --> <p class="error-message m-b-05" data-bind="html: loginPanel.errorMessage"></p> <p><a data-element-name=forgot-password-with-reset-message-link class=forgot-password-link href=javascript:void(0) data-bind="text: loginPanel.resetYourAccountText, click: openForgotPasswordPanel"></a></p><!-- /ko --> <a data-element-name=forgot-password-link class=forgot-password-link href=javascript:void(0) data-bind="text: loginPanel.forgotPasswordText, click: openForgotPasswordPanel"></a> </div> </div> <div class=row> <div class="col-sm-12 text-right flip"><!-- ko component: {\r\n                    name: "terms-and-privacy",\r\n                    params: {\r\n                        termsAndPrivacyData: termsAndPrivacyData\r\n                    }\r\n                } --><!-- /ko --> <button type=button class="btn btn-lg btn-primary ladda-button sign-in-btn" data-style=expand-right data-bind="ladda: isProcessing, click: login"> <span class=ladda-label data-bind="text: loginPanel.signInText"></span> </button> </div> </div> </div><!-- forgot password starts --> <div class=forgot-password-panel data-bind="visible: isForgotPasswordPanelDisplayed"> <p data-bind="text: loginPanel.problemWithYourPasswordText"></p> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: loginPanel.username"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: loginPanel.username,\r\n                        labelText: loginPanel.pleaseEnterYourEmailAddressText(),\r\n                        enter: forgotPassword,\r\n                        inputAttributes: {\r\n                            name: \'forgotPasswordEmail\',\r\n                            id: \'forgotPasswordEmail\',\r\n                            type: \'email\',\r\n                            autocomplete: \'off\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> </div> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary" id=btnSubmitForgotPassword data-style=expand-right data-bind="click: forgotPassword, ladda: isProcessing"> <span class=ladda-label data-bind="text: loginPanel.submitButtonText"></span> </button> <button type=button class="btn btn-default" data-bind="text: loginPanel.cancelButtonText, click: hideForgotPasswordPanel"></button> </div> </div> </div><!-- forgot password ends --> </div>'},function(e,t,n){(function(t,i){"use strict";var a=n(205),o=n(206),r=n(11),s=n(209),l=n(9),d=n(154),c=n(215),p=n(318),u=n(319),m=n(91),h=n(86),f=n(88),g=function(){function e(e){var n=this;if(this.login=function(){1===n.loginTab()?n.loginPanel.phoneErrorMessage(""):n.loginPanel.errorMessage(""),n.isProcessing()||(1===n.loginTab()?n._login(!0):n._login(!1))},this.forgotPassword=function(){if(!n.isProcessing()){var e=t.validation.group(n.loginPanel,{deep:!0});if(n.loginPanel.username.isValid()){n.isProcessing(!0);var i=new s;i.forgotPassword(n.loginPanel.username()).then(function(){n.isForgotPasswordPanelDisplayed(!1),n.isForgotPasswordEmailSentVisible(!0),e.showAllMessages(!1)}).always(function(){n.isProcessing(!1)})}else e.showAllMessages(!0)}},this.clearErrorMessage=function(){n.loginPanel.errorMessage(void 0),n.isLoginModalExperimentIsApplied()&&n.loginPanel.loginServiceResult(!0),n.loginPanel.phoneErrorMessage(void 0),n.loginPanel.phoneLoginServiceResult(!0)},this.openForgotPasswordPanel=function(){var e=t.validation.group(n.loginPanel,{deep:!0});n.loginPanel.username.isValid()||e.showAllMessages(!1),n.isForgotPasswordPanelDisplayed(!0),n.clearErrorMessage()},this.params=e,this.loginPanel=e.loginPanel,this.loginPanel.isCaptchaValidated=t.observable(!0),this.isLoginPanelBlocked=e.isLoginPanelBlocked,this.termsAndPrivacyData=e.termsAndPrivacyData,this.scrollToLoginPanel=t.observable(!1),this.isFacebookInitSuccess=t.observable(!0),this.loginErrorStatus=t.observable(0),this.phoneNumberLoginErrorStatus=t.observable(0),this.isLoginWithFacebookProcess=t.observable(!1),this.isLoginModalExperimentIsApplied=t.observable(void 0===e.isMobile||!e.isMobile()||e.facebookDetails.isFacebookEnabled()),this.pleaseCompleteTheCaptchaAbove=a.instance.errorMessage,this.isUserClickedOnSignIn=t.observable(!1),this.isDisplayCaptcha=t.observable(this.showCaptcha()&&this.isUserClickedOnSignIn()),this.isAddMoreLifeExperiment=l.getFeature(m.AddMoreLifeToBookingForm),this.isIkki9356Applied=l.isDesktop()&&h.isApplied(f.ShowCcofForL1User),this.subscriptionList=[],this._init(),this._setValidation(),this._subscribeEvents(),this.mappingCms(),this.submitButtonElementName(0===this.loginTab()?"signin-email-button":"signin-mobile-button"),""===this.loginPanel.countryCode()&&l.getPageData().origin&&!p(i.fn.intlTelInput)){var o=i.fn.intlTelInput.getCountryData(),r=c(o,function(e){return e.iso2===u(l.getPageData().origin)})||c(o,function(e){return e.iso2===u("th")});this.loginPanel.countryCode("+"+r.dialCode)}this.loginPanel.mobilePhoneWithCountryCode.isModified(!!this.loginPanel.countryCode()&&!!this.loginPanel.mobilePhone()),this.loginPanel.isPasswordFocused=t.observable(!1),this.isLoginModalExperimentIsApplied()&&this.loginPanel.username.isModified(this.loginPanel.username()&&this.loginPanel.username().length>0)}return e.prototype.mappingCms=function(){this.forgotPasswordCms={yourMobileNumberOrPasswordIsIncorrectText:this.loginPanel.yourMobileNumberOrPasswordIsIncorrectText,mobileNumberIsRequiredText:this.loginPanel.mobileNumberIsRequiredText,pleaseEnterAValidMobileNumberText:this.loginPanel.pleaseEnterAValidMobileNumberText,mobileText:this.loginPanel.mobileText,mobilePhoneText:this.loginPanel.mobilePhoneText,phoneErrorMessage:this.loginPanel.phoneErrorMessage,resetPasswordSubmitText:this.loginPanel.resetPasswordSubmitText,enterYourMobileNumber:this.loginPanel.enterYourMobileNumber,resetYourPassword:this.loginPanel.resetYourPassword,resetPhonePasswordSubmit:this.loginPanel.resetPhonePasswordSubmit,sorryWeArentAbleToIdentify:this.loginPanel.sorryWeArentAbleToIdentify,resetPhonePasswordVerification:this.loginPanel.resetPhonePasswordVerification,weHaveSentAVerificationCode:this.loginPanel.weHaveSentAVerificationCode,resetPhonePasswordVerify:this.loginPanel.resetPhonePasswordVerify,haventReceivedVerification:this.loginPanel.haventReceivedVerification,resendVerificationCode:this.loginPanel.resendVerificationCode,useAnotherMobileNumber:this.loginPanel.useAnotherMobileNumber,incorrectVerificationCode:this.loginPanel.incorrectVerificationCode,enterANewPasswordFor:this.loginPanel.enterANewPasswordFor,resetPhonePasswordNewPassword:this.loginPanel.resetPhonePasswordNewPassword,resetPhonePasswordConfirmNewPassword:this.loginPanel.resetPhonePasswordConfirmNewPassword,resetPhonePasswordChangePassword:this.loginPanel.resetPhonePasswordChangePassword,passwordChanged:this.loginPanel.passwordChanged,passwordChangedSuccessfully:this.loginPanel.passwordChangedSuccessfully,done:this.loginPanel.done,passwordIsRequired:this.loginPanel.passwordIsRequired,yourPasswordMustBeAtLeast8Characters:this.loginPanel.yourPasswordMustBeAtLeast8Characters,thePasswordsYouProvidedDoNotMatch:this.loginPanel.thePasswordsYouProvidedDoNotMatch,reachMaximumSendOTP:this.loginPanel.reachMaximumSendOTP,otpExpired:this.loginPanel.otpExpired}},e.prototype.renderComplete=function(){t.postbox.publish(r.SEND_CRITICAL_MARK,d.LoginPanel)},e.prototype.dispose=function(){for(var e=0;e<this.subscriptionList.length;e++)this.subscriptionList[e].dispose();this._openLoginPanelSubscription&&this._openLoginPanelSubscription.dispose(),this._apsPeekModalDisplayedSubscription&&this._apsPeekModalDisplayedSubscription.dispose(),this._captchaResponseSubscription&&this._captchaResponseSubscription.dispose(),this._isForgotPasswordPanelDisplayedSubscription&&this._isForgotPasswordPanelDisplayedSubscription.dispose(),this._isForgotPasswordEmailSentVisibleSubscription&&this._isForgotPasswordEmailSentVisibleSubscription.dispose()},e.prototype.getConsideredInputGroup=function(e){return e?[this.loginPanel.mobilePhoneWithCountryCode,this.loginPanel.mobilePassword]:[this.loginPanel.username,this.loginPanel.password]},e.prototype._login=function(e){var n,i=this,o=this.getConsideredInputGroup(e),r=t.validation.group(o,{deep:!0});return this.isLoginModalExperimentIsApplied()&&(this.loginPanel.loginServiceResult(!0),this.loginPanel.phoneLoginServiceResult(!0)),this.showCaptcha()&&!this.isUserClickedOnSignIn()?(this.isUserClickedOnSignIn(!0),void this.isDisplayCaptcha(!0)):void(r().length?r.showAllMessages(!0):this.isDisplayCaptcha()?a.instance.execute():(this.isProcessing(!0),this.isLoginPanelBlocked(!0),n=new s,n.loginV2(this._createLoginRequest(e)).then(function(t){i.handleLoginResponse(t,r,e)}).always(function(){i.isProcessing(!1),i.isLoginPanelBlocked(!1)})))},e.prototype.handleLoginResponse=function(e,n,r){var s=this;if(10!==e.status&&a.instance.getType()!==o.Undefined&&this.disableCaptcha(),1===e.status)setTimeout(function(){r&&(s.loginPanel.mobilePhone(void 0),s.loginPanel.mobilePassword(void 0)),s.loginPanel.username(void 0),s.loginPanel.password(void 0);var e=s.getConsideredInputGroup(r);n||(n=t.validation.group(e,{deep:!0})),n.showAllMessages(!1),i(".modal").modal("hide")},300);else if(10===e.status&&300!==e.action)if(a.instance.getType()!==o.Undefined)a.instance.reset();else{var d=l.getPageData();d.jsonViewModel.features&&(d.jsonViewModel.features.captcha=e.captcha,a.instance.reloadData(),this.isDisplayCaptcha(this.showCaptcha()))}else r?(7!==e.status&&this.loginPanel.phoneErrorMessage(e.errorMessage),this.loginPanel.phoneLoginServiceResult(!1),this.phoneNumberLoginErrorStatus(e.status)):(this.loginPanel.errorMessage(e.errorMessage),this.loginErrorStatus(e.status)),this.isLoginModalExperimentIsApplied()&&this.loginPanel.loginServiceResult(!1)},e.prototype.disableCaptcha=function(){var e=l.getPageData();e.jsonViewModel&&e.jsonViewModel.features&&(e.jsonViewModel.features.captcha=void 0,a.instance.reloadData(),this.isDisplayCaptcha(this.showCaptcha()))},e.prototype.hideForgotPasswordPanel=function(){var e=t.validation.group(this.loginPanel,{deep:!0});this.loginPanel.username(void 0),this.loginPanel.password(void 0),this.clearErrorMessage(),e.showAllMessages(!1),this.isForgotPasswordPanelDisplayed(!1),this.isForgotPasswordEmailSentVisible(!1)},e.prototype.showCaptcha=function(){return a.instance.getType()!==o.Undefined},e.prototype._init=function(){var e=this;t.isObservable(this.loginPanel.errorMessage)||(this.loginPanel.errorMessage=t.observable("")),this.isProcessing=t.observable(!1),this.isForgotPasswordPanelDisplayed=t.observable(!1),this.isForgotPasswordSuccessModalLoaded=t.observable(!1),this.isForgotPasswordEmailSentVisible=t.observable(!1),t.isObservable(this.loginPanel.loginServiceResult)||(this.loginPanel.loginServiceResult=t.observable(!0)),this.loginPanel.loginTab||(this.loginPanel.loginTab=t.observable(0)),this.loginTab=this.loginPanel.loginTab,this.submitButtonElementName=t.observable(""),t.isObservable(this.loginPanel.phoneLoginServiceResult)||(this.loginPanel.phoneLoginServiceResult=t.observable(!0)),t.isObservable(this.loginPanel.mobilePhoneWithCountryCode)||(this.loginPanel.mobilePhoneWithCountryCode=t.computed(function(){return{countryCode:e.loginPanel.countryCode()||"",phoneNumber:e.loginPanel.mobilePhone()||""}})),t.isObservable(this.loginPanel.phoneErrorMessage)||(this.loginPanel.phoneErrorMessage=t.observable("")),this.forgotPhonePasswordState=t.observable(0),t.isObservable(this.customTitleText)||(this.customTitleText=t.observable(null)),t.isComputed(this.isShowCustomTitle)||(this.isShowCustomTitle=t.computed(function(){
return null!=t.unwrap(e.customTitleText)})),this.params.customTitleText&&this.customTitleText(this.params.customTitleText),this.isShowLoginFromCCOF=this.params.isShowLoginFromCCOF,this.pageId=this.isShowLoginFromCCOF?36:35},e.prototype._setValidation=function(){var e=this;this.setUsernameValidation(),this.setPasswordValidation(),this.setPhoneValidation(),this.setMobilePasswordValidation(),this.isAddMoreLifeExperiment&&(this.preValidate(),this._isForgotPasswordPanelDisplayedSubscription=this.isForgotPasswordPanelDisplayed.subscribe(function(){e.preValidate()}),this._isForgotPasswordEmailSentVisibleSubscription=this.isForgotPasswordEmailSentVisible.subscribe(function(){e.preValidate()}))},e.prototype.preValidate=function(){t.unwrap(this.loginPanel.username)&&this.loginPanel.username.notifySubscribers(),t.unwrap(this.loginPanel.password)&&this.loginPanel.password.notifySubscribers()},e.prototype.setUsernameValidation=function(){var e=this;this.isLoginModalExperimentIsApplied()?this.loginPanel.username.extend({required:{message:this.loginPanel.pleaseEnterEmailToContinueText(),params:!0},pattern:{message:this.loginPanel.pleaseEnterEmailToContinueText(),params:this.loginPanel.emailRegex()},validation:{validator:function(t){return e.loginPanel.loginServiceResult()},message:function(){return""}}}):this.loginPanel.username.extend({required:{message:this.loginPanel.pleaseEnterEmailToContinueText(),params:!0},pattern:{message:this.loginPanel.pleaseEnterEmailToContinueText(),params:this.loginPanel.emailRegex()}})},e.prototype.setPhoneValidation=function(){var e=this;this.loginPanel.mobilePhoneWithCountryCode.extend({validation:[{validator:function(e){return""!==e.countryCode&&""!==e.phoneNumber},message:function(){return e.loginPanel.mobileNumberIsRequiredText()}},{validator:function(t){return t.phoneNumber.length>=8&&new RegExp(e.loginPanel.mobilePhoneRegex()).test(t.phoneNumber)},message:function(){return e.loginPanel.pleaseEnterAValidMobileNumberText()}},{validator:function(t){return 7!==e.phoneNumberLoginErrorStatus()},message:function(){return e.loginPanel.pleaseEnterAValidMobileNumberText()}},{validator:function(t){return e.loginPanel.phoneLoginServiceResult()},message:function(){return""}}]})},e.prototype.setPasswordValidation=function(){var e=this;this.loginPanel.password.extend({required:{message:this.loginPanel.pleaseEnterPasswordToContinueText(),params:!0},validation:{validator:function(t){return e.loginPanel.loginServiceResult()},message:function(){return""}}})},e.prototype.setMobilePasswordValidation=function(){var e=this;this.loginPanel.mobilePassword.extend({required:{message:this.loginPanel.pleaseEnterPasswordToContinueText(),params:!0},validation:{validator:function(t){return e.loginPanel.phoneLoginServiceResult()},message:function(){return""}}})},e.prototype._subscribeEvents=function(){var e=this;this._openLoginPanelSubscription=t.postbox.subscribe(r.OPEN_LOGIN_PANEL,function(t){e.loginPanel.username(t),e.loginPanel.password(void 0),e.loginPanel.password.isModified(!1),e.loginPanel.isPasswordFocused(!0),e.loginPanel.mobilePassword(void 0),e.loginPanel.mobilePassword.isModified(!1),e.loginPanel.mobilePhoneWithCountryCode.isModified(!1),e.clearErrorMessage(),e.scrollToLoginPanel(!0)}),this._apsPeekModalDisplayedSubscription=t.postbox.subscribe(r.APS_PEEK_MODAL_DISPLAYED,function(t){e.loginPanel._apsPeekDiscountAmount=t}),this.isLoginModalExperimentIsApplied()&&(this.subscriptionList.push(this.loginPanel.username.subscribe(function(){e.loginPanel.loginServiceResult(!0)})),this.subscriptionList.push(this.loginPanel.password.subscribe(function(){e.loginPanel.loginServiceResult(!0)}))),this.subscriptionList.push(this.loginPanel.mobilePhoneWithCountryCode.subscribe(function(){this.loginPanel.mobilePhoneWithCountryCode().countryCode||this.loginPanel.mobilePhoneWithCountryCode().phoneNumber||this.loginPanel.mobilePhoneWithCountryCode.isModified(!1),this.phoneNumberLoginErrorStatus(0),this.loginPanel.phoneLoginServiceResult(!0)},this,"change")),this.subscriptionList.push(this.loginPanel.mobilePassword.subscribe(function(){this.loginPanel.phoneLoginServiceResult(!0)},this)),this.subscriptionList.push(this.loginTab.subscribe(function(){this.submitButtonElementName(0===this.loginTab()?"signin-email-button":"signin-mobile-button")},this,"change")),this.loginPanel.captchaValidationResult||(this.loginPanel.captchaValidationResult=t.observable({challenge:"",validate:"",secCode:""}),this._captchaResponseSubscription=this.loginPanel.captchaValidationResult.subscribe(function(n){if(""!==n.challenge){e.isProcessing(!0),e.isLoginPanelBlocked(!0);var i=new s,a=1===e.loginTab(),o=e.getConsideredInputGroup(a),r=t.validation.group(o,{deep:!0});r().length?(r.showAllMessages(!0),e.isDisplayCaptcha(!1),e.isProcessing(!1),e.isLoginPanelBlocked(!1)):i.loginV2(e._createLoginRequest(a)).then(function(t){e.handleLoginResponse(t,null,a)}).always(function(){e.isProcessing(!1),e.isLoginPanelBlocked(!1)})}})),this.subscriptionList.push(this.loginPanel.isCaptchaValidated.subscribe(function(t){return e.login()}))},e.prototype._createLoginRequest=function(e){return this.isIkki9356Applied?{username:e?this._getPhoneNumberWithCountryCode():this.loginPanel.username(),password:e?this.loginPanel.mobilePassword():this.loginPanel.password(),apsPeekDiscountAmount:this.loginPanel._apsPeekDiscountAmount,captchaResponse:this.loginPanel.captchaValidationResult(),isPhoneNumberLogin:e,pageId:this.pageId}:{username:e?this._getPhoneNumberWithCountryCode():this.loginPanel.username(),password:e?this.loginPanel.mobilePassword():this.loginPanel.password(),apsPeekDiscountAmount:this.loginPanel._apsPeekDiscountAmount,captchaResponse:this.loginPanel.captchaValidationResult(),isPhoneNumberLogin:e}},e.prototype._getPhoneNumberWithCountryCode=function(){return this.loginPanel.mobilePhoneWithCountryCode().countryCode+this.loginPanel.mobilePhoneWithCountryCode().phoneNumber},e.prototype.goBackLoginStep1=function(){this.isForgotPasswordPanelDisplayed(!1),this.isForgotPasswordEmailSentVisible(!1)},e}();e.exports=g}).call(t,n(3),n(2))},function(e,t,n){"use strict";var i=n(9),a=n(206),o=n(207),r=n(208),s=function(){function e(){this.errorMessage=void 0,this.loadData()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.loadData=function(){var e=i.getPageData();e.jsonViewModel.features&&e.jsonViewModel.features.captcha?(this._captcha=this.createCaptchaFeature(e.jsonViewModel.features.captcha.geetest,e.jsonViewModel.features.captcha.recaptcha,e.jsonViewModel.features.captcha.recommendedType),this.errorMessage=e.jsonViewModel.cmsItems[78235]):this._captcha=this.createCaptchaFeature("","",a.Undefined)},e.prototype.createCaptchaFeature=function(e,t,n){return{geetest:e,recaptcha:t,recommendedType:n}},e.prototype.getKey=function(){var e="";switch(this._captcha.recommendedType){case a.Recaptcha:e=this._captcha.recaptcha;break;case a.Geetest:e=this._captcha.geetest}return e},e.prototype.getType=function(){return this._captcha&&this._captcha.recommendedType!==a.Failed?this._captcha.recommendedType:a.Undefined},e.prototype.init=function(t,n,i){switch(void 0===i&&(i=!0),this.getType()){case a.Recaptcha:this._captchaWidget=new o(e.instance.getKey(),n,t,i);break;case a.Geetest:this._captchaWidget=new r({selector:"#geetest-captcha",displayType:"embed",bindOn:"",lang:"en-us",key:e.instance.getKey(),captchaFinishCallback:function(){return void{}},captchaShowCallback:function(){return void{}}},n,t)}},e.prototype.reloadData=function(){this.loadData()},e.prototype.execute=function(){this._captchaWidget&&this._captchaWidget.execute()},e.prototype.reset=function(){this._captchaWidget&&this._captchaWidget.reset()},e.prototype.isInit=function(){return this._captchaWidget&&this._captchaWidget.isInit()},e}();e.exports=s},function(e,t){"use strict";var n;!function(e){e[e.Recaptcha=0]="Recaptcha",e[e.Geetest=1]="Geetest",e[e.Failed=2]="Failed",e[e.Undefined=8]="Undefined"}(n||(n={})),e.exports=n},function(e,t,n){(function(t,i){"use strict";var a=n(61),o=function(){function e(e,n,i,o){this.exceptionService=new a,this.sitekey=t.observable(e),this.size=t.observable("invisible"),this.captchaValidationResult=i,this.isRenderOnModal=o,this.size=t.observable("normal"),this.isValidated=n,this.init()}return e.prototype.init=function(){var e=i("#recaptcha");if(e.length>0&&e.remove(),this.initRecaptcha(this.isRenderOnModal),0===i("#recaptcha").length)if(this.isRenderOnModal){var t=this;i(document).off("shown.bs.modal"),i(document).on("shown.bs.modal",function(){t.initRecaptcha(t.isRenderOnModal)})}else this.initRecaptcha(this.isRenderOnModal)},e.prototype.isInit=function(){return void 0!==window.grecaptcha},e.prototype.execute=function(){return this.isInit()?void("invisible"===this.size()?window.grecaptcha.execute(e.recaptchaWidgetId):this.isValidated(window.grecaptcha.getResponse(e.recaptchaWidgetId).success)):void this.exceptionService.logError("CAPTCHA005","reCAPTCHA script download failed.")},e.prototype.reset=function(){return this.isInit()?void window.grecaptcha.reset(e.recaptchaWidgetId):void this.exceptionService.logError("CAPTCHA005","reCAPTCHA script download failed.")},e.prototype.initRecaptcha=function(e){if(!this.isInit())return void this.exceptionService.logError("CAPTCHA005","reCAPTCHA script download failed.");var t=".login"+(e?"-modal":"-panel");if(i(t).length>0){var n=i("#recaptcha-container");n.length>0&&(n.prepend("<div id='recaptcha' class='m-b-3 same-row'></div>"),this.renderRecaptcha(this.sitekey(),this.size(),this.captchaValidationResult))}},e.prototype.renderRecaptcha=function(t,n,i){var a=this;e.recaptchaWidgetId=window.grecaptcha.render("recaptcha",{sitekey:t,theme:"light",size:n,display:"none",callback:function(e){i().challenge=e,i.notifySubscribers(a.captchaValidationResult())}})},e.recaptchaWidgetId=-1,e}();e.exports=o}).call(t,n(3),n(2))},function(e,t,n){(function(t){"use strict";var i=n(61),a=function(){function e(e,n,a){this.exceptionService=new i,this.isValidated=n,this.captchaValidationResult=a,this.opts=t.extend({selector:null,displayType:"embed",bindOn:"",lang:"zh-cn",key:"",captchaFinishCallback:function(){return void{}},captchaShowCallback:function(){return void{}}},e||{}),this.captchaObj=null;var o=this,r=this.opts.selector,s={"zh-cn":"zh-cn","zh-tw":"zh-tw","en-us":"en","ja-jp":"ja","ko-kr":"ko"};if(void 0===s[this.opts.lang]?this.opts.lang="zh-cn":this.opts.lang=s[this.opts.lang],null!=r&&t(r).length>0){if(!this.isInit())return void this.exceptionService.logError("CAPTCHA006","Geetest script download failed.");var l=JSON.parse(this.opts.key),d={gt:l.gt,challenge:l.challenge,product:o.opts.displayType,offline:!0,lang:o.opts.lang,new_captcha:l.new_captcha};window.initGeetest(d,function(e){e.appendTo(o.opts.selector),o.captchaObj=e,e.onError(function(){o.opts.captchaFinishCallback()}),e.onSuccess(function(){o.isValidated(!0);var t=e.getValidate();o.captchaValidationResult().challenge=t.geetest_challenge,o.captchaValidationResult().validate=t.geetest_validate,o.captchaValidationResult().secCode=t.geetest_seccode,o.opts.captchaFinishCallback(),o.execute()}),"popup"===o.opts.displayType&&e.bindOn(o.opts.bindOn),o.opts.captchaShowCallback()})}}return e.prototype.init=function(){},e.prototype.isInit=function(){return void 0!==window.initGeetest},e.prototype.execute=function(){this.isValidated(this.captchaValidationResult&&this.captchaValidationResult().challenge.length>0),this.isValidated()&&this.captchaValidationResult.notifySubscribers(this.captchaValidationResult())},e.prototype.reset=function(){},e}();e.exports=a}).call(t,n(2))},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(99),s=n(8),l=n(210),d=n(211),c=n(9),p=n(144),u=n(88),m=n(86),h=n(212),f=function(){function e(){var e=this;this._apiEndpointService=new a,this._modalService=new r,h["default"].getInstance().onLoginInResponse=function(t){return e.handleLoginResponse(t)}}return e.isFacebookSDKReady=function(){return window.alreadyLoadFacebookSdk},e.prototype.login=function(e,t){var n={username:e,password:t};return this.loginV2(n)},e.prototype.loginV2=function(e){var n=this,i=this._apiEndpointService.create("member/login"),o=a.registerApiCall(t.post(i,e),p.LoginV2);return o.then(function(e){return n.handleLoginResponse(e)})},e.prototype.logout=function(){var r=this,s=this._apiEndpointService.create("member/logout"),d=a.registerApiCall(t.post(s),p.Logout);return d.then(function(t){switch(t.shouldLogoutOfFacebook&&e.isFacebookSDKReady()&&FB.getLoginStatus(function(e){"connected"===e.status&&FB.logout(function(){})}),t.action){case l.UpdateInformation:i.postbox.publish(o.GUEST_DETAILS_UPDATED,t.guestDetails),i.postbox.publish(o.PAYMENT_DETAILS_UPDATED,t.paymentDetails),i.postbox.publish(o.PRICE_DETAILS_UPDATED,t.priceDetails),i.postbox.publish(o.PROMO_CODE_REDEMPTION_UPDATED,t.promoCodeRedemption),i.postbox.publish(o.LOGOUT_SUCCESSFUL),i.postbox.publish(o.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,t.isDisplayNewsletterSubscription),i.postbox.publish(o.SUBSCRIBED_TO_NEWSLETTER_UPDATED,t.isSubscribedToNewsletter),i.postbox.publish(o.DISCOUNT_BANNER_TEXT,t.discountBannerText),t.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,t.priceDetails.smartChoiceYouSaveText),t.couponPanel&&i.postbox.publish(o.COUPON_PANEL_UPDATED,t.couponPanel);break;case l.DisplayAllotmentNotAvailableModal:n.e(8,function(e){var i=n(213),a=t.allotmentNotAvailableModal;r._modalService.open(new i(a))})}return t})},e.prototype.initFacebook=function(t,n){if(void 0===n&&(n=!0),!n&&e._alreadyInitedFacebook)return void(null!==t&&t(!0));var i=this;try{i._facebookInit(),e._alreadyInitedFacebook=!0,null!==t&&t(!0)}catch(a){window.fbAsyncInit=function(){i._facebookInit(),e._alreadyInitedFacebook=!0,null!==t&&t(!0)}}},e.prototype.initFacebookWhenSDKReady=function(t){var n=this,i=3,a=0,o=function(){return e.isFacebookSDKReady()?(n._facebookInit(),void(null!==t&&t(!0))):void(a<i?(a+=1,setTimeout(o,500)):null!==t&&t(!1))};o()},e.prototype.forceLogout=function(){var e=this._apiEndpointService.create("member/forceLogout");return t.post(e).then(function(){s.location.reload()})},e.prototype.forgotPassword=function(e){var n=this._apiEndpointService.create("member/forgotPassword"),i={email:e};return t.post(n,i)},e.prototype.forgotPasswordPhoneNumber=function(e,n){var i=this._apiEndpointService.create("member/forgotPasswordPhoneNumber"),a={callingCode:e,phoneNumber:n};return t.post(i,a)},e.prototype.resetPasswordWithPhoneNumber=function(e,n,i){var a=this,o=this._apiEndpointService.create("member/resetPasswordWithPhoneNumber"),r={callingCode:e,phoneNumber:n,newPassword:i};return t.post(o,r).then(function(e){return a.handleLoginResponse(e.loginResponse),e})},e.prototype.verifyOTP=function(e,n,i){var a=this._apiEndpointService.create("member/verifyOTP"),o={callingCode:e,phoneNumber:n,otp:i};return t.post(a,o)},e.prototype.updateSharingStatus=function(e){var n=this._apiEndpointService.create("member/updateSharingStatusForBooking"),i={allowSharing:e};return t.post(n,i)},e.prototype.facebookLogin=function(e){var n=this,i=this._apiEndpointService.create("member/loginwithfacebook"),o=a.registerApiCall(t.post(i,e),p.FacebookLogin);return o.then(function(e){return n.handleLoginResponse(e)})},e.prototype.facebookAutoLogin=function(e){var n=this,i=this._apiEndpointService.create("member/facebookAutoLogin"),o=a.registerApiCall(t.post(i,e),p.FacebookAutoLogin);return o.then(function(e){return n.handleLoginResponse(e)})},e.prototype.getFacebookIdentification=function(e){var n={accessToken:e.authResponse.accessToken,userID:e.authResponse.userID,expiresIn:e.authResponse.expiresIn,signedRequest:e.authResponse.signedRequest};return t.post(this._apiEndpointService.create("member/getfacebookidentification"),n).then(function(e){return e})},e.prototype.getFacebookUserInformation=function(e){var n={accessToken:e.authResponse.accessToken,userID:e.authResponse.userID,expiresIn:e.authResponse.expiresIn,signedRequest:e.authResponse.signedRequest};return t.post(this._apiEndpointService.create("member/getfacebookuserinformation"),n).then(function(e){return e})},e.prototype.handleLoginResponse=function(e){var t=this;switch(e.action){case d.UpdateInformation:i.postbox.publish(o.LOGIN_SUCCESSFUL,e.agodaMembersLogoutText),i.postbox.publish(o.GUEST_DETAILS_UPDATED,e.guestDetails),i.postbox.publish(o.GIFTCARD_REDEMPTION_UPDATED,e.giftCardRedemption),i.postbox.publish(o.PRICE_DETAILS_UPDATED,e.priceDetails),i.postbox.publish(o.PROMO_CODE_REDEMPTION_UPDATED,e.promoCodeRedemption),i.postbox.publish(o.REWARDS_REDEMPTION_UPDATED,e.rewardsRedemption),i.postbox.publish(o.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,e.isDisplayNewsletterSubscription),i.postbox.publish(o.SUBSCRIBED_TO_NEWSLETTER_UPDATED,e.isSubscribedToNewsletter),i.postbox.publish(o.MONEYBACK_DETAILS_UPDATED,e.moneyBackDetails),i.postbox.publish(o.DISCOUNT_BANNER_TEXT,e.discountBannerText),e.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,e.priceDetails.smartChoiceYouSaveText),m.isApplied(u.GCBalanceOnLeavingBFPopup)&&i.postbox.publish(o.UPDATE_CURRENT_LEAVING_GC_BALANCE_TEXT,e.currentGCBalanceOnLeavingModalText),i.postbox.publish(o.DISPLAY_NAME_UPDATE,{agodaMemberFirstName:e.agodaMemberFirstName,agodaMemberLastName:e.agodaMemberLastName}),e.couponPanel&&i.postbox.publish(o.COUPON_PANEL_UPDATED,e.couponPanel),i.postbox.publish(o.LOGIN_COMPLETE);break;case d.DisplayAllotmentNotAvailableModal:n.e(8,function(i){var a=n(213),o=e.allotmentNotAvailableModal;t._modalService.open(new a(o))})}return e},e.prototype._facebookInit=function(){FB.init({appId:c.getPageData().facebookAppId,version:"v2.8",xfbml:!0})},e._alreadyInitedFacebook=!1,e}();e.exports=f}).call(t,n(2),n(3))},function(e,t){"use strict";var n;!function(e){e[e.UpdateInformation=100]="UpdateInformation",e[e.DisplayAllotmentNotAvailableModal=301]="DisplayAllotmentNotAvailableModal"}(n||(n={})),e.exports=n},function(e,t){"use strict";var n;!function(e){e[e.UpdateInformation=100]="UpdateInformation",e[e.DisplayErrorMessage=300]="DisplayErrorMessage",e[e.DisplayAllotmentNotAvailableModal=301]="DisplayAllotmentNotAvailableModal"}(n||(n={})),e.exports=n},function(e,t){"use strict";var n={OnLogInResponse:"ko/onEvent/onLoginResponse"};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e,t=function(){return e={},window.addEventListener("message",function(t){if(t.source===window)switch(t.data.topic){case n.OnLogInResponse:e.onLoginInResponse&&e.onLoginInResponse(t.data.payload)}}),e};return{getInstance:function(){return e||(e=t()),e}}}()},,,function(e,t,n){var i=n(216),a=n(314),o=i(a);e.exports=o},function(e,t,n){function i(e){return function(t,n,i){var s=Object(t);if(!o(t)){var l=a(n,3);t=r(t),n=function(e){return l(s[e],e,s)}}var d=e(t,n,i);return d>-1?s[l?t[d]:d]:void 0}}var a=n(217),o=n(276),r=n(271);e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):a(e):l(e)}var a=n(218),o=n(297),r=n(310),s=n(278),l=n(311);e.exports=i},function(e,t,n){function i(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||a(n,e,t)}}var a=n(219),o=n(294),r=n(296);e.exports=i},function(e,t,n){function i(e,t,n,i){var l=n.length,d=l,c=!i;if(null==e)return!d;for(e=Object(e);l--;){var p=n[l];if(c&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++l<d;){p=n[l];var u=p[0],m=e[u],h=p[1];if(c&&p[2]){if(void 0===m&&!(u in e))return!1}else{var f=new a;if(i)var g=i(m,h,u,e,t,f);if(!(void 0===g?o(h,m,i,r|s,f):g))return!1}}return!0}var a=n(220),o=n(258),r=1,s=2;e.exports=i},function(e,t,n){function i(e){this.__data__=new a(e)}var a=n(221),o=n(229),r=n(230),s=n(231),l=n(232),d=n(233);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=l,i.prototype.set=d,e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var a=n(222),o=n(223),r=n(226),s=n(227),l=n(228);i.prototype.clear=a,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():r.call(t,n,1),!0}var a=n(224),o=Array.prototype,r=o.splice;e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n(225);e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n(224);e.exports=i},function(e,t,n){function i(e){return a(this.__data__,e)>-1}var a=n(224);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=a(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var a=n(224);e.exports=i},function(e,t,n){function i(){this.__data__=new a}var a=n(221);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;if(n instanceof a){var i=n.__data__;if(!o||i.length<s-1)return i.push([e,t]),this;n=this.__data__=new r(i)}return n.set(e,t),this}var a=n(221),o=n(234),r=n(243),s=200;e.exports=i},function(e,t,n){var i=n(235),a=n(29),o=i(a,"Map");e.exports=o},function(e,t,n){function i(e,t){var n=o(e,t);return a(n)?n:void 0}var a=n(236),o=n(242);e.exports=i},function(e,t,n){function i(e){if(!s(e)||r(e))return!1;var t=a(e)||o(e)?f:c;return t.test(l(e))}var a=n(237),o=n(238),r=n(239),s=n(27),l=n(241),d=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,p=Function.prototype,u=Object.prototype,m=p.toString,h=u.hasOwnProperty,f=RegExp("^"+m.call(h).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){var t=a(e)?l.call(e):"";return t==o||t==r}var a=n(27),o="[object Function]",r="[object GeneratorFunction]",s=Object.prototype,l=s.toString;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t,n){function i(e){return!!o&&o in e}var a=n(240),o=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(29),a=i["__core-js_shared__"];e.exports=a},function(e,t){function n(e){if(null!=e){try{return a.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype,a=i.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var a=n(244),o=n(252),r=n(255),s=n(256),l=n(257);i.prototype.clear=a,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(){this.__data__={hash:new a,map:new(r||o),string:new a}}var a=n(245),o=n(221),r=n(234);e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var a=n(246),o=n(248),r=n(249),s=n(250),l=n(251);i.prototype.clear=a,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(){this.__data__=a?a(null):{}}var a=n(247);e.exports=i},function(e,t,n){var i=n(235),a=i(Object,"create");e.exports=a},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(a){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var a=n(247),o="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)}var a=n(247),o=Object.prototype,r=o.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=a&&void 0===t?o:t,this}var a=n(247),o="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){return a(this,e)["delete"](e)}var a=n(253);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}var a=n(254);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return a(this,e).get(e)}var a=n(253);e.exports=i},function(e,t,n){function i(e){return a(this,e).has(e)}var a=n(253);e.exports=i},function(e,t,n){function i(e,t){return a(this,e).set(e,t),this}var a=n(253);e.exports=i},function(e,t,n){function i(e,t,n,s,l){return e===t||(null==e||null==t||!o(e)&&!r(t)?e!==e&&t!==t:a(e,t,i,n,s,l))}var a=n(259),o=n(27),r=n(33);e.exports=i},function(e,t,n){function i(e,t,n,i,g,y){var v=d(e),C=d(t),T=h,k=h;v||(T=l(e),T=T==m?f:T),C||(k=l(t),k=k==m?f:k);var P=T==f&&!c(e),x=k==f&&!c(t),D=T==k;if(D&&!P)return y||(y=new a),v||p(e)?o(e,t,n,i,g,y):r(e,t,T,n,i,g,y);if(!(g&u)){var _=P&&b.call(e,"__wrapped__"),w=x&&b.call(t,"__wrapped__");if(_||w){var M=_?e.value():e,S=w?t.value():t;return y||(y=new a),n(M,S,i,g,y)}}return!!D&&(y||(y=new a),s(e,t,n,i,g,y))}var a=n(220),o=n(260),r=n(265),s=n(270),l=n(284),d=n(278),c=n(238),p=n(290),u=2,m="[object Arguments]",h="[object Array]",f="[object Object]",g=Object.prototype,b=g.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i,l,d){var c=l&s,p=e.length,u=t.length;if(p!=u&&!(c&&u>p))return!1;var m=d.get(e);if(m&&d.get(t))return m==t;var h=-1,f=!0,g=l&r?new a:void 0;for(d.set(e,t),d.set(t,e);++h<p;){var b=e[h],y=t[h];if(i)var v=c?i(y,b,h,t,e,d):i(b,y,h,e,t,d);if(void 0!==v){if(v)continue;f=!1;break}if(g){if(!o(t,function(e,t){if(!g.has(t)&&(b===e||n(b,e,i,l,d)))return g.add(t)})){f=!1;break}}else if(b!==y&&!n(b,y,i,l,d)){f=!1;break}}return d["delete"](e),d["delete"](t),f}var a=n(261),o=n(264),r=1,s=2;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new a;++t<n;)this.add(e[t])}var a=n(243),o=n(262),r=n(263);i.prototype.add=i.prototype.push=o,i.prototype.has=r,e.exports=i},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function i(e,t,n,i,a,P,D){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!i(new o(e),new o(t)));case u:case m:case g:return r(+e,+t);case h:return e.name==t.name&&e.message==t.message;case b:case v:return e==t+"";case f:var _=l;case y:var w=P&p;if(_||(_=d),e.size!=t.size&&!w)return!1;var M=D.get(e);if(M)return M==t;P|=c,D.set(e,t);var S=s(_(e),_(t),i,a,P,D);return D["delete"](e),S;case C:if(x)return x.call(e)==x.call(t)}return!1}var a=n(266),o=n(267),r=n(225),s=n(260),l=n(268),d=n(269),c=1,p=2,u="[object Boolean]",m="[object Date]",h="[object Error]",f="[object Map]",g="[object Number]",b="[object RegExp]",y="[object Set]",v="[object String]",C="[object Symbol]",T="[object ArrayBuffer]",k="[object DataView]",P=a?a.prototype:void 0,x=P?P.valueOf:void 0;e.exports=i},function(e,t,n){var i=n(29),a=i.Symbol;e.exports=a},function(e,t,n){var i=n(29),a=i.Uint8Array;e.exports=a},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(e,t,n,i,r,l){var d=r&o,c=a(e),p=c.length,u=a(t),m=u.length;if(p!=m&&!d)return!1;for(var h=p;h--;){var f=c[h];if(!(d?f in t:s.call(t,f)))return!1}var g=l.get(e);if(g&&l.get(t))return g==t;var b=!0;l.set(e,t),l.set(t,e);for(var y=d;++h<p;){f=c[h];var v=e[f],C=t[f];if(i)var T=d?i(C,v,f,t,e,l):i(v,C,f,e,t,l);if(!(void 0===T?v===C||n(v,C,i,r,l):T)){b=!1;break}y||(y="constructor"==f)}if(b&&!y){var k=e.constructor,P=t.constructor;k!=P&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof P&&P instanceof P)&&(b=!1)}return l["delete"](e),l["delete"](t),b}var a=n(271),o=2,r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return r(e)?a(e):o(e)}var a=n(272),o=n(280),r=n(276);e.exports=i},function(e,t,n){function i(e,t){var n=r(e)||o(e)?a(e.length,String):[],i=n.length,l=!!i;for(var c in e)!t&&!d.call(e,c)||l&&("length"==c||s(c,i))||n.push(c);return n}var a=n(273),o=n(274),r=n(278),s=n(279),l=Object.prototype,d=l.hasOwnProperty;e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){return a(e)&&s.call(e,"callee")&&(!d.call(e,"callee")||l.call(e)==o)}var a=n(275),o="[object Arguments]",r=Object.prototype,s=r.hasOwnProperty,l=r.toString,d=r.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return o(e)&&a(e)}var a=n(276),o=n(33);e.exports=i},function(e,t,n){function i(e){return null!=e&&o(e.length)&&!a(e)}var a=n(237),o=n(277);e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){if(!a(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var a=n(281),o=n(282),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t,n){var i=n(283),a=i(Object.keys,Object);e.exports=a},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var i=n(285),a=n(234),o=n(286),r=n(287),s=n(288),l=n(289),d=n(241),c="[object Map]",p="[object Object]",u="[object Promise]",m="[object Set]",h="[object WeakMap]",f="[object DataView]",g=Object.prototype,b=g.toString,y=d(i),v=d(a),C=d(o),T=d(r),k=d(s),P=l;(i&&P(new i(new ArrayBuffer(1)))!=f||a&&P(new a)!=c||o&&P(o.resolve())!=u||r&&P(new r)!=m||s&&P(new s)!=h)&&(P=function(e){var t=b.call(e),n=t==p?e.constructor:void 0,i=n?d(n):void 0;if(i)switch(i){case y:return f;case v:return c;case C:return u;case T:return m;case k:return h}return t}),e.exports=P},function(e,t,n){var i=n(235),a=n(29),o=i(a,"DataView");e.exports=o},function(e,t,n){var i=n(235),a=n(29),o=i(a,"Promise");e.exports=o},function(e,t,n){var i=n(235),a=n(29),o=i(a,"Set");e.exports=o},function(e,t,n){var i=n(235),a=n(29),o=i(a,"WeakMap");e.exports=o},function(e,t){function n(e){return a.call(e)}var i=Object.prototype,a=i.toString;e.exports=n},function(e,t,n){var i=n(291),a=n(292),o=n(293),r=o&&o.isTypedArray,s=r?a(r):i;e.exports=s},function(e,t,n){function i(e){return o(e)&&a(e.length)&&!!A[E.call(e)]}var a=n(277),o=n(33),r="[object Arguments]",s="[object Array]",l="[object Boolean]",d="[object Date]",c="[object Error]",p="[object Function]",u="[object Map]",m="[object Number]",h="[object Object]",f="[object RegExp]",g="[object Set]",b="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",C="[object DataView]",T="[object Float32Array]",k="[object Float64Array]",P="[object Int8Array]",x="[object Int16Array]",D="[object Int32Array]",_="[object Uint8Array]",w="[object Uint8ClampedArray]",M="[object Uint16Array]",S="[object Uint32Array]",A={};A[T]=A[k]=A[P]=A[x]=A[D]=A[_]=A[w]=A[M]=A[S]=!0,A[r]=A[s]=A[v]=A[l]=A[C]=A[d]=A[c]=A[p]=A[u]=A[m]=A[h]=A[f]=A[g]=A[b]=A[y]=!1;var O=Object.prototype,E=O.toString;e.exports=i},function(e,t){function n(e){return function(t){
return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(30),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,r=o&&o.exports===a,s=r&&i.process,l=function(){try{return s&&s.binding("util")}catch(e){}}();e.exports=l}).call(t,n(4)(e))},function(e,t,n){function i(e){for(var t=o(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,a(r)]}return t}var a=n(295),o=n(271);e.exports=i},function(e,t,n){function i(e){return e===e&&!a(e)}var a=n(27);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t,n){function i(e,t){return s(e)&&l(t)?d(c(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?r(n,e):a(t,i,void 0,p|u)}}var a=n(258),o=n(298),r=n(307),s=n(305),l=n(295),d=n(296),c=n(306),p=1,u=2;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:a(e,t);return void 0===i?n:i}var a=n(299);e.exports=i},function(e,t,n){function i(e,t){t=o(t,e)?[t]:a(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[r(t[n++])];return n&&n==i?e:void 0}var a=n(300),o=n(305),r=n(306);e.exports=i},function(e,t,n){function i(e){return a(e)?e:o(e)}var a=n(278),o=n(301);e.exports=i},function(e,t,n){var i=n(302),a=n(303),o=/^\./,r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,l=i(function(e){e=a(e);var t=[];return o.test(e)&&t.push(""),e.replace(r,function(e,n,i,a){t.push(i?a.replace(s,"$1"):n||e)}),t});e.exports=l},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var r=e.apply(this,i);return n.cache=o.set(a,r),r};return n.cache=new(i.Cache||a),n}var a=n(243),o="Expected a function";i.Cache=a,e.exports=i},function(e,t,n){function i(e){return null==e?"":a(e)}var a=n(304);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e)return e;if(o(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}var a=n(266),o=n(32),r=1/0,s=a?a.prototype:void 0,l=s?s.toString:void 0;e.exports=i},function(e,t,n){function i(e,t){if(a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!r.test(e)||null!=t&&e in Object(t)}var a=n(278),o=n(32),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=i},function(e,t,n){function i(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var a=n(32),o=1/0;e.exports=i},function(e,t,n){function i(e,t){return null!=e&&o(e,t,a)}var a=n(308),o=n(309);e.exports=i},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n){t=l(t,e)?[t]:a(t);for(var i,p=-1,u=t.length;++p<u;){var m=c(t[p]);if(!(i=null!=e&&n(e,m)))break;e=e[m]}if(i)return i;var u=e?e.length:0;return!!u&&d(u)&&s(m,u)&&(r(e)||o(e))}var a=n(300),o=n(274),r=n(278),s=n(279),l=n(305),d=n(277),c=n(306);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)?a(s(e)):o(e)}var a=n(312),o=n(313),r=n(305),s=n(306);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return function(t){return a(t,e)}}var a=n(299);e.exports=i},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var l=null==n?0:r(n);return l<0&&(l=s(i+l,0)),a(e,o(t,3),l)}var a=n(315),o=n(217),r=n(316),s=Math.max;e.exports=i},function(e,t){function n(e,t,n,i){for(var a=e.length,o=n+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){function i(e){var t=a(e),n=t%1;return t===t?n?t-n:t:0}var a=n(317);e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=a(e),e===o||e===-o){var t=e<0?-1:1;return t*r}return e===e?e:0}var a=n(31),o=1/0,r=1.7976931348623157e308;e.exports=i},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t,n){function i(e){return a(e).toLowerCase()}var a=n(303);e.exports=i},function(e,t){e.exports='<div class=login-panel data-bind="scrollToElement: scrollToLoginPanel"><!-- ko if: isShowCustomTitle --> <h3 class=login-modal-custom-title data-bind="text: customTitleText"></h3><!-- /ko --> <div data-bind="if: forgotPhonePasswordState() == 0"><!-- ko if: !isShowLoginFromCCOF--><!-- ko component: {\r\n            name: "fast-facebook-login",\r\n            params: {\r\n                loginPanel: loginPanel,\r\n                isMobile: params.isMobile,\r\n                termsAndPrivacyData: termsAndPrivacyData,\r\n                isLoginPanelBlocked: isLoginPanelBlocked,\r\n                isLoginModalExperimentIsApplied: true,\r\n                showHeader: false,\r\n                showDescription: !isShowCustomTitle(),\r\n                isLoggedIn: params.isLoggedIn,\r\n                isLoginModalOpenned : params.isLoginModalOpenned,\r\n                facebookDetails: params.facebookDetails,\r\n                isLandingPage: params.isLandingPage\r\n            }} --><!-- /ko --><!-- /ko --> </div> <div data-bind="visible: !isForgotPasswordPanelDisplayed() && !isForgotPasswordEmailSentVisible()"><!-- ko if: !isShowLoginFromCCOF --> <h3 data-bind="text: loginPanel.fasterCheckoutSignInText"></h3><!-- /ko --><!-- ko ifnot: isDisplayCaptcha --><!-- ko component: {\r\n                name: "mobile-login",\r\n                params: {\r\n                    username: loginPanel.username,\r\n                    password: loginPanel.password,\r\n                    yourEmailAddressText: loginPanel.yourEmailAddressText,\r\n                    passwordText: loginPanel.passwordText,\r\n                    login: login,\r\n                    clearErrorMessage: clearErrorMessage,\r\n                    loginTab: loginTab,\r\n                    countryCode: loginPanel.countryCode,\r\n                    mobilePhone: loginPanel.mobilePhone,\r\n                    mobilePassword: loginPanel.mobilePassword,\r\n                    emailText: loginPanel.emailText,\r\n                    mobileText: loginPanel.mobileText,\r\n                    mobilePhoneText: loginPanel.mobilePhoneText,\r\n                    mobilePhoneWithCountryCode: loginPanel.mobilePhoneWithCountryCode,\r\n                    passwordText: loginPanel.passwordText,\r\n                    errorMessage: loginPanel.errorMessage,\r\n                    loginErrorStatus: loginErrorStatus,\r\n                    youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText: loginPanel.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText,\r\n                    clickHereToGetNewPasswordText: loginPanel.clickHereToGetNewPasswordText,\r\n                    openForgotPasswordPanel: openForgotPasswordPanel,\r\n                    phoneErrorMessage: loginPanel.phoneErrorMessage,\r\n                    phoneNumberLoginErrorStatus: phoneNumberLoginErrorStatus,\r\n                    isShowLoginFromCCOF: isShowLoginFromCCOF,\r\n                }} --><!-- /ko --> <div class="row forgot-link-panel"> <div class=col-sm-12 style=text-align:right> <a class=forgot-password-link href=javascript:void(0) data-element-name=forgot-password-link data-bind="text: loginPanel.forgotPasswordText, click: openForgotPasswordPanel"></a> </div> </div> <div class="row login-btn-panel"> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button sign-in-btn" data-style=expand-right data-bind="ladda: isProcessing, click: login" data-element-name=submit-signin-button> <span class=ladda-label data-bind="text: loginPanel.signInText"></span> </button> </div> </div><!-- /ko --><!-- ko if: isDisplayCaptcha --> <div class=row><!-- ko component: {\r\n                name: "captcha",\r\n                params: {\r\n                    isCaptchaValidated: loginPanel.isCaptchaValidated,\r\n                    captchaValidationResult: loginPanel.captchaValidationResult,\r\n                    errorMessage:  pleaseCompleteTheCaptchaAbove,\r\n                    isRenderOnModal: isLoginModalExperimentIsApplied\r\n                }\r\n            } --><!-- /ko --> </div><!-- /ko --> <div class=row><!-- ko component: {\r\n                name: "terms-and-privacy",\r\n                params: {\r\n                    termsAndPrivacyData: termsAndPrivacyData\r\n                }\r\n            } --><!-- /ko --> </div> </div><!-- ko if: loginTab() === 0 --><!-- forgot password starts --> <div class=forgot-password-panel data-bind="visible: isForgotPasswordPanelDisplayed"> <h3 data-bind="text: loginPanel.retrievePasswordText"></h3> <p data-bind="text: loginPanel.enterYourEmailAndSendLinkResetPasswordText"></p> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: loginPanel.username"><!-- ko component: {\r\n                    name: "form-input",\r\n                    params : {\r\n                        value: loginPanel.username,\r\n                        labelText: loginPanel.yourEmailAddressText(),\r\n                        enter: forgotPassword,\r\n                        inputAttributes: {\r\n                            name: \'forgotPasswordEmail\',\r\n                            id: \'forgotPasswordEmail\',\r\n                            type: \'email\',\r\n                            autocomplete: \'off\'\r\n                        }\r\n                    }\r\n                } --><!-- /ko --> </div> </div> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button login-btn--forgetPassword" id=btnSubmitForgotPassword data-style=expand-right data-element-name=forgot-password-submit-button data-bind="click: forgotPassword, ladda: isProcessing"> <span class=ladda-label data-bind="text: loginPanel.resetPasswordSubmitText"></span> </button> </div> </div> </div><!-- forgot password ends --><!-- forgot password email sent starts --> <div class=forgot-password-sent-panel data-bind="visible: isForgotPasswordEmailSentVisible"> <h3 data-bind="text: loginPanel.forgotPasswordEmailSentTitleText"></h3> <p data-bind="text: loginPanel.theLinkToResetYourPasswordHaveBeenSentText"></p> <button type=button class="btn btn-primary btn-block login-btn ladda-button" data-style=expand-right data-bind="ladda: isProcessing, click: goBackLoginStep1"> <span class=ladda-label data-bind="text: loginPanel.backText"></span> </button> </div><!-- forgot password email sent ends --><!-- /ko --><!-- ko ifnot: loginTab() === 0 --><!-- ko if: isForgotPasswordPanelDisplayed() --> <div class=forgot-password-panel-mobile><!-- ko component: {\r\n            name: "forgot-password-mobile",\r\n            params: {\r\n                cms: forgotPasswordCms,\r\n                countryCode: loginPanel.countryCode,\r\n                mobilePhone: loginPanel.mobilePhone,\r\n                mobilePhoneWithCountryCode: loginPanel.mobilePhoneWithCountryCode,\r\n                mobileNumberIsRequiredText: loginPanel.mobileNumberIsRequiredText,\r\n                pleaseEnterAValidMobileNumberText: loginPanel.pleaseEnterAValidMobileNumberText,\r\n                mobilePhoneRegex: loginPanel.mobilePhoneRegex,\r\n                forgotPasswordState: forgotPhonePasswordState,\r\n                isForgotPasswordPanelDisplayed: isForgotPasswordPanelDisplayed,\r\n                mobileText: loginPanel.mobileText,\r\n                mobilePhone: loginPanel.mobilePhone,\r\n                mobilePhoneText: loginPanel.mobilePhoneText,\r\n                mobilePassword: loginPanel.mobilePassword,\r\n                passwordText: loginPanel.passwordText,\r\n                errorMessage: loginPanel.errorMessage,\r\n                loginErrorStatus: loginErrorStatus,\r\n                youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText: loginPanel.youCantUseThisFeatureBecauseYouDontHaveAnAgodaAccountText,\r\n                clickHereToGetNewPasswordText: loginPanel.clickHereToGetNewPasswordText,\r\n                openForgotPasswordPanel: openForgotPasswordPanel,\r\n                phoneErrorMessage: loginPanel.phoneErrorMessage,\r\n                phoneNumberLoginErrorStatus: phoneNumberLoginErrorStatus,\r\n                countryCode: loginPanel.countryCode,\r\n                resetPasswordSubmitText: loginPanel.resetPasswordSubmitText,\r\n                isProcessing: isProcessing,\r\n                isLoginPanelBlocked: isLoginPanelBlocked\r\n            }\r\n        } --><!-- /ko --> </div><!-- /ko --><!-- /ko --> </div> <!--js-->'},function(e,t){e.exports='<!-- ko if: params.forgotPasswordState() === 0 --> <div class=enter-phone-number-panel> <p data-bind="text: params.cms.enterYourMobileNumber"></p><!-- ko if: sendOTPResult() === -1 --> <div class="row respond-warning"> <p class="error-message m-b-05" data-bind="html: params.cms.sorryWeArentAbleToIdentify"></p> </div><!-- /ko --><!-- ko if: sendOTPResult() === 2 --> <div class="row respond-warning"> <p class="error-message m-b-05" data-bind="html: params.cms.reachMaximumSendOTPHtml"></p> </div><!-- /ko --> <div class=row> <div class="col-sm-12 form-group phonenumber-form" data-bind="validationElement: params.mobilePhoneWithCountryCode, css: { has-feedback: !isAddMoreLifeExperiment, no-padding: isAddMoreLifeExperiment }"> <label for=ForgetPassword__phoneNumber class="control-label mobile-label" data-bind="text: params.cms.mobilePhoneText"></label> <div class="phonenumber-group clearfix"><!-- ko component: {\r\n\t\t\t\t\tname: "form-input",\r\n\t\t\t\t\tparams : {\r\n\t\t\t\t\t\tvalue: params.countryCode,\r\n\t\t\t\t\t\tcountryCodeFormat: params.countryCode,\r\n\t\t\t\t\t\tenter: onSubmitPhoneNumber,\r\n\t\t\t\t\t\tcss: \'countrycode\',\r\n\t\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\t\tname: \'ForgetPassword__countryCode\',\r\n\t\t\t\t\t\t\tid: \'ForgetPassword__countryCode\',\r\n\t\t\t\t\t\t\ttype: \'tel\',\r\n\t\t\t\t\t\t\t\'data-element-name\': \'signin-mobile-countrycode-input\',\r\n\t\t\t\t\t\t\tmaxlength: \'5\'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} --><!-- /ko --><!-- ko component: {\r\n\t\t\t\t\tname: "form-input",\r\n\t\t\t\t\tparams : {\r\n\t\t\t\t\t\tvalue: params.mobilePhone,\r\n\t\t\t\t\t\tcountryCodeFormat: params.mobilePhone,\r\n\t\t\t\t\t\tenter: onSubmitPhoneNumber,\r\n\t\t\t\t\t\tcss: \'phonenumber\',\r\n\t\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\t\tname: \'ForgetPassword__phoneNumber\',\r\n\t\t\t\t\t\t\tid: \'ForgetPassword__phoneNumber\',\r\n\t\t\t\t\t\t\ttype: \'tel\',\r\n\t\t\t\t\t\t\t\'data-element-name\': \'signin-mobile-phonenumber-input\',\r\n\t\t\t\t\t\t\tmaxlength: \'16\'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} --><!-- /ko --> </div> <div class="help-block phonenumber-error" data-bind="validationMessage: params.mobilePhoneWithCountryCode"></div> <i class="ficon ficon-20 ficon-room-promotion-for-mobiledeal form-control-feedback" data-bind="css: { form-control-feedback: !isAddMoreLifeExperiment, inline-icon: isAddMoreLifeExperiment }"></i> </div> </div> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button" style=height:42px;margin-top:20px id=sumitPhoneNumber__button data-style=expand-right data-bind="click: onSubmitPhoneNumber"> <span class=ladda-label data-bind="text: params.cms.resetPasswordSubmitText"></span> </button> </div> </div> </div><!-- /ko --><!-- ko if: params.forgotPasswordState() === 1 --> <div class=enter-otp-panel> <h3 data-bind="text: params.cms.resetPhonePasswordVerification">Sign in</h3> <p data-bind="html: weHaveSentAVerificationCodeHtml"></p> <div data-bind="validationElement: otp"> <div class=otp-form> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-0 type=text maxlength=1 index=0 name=otp-block data-bind="value: otpItems[0], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-1 /> </div> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-1 type=text maxlength=1 name=otp-block index=1 data-bind="value: otpItems[1], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-2 /> </div> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-2 type=text maxlength=1 name=otp-block index=2 data-bind="value: otpItems[2], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-3 /> </div> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-3 type=text maxlength=1 name=otp-block index=3 data-bind="value: otpItems[3], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-4 /> </div> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-4 type=text maxlength=1 name=otp-block index=4 data-bind="value: otpItems[4], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-5 /> </div> <div class=otp-number> <input class="form-control sensitive otp-number__box" id=otp-block-5 type=text maxlength=1 name=otp-block index=5 data-bind="value: otpItems[5], event: { keydown: onKeyDownOTP, keyup: onKeyUpOTP }" data-element-name=otp-number-input-6 /> </div> </div> <div class="help-block phonenumber-error" data-bind="validationMessage: otp"></div><!-- ko if: verifyOTPResult() === 2 --> <div class="help-block phonenumber-error" data-bind="html: params.cms.otpExpired"></div><!-- /ko --><!-- ko if: verifyOTPResult() === 3 --> <div class="help-block phonenumber-error" data-bind="html: params.cms.reachMaximumSendOTPHtml"></div><!-- /ko --> </div> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button" id=verifyOTP__button data-style=expand-right data-bind="click: onSubmitOTP, enable: isEnableVerifyOtp"> <span class=ladda-label data-bind="text: params.cms.resetPhonePasswordVerify"></span> </button> </div> </div> <div class=enter-otp-panel-footer> <div class=row> <div class=col-sm-12> <p class=footer-p data-bind="text: params.cms.haventReceivedVerification"></p> </div> </div> <div class=row> <div class=col-sm-12> <a class=enter-otp-panel-resend-otp href=javascript:void(0) data-bind="text: params.cms.resendVerificationCode, click: resendNewOTP"></a> </div> </div> <div class=row> <div class=col-sm-12> <a class=enter-otp-panel-new-mobile href=javascript:void(0) data-bind="text: params.cms.useAnotherMobileNumber, click: selectNewMobileNumber"></a> </div> </div> </div> </div><!-- /ko --><!-- ko if: params.forgotPasswordState() === 2 --> <div class=enter-otp-panel-footer> <h3 data-bind="text: params.cms.enterANewPasswordFor"></h3> <p data-bind="html: mobilePhone"></p><!-- ko if: changePasswordResult() === 2  --> <div class="row respond-warning"> <p class="error-message m-b-05" data-bind="html: params.cms.thePasswordsYouProvidedDoNotMatch"></p> </div><!-- /ko --> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: password"><!-- ko component: {\r\n\t\t\t\tname: "form-input",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: params.cms.resetPhonePasswordNewPassword\r\n\t\t\t\t\tvalue: password,\r\n\t\t\t\t\tenter: onSubmitNewPassword,\r\n\t\t\t\t\tlabelCss: \'password\',\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: \'mobileNewPassword\',\r\n\t\t\t\t\t\tid: \'mobileNewPassword\',\r\n\t\t\t\t\t\ttype: \'password\'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div> </div> <div class=row> <div class="col-sm-12 form-group has-feedback" data-bind="validationElement: confirmPassword"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=mobileConfirmPassword class="control-label password" data-bind="text: params.cms.resetPhonePasswordConfirmNewPassword"></label> <input id=mobileConfirmPassword type=password class="form-control sensitive" name=mobileConfirmPassword data-bind="value: confirmPassword, enter: onSubmitNewPassword"> <i class="ficon ficon-20 form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <input id=mobileConfirmPassword type=password class="form-control sensitive" name=mobileConfirmPassword data-bind="value: confirmPassword, enter: onSubmitNewPassword"> <label for=mobileConfirmPassword class="floating-label password" data-bind="text: params.cms.resetPhonePasswordConfirmNewPassword"></label><!-- /ko --> </div> </div> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button" id=resetPassword__button data-style=expand-right data-bind="click: onSubmitNewPassword"> <span class=ladda-label data-bind="text: params.cms.resetPhonePasswordChangePassword"></span> </button> </div> </div> </div><!-- /ko --><!-- ko if: params.forgotPasswordState() === 3 --> <div class=reset-success-panel> <h3 data-bind="text: params.cms.passwordChanged"></h3> <p data-bind="text: params.cms.passwordChangedSuccessfully"></p> <div class=row> <div class="col-sm-12 text-right flip"> <button type=button class="btn btn-primary btn-block login-btn ladda-button" id=done__button data-style=expand-right data-bind="click: onDone"> <span class=ladda-label data-bind="text: params.cms.done"></span> </button> </div> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t,i){"use strict";var a,o=n(9),r=n(10),s=n(209),l=n(91),d="10";!function(e){e[e.fail=-1]="fail",e[e["default"]=0]="default",e[e.success=1]="success",e[e.sendCountExceed=2]="sendCountExceed"}(a||(a={}));var c;!function(e){e[e.fail=-1]="fail",e[e["default"]=0]="default",e[e.success=1]="success",e[e.expired=2]="expired",e[e.maxResent=3]="maxResent"}(c||(c={}));var p;!function(e){e[e.fail=-1]="fail",e[e["default"]=0]="default",e[e.success=1]="success",e[e.passwordMismatch=2]="passwordMismatch",e[e.passwordCannotUse=3]="passwordCannotUse"}(p||(p={}));var u=function(){function e(e){var n=this;this.generateWeHaveSentAVerificationHtml=function(){n.weHaveSentAVerificationCodeHtml=r.format(n.params.cms.weHaveSentAVerificationCode(),'<span class="enter-otp-panel__PhoneNumber--blue">'+n.getPhoneNumber(!1)+"</span>",d)},this.setSubscribe=function(){n.subscriptionList.push(n.params.mobilePhoneWithCountryCode.subscribe(function(){this.sendOTPResult(a["default"])},n,"change")),n.subscriptionList.push(n.params.forgotPasswordState.subscribe(function(e){switch(e){case 0:return void this.focusElement("#ForgetPassword__phoneNumber",3);case 1:return void this.focusElement("#otp-block-0",3);case 2:return void this.focusElement("#mobileNewPassword",3);case 3:return void this.focusElement("#done__button",3)}},n,"change")),n.subscriptionList.push(n.password.subscribe(function(e){""===e&&(this.password.isModified(!1),""===this.confirmPassword()&&this.changePasswordResult(p["default"]))},n,"change")),n.subscriptionList.push(n.confirmPassword.subscribe(function(e){""===e&&(this.confirmPassword.isModified(!1),""===this.password()&&this.changePasswordResult(p["default"]))},n,"change")),n.subscriptionList.push(n.otp.subscribe(function(e){6!==e.length&&this.otp.isModified(!1),this.updateVerifyOTPStatus()},n,"change"))},this.numRegEx=/^[0-9]$/,this.onKeyUpOTP=function(e,t){"Enter"===t.key&&n.onSubmitOTP()},this.onKeyDownOTP=function(e,t){var i=parseInt(t.target.getAttribute("index"),10),a=0;switch(t.key){case"ArrowLeft":a=i-1,n.focusElement("#otp-block-"+(a<0?0:a));break;case"ArrowRight":a=i+1,n.focusElement("#otp-block-"+(a>6?5:a));break;case"Backspace":""===t.target.value?(a=i-1,n.focusElement("#otp-block-"+(a<0?0:a))):t.target.value=t.target.value.slice(0,-1),n.updateOTP(t.target.value,i);break;default:n.numRegEx.test(t.key)&&(t.target.value!==t.key&&(t.target.value=t.key),a=i+1,n.focusElement("#otp-block-"+(a>6?5:a)),n.updateOTP(t.target.value,i))}},this.updateOTP=function(e,t){n.otpItems[t](e)},this.updateVerifyOTPStatus=function(){0===n.otp().length?(n.otp.isModified&&n.otp.isModified(!1),n.isEnableVerifyOtp(!1)):n.isEnableVerifyOtp(!0),n.verifyOTPResult(c["default"])},this.focusElement=function(e,i){t(e).length?t(e).focus():i&&i>=0&&window.setTimeout(function(){return n.focusElement(e,--i)},150)},this.extendValidation=function(){n.password.extend({required:{message:n.params.cms.passwordIsRequired(),params:!0},minLength:{params:8,message:n.params.cms.yourPasswordMustBeAtLeast8Characters()},validation:[{validator:function(){return n.changePasswordResult()===p["default"]||n.changePasswordResult()===p.success},message:function(){return""}}]}),n.confirmPassword.extend({required:{message:n.params.cms.passwordIsRequired(),params:!0},minLength:{params:8,message:n.params.cms.yourPasswordMustBeAtLeast8Characters()},validation:[{validator:function(){return n.changePasswordResult()===p["default"]||n.changePasswordResult()===p.success},message:function(){return""}}]}),n.params.mobilePhoneWithCountryCode.extend({validation:[{validator:function(){return n.sendOTPResult()===a.success||n.sendOTPResult()===a["default"]},message:function(){return""}}]}),n.otp.extend({validation:[{validator:function(e){return n.verifyOTPResult()===c["default"]||n.verifyOTPResult()===c.success},message:function(){switch(n.verifyOTPResult()){case c.fail:return n.params.cms.incorrectVerificationCode();case c.expired:return n.params.cms.otpExpired();case c.maxResent:return n.reachMaximumSendOTPHtml}}}]})},this.resetOTPValues=function(){for(var e=0;e<n.otpItems.length;e++)n.otpItems[e]("")},this.resetPhoneNumber=function(){n.params.mobilePhone(""),n.params.mobilePhoneWithCountryCode.isModified(!1)},this.goToVerifyOTPPanel=function(){n.generateWeHaveSentAVerificationHtml(),n.params.forgotPasswordState(1)},this.goToChangePasswordPanel=function(){n.params.forgotPasswordState(2)},this.onSubmitPhoneNumber=function(){var e=i.validation.group(n.params.mobilePhoneWithCountryCode,{deep:!0});return e().length?void e.showAllMessages(!0):void n.onCallForgotPassword().then(function(e){if(e.canResetPassword)if(1===e.sendOTPResultStatus)n.sendOTPResult(a.success),n.otp.isModified(!1),n.goToVerifyOTPPanel();else if(3===e.sendOTPResultStatus)return void n.sendOTPResult(a.sendCountExceed);n.sendOTPResult(a.fail)})},this.getPhoneNumber=function(e){return"<div class='phonenumber--text'>"+n.params.countryCode()+"</div>"+(e?" - ":"-")+"<span class='phonenumber--text'>"+n.params.mobilePhone()+"</span>"},this.onSubmitOTP=function(){n.mobilePhone(n.getPhoneNumber(!0));var e=new s;e.verifyOTP(n.params.countryCode(),n.params.mobilePhone(),n.otp()).then(function(e){if(1===e.verifyOTPResultStatus)n.verifyOTPResult(c.success),n.goToChangePasswordPanel();else{if(3===e.verifyOTPResultStatus)return void n.verifyOTPResult(c.fail);if(4===e.verifyOTPResultStatus)return void n.verifyOTPResult(c.expired)}n.verifyOTPResult(c.fail)})},this.onSubmitNewPassword=function(){n.changePasswordResult(p["default"]);var e=i.validation.group([n.password,n.confirmPassword],{deep:!0});if(e().length)return void e.showAllMessages(!0);if(n.password()!==n.confirmPassword())return void n.changePasswordResult(p.passwordMismatch);n.params.isProcessing(!0),n.params.isLoginPanelBlocked(!0);var t=new s;t.resetPasswordWithPhoneNumber(n.params.countryCode(),n.params.mobilePhone(),n.password()).then(function(e){if(!e.isSuccess)return void n.changePasswordResult(p.fail);if(1===e.resetPasswordStatus)n.params.forgotPasswordState(3);else if(3===e.resetPasswordStatus)return void n.changePasswordResult(p.passwordCannotUse)}).always(function(){n.params.isProcessing(!1),n.params.isLoginPanelBlocked(!1)})},this.resendNewOTP=function(){n.onCallForgotPassword().then(function(e){if(e.canResetPassword)if(1===e.sendOTPResultStatus)n.verifyOTPResult(c["default"]),n.otp.isModified(!1),n.resetOTPValues();else if(3===e.sendOTPResultStatus)return void n.verifyOTPResult(c.maxResent)}),n.focusElement("#otp-block-0",3)},this.onCallForgotPassword=function(){var e=new s;return e.forgotPasswordPhoneNumber(n.params.countryCode(),n.params.mobilePhone())},this.onDone=function(){t(".modal").modal("hide")},this.selectNewMobileNumber=function(){n.resetOTPValues(),n.resetPhoneNumber(),n.params.forgotPasswordState(0)},this.params=e,this.numberOfOTP=i.observable(6),this.password=i.observable(""),this.confirmPassword=i.observable(""),this.sendOTPResult=i.observable(a["default"]),this.changePasswordResult=i.observable(p["default"]),this.verifyOTPResult=i.observable(c["default"]),this.isAddMoreLifeExperiment=o.getFeature(l.AddMoreLifeToBookingForm),this.reachMaximumSendOTPHtml=r.format(this.params.cms.reachMaximumSendOTP(),"30"),this.subscriptionList=[],"function"==typeof this.params.mobilePhoneWithCountryCode.isModified&&this.params.mobilePhoneWithCountryCode.isModified(""!==this.params.countryCode()&&""!==this.params.mobilePhone()),this.mobilePhone=i.observable(""),this.isEnableVerifyOtp=i.observable(!1),this.otpItems=[i.observable(""),i.observable(""),i.observable(""),i.observable(""),i.observable(""),i.observable("")],this.otp=i.computed(function(){return n.otpItems[0]()+n.otpItems[1]()+n.otpItems[2]()+n.otpItems[3]()+n.otpItems[4]()+n.otpItems[5]()}),this.updateVerifyOTPStatus(),this.extendValidation(),this.setSubscribe()}return e.prototype.dispose=function(){for(var e=0;e<this.subscriptionList.length;e++)this.subscriptionList[e].dispose();this.sendOTPResult(a["default"])},e}();e.exports=u}).call(t,n(2),n(3))},function(e,t){e.exports='<div class="row password-verification"> <div class="col-sm-6 form-group has-feedback" data-bind="validationElement: passwordVerification.password"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=passwordVerification class=control-label data-bind="text: passwordVerification.passwordText"></label> <input type=password class=form-control name=passwordVerification id=passwordVerification data-bind="value: passwordVerification.password" required/> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <input type=password class=form-control name=passwordVerification id=passwordVerification data-bind="value: passwordVerification.password" required/> <label for=passwordVerification class=floating-label data-bind="text: passwordVerification.passwordText"></label><!-- /ko --> </div> <div class=clearfix></div> <div class=col-sm-12> <p class="forgot-password text-left"> <a data-element-name=forgot-password-link href=javascript:void(0) class=forgot-password-link data-bind="text: passwordVerification.forgotPasswordText, click: forgotPassword"></a> <br/> <a data-element-name=logout-on-book-for-someone-else-link href=javascript:void(0) class=not-x-link data-bind="text: passwordVerification.notXText, click: logout"></a> </p> </div> </div>'},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.passwordVerification=e,this._isProcessing=!1,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm)}return e.prototype.forgotPassword=function(){var e=this;this._isProcessing||(this._isProcessing=!0,!function(t){var i=n(209),a=new i;a.forgotPassword(void 0).always(function(){e._isProcessing=!1})}(n))},e.prototype.logout=function(){var e=this;this._isProcessing||(this._isProcessing=!0,!function(t){var i=n(209),a=new i;a.forceLogout().always(function(){e._isProcessing=!1})}(n))},e}();e.exports=o},function(e,t){e.exports='<div class=rewards-redemption><!-- ko if: !rewardsRedemption.isNotValidForRedemption() && !rewardsRedemption.errorMessage() --><!-- ko ifnot: isAddMoreLifeExperiment --> <div class=form-group> <p class=you-currently-x-rewards-points data-bind="text: rewardsRedemption.youCurrentlyXRewardsPointsText"></p> <p class=choose-points-to-redeem data-bind="text: rewardsRedemption.choosePointsToRedeemText"></p><!-- ko component: {\r\n        name: "form-dropdown",\r\n        params : {\r\n            value: rewardsRedemption.redeemedRewardsPoint,\r\n            options: rewardsRedemption.rewardsPointsList,\r\n            optionsText: function(item) { return item.formattedValue; },\r\n            optionsValue: function(item) { return item.rewardsPoint(); },\r\n            emptyOptionLabel: rewardsRedemption.pleaseSelectOneText,\r\n            inputAttributes: {\r\n                name: \'rewardsPoints\',\r\n                \'data-element-name\': \'rewards-redemption\',\r\n                class: \'rewards-points-lists form-control sensitive\'\r\n            },\r\n        }\r\n        } --><!-- /ko --><!-- ko if: errorMessage --> <span class="help-block error-message" data-bind="text: errorMessage"></span><!-- /ko --> </div><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <p class=you-currently-x-rewards-points data-bind="text: rewardsRedemption.youCurrentlyXRewardsPointsText"></p> <p class=choose-points-to-redeem data-bind="text: rewardsRedemption.choosePointsToRedeemText"></p> <div class=form-group data-bind="css: {\r\n        has-success: ko.unwrap(redeemSelectionState),\r\n        has-error: ko.unwrap(redeemSelectionState) === false }"><!-- ko component: {\r\n        name: "form-dropdown",\r\n        params : {\r\n            value: rewardsRedemption.redeemedRewardsPoint,\r\n            options: rewardsRedemption.rewardsPointsList,\r\n            optionsText: function(item) { return item.formattedValue; },\r\n            optionsValue: function(item) { return item.rewardsPoint(); },\r\n            emptyOptionLabel: rewardsRedemption.pleaseSelectOneText,\r\n            css: { has-value: ko.unwrap(rewardsRedemption.redeemedRewardsPoint) != null } \r\n            inputAttributes: {\r\n                name: \'rewardsPoints\',\r\n                \'data-element-name\': \'rewards-redemption\',\r\n                class: \'rewards-points-lists form-control sensitive\'\r\n            },\r\n        }\r\n        } --><!-- /ko --><!-- ko if: errorMessage --> <span class="help-block error-message" data-bind="text: errorMessage"></span><!-- /ko --> </div><!-- /ko --> <button type=button class="btn btn-warning btn-block update-rewards-points-btn ladda-button" data-bind="ladda: isRedeemingRewards, click: redeemRewardsPoints" data-element-name=reward-redemption-button data-style=expand-right> <span class=ladda-label data-bind="text: rewardsRedemption.updateAmountText"></span> </button><!-- /ko --><!-- ko if: rewardsRedemption.errorMessage --> <p class="text-danger error-message" data-bind="html: rewardsRedemption.errorMessage"></p><!-- /ko --><!-- ko if: rewardsRedemption.isNotValidForRedemption --> <p class="text-danger error-message" data-bind="text: rewardsRedemption.pleaseNoteYouCannotRedeemText"></p><!-- /ko --> </div>';
},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(9),o=n(91),r=function(){function e(e){var n=this;this.rewardsRedemption=e.rewardsRedemption,this.isAddMoreLifeExperiment=a.getFeature(o.AddMoreLifeToBookingForm),this.isRedeemingRewards=t.observable(!1),this.isRedeemSuccess=t.observable(null),this.errorMessage=t.observable(""),this.isAddMoreLifeExperiment&&(this.redeemSelectionState=t.computed(function(){return null==t.unwrap(n.rewardsRedemption.redeemedRewardsPoint)?null:t.unwrap(n.isRedeemSuccess)})),this._subscribeEvents()}return e.prototype.redeemRewardsPoints=function(){var e=this;this.isRedeemingRewards()||(this.isRedeemingRewards(!0),this.isAddMoreLifeExperiment&&this.isRedeemSuccess(null),n.e(9,function(t){var i=n(327),a=new i;a.redeemRewardsPoints(e.rewardsRedemption.redeemedRewardsPoint()).then(function(t){e.isAddMoreLifeExperiment?!t.isSuccess&&t.errorList&&t.errorList.length?(e.errorMessage(t.errorList[0].message),e.isRedeemSuccess(!1)):e.isRedeemSuccess(!0):!t.isSuccess&&t.errorList&&t.errorList.length&&e.errorMessage(t.errorList[0].message),e.isRedeemingRewards(!1)})}))},e.prototype._subscribeEvents=function(){var e=this;t.postbox.subscribe(i.GUEST_LASTNAME_DIFFERENT_FROM_CUSTOMER,function(t){e.isRedeemingRewards()||(e.isRedeemingRewards(!0),e.rewardsRedemption.isNotValidForRedemption(t),e.rewardsRedemption.redeemedRewardsPoint&&e.rewardsRedemption.isNotValidForRedemption()&&n.e(9,function(t){var i=n(327),a=new i;a.redeemRewardsPoints(0).then(function(t){e.rewardsRedemption.redeemedRewardsPoint(0)})}),e.isRedeemingRewards(!1))})},e}();e.exports=r}).call(t,n(3))},,function(e,t){e.exports="<div class=promo-code-redemption> <p class=promo-code-invite data-bind=\"text: promoCodeRedemption.ifYouHaveAPromotionCodeText\"></p> <div class=row> <div class=\"form-group col-sm-12 has-feedback\" data-bind=\"validationElement: promoCodeRedemption.promotionCode\"><!-- ko component: {\r\n                name: \"form-input\",\r\n                params : {\r\n                    value: promoCodeRedemption.promotionCode,\r\n                    labelText: promoCodeRedemption.promotionCodeText,\r\n                    css: 'promo-code-input',\r\n                    inputAttributes: {\r\n                        name: 'promotionCode',\r\n                        id: 'promotionCode',\r\n                        type: 'text',\r\n                        'data-element-name': 'promotion-code-redemption'\r\n                    }\r\n                }\r\n            } --><!-- /ko --> </div> </div> </div>"},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(9),o=n(330),r=n(109),s=n(91),l=n(99),d=function(){function e(e){this.promoCodeRedemption=e.promoCodeRedemption,this._promoCodeService=new o,this.isAddMoreLifeExperiment=a.getFeature(s.AddMoreLifeToBookingForm),this._modalService=new l,this._init(),this._setValidation(),this._subscribeEvents()}return e.prototype._init=function(){this.promoCodeRedemption.errorMessage||(this.promoCodeRedemption.errorMessage=t.observable("")),this.promoCodeRedemption.promotionCode||(this.promoCodeRedemption.promotionCode=t.observable(null))},e.prototype._setValidation=function(){var e=this;this.promoCodeRedemption.promotionCode.extend({pattern:{message:this.promoCodeRedemption.pleaseEnterAValidPromoCodeMessage(),params:this.promoCodeRedemption.alphabetNumericAndSpecialCharactersRegex},validation:{validator:function(){return!e.promoCodeRedemption.errorMessage()||""===e.promoCodeRedemption.errorMessage()},message:function(){return e.promoCodeRedemption.errorMessage()}}})},e.prototype._subscribeEvents=function(){var e=this;t.postbox.subscribe(i.PROMO_CODE_REDEMPTION_UPDATED,function(n){n?(e.promoCodeRedemption?t.mapping.fromJS(n,{},e.promoCodeRedemption):e.promoCodeRedemption=t.mapping.fromJS(n),e._init()):e.promoCodeRedemption=void 0});var a=t.pureComputed(this.promoCodeRedemption.promotionCode).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:100}});a.subscribe(function(t){e._promoCodeService.updatePromoCode(t).then(function(i){if(i){var a=!1;if(!i.isSuccess&&i.errorList&&i.errorList.length>0&&i.errorList[0]){var o=i.errorList[0].message;"no allotment"===o?n.e(8,function(t){var a=n(213),o=i.allotmentNotAvailableModal;e._modalService.open(new a(o))}):e.promoCodeRedemption.errorMessage(o)}else e.promoCodeRedemption.errorMessage(""),a=!0;r.instance.track("promotion-code-redemption",{promotion_code:t,promotion_code_is_valid:a})}})})},e}();e.exports=d}).call(t,n(3))},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(144),s=function(){function e(){this._apiEndpointService=new a}return e.prototype.updatePromoCode=function(e){var n=this._apiEndpointService.create("promoCode/updatePromoCode"),s={promotionCode:e},l=a.registerApiCall(t.post(n,s),r.UpdatePromoCode);return l.then(function(e){return i.postbox.publish(o.PRICE_DETAILS_UPDATED,e.priceDetails),i.postbox.publish(o.GIFTCARD_REDEMPTION_UPDATED,e.giftCardRedemption),e.priceDetails&&i.postbox.publish(o.TOTAL_SAVING_UPDATE,e.priceDetails.smartChoiceYouSaveText),e})},e.prototype.updateAirlinePromotion=function(e,n){var i=this._apiEndpointService.create("promoCode/updateAirlinePromotion"),o={airlinePromotion:e,airlinePromotionText:n};return a.registerApiCall(t.post(i,o),r.UpdateAirlinePromotion)},e.prototype.getEligibleEmailCreditCardPromotionInfo=function(){var e=this._apiEndpointService.create("promoCode/getCreditCardDiscountPromotion");return t.post(e)},e}();e.exports=s}).call(t,n(2),n(3))},function(e,t){e.exports="<div class=airline-promotion-redemption> <div class=row> <div class=\"form-group col-sm-12 has-feedback\" data-bind=\"validationElement: airlinePromotionRedemption.airlinePromotionBuffer\"><!-- ko component: {\r\n                name: \"form-input\",\r\n                params : {\r\n                    value: airlinePromotionRedemption.airlinePromotionBuffer,\r\n                    labelText: airlinePromotionRedemption.airlinePromotionText,\r\n                    inputAttributes: {\r\n                        name: 'airline-promotion',\r\n                        id: 'airline-promotion',\r\n                        type: 'text',\r\n                        maxlength: 32,\r\n                        class: 'airline-promotion-input form-control sensitive'\r\n                    }\r\n                }\r\n            } --><!-- /ko --> </div> </div> </div>"},function(e,t,n){(function(t){"use strict";var i=n(330),a=n(9),o=n(91),r=function(){function e(e){this.airlinePromotionRedemption=e,this._promoCodeService=new i,this._init(),this._subscribeEvents(),this._setValidation();var t=this.airlinePromotionRedemption.airlinePromotion();this.airlinePromotionRedemption.airlinePromotionBuffer(t),this.isAddMoreLifeExperiment=a.getFeature(o.AddMoreLifeToBookingForm)}return e.prototype._init=function(){this.airlinePromotionRedemption.airlinePromotion||(this.airlinePromotionRedemption.airlinePromotion=t.observable("")),this.airlinePromotionRedemption.airlinePromotionBuffer=t.observable("")},e.prototype._subscribeEvents=function(){var e=this,t=/<(?:.|\n)*?>/gm;this.airlinePromotionRedemption.airlinePromotionBuffer.subscribe(function(n){var i=n.replace(t,"");e.airlinePromotionRedemption.airlinePromotion(i)}),this.airlinePromotionRedemption.airlinePromotion.subscribe(function(t){return e._promoCodeService.updateAirlinePromotion(t,e.airlinePromotionRedemption.airlinePromotionText())})},e.prototype._setValidation=function(){this.airlinePromotionRedemption.airlinePromotionBuffer.extend({maxLength:32})},e}();e.exports=r}).call(t,n(3))},function(e,t){e.exports='<!-- payment charge options selector starts --> <div class="panel panel-default" data-bind="ifWindowGreaterThan: 768"> <div class="panel-body payment-charge-option-selector"> <h4 data-bind="text: paymentChargeOptionSelector.whenWouldYouLikeToPayText"></h4><!-- ko if: isRedesignedPanelApplied --> <div class="row ikki-7646"> <div class="col-sm-6 col-md-6"> <input type=radio name=pay-now-option id=pay-now-option-radio data-bind="checkedValue: 0, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-now-option-radio data-element-name=pay-now-option> <span class=radio-check></span> <span data-bind="text: paymentChargeOptionSelector.payNowText"></span> </label> </div> <div class="col-sm-6 col-md-6"> <input type=radio name=pay-later-option id=pay-later-option-radio data-bind="checkedValue: 1, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-later-option-radio data-element-name=pay-later-option> <span class=radio-check></span> <span data-bind="text: paymentChargeOptionSelector.payOnText"></span> </label><!-- ko if: displayDisclaimerForPayLaterMobile --> <div class=disclaimer-bnpl-tablet> <span data-bind="html: disclaimer"></span> </div><!-- /ko --> </div><!-- ko ifnot: isMobile --> <div class="col-md-6 compare-payment-options-row"> <a data-element-name=compare-payment-options class=compare-payment-options href=javascript:void(0) data-bind="html: paymentChargeOptionSelector.compareYourPaymentOptionsText, click: openPaymentOptionsCompareModal"></a> </div><!-- /ko --> </div><!-- /ko --><!-- ko ifnot: isRedesignedPanelApplied --> <table class="table m-b-0"> <thead> <tr> <th class=room-type-header data-bind="text: paymentChargeOptionSelector.roomText"></th> <th class=pay-now-header data-bind="text: paymentChargeOptionSelector.payNowText"></th> <th> <span class=pay-later-header data-bind="text: paymentChargeOptionSelector.payLaterText"></span> <div class=m-t-0> <strong><small class="text-warning bnpl-message" data-bind="html: paymentChargeOptionSelector.bnplMessage"></small></strong><br/> </div> </th> </tr> </thead> <tbody data-bind="foreach: { data: paymentChargeOptionSelector.paymentChargeOptionDTOs() }"> <tr> <td class=room-name data-bind="text: $data.roomTypeName"></td> <td data-bind="click: $parent.payNow, css: { \'radio-checked\' : $parent.paymentChargeOptionSelector.paymentChargeOption() == 0 }, matchHeight: { targetElement: \'.payment-charge-option-selector .radio.paylater\' } "> <input type=radio name=payOptions value="" class=payNow data-bind="checkedValue: 0, checked: $parent.paymentChargeOptionSelector.paymentChargeOption" checked=checked /> </td> <td data-bind="click: $parent.payLater, css: { \'radio-checked\' : $parent.paymentChargeOptionSelector.paymentChargeOption() == 1 }"> <input type=radio name=payOptions value="" class=payLater data-bind="checkedValue: 1, checked: $parent.paymentChargeOptionSelector.paymentChargeOption"/> </td> </tr> </tbody> </table><!-- /ko --> </div> </div><!-- payment charge options selector ends --><!-- payment charge options selector starts --><!-- ko ifnot: isRedesignBNPLRadioApplied --> <div class=payment-charge-options-selector-mobile data-bind="ifWindowLessThan: 768"> <h4 data-bind="text: paymentChargeOptionSelector.howDoYouLikeToPayText"></h4> <div class="row payment-charge-option-selector"> <div class=col-sm-6> <div class="radio text-center m-t-0 paynow" data-bind="click: payNow, css: { \'radio-checked\' : paymentChargeOptionSelector.paymentChargeOption() == 0 }, matchHeight: { targetElement: \'.payment-charge-option-selector .radio.paylater\' } "> <label for=paymentChargeOption class=control-label> <input data-element-name=mobile-payment-charge-option type=radio name=paymentChargeOption id=payNow data-bind="checkedValue: 0, checked: paymentChargeOptionSelector.paymentChargeOption" checked=checked /> <span data-bind="text: paymentChargeOptionSelector.payNowText"></span> </label> </div> </div> <div class=col-sm-6> <div class="radio text-center m-t-0 paylater" data-bind="click: payLater, css: { \'radio-checked\' : paymentChargeOptionSelector.paymentChargeOption() == 1 }"> <label> <input data-element-name=mobile-payment-charge-option type=radio name=paymentChargeOption id=payLater data-bind="checkedValue: 1, checked: paymentChargeOptionSelector.paymentChargeOption"/> <span data-bind="text: paymentChargeOptionSelector.payLaterText"></span> </label> <div class=m-t-1> <strong><small class="text-warning bnpl-message" data-bind="text: paymentChargeOptionSelector.bnplMessage"></small></strong><br/> <small data-bind="text: paymentChargeOptionSelector.bnplCardValidUntilMessage"></small> </div><!-- ko if: displayDisclaimerForPayLaterMobile --> <div class="m-t-1 disclaimer-bnpl-mobile"> <span data-bind="html: disclaimer"></span> </div><!-- /ko --> </div> </div> </div> </div><!-- /ko --><!-- ko if: isRedesignBNPLRadioApplied --> <div class="panel panel-default" data-bind="ifWindowLessThan: 768"> <div class="panel-body payment-charge-option-selector"> <h4 data-bind="text: paymentChargeOptionSelector.whenWouldYouLikeToPayText"></h4> <div class=redesign-bnpl> <div class=col-xs-6> <input type=radio name=pay-now-option id=pay-now-option-radio data-bind="checkedValue: 0, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-now-option-radio data-element-name=pay-now-option> <span class=radio-check></span> <span class=radio-text data-bind="text: paymentChargeOptionSelector.payNowText"></span> </label> </div> <div class=col-xs-6> <input type=radio name=pay-later-option id=pay-later-option-radio data-bind="checkedValue: 1, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-later-option-radio data-element-name=pay-later-option> <span class=radio-check></span> <span class=radio-text data-bind="text: paymentChargeOptionSelector.payOnText"></span> </label> </div> </div> </div> </div><!-- /ko --> <!-- payment charge options selector ends -->'},function(e,t,n){(function(t){"use strict";var i=n(83),a=n(11),o=n(96),r=n(97),s=n(99),l=n(86),d=n(88),c=function(){function e(e){this.isMobile=t.unwrap(e.isMobile),this.isTablet=t.unwrap(e.isTablet),this.paymentChargeOptionSelector=e.paymentChargeOptionSelector,this.isPaymentOptionsModalOpened=t.observable(!1),this.isMobile||t.postbox.publish(a.PAYMENT_CHARGE_OPTION_UPDATED,this.paymentChargeOptionSelector.paymentChargeOption()),this.isRedesignedPanelApplied=t.unwrap(this.paymentChargeOptionSelector.isPayNowPayLaterOption)||this.isTablet,this.isRedesignBNPLRadioApplied=this.isMobile&&l.isApplied(d.FixBNPLRadioButtonDesign),this.displayDisclaimerForPayLaterMobile=l.isApplied(d.DisclaimerTextWithTOULinkForBNPLMobile),this.displayDisclaimerForPayLaterMobile&&(this.termsOfUseText=t.unwrap(e.paymentChargeOptionSelector.termsOfUseText),this.termsOfUseUrl=t.unwrap(e.paymentChargeOptionSelector.termsOfUseUrl),this.disclaimer=this.createPolicyLinkElement(t.unwrap(e.paymentChargeOptionSelector.disclaimer))),this.subscribePaymentChargeOption()}return e.prototype.createPolicyLinkElement=function(e){var t='<a href="{0}" target="_blank" data-element-name="terms-of-use">{1}.</a>';return e.replace("{0}",t.replace("{0}",this.termsOfUseUrl).replace("{1}",this.termsOfUseText))},e.prototype.payNow=function(){return this.paymentChargeOptionSelector.paymentChargeOption(i.PayNow),this.isMobile||t.postbox.publish(a.PAYMENT_CHARGE_OPTION_UPDATED,i.PayNow),!0},e.prototype.payLater=function(){return this.paymentChargeOptionSelector.paymentChargeOption(i.PayLater),this.isMobile||t.postbox.publish(a.PAYMENT_CHARGE_OPTION_UPDATED,i.PayLater),!0},e.prototype.subscribePaymentChargeOption=function(){var e=this;t.isObservable(this.paymentChargeOptionSelector.paymentChargeOption)||(this.paymentChargeOptionSelector.paymentChargeOption=t.observable(i.PayLater)),this.paymentChargeOptionSubscriber=this.paymentChargeOptionSelector.paymentChargeOption.subscribe(function(t){t===i.PayNow?e.payNow():e.payLater()})},e.prototype.openPaymentOptionsCompareModal=function(e,i,a){var l=this;i&&(i.target||i.srcElement).className.indexOf("compare-payment-options")<0||(this.isPaymentOptionsModalOpened(!0),this.bindingOptions=new r,this.bindingOptions.header.data={isCloseBtnDisplayed:!0,title:null},this.bindingOptions.body.name=o.PAYMENT_OPTIONS_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.bindingOptions.body.name,n(335)),a?this.bindingOptions.body.data=a:this.bindingOptions.body.data={paymentOptionsModal:this.paymentChargeOptionSelector.paymentOptionsModal},this.bindingOptions.dialogCss=o.PAYMENT_OPTIONS_MODAL_CLASS,this.bindingOptions.options.keyboard=!0,this.bindingOptions.visible(!0),this.bindingOptions.onClose=function(){l.isPaymentOptionsModalOpened(!1),t.stringTemplateEngine.instance.removeTemplate(l.bindingOptions.body.name)},this.modalService=this.modalService||new s,this.modalService.open(this.bindingOptions))},e}();e.exports=c}).call(t,n(3))},function(e,t){e.exports='<!-- ko component: {\r\n\tname: "payment-options-panel",\r\n\tparams: {\r\n\t\tpaymentOptionsModal: paymentOptionsModal,\r\n\t}\r\n} --> <!-- /ko -->'},function(e,t){e.exports='<div class="row almost-done-root"> <div class="col-lg-6 almost-done-wrapper"> <div class=almost-done data-bind="text: almostDoneText"/> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.almostDoneText=e.almostDoneText}return e}();e.exports=n},function(e,t){e.exports='<div class=dynamic-card-container data-bind="ifWindowLessThan: 1200"><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n        || !paymentDetails.selectedPaymentMethodType()\r\n        || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n        name: "dynamic-card",\r\n        params: {\r\n            card: paymentDetails.paymentMethod.creditCard,\r\n            isFocused: isFocused\r\n        }} --><!-- /ko --><!-- /ko --> </div> <div class="col-lg-6 payment-method"><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n        || !paymentDetails.selectedPaymentMethodType()\r\n        || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n        name: "direct-card",\r\n        params: {\r\n            paymentMethod: paymentDetails.paymentMethod,\r\n            paymentChargeOption: paymentDetails.paymentChargeOptionSelector.paymentChargeOption,\r\n            countrySelectList: countrySelectList,\r\n            payLaterDate: paymentDetails.paymentChargeOptionSelector.payLaterDate,\r\n            selectedPaymentMethod: paymentDetails.selectedPaymentMethod,\r\n            selectedPaymentMethodType: paymentDetails.selectedPaymentMethodType,\r\n            availablePaymentCurrencies: availablePaymentCurrencies,\r\n            isFocused: isFocused,\r\n            combinedCardTypes: combinedCardTypes,\r\n            isAddMoreLifeExperiment: isAddMoreLifeExperiment,\r\n        }} --><!-- /ko --><!-- /ko --> </div> <div class="col-lg-6 dynamic-card-container" data-bind="ifWindowGreaterThan: 1200"><!-- ko if: !paymentDetails.selectedPaymentMethodType\r\n    || !paymentDetails.selectedPaymentMethodType()\r\n    || (paymentDetails.selectedPaymentMethodType() && paymentDetails.paymentMethod.paymentMethodOption() === 0) --><!-- ko component: {\r\n    name: "dynamic-card",\r\n    params: {\r\n    card: paymentDetails.paymentMethod.creditCard,\r\n    isFocused: isFocused\r\n    }} --><!-- /ko --><!-- /ko --> </div><!-- ko if: paymentDetails.paymentMethod.currencyChangedByPolicyMessage --> <div class="col-lg-12 currency-changed-by-policy-message well m-t-2 m-b-0"> <ul class="list-default m-b-0" data-bind="html: paymentDetails.paymentMethod.currencyChangedByPolicyMessage"></ul> </div><!-- /ko --><!-- ko if: paymentDetails.paymentMethod.isDisplayAddCreditCardToFileCheckbox()\r\n&& paymentDetails.paymentMethod.paymentMethodOption() === 0 --> <div class="col-lg-12 checkbox add-credit-card-to-file m-b-0"> <label for=isAddCreditCardToFile><!-- ko ifnot: isExperimentIKKI9415Applied --> <input data-bind="checked: paymentDetails.paymentMethod.isAddCreditCardToFile" data-element-name=save-card-to-account id=isAddCreditCardToFile name=isAddCreditCardToFile type=checkbox /><!-- /ko --><!-- ko if: isExperimentIKKI9415Applied --> <input data-bind="checked: paymentDetails.paymentMethod.isAddCreditCardToFile, click: savedCardToAccountClicked" data-element-name=save-card-to-account id=isAddCreditCardToFile name=isAddCreditCardToFile type=checkbox /><!-- /ko --> <span data-bind="text: paymentDetails.paymentMethod.saveThisCardToMyAccountText"></span> </label> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(86),a=n(88),o=function(){function e(e){this.availablePaymentCurrencies=e.availablePaymentCurrencies,this.combinedCardTypes=e.combinedCardTypes,this.countrySelectList=e.countrySelectList,this.isAddMoreLifeExperiment=e.isAddMoreLifeExperiment,this.isFocused=e.isFocused,this.paymentDetails=e.paymentDetails,this.isExperimentIKKI9415Applied=i.isApplied(a.DontCheckSaveCardAutomatically)}return e.prototype.savedCardToAccountClicked=function(){return this.isExperimentIKKI9415Applied&&this.paymentDetails.paymentMethod.isAddCreditCardToFileUnchecked(!t.unwrap(this.paymentDetails.paymentMethod.isAddCreditCardToFile)),!0},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports="<!-- ko if: isShowBillingZipCodeInput() --> <div class=\"form-group has-feedback billingzipcode\" data-bind=\"validationElement: billingZipCode\"><!-- ko component: {\r\n        name: \"form-input\",\r\n        params : {\r\n            labelText: billingZipCodeText,\r\n            value: billingZipCode,\r\n            usPostCodeFormat: { value: billingZipCode },\r\n            inputAttributes: {\r\n                name: 'billingzipcode',\r\n                id: 'billingzipcode',\r\n                type: 'text',\r\n                autocomplete: 'off',\r\n                'data-element-name': 'billingzipcode',\r\n            }\r\n        }\r\n    } --><!-- /ko --> </div> <!-- /ko -->"},function(e,t){e.exports='<!-- ko if: isShowTaxIdComputed() --> <div class="form-group has-feedback taxid" data-bind="validationElement: taxId"> <label for=taxid class=control-label data-bind="text: taxIdText"></label> <i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary" data-bind="popover: taxIdDetailsPopoverBindingOptions"></i> <input type=text class="form-control sensitive" name=taxid id=taxid autocomplete=off data-bind="value: taxId, taxIdFormat: {value: taxId}, allowEmpty" data-element-name=taxid /> <i class="ficon form-control-feedback"></i> </div> <!-- /ko -->'},function(e,t){e.exports="<!-- ko if: requireIdNumber --> <p data-bind=\"text: pleaseEnterYourIdentificationNumberText\"></p> <div data-bind=\"css: directCardAdjustmentClass\"> <div data-bind=\"css: creditCardOnFileAdjustmentClass\"> <div class=\"form-group has-feedback identification-number\" data-bind=\"validationElement: identificationNumber, validationOptions: {insertMessages: false}\"><!-- ko component: {\r\n\t\t\t\tname: \"form-input\",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: identificationCardNumberText,\r\n\t\t\t\t\tvalue: identificationNumber,\r\n                    hasFocus: isFocused,\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: 'identificationNumber',\r\n\t\t\t\t\t\tid: 'identificationNumber',\r\n\t\t\t\t\t\ttype: 'tel',\r\n\t\t\t\t\t\t'data-element-name': 'identification-number',\r\n\t\t\t\t\t\tautocomplete: 'off'\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div> </div> </div> <!-- /ko -->"},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(152),o=n(9),r=n(69),s=n(75),l=n(91),d=function(){function e(e){switch(this.creditCardOnFileAdjustmentClass="",this.directCardAdjustmentClass="",this.pleaseEnterYourIdentificationNumberText=e.pleaseEnterYourIdentificationNumberText,e.identificationNumber?this.identificationNumber=e.identificationNumber:this.identificationNumber=t.observable(""),this.identificationCardNumberText=e.identificationCardNumberText,this.isFocused=e.isFocused,this.requireIdNumber=t.observable(!1),this.isAddMoreLifeExperiment=o.getFeature(l.AddMoreLifeToBookingForm),e.cardDetailsPattern){case r.SavedCards:case r.RedirectCard:this.creditCardOnFileAdjustmentClass="col-sm-6",this.directCardAdjustmentClass="row";break;case r.DirectCard:}this._measurementService=new a,this.allValidationRules=new Array,this._setupIdNumberValidation(),this._subscribeEvents(),this.identificationNumber.isModified(!0)}return e.prototype._subscribeEvents=function(){var e=this;this._displayRequiredIdNumberSubscription=t.postbox.subscribe(i.DISPLAY_REQUIRE_ID_NUMBER_MESSAGE,function(){e.requireIdNumber(!0),e._measurementService.countByMetricName("DisplayIdNumberInput")}),this._fieldToUpdatePaymentSubscription=t.postbox.subscribe(i.SUBSCRIBE_FIELD_TO_UPDATE_PAYMENT,function(){e.requireIdNumber()&&e._measurementService.countByMetricName("UserChangePaymentMethodOrClickBackAfterDisplayIdNumberInput"),e.requireIdNumber(!1)}),this._hideIdentificationNumberSubscription=t.postbox.subscribe(i.HIDE_IDENTIFICATION_NUMBER,function(){e.requireIdNumber()&&e._measurementService.countByMetricName("UserChangeCcofAfterDisplayIdNumberInput"),e.requireIdNumber(!1)}),this._identificationNumberSubscription=this.identificationNumber.subscribe(function(t){e.requireIdNumber()&&t&&e._measurementService.countByMetricName("UserInputIdNumber")})},e.prototype._setupIdNumberValidation=function(){var e=this;this.identificationNumber&&(this.identificationNumber.extend({required:{message:s.getValidationMessage(this.pleaseEnterYourIdentificationNumberText(),"identificationNumber-span"),params:!0,onlyIf:function(){return!e.isFocused()&&e.requireIdNumber()}},validation:{validator:function(t){return e._validateIdNumber(t)},message:s.getValidationMessage(this.pleaseEnterYourIdentificationNumberText(),"identificationNumber-span"),onlyIf:function(){return!e.isFocused()&&e.requireIdNumber()}}}),this.identificationNumber()&&this.identificationNumber.isModified(!0),this.allValidationRules.push(this.identificationNumber.rules))},e.prototype._validateIdNumber=function(e){return 15===e.length||18===e.length},e.prototype.dispose=function(){this._displayRequiredIdNumberSubscription&&this._displayRequiredIdNumberSubscription.dispose(),this._fieldToUpdatePaymentSubscription&&this._fieldToUpdatePaymentSubscription.dispose(),this._hideIdentificationNumberSubscription&&this._hideIdentificationNumberSubscription.dispose(),this._identificationNumberSubscription&&this._identificationNumberSubscription.dispose(),this.allValidationRules.forEach(function(e){e.removeAll()})},e}();e.exports=d}).call(t,n(3))},function(e,t){e.exports='<!-- ko ifnot: isMobile --><!-- ko component: {\r\n\tname: "banner",\r\n\tparams: banner\r\n} --><!-- /ko --><!-- /ko --><!-- ko if: isMobile --> <div class="panel panel-default money-back-details"> <div class=money-back-corner></div> <div class=panel-body><!-- ko if: moneyBackDetails.shouldShowAutoMigrationRewardUser --> <div class="auto-migration-text m-t-0"> <p data-bind="html: moneyBackDetails.giftcardAutoMigratedRewardUserText"></p> </div><!-- /ko --> <div class=m-b-0> <dl class="dl-horizontal dd-align-right m-b-0"> <dt> <i class="ficon ficon-24 ficon-left" data-bind="css: moneyBackDetails.iconClass()" id=moneyBackBadge></i> <span class=moneyBackInfoText data-bind="text: moneyBackDetails.moneyBackInFormOfGiftCardText" id=moneyBackInfoText data-element-name=mobile-banner-money-back></span> <i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary" data-bind="popover: moneyBackPopoverBindingOptions"></i> </dt> <dd class=badge-price> <span class=money-back-amount data-bind="text: moneyBackDetails.moneyBackAmount"></span><!-- ko if: moneyBackDetails.moneyBackAmountInPaymentCurrency --> <small class="money-back-amount-in-payment-currency m-b-2" data-bind="text: moneyBackDetails.moneyBackAmountInPaymentCurrency"></small><!-- /ko--> </dd> </dl> </div> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(9),o=n(198),r=n(89),s=n(109),l=n(86),d=n(88),c="gc_opt_in",p=function(){function e(e){this.banner=void 0;var n=a.getPageData(),i=n&&n.jsonViewModel&&n.jsonViewModel.banners;if(this.moneyBackDetails=e,this.moneyBackPopoverBindingOptions=new r,this.moneyBackPopoverBindingOptions.options.content=this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText,this._subscribeEvents(),this.isMobile=n.jsonViewModel&&n.jsonViewModel.isMobile,i){var s=t.unwrap(this.moneyBackDetails.isOptInRequired);this.banner={category:t.observable(this.mapBannerCategory(s)),templateName:t.observable("default-banner"),icon:t.observable("ficon-pointsmax-placeholder"),title:null,messages:[{message:this.moneyBackDetails.giftcardAutoMigratedRewardUserText},{message:this.moneyBackDetails.moneyBackInFormOfGiftCardText,popover:this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText}],rightColumn:[{text:this.moneyBackDetails.moneyBackAmount,className:"text-right"},{text:this.moneyBackDetails.moneyBackAmountInPaymentCurrency,className:"small pull-right"+(n&&n.isRtl?" flip":"")}],isPanel:t.observable(!0)};var p=l.isApplied(d.NewAgodaCashIcon)?"ficon-agoda-cash":"ficon-cash-line-circle-h";this.isMobile||(this.preselectGCOptin(),this.banner.icon=t.observable(p),this.banner.title=t.observable(this.moneyBackDetails.bonusYouEarnedFreeGiftCardText()),this.banner.messages[0].message=this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText,this.banner.messages[1].message=this.moneyBackDetails.giftcardAutoMigratedRewardUserText,this.banner.templateName=t.observable(s?"giftcard-banner-opt-in":"giftcard-banner"),this.banner.callback=this.updateGCOptInSelection,this.banner.selection=t.observable("true"===o.getSessionStorageItem(c))),this.moneyBackDetails&&this.moneyBackDetails.moneyBackAmount&&this.moneyBackDetails.expiryDate&&this._sendMoneyBackMessage(),this.moneyBackDetails&&(this.moneyBackDetails.iconClass=t.observable(p+" agodacash"))}}return e.prototype.updateBanner=function(e){if(e&&""!==e.moneyBackAmount()){var n=t.unwrap(e.isOptInRequired);this.moneyBackDetails.shouldShowMoneyBackDetails(!0),this.banner.title(this.moneyBackDetails.bonusYouEarnedFreeGiftCardText()),this.banner.messages[0].message(e.yourGiftCardWillBeAddedAfterCheckOutText()),this.banner.templateName(n?"giftcard-banner-opt-in":"giftcard-banner")}else this.moneyBackDetails.shouldShowMoneyBackDetails(!1)},e.prototype.mapBannerCategory=function(e){return e?"giftcard-optIn":"giftcard"},e.prototype.preselectGCOptin=function(){this.moneyBackDetails.isPreSelectOptin()&&null==o.getSessionStorageItem(c)&&o.setSessionStorageItem(c,"true"),t.postbox.publish(i.GIFTCARD_EARN_OPTIN_UPDATED,!0)},e.prototype.updateGCOptInSelection=function(e){return null!=e.banner&&o.setSessionStorageItem(c,t.unwrap(e.banner.selection)),!0},e.prototype.checkPromotionInCart=function(e){return null!==e&&null!==e.promotionDiscount&&(0!==e.promotionDiscount.amount||0!==e.promotionDiscount.percentage)},e.prototype._subscribeEvents=function(){var e=this;this._moneyBackDeatilsUpdatedSubscription=t.postbox.subscribe(i.MONEYBACK_DETAILS_UPDATED,function(n){n&&(e.isMobile?t.mapping.fromJS(n,{},e.moneyBackDetails):e.updateBanner(t.mapping.fromJS(n)),e.moneyBackDetails&&e._sendMoneyBackMessage())}),this._moneyBackPaymentAmountUpdatedSubscription=t.postbox.subscribe(i.FORMATTED_MONEY_BACK_PAYMENT_AMOUNT_UPDATED,function(t){e.moneyBackDetails.moneyBackAmountInPaymentCurrency(t)})},e.prototype._sendMoneyBackMessage=function(){s.instance.track("giftcard-earn-value",{action_element_name:"giftcard-earn-value",giftcard_earn_expiry:this.moneyBackDetails.expiryDate()})},e.prototype.dispose=function(){this._moneyBackPaymentAmountUpdatedSubscription&&this._moneyBackPaymentAmountUpdatedSubscription.dispose()},e}();e.exports=p}).call(t,n(3))},function(e,t){e.exports='<div class="well confident-message"> <h5 class=your-booking-includes-title data-bind="text: yourBookingIncludes.yourBookingIncludesText"></h5> <div data-bind="foreach: { data : yourBookingIncludes.features() }"> <div class="col-xs-4 your-booking-includes-details"> <i class="ficon ficon-24" data-bind="css: $data.symbol"></i> <span data-bind="text: $data.name"></span> </div> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){
this.yourBookingIncludes=e.yourBookingIncludes}return e}();e.exports=n},function(e,t){e.exports="<!-- ko if: arrivalTimeForm.selectedEstimatedTimeOfArrivalText --> <div class=arrival-time-inform data-bind=\"text: arrivalTimeForm.selectedEstimatedTimeOfArrivalText\"></div><!-- /ko --> <div class=\"col-sm-6 form-group has-feedback arrival-time arrival-time-form-group\" data-bind=\"validationElement : arrivalTimeForm.indexOfArrivalTime\"><!-- ko component: {\r\n        name: \"form-dropdown\",\r\n        params : {\r\n            value: arrivalTimeForm.indexOfArrivalTime,\r\n            options: arrivalTimeForm.arrivalTimeListText.options(),\r\n            optionsText: 'text',\r\n            optionsValue: 'value',\r\n            valueAllowUnset: false,\r\n            inputAttributes: {\r\n                name: 'arrivalTime',\r\n                id: 'arrivalTime',\r\n                'data-element-name': 'arrival-time-dropdown'\r\n            },\r\n        }\r\n    } --><!-- /ko --> </div>"},function(e,t,n){"use strict";var i=n(9),a=n(109),o=n(91),r=function(){function e(e){this.arrivalTimeForm=e.arrivalTimeForm,this._setValidation(),this.subscribeEvents(),this.isAddMoreLifeExperiment=i.getFeature(o.AddMoreLifeToBookingForm)}return e.prototype._setValidation=function(){this.arrivalTimeForm.indexOfArrivalTime.extend({notEqual:{params:"0"}}),"0"!==this.arrivalTimeForm.indexOfArrivalTime()&&this.arrivalTimeForm.indexOfArrivalTime.isModified(!0)},e.prototype.subscribeEvents=function(){var e=this;this.arrivalTimeForm.indexOfArrivalTime.subscribe(function(t){var n="0"!==t;e.arrivalTimeForm.indexOfArrivalTime.isModified(n),n&&a.instance.track("arrival-time-dropdown",{action_element_value:t})})},e}();e.exports=r},function(e,t){e.exports='<span class="terms-and-privacy text-left" data-bind="html: termsOfUseAndPrivacyCompleteSentence()"></span>'},function(e,t){"use strict";var n=function(){function e(e){this.termsOfUseAndPrivacyCompleteSentence=e.termsAndPrivacyData.termsOfUseAndPrivacyCompleteSentence}return e}();e.exports=n},function(e,t){e.exports='<!-- ko if: params.isLoggedIn() --> <div class="panel panel-default fast-login-panel"> <div class=blue-container> <i class="ficon ficon-user-font-icon ficon-20"> </i> </div> <div id=logoutBtn class=logout-button> <span data-bind="click: logout, html: params.agodaMembersLogoutText"></span> </div> </div><!-- /ko --><!-- ko ifnot: params.isLoggedIn() --> <div class="panel panel-default seamless-facebook-login row"> <div class=login-social-illustration> <img data-bind="attr:{src: params.cdnPath + \'/images/desktop/login/illustration-deals-social.svg\'}" alt=""/> </div> <div class=fast-facebook-login-container> <a target=_blank data-bind="click: openLoginModal" href=# data-element-name=signin-button> <span data-bind=html:params.facebookDetails.signInText class=signIn></span> </a> <h4 data-bind="html: params.facebookDetails.fasterCheckoutWithFaceBookText"></h4> <p data-bind="html: params.facebookDetails.connectWithFacebookOrSignInText"></p> </div> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(209),a=n(168),o=n(86),r=n(88),s=function(){function e(e){this.params=e,this.initializeLoginDialogFields(),this.memberService=new i}return e.prototype.openLoginModal=function(e,t){o.isApplied(r.ReactLoginComponet)?a["default"]("ko/TOGGLE_MODAL",{modal:"login",isActive:!0}):this.params.openLoginModal(null,e,t,this.params.loginPanelData)},e.prototype.logout=function(){var e=this;this.params.loginPanelData.isLoginPanelBlocked(!0),this.memberService.logout().always(function(){e.params.loginPanelData.isLoginPanelBlocked(!1)})},e.prototype.initializeLoginDialogFields=function(){void 0===this.params.loginPanelData.loginPanel.loginServiceResult&&(this.params.loginPanelData.loginPanel.loginServiceResult=t.observable(!0)),void 0===this.params.loginPanelData.loginPanel.errorMessage&&(this.params.loginPanelData.loginPanel.errorMessage=t.observable("")),void 0===this.params.loginPanelData.loginPanel.phoneLoginServiceResult&&(this.params.loginPanelData.loginPanel.phoneLoginServiceResult=t.observable(!0)),void 0===this.params.loginPanelData.loginPanel.phoneErrorMessage&&(this.params.loginPanelData.loginPanel.phoneErrorMessage=t.observable(""))},e}();e.exports=s}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: params.isLoggedIn() --> <div class="pull-right flip hidden-xs user-menu"> <div class=logged-in data-login-panel=true data-bind="click: toggleDropdown" data-element-name=menu-user-login-click-toggle> <div class=header-dropdown data-login-panel=true> <div class=user-icon-container data-login-panel=true> <i class="user-icon bg-user-icon-3" data-login-panel=true> <span data-bind="text: firstNameFirstChar()" data-login-panel=true></span> </i> </div> <span data-bind="text: displayUsername()" class=signInMenu data-login-panel=true></span> <i class="ficon ficon-desktop-ic-black-down" data-login-panel=true></i> </div> </div><!-- ko if: isDropdownOpened --> <div class="header-menu header-menu--slave" data-login-panel=true> <button class="btn btn-primary btn-lg sigup-user-btn ladda-button same-row" data-bind="click: logout" data-element-name=menu-user-logout-click> <span data-bind=html:params.signOutText></span> </button> </div><!-- /ko --> </div><!-- /ko --><!-- ko ifnot: params.isLoggedIn() --> <div class="sign-in pull-right flip hidden-xs"> <button class="btn btn-primary btn-lg sigup-user-btn ladda-button same-row" data-bind="click: openLoginModal" data-element-name=menu-user-signIn-click> <span data-bind=html:params.signInText class=signInMenu></span> </button> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(86),a=n(11),o=n(88),r=n(209),s=n(168),l=function(){function e(e){var n=this;this.openLoginModal=function(e,n){i.isApplied(o.ReactLoginComponet)?s["default"]("ko/TOGGLE_MODAL",{modal:"login",isActive:!0}):t.postbox.publish(a.OPEN_LOGIN_PANEL,"")},this.logout=function(){n.params.loginPanelData.isLoginPanelBlocked(!0),n.memberService.logout().always(function(){n.params.loginPanelData.isLoginPanelBlocked(!1)})},this.firstNameFirstChar=function(){var e=t.unwrap(n.params.agodaMemberFirstName);return e?e.charAt(0).toUpperCase():""},this.displayUsername=function(){var e=t.unwrap(n.params.agodaMemberFirstName),i=t.unwrap(n.params.agodaMemberLastName);return e&&i?e.charAt(0).toUpperCase()+e.slice(1)+" "+i.charAt(0).toUpperCase()+".":""},this.toggleDropdown=function(){n.isDropdownOpened(!n.isDropdownOpened()),n.handleClickOutSidePanel()},this.handleClickOutSidePanel=function(){var e=function(e){e.target.attributes["data-login-panel"]||n.isDropdownOpened(!1)};n.isDropdownOpened()?document.addEventListener("click",e):document.removeEventListener("click",e)},this.params=e,this.memberService=new r,this.isDropdownOpened=t.observable(!1)}return e}();e.exports=l}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: isFacebookSDKLoaded --> <div class=fast-facebook-login><!-- ko if: params.showHeader --> <h4 data-bind="html: params.facebookDetails.fasterCheckoutWithFaceBookText"></h4><!-- /ko--><!-- ko if: params.showDescription --> <h5 data-bind="html: params.facebookDetails.facebookHateRememberingYourAgodaPasswordText"></h5><!-- /ko--><!-- ko if: facebookLoginEmail() --> <p class=fast-facebook-login__login-email-message data-bind="html: facebookLoginEmailMessage"></p><!-- /ko--><!-- ko component: {\r\n    name: "facebook-login-button",\r\n    params: {\r\n        loginPanel: params.loginPanel,\r\n        isLoginPanelBlocked: params.isLoginPanelBlocked,\r\n        loginErrorStatus: loginErrorStatus,\r\n        loginErrorMessage: params.facebookDetails.loginErrorMessage,\r\n        isMobile:params.isMobile,\r\n        isLoginModalExperimentIsApplied:params.isLoginModalExperimentIsApplied,\r\n        isFacebookInit:isFacebookInit,\r\n        isLoginModalOpenned:params.isLoginModalOpenned\r\n        }\r\n    } --><!-- /ko --><!-- ko if: params.facebookDetails.loginErrorMessage() !== "" --> <div class="row respond-warning"> <span class="" data-bind="html: params.facebookDetails.loginErrorMessage"> </span> </div><!-- /ko --> <div class=option-line> <hr/> <label data-bind=html:params.facebookDetails.orText></label> <hr/> </div> </div> <!-- /ko-->'},function(e,t,n){(function(t){"use strict";var i=n(209),a=n(10),o=n(9),r=n(91),s=function(){function e(e){var n=this;e.showHeader=void 0===e.showHeader||e.showHeader,e.showDescription=void 0!==e.showDescription&&e.showDescription,e.isLandingPage=void 0!==e.isLandingPage&&e.isLandingPage,e.facebookDetails.loginErrorMessage=void 0!==e.facebookDetails.loginErrorMessage?e.facebookDetails.loginErrorMessage:t.observable(""),this.params=e,this.loginErrorStatus=this.loginErrorStatus?this.loginErrorStatus:t.observable(-1),this.loginErrorMessage=this.loginErrorMessage?this.loginErrorMessage:t.observable(""),this.isFacebookInit=t.observable(!1),this.isFacebookSDKLoaded=t.observable(this.params.facebookDetails.isFacebookEnabled()),this.facebookLoginEmail=t.observable(""),this.isShowFacebookLoginEmailMessage=o.getFeature(r.ShowFacebookLoginEmail),this.facebookLoginEmailMessage=this.isShowFacebookLoginEmailMessage&&t.pureComputed(function(){var i=t.unwrap(n.facebookLoginEmail());if(i){var o=a.formatZeroBased("<a>{0}</a>",i);return a.formatZeroBased(e.loginPanel.facebookLoginEmailMessageText(),o)}return null}),this.params.facebookDetails.isFacebookEnabled()&&e.isLandingPage&&this.retryUpdateFacebookSdkLoaded(this.isFacebookSDKLoaded,function(){n.facebookLoadedEvent()})}return e.prototype.retryUpdateFacebookSdkLoaded=function(e,t){var n=this,i=10,a=0,o=function(e,t){return window.alreadyLoadFacebookSdk?(e(!0),n.params.facebookDetails.isFacebookEnabled(!0),void t()):void(a<i?(a+=1,setTimeout(function(){o(e,t)},50)):(e(!1),n.params.facebookDetails.isFacebookEnabled(!1)))};o(e,t)},e.prototype.logout=function(){var e=this;this.params.isLoginPanelBlocked(!0);var t=new i;t.logout().always(function(){e.params.isLoginPanelBlocked(!1)})},e.prototype.facebookLoadedEvent=function(){var e=this;if(this.params.isLandingPage&&!this.params.isLoggedIn()&&this.params.facebookDetails.isFacebookEnabled){var t=new i;t.initFacebookWhenSDKReady(function(){e.callFacebookLoadedEvent(t)})}},e.prototype.callFacebookLoadedEvent=function(e){var t=this;FB.getLoginStatus(function(n){"connected"===n.status&&(t.callFacebookAutoLogin(e,n,t.params.facebookDetails),t.isShowFacebookLoginEmailMessage&&t.getFacebookUserInformation(e,n))},!0)},e.prototype.callFacebookAutoLogin=function(e,t,i){FB.api("/me/friends",function(a){if(a&&a.data){var o=n(152),r=new o,s={friendsCount:a.data.length,facebookUserId:t.authResponse.userID};r.sendMessage("gm-fbautologin",JSON.stringify(s)),a.data.length>0&&i.isFacebookAutoLogin()&&e.facebookAutoLogin(t)}},{scope:"user_friends"})},e.prototype.getFacebookUserInformation=function(e,t){var n=this;t&&t.authResponse&&e.getFacebookUserInformation(t).then(function(e){e&&n.facebookLoginEmail(e.email)})},e}();e.exports=s}).call(t,n(3))},function(e,t){e.exports="<div class=fb-login-button-container data-bind=\"template: {afterRender: renderComplete}\"> <div class=fb-login-button-spinner data-bind=\"'class':params.isMobile()?'mobile':''\"> <div data-max-rows=1 data-size=large data-button-type=continue_with data-show-faces=false data-auto-logout-link=false data-use-continue-as=true onlogin=fbCallback scope=\"email, user_friends\" auth_type=rerequest data-width=100% data-bind=\"attr: {\r\n                'class': 'fb-login-button' + (isLoginWithFacebookProcess()?'-hide':'')}\"> </div> </div> </div>"},function(e,t,n){(function(t,i){"use strict";var a=n(209),o=function(){function e(e){this.params=e,this.isLoginWithFacebookProcess=t.observable(!1),this._setUpFacebookLoginHandler(),void 0===this.params.loginPanel.loginServiceResult&&(this.params.loginPanel.loginServiceResult=t.observable(!0)),void 0===this.params.loginPanel.errorMessage&&(this.params.loginPanel.errorMessage=t.observable("")),void 0===this.params.loginPanel.phoneLoginServiceResult&&(this.params.loginPanel.phoneLoginServiceResult=t.observable(!0)),void 0===this.params.loginPanel.phoneErrorMessage&&(this.params.loginPanel.phoneErrorMessage=t.observable(""))}return e.prototype._setUpFacebookLoginHandler=function(){var e=this;window.fbCallback=function(){FB.getLoginStatus(function(t){"connected"===t.status&&e.handleFacebookLogin(t)})}},e.prototype.handleFacebookLogin=function(e){var n=this;this.params.loginErrorStatus(-1);var i=t.validation.group(this.params.loginPanel,{deep:!0});this.params.loginPanel.loginServiceResult(!0),this.isLoginWithFacebookProcess(!0),this.params.isLoginModalOpenned&&!this.params.isLoginModalOpenned()&&this.params.isLoginPanelBlocked(!0),e.apsPeekDiscountAmount=this.params.loginPanel._apsPeekDiscountAmount;var o=new a;o.facebookLogin(e).then(function(e){n.handleLoginResponse(e,i)}).always(function(){n.params.isProcessing&&n.params.isProcessing(!1),n.params.isLoginPanelBlocked(!1),n.isLoginWithFacebookProcess(!1)})},e.prototype.handleLoginResponse=function(e,t){var n=this;1===e.status?setTimeout(function(){n.params.loginErrorMessage(""),n.params.loginPanel.username(void 0),n.params.loginPanel.password(void 0),t.showAllMessages(!1),n.params.isLoginModalExperimentIsApplied&&i(".modal").modal("hide")},300):(this.params.loginErrorMessage(e.errorMessage),this.params.loginErrorStatus(e.status),this.params.isLoginModalExperimentIsApplied&&this.params.loginPanel.loginServiceResult(!1))},e.updateFacebookQueryForPreventRerender=function(){var e=function(e,t,n){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.match(i)?e.replace(i,""===n?"&":"$1"+t+"="+n+"$2"):e};setTimeout(function(){var t=i(".fb-login-button");t.map(function(n){var a=i(t[n]),o=a.attr("fb-iframe-plugin-query");o&&void 0!==o&&(o=e(o,"container_width",a[0].offsetWidth.toString()),o=e(o,"login_text",""),a.attr("fb-iframe-plugin-query",o))})},2e3)},e.prototype.renderComplete=function(){var t=new a;t.initFacebookWhenSDKReady(function(t){t&&e.updateFacebookQueryForPreventRerender()})},e}();e.exports=o}).call(t,n(3),n(2))},function(e,t){e.exports='<!-- ko if: banner --><!-- ko if: isPanel --> <div class="panel panel-default banner" data-bind="css: category, template: { name: banner.templateName }"></div><!-- /ko --><!-- ko ifnot: isPanel --> <div class=banner data-bind="css: category, template: { name: banner.templateName }"></div><!-- /ko --> <!-- /ko -->'},function(e,t,n){(function(t,i){"use strict";var a=n(362),o=n(370),r=n(215),s=n(11),l=n(9),d=n(89),c=function(){function e(e){this.banner=void 0;var n,r=l.getPageData();if(this.isPanel=t.observable(!0),"string"!=typeof e&&e.title){if(!e.category)return;n=e,this.category=e.category}else{var s=r&&r.jsonViewModel&&r.jsonViewModel.banners;if(!s)return;this.category="string"==typeof e?t.observable(e):t.observable(t.unwrap(e.category)),n=s&&s[this.category()]}if(n&&n.messages){var c=a(o(n.messages,"message"),function(e){var n=t.observable(t.unwrap(e.message)),a=t.observable(t.unwrap(e.description)),o=void 0,r=e.key,s=e.icon;if(!i.touchevents&&e.popover){var l=new d;l.options.content=e.popover,e.template&&(l.options.template=e.template),o=l}return{message:n,description:a,popover:o,key:r,icon:s}});if(c.length>0){n.messages=c;var p=a(o(n.rightColumn,"text"),function(e){return{text:e.text||void 0,className:e.className||void 0}});n.rightColumn=p.length>0?p:void 0,this.banner=n}r.jsonViewModel.isMobile||"discount"!==this.category()||this.subscribeEvents(),e.callback&&e.callback(n)}}return e.prototype.subscribeEvents=function(){var e=this;t.postbox.subscribe(s.DISCOUNT_BANNER_TEXT,function(t){if(t){var n=r(e.banner.messages,{key:"great-choice"});n&&n.message&&n.message(t)}})},e}();e.exports=c}).call(t,n(3),n(25))},function(e,t,n){function i(e,t){var n=s(e)?a:r;return n(e,o(t,3))}var a=n(363),o=n(217),r=n(364),s=n(278);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}e.exports=n},function(e,t,n){function i(e,t){var n=-1,i=o(e)?Array(e.length):[];return a(e,function(e,a,o){i[++n]=t(e,a,o)}),i}var a=n(365),o=n(276);e.exports=i},function(e,t,n){var i=n(366),a=n(369),o=a(i);e.exports=o},function(e,t,n){function i(e,t){return e&&a(e,t,o)}var a=n(367),o=n(271);e.exports=i},function(e,t,n){var i=n(368),a=i();e.exports=a},function(e,t){function n(e){return function(t,n,i){for(var a=-1,o=Object(t),r=i(t),s=r.length;s--;){var l=r[e?s:++a];if(n(o[l],l,o)===!1)break}return t}}e.exports=n},function(e,t,n){function i(e,t){return function(n,i){if(null==n)return n;if(!a(n))return e(n,i);for(var o=n.length,r=t?o:-1,s=Object(n);(t?r--:++r<o)&&i(s[r],r,s)!==!1;);return n}}var a=n(276);e.exports=i},function(e,t,n){function i(e,t){var n=s(e)?a:o;return n(e,r(t,3))}var a=n(371),o=n(372),r=n(217),s=n(278);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0,a=0,o=[];++n<i;){var r=e[n];t(r,n,e)&&(o[a++]=r)}return o}e.exports=n},function(e,t,n){function i(e,t){var n=[];return a(e,function(e,i,a){t(e,i,a)&&n.push(e)}),n}var a=n(365);e.exports=i},function(e,t){e.exports='<div class=panel-body> <i data-bind="css: couponPanel.couponBoxFontIcon"></i> <h4 data-bind="text: couponPanel.couponCodeWithPriceText" class=coupon-code></h4> <div data-element-name=coupon-apply-panel data-bind="css: couponPanel.couponBoxClassName, event: { mouseover: onCouponPanelHover, mouseout: onCouponPanelMouseOut, click: onCouponButtonClicked }"> <span class=coupon-apply-message data-bind="html: couponPanel.couponButtonText"></span> </div> </div>'},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(11),r=n(144),s=function(){function e(e){this.param=e,this.isInprogress=!1,this.couponPanel=e,this.apiEndpointService=new a,this.couponPanel.couponButtonText=t.observable(""),this.couponPanel.couponBoxFontIcon=t.observable(""),this.couponPanel.couponBoxClassName=t.observable(""),this.updateCouponPanelModel()}return e.prototype.onCouponButtonClicked=function(){var e=this;if(this.couponPanel&&!this.isInprogress){var n=this.apiEndpointService.create("pseudoCoupon/GetPseudoCouponRoom"),s=this.couponPanel.couponBoxClassName()+" inprogress";this.isInprogress=!0,this.couponPanel.couponBoxClassName(s);var l=a.registerApiCall(i.post(n),r.GetPseudoCouponRoom);l.then(function(n){t.postbox.publish(o.PRICE_DETAILS_UPDATED,n.priceDetails),t.postbox.publish(o.MONEYBACK_DETAILS_UPDATED,n.moneyBackDetails),t.postbox.publish(o.GIFTCARD_REDEMPTION_UPDATED,n.giftCardRedemption),n.priceDetails&&t.postbox.publish(o.TOTAL_SAVING_UPDATE,n.priceDetails.smartChoiceYouSaveText),e.couponPanel.isClickedCouponApply(!e.couponPanel.isClickedCouponApply()),e.updateCouponPanelModel(),e.isInprogress=!1})}},e.prototype.onCouponPanelHover=function(){this.couponPanel&&this.couponPanel.isClickedCouponApply()?this.couponPanel.couponButtonText(this.couponPanel.removeCouponText()):this.couponPanel.couponBoxFontIcon("ficon ficon-16 ficon-scissor ficon-scissor-hover")},e.prototype.onCouponPanelMouseOut=function(){this.couponPanel&&this.couponPanel.isClickedCouponApply()?this.couponPanel.couponButtonText(this.couponPanel.couponAppliedText()):this.couponPanel.couponBoxFontIcon("ficon ficon-16 ficon-scissor")},e.prototype.updateCouponPanelModel=function(){this.couponPanel&&(this.couponPanel.isClickedCouponApply()?(this.couponPanel.couponButtonText(this.couponPanel.couponAppliedText()),this.couponPanel.couponBoxFontIcon(""),this.couponPanel.couponBoxClassName("coupon-box applied")):(this.couponPanel.couponButtonText(this.couponPanel.clickToApplyCouponText()),this.couponPanel.couponBoxFontIcon("ficon ficon-16 ficon-scissor"),this.couponPanel.couponBoxClassName("coupon-box")))},e}();e.exports=s}).call(t,n(3),n(2))},function(e,t){e.exports='<!-- ko if: banner --><!-- ko component: {\r\nname: "banner",\r\nparams: banner\r\n}--><!-- /ko --> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var i=n(11),a=function(){function e(){var e=this;this.banner=void 0,this.banner={category:t.observable("smartChoice"),callback:function(n){e._paymentMethodUpdatedSubscription=t.postbox.subscribe(i.TOTAL_SAVING_UPDATE,function(e){e&&n&&n.messages&&n.messages.length>0&&n.messages[0].message(e)})},icon:null,messages:null,templateName:null,title:null,isPanel:t.observable(!0)}}return e.prototype.dispose=function(){this._paymentMethodUpdatedSubscription&&this._paymentMethodUpdatedSubscription.dispose()},e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports='<div id=captcha data-bind="css: { m-t-3: isMarginRender(), m-b-2: isMarginRender() }"><!-- ko if: isRenderGeetest() --> <div id=geetest-captcha class="m-b-2 col-sm-11 col-md-offset-1"></div><!-- /ko --><!-- IKKI-7362-SWITCH --> <div id=recaptcha-container class="m-t-2 text-center"> <p class="text-center error-message m-b-0" data-bind="text: error"></p> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(205),a=n(206),o=function(){function e(e){var n=this;this.params=e,this.loadCaptcha(),this.error=t.observable(""),this.params.isCaptchaValidated.extend({validation:{validator:function(e){return n.error(e?"":n.params.errorMessage),e}}})}return e.prototype.isMarginRender=function(){return i.instance.getType()===a.Geetest},e.prototype.isRenderGeetest=function(){return i.instance.getType()===a.Geetest},e.prototype.loadCaptcha=function(){i.instance.init(this.params.captchaValidationResult,this.params.isCaptchaValidated,t.unwrap(this.params.isRenderOnModal))},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class="popover agoda-bestprice-guarantee-popover same-row bottom" data-bind="click: bpg.openAgodaPriceGuaranteeModal, popover: bpg.agodaPriceGuaranteePopoverBindingOptions"> <div class=arrow></div> <div class=popover-content data-original-title="" title=""> <i class="ficon ficon-16 ficon-left ficon-agoda-price-guarante bestprice-icon"></i> <a href=# data-bind="text: bpg.bestPriceGuaranteeText"></a> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.bpg=e}return e}();e.exports=n},function(e,t){e.exports='<div class=installment-panel> <span class=installment-title data-bind=text:installmentTitleText></span> <div class=checkbox> <label for=isPayInstallment> <input type=checkbox id=isPayInstallment name=isPayInstallment data-bind="checked: isInstallmentChecked"/> <span data-bind=text:installmentCheckboxText></span> </label> </div><!-- ko if: isInstallmentChecked--> <div class=installment-plans-container> <div class="row header"> <div class="col col-xs-5 col-sm-4"> <span data-bind=text:numberOfInstallmentText></span> </div> <div class="col col-xs-5 col-sm-4"> <span data-bind=text:monthlyEstimateText></span> </div> <div class="col col-xs-2 col-sm-4"> <span data-bind=text:interestRateText></span> </div> </div> <div class=line-container> <hr class="line m-b-0 m-t-0"> </div> <div data-bind="foreach: installmentPlans"> <div class=row> <div class="col col-xs-5 col-sm-4"> <div class=radio> <label> <input type=radio name=installmentPlanChoice data-bind="{ checkedValue: $data.id, checked: $parent.selectedInstallmentId }"/> <span data-bind=text:$data.planDescription></span> </label> </div> </div> <div class="col col-xs-5 col-sm-4"> <span data-bind=text:$data.monthlyEstimateAmount></span> </div> <div class="col col-xs-2 col-sm-4"> <span data-bind=text:$data.interestRateAmount></span> </div> </div> </div> </div><!-- /ko --> </div>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.installmentTitleText=e.installmentTitleText,this.installmentCheckboxText=e.installmentCheckboxText,this.numberOfInstallmentText=e.numberOfInstallmentText,this.monthlyEstimateText=e.monthlyEstimateText,this.interestRateText=e.interestRateText,this.installmentPlans=e.installmentPlans,this.selectedInstallmentId=e.selectedInstallmentId,this.isInstallmentChecked=t.observable(!1),this.init(),this.subscribeEvents()}return e.prototype.dispose=function(){this.isInstallmentCheckedSubscription&&this.isInstallmentCheckedSubscription.dispose()},e.prototype.init=function(){this.isInstallmentChecked()&&this.selectFirstPlan()},e.prototype.subscribeEvents=function(){var e=this;this.isInstallmentCheckedSubscription=this.isInstallmentChecked.subscribe(function(t){t?e.selectFirstPlan():e.selectedInstallmentId(null)})},e.prototype.selectFirstPlan=function(){null!=this.installmentPlans&&this.installmentPlans().length>0&&this.selectedInstallmentId(this.installmentPlans()[0].id)},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div class="panel panel-default hotel-details" data-bind="css: { \'with-dod\': bookingDetails.dealOfTheDayText && !isHotelAndRoomDetailsCombine,\r\n                       \'with-combine\': isHotelAndRoomDetailsCombine\r\n}"><!-- ko if: bookingDetails.dealOfTheDayText --> <div class=dod-container> <div class=dod-content> <div class=dod-left-info data-bind="css: { \'with-five-stars\': bookingDetails.isFiveStarsDod, \'with-half-width\': bookingDetails.isFiveStarsDod && bookingDetails.dealOfTheDaySubText}"><!-- ko ifnot: bookingDetails.isFiveStarsDod --> <i class="ficon ficon-16 ficon-alarm-clock"></i><!-- /ko--> <p class=dod-description data-bind="text: bookingDetails.dealOfTheDayText"></p> </div><!-- ko if: !ko.unwrap(bookingDetails.isFiveStarsDod) || ko.unwrap(bookingDetails.dealOfTheDaySubText) --> <div class=dod-right-info data-bind="css: { \'with-five-stars\': bookingDetails.isFiveStarsDod}"><!-- ko if: bookingDetails.dealOfTheDaySubText --> <div class=dod-subtext data-bind="text: bookingDetails.dealOfTheDaySubText"></div><!-- /ko--><!-- ko ifnot: bookingDetails.isFiveStarsDod --> <div class=timer-bigger data-bind="text: timeElapsed"></div><!-- /ko--> </div><!-- /ko--> </div> </div><!-- /ko--> <div class=hotel-information> <div class=hotel-info data-bind="css: { \'margin-discount\' : shouldShowDiscountBadge }"> <div class=image-breakdown><!-- ko if: isExperimentAddImageToHotelDetailsApplied && thumbnailImageUrlList().length > 0 --> <div class="media media-object media-object-197"> <div class="media-object hotel-image media-object-197" data-bind="style: {backgroundImage: \'url(\\\'\' + selectedHotelImageUrl() +\'\\\')\'}"></div> </div><!-- /ko --> <div class=hotel-infos><!-- ko if: bookingDetails.hotelDetails.bestSellerText --> <p class=best-seller data-element-name=best-seller-badge> <span data-bind="text: bookingDetails.hotelDetails.bestSellerText"></span> </p><!-- /ko--><!-- ko ifnot: shouldRemoveLinkFromHotelName  --> <a class=hotel-name data-element-name=hotel-name-link target=_blank data-bind="\r\n                    text: bookingDetails.hotelDetails.name,\r\n                    attr: { title: bookingDetails.hotelDetails.name, href: referralUrl }" href=#> </a><!-- /ko--><!-- ko if: shouldRemoveLinkFromHotelName  --> <span class=hotel-name data-element-name=hotel-name-no-link data-bind="\r\n\t\t\t\t\ttext: bookingDetails.hotelDetails.name,\r\n\t\t\t\t\tattr: { title: bookingDetails.hotelDetails.name }"> </span><!-- /ko--> <div><!-- ko if: bookingDetails.shouldShowAgodaHomesLogo --> <p class=agoda-homes-badge> <i class="ficon ficon-logo-ah"></i> <span data-bind="text: bookingDetails.agodaHomesText()"></span> </p><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i class="ficon text-warning ficon-s ficon-right hotel-star-rating" data-bind="css: bookingDetails.hotelDetails.starRatingFontIcon() + \' \' + bookingDetails.hotelDetails.starRatingColor(),\r\n                    popover : starRatingPopoverBindingOptions"> </i><!-- /ko--><!-- ko ifnot: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i class="ficon text-warning ficon-s ficon-right hotel-star-rating" data-bind="css: \'ficon-star-\' + bookingDetails.hotelDetails.starRating()"> </i><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.isPreferredPartnerProgram --><!-- remove on integration of MIN-11601 --> <i id=pppIcon class="ficon ficon-right ficon-thumb-up text-success hotel-star-rating" data-bind="popover: agodaPreferredHotelPopoverBindingOptions"> </i><!-- /ko--> </div> <div class=hotel-address> <span class=address data-bind="text: bookingDetails.hotelDetails.address"></span><!-- ko if: isShowWhatsNearBy --><!-- ko ifnot: bookingDetails.hotelDetails.locationReview  --><!-- ko if: bookingDetails.hotelDetails.whatsNearByText  --> <span class=whats-near-by data-bind="text: bookingDetails.hotelDetails.whatsNearByText, popover: whatsNearByPopoverBindingOptions"></span><!-- /ko--><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.locationReview  --> <div class=icon-message-container> <i id=pinIcon class="ficon ficon-16 ficon-left ficon-pin-excellent"></i> <span class=location data-bind="text: bookingDetails.hotelDetails.locationReview"></span><!-- ko if: bookingDetails.hotelDetails.whatsNearByText  --> <span class=whats-near-by data-bind="text: bookingDetails.hotelDetails.whatsNearByText, popover: whatsNearByPopoverBindingOptions"></span><!-- /ko--> </div><!-- /ko--><!-- /ko--><!-- ko ifnot: isShowWhatsNearBy --><!-- ko if: bookingDetails.hotelDetails.locationReview  --> <span class=location data-bind="text: bookingDetails.hotelDetails.locationReview"></span><!-- /ko--><!-- /ko--> </div> </div> </div> </div> </div><!-- ko if: shouldShowDiscountBadge  --> <div class="crossout-discount-ribbon hidden-xs hidden-sm" data-bind="foreach: bookingDetails.formattedCrossOutRateDiscountOrderedTexts, css: { \'with-dod\': bookingDetails.dealOfTheDayText, \'with-bestSeller\': bookingDetails.hotelDetails.bestSellerText }"> <div data-bind="text: $data, class: $parent.containsNumber($data) ? \'discount-number\' : \'discount-text\'"></div> </div><!-- /ko --><!-- ko if: ko.unwrap(isTablet) --> <div class=room-information> <dl class="dl-horizontal dl-horizontal-left"> <dt data-bind="text: bookingDetails.checkinText() + \' :\'"></dt> <dd id=checkin data-bind="text: bookingDetails.checkin"></dd> <dt data-bind="text: bookingDetails.checkoutText() + \' :\'"></dt> <dd id=checkout data-bind="text: bookingDetails.checkout"></dd> <dt data-bind="text: bookingDetails.stayText() + \' :\'"></dt> <dd id=occupancyDetails class=occupancy-details data-bind="text: bookingDetails.occupancy"></dd><!-- ko if:bookingDetails.isMaxOccupancyWithChildren && bookingDetails.capacity --> <dt data-bind="text: bookingDetails.capacityText() + \' :\'"></dt> <dd id=capacity data-bind="text: bookingDetails.capacity"></dd><!-- /ko --><!-- ko if: isShowClickToCheckText && bookingDetails.bookingStatusText --> <dt data-bind="text: bookingDetails.bookingStatusText"></dt> <dd id=pending-host class=room data-bind="html: bookingDetails.clickToCheckText"></dd><!-- /ko --> </dl> </div><!-- /ko --><!-- ko if: bookingDetails.hotelDetails.similarPropertiesSoldoutText --> <div class=soldoutMessage data-element-name=similar-propreties-soldout data-bind="attr: { data-message-value: bookingDetails.hotelDetails.numberOfSimilarPropertiesSoldout }"> <span class=arrow-up></span> <span data-bind="html: bookingDetails.hotelDetails.similarPropertiesSoldoutText"></span> </div><!-- /ko --> </div> <script type=text/html id=hotelWhatsNearByPopover><div data-bind="foreach: { data: placesOfInterest.placesOfInterestProperties(), as: \'category\' }">\r\n\t\t<div class="col-sm-6">\r\n\t\t\t<p class="header" data-bind="text: category.categoryName"></p>\r\n\r\n\t\t\t<p class="items" data-bind="foreach: { data: category.places, as: \'place\' }">\r\n\t\t\t\t<span data-bind="text: name() + \' - \' + distanceDisplay()"></span>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div></script>'},function(e,t,n){(function(t){"use strict";var i=n(86),a=n(11),o=n(88),r=n(96),s=n(9),l=n(89),d=n(153),c=n(154),p=n(91),u=function(){function e(e){var n=this;if(this.whatsNearByPopover=function(){if(n.isShowWhatsNearBy){var e={placesOfInterest:n.bookingDetails.hotelDetails.placesOfInterest};n.whatsNearByPopoverBindingOptions=new l,n.whatsNearByPopoverBindingOptions.template=r.HOTEL_WHATSNEARBY_POPOVER,n.whatsNearByPopoverBindingOptions.data=e,n.whatsNearByPopoverBindingOptions.options={container:"body",placement:"auto",trigger:"hover",
title:"",template:'\n                    <div class="popover what-is-nearby-popover-container">\n                        <div class="arrow position-left"></div>\n                        <h3 class="popover-title"></h3>\n                        <div class="popover-content"></div>\n                    </div>\n                ',html:!0}}},this.setDealOfTheDayTimer=function(){n.bookingDetails.dealOfTheDayText&&(n.dodExpiry=n.getDodExpiryDate(0),n.timeElapsed=t.observable(n.getTimeElapsedAsHourMinuteSecond()),n.dodIntervalTimer=window.setInterval(function(){return n.tick()},1e3))},this.tick=function(){var e=n.getTimeElapsedAsHourMinuteSecond();"00:00:00"===e&&clearInterval(n.dodIntervalTimer),n.timeElapsed(e)},this.getTimeElapsedAsHourMinuteSecond=function(){var e=n.dodExpiry.getTime()-(new Date).getTime(),t=11,i=19;return new Date(e).toISOString().slice(t,i)},this.getDodExpiryDate=function(e){var t=new Date,n=t.getHours(),i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,0,0);return n>=0&&n<e?i:(i.setDate(i.getDate()+1),i)},this.bookingDetails=e.bookingDetails,this.isBetterLayoutForReviews=e.isBetterLayoutForReviews,this.isShowClickToCheckText=e.isShowClickToCheckText,this.referralUrl=e.referralUrl,this.isExperimentAddImageToHotelDetailsApplied=i.isApplied(o.AddImageToHotelDetails),this.isCrossOutRateDiscountRibbonVisible=t.unwrap(e.bookingDetails.formattedCrossOutRateDiscountOrderedTexts)&&e.bookingDetails.formattedCrossOutRateDiscountOrderedTexts().length>0,this.shouldShowDiscountBadge=this.isCrossOutRateDiscountRibbonVisible&&(this.isBetterLayoutForReviews||this.bookingDetails.hotelDetails.reviewScore()<7),this.bookingDetails.hotelDetails.agodaPreferredHotelText&&(this.agodaPreferredHotelPopoverBindingOptions=new l,this.agodaPreferredHotelPopoverBindingOptions.options.content=this.bookingDetails.hotelDetails.agodaPreferredHotelText),t.unwrap(this.bookingDetails.hotelDetails.isPapiStarRatingApplied)){var a=t.unwrap(this.bookingDetails.hotelDetails.starRatingTooltipContent);a&&(this.starRatingPopoverBindingOptions=new l,this.starRatingPopoverBindingOptions.options.content=this.bookingDetails.hotelDetails.starRatingTooltipContent)}this.isMobile=s.getPageData().jsonViewModel.isMobile,this.isTablet=!s.getPageData().jsonViewModel.isPhone&&this.isMobile,this.setDealOfTheDayTimer(),this.isRedesignedCheckinCheckoutOnMobileExperimentEnabled=i.isApplied(o.RedesignedCheckinCheckoutOnMobile),this.isShowWhatsNearBy=s.getFeature(p.WhatsNearByOnBookingForm),this.shouldRemoveLinkFromHotelName=!(s.getPageData().jsonViewModel.progress===d.Typ),this.whatsNearByPopover(),this.isDesktop=!(s.getPageData().jsonViewModel&&s.getPageData().jsonViewModel.isMobile),this.isNotTYP=!(s.getPageData().jsonViewModel.progress===d.Typ),this.isHotelAndRoomDetailsCombine=i.isApplied(o.CutTheRightPanelDonwToBeAllAboveTheFold)&&this.isDesktop&&this.isNotTYP,this.thumbnailImageUrlList=t.observable([]),this.selectedHotelImageUrl=t.observable(""),this.isExperimentAddImageToHotelDetailsApplied&&e.bookingDetails.hotelDetails.hotelThumbnailUrls().length>0&&(this.thumbnailImageUrlList(e.bookingDetails.hotelDetails.hotelThumbnailUrls().slice(0,4)),this.selectedHotelImageUrl(this.thumbnailImageUrlList()[0]))}return e.prototype.renderComplete=function(){t.postbox.publish(a.SEND_CRITICAL_MARK,c.BookingDetails)},e.prototype.containsNumber=function(e){return null!=e.match(/\d+/g)},e}();e.exports=u}).call(t,n(3))},function(e,t){e.exports='<div class="panel panel-default hotel-details" data-bind="css: { \'with-dod\': bookingDetails.dealOfTheDayText && !isHotelAndRoomDetailsCombine,\r\n                       \'with-combine\': isHotelAndRoomDetailsCombine\r\n}"><!-- ko if: bookingDetails.dealOfTheDayText --> <div class=dod-container> <div class=dod-content> <div class=dod-left-info data-bind="css: { \'with-five-stars\': bookingDetails.isFiveStarsDod, \'with-half-width\': bookingDetails.isFiveStarsDod && bookingDetails.dealOfTheDaySubText}"><!-- ko ifnot: bookingDetails.isFiveStarsDod --> <i class="ficon ficon-16 ficon-alarm-clock"></i><!-- /ko--> <p class=dod-description data-bind="text: bookingDetails.dealOfTheDayText"></p> </div><!-- ko if: !ko.unwrap(bookingDetails.isFiveStarsDod) || ko.unwrap(bookingDetails.dealOfTheDaySubText) --> <div class=dod-right-info data-bind="css: { \'with-five-stars\': bookingDetails.isFiveStarsDod}"><!-- ko if: bookingDetails.dealOfTheDaySubText --> <div class=dod-subtext data-bind="text: bookingDetails.dealOfTheDaySubText"></div><!-- /ko--><!-- ko ifnot: bookingDetails.isFiveStarsDod --> <div class=timer-bigger data-bind="text: timeElapsed"></div><!-- /ko--> </div><!-- /ko--> </div> </div><!-- /ko--> <div class=hotel-information><!-- ko if: bookingDetails.hotelDetails.bestSellerText --> <p class=best-seller data-element-name=best-seller-badge> <span data-bind="text: bookingDetails.hotelDetails.bestSellerText"></span> </p><!-- /ko--> <div data-bind="css: { \'margin-discount\' : shouldShowDiscountBadge }"><!-- ko ifnot: shouldRemoveLinkFromHotelName  --> <a class=hotel-name data-element-name=hotel-name-link target=_blank data-bind="\r\n                    text: bookingDetails.hotelDetails.name,\r\n                    attr: { title: bookingDetails.hotelDetails.name, href: referralUrl }" href=#> </a><!-- /ko--><!-- ko if: shouldRemoveLinkFromHotelName  --> <span class=hotel-name data-element-name=hotel-name-no-link data-bind="\r\n\t\t\t\t\ttext: bookingDetails.hotelDetails.name,\r\n\t\t\t\t\tattr: { title: bookingDetails.hotelDetails.name }"> </span><!-- /ko--> </div> <div><!-- ko if: bookingDetails.shouldShowAgodaHomesLogo --> <p class=agoda-homes-badge> <i class="ficon ficon-logo-ah"></i> <span data-bind="text: bookingDetails.agodaHomesText()"></span> </p><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i class="ficon text-warning ficon-s ficon-right hotel-star-rating" data-bind="css: bookingDetails.hotelDetails.starRatingFontIcon() + \' \' + bookingDetails.hotelDetails.starRatingColor(),\r\n                    popover : starRatingPopoverBindingOptions"> </i><!-- /ko--><!-- ko ifnot: bookingDetails.hotelDetails.isPapiStarRatingApplied --> <i class="ficon text-warning ficon-s ficon-right hotel-star-rating" data-bind="css: \'ficon-star-\' + bookingDetails.hotelDetails.starRating()"> </i><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.isPreferredPartnerProgram --><!-- remove on integration of MIN-11601 --> <i id=pppIcon class="ficon ficon-right ficon-thumb-up text-success hotel-star-rating" data-bind="popover: agodaPreferredHotelPopoverBindingOptions"> </i><!-- /ko--> </div> <div class=hotel-address> <span class=address data-bind="text: bookingDetails.hotelDetails.address"></span><!-- ko if: isShowWhatsNearBy --><!-- ko ifnot: bookingDetails.hotelDetails.locationReview  --><!-- ko if: bookingDetails.hotelDetails.whatsNearByText  --> <span class=whats-near-by data-bind="text: bookingDetails.hotelDetails.whatsNearByText, popover: whatsNearByPopoverBindingOptions"></span><!-- /ko--><!-- /ko--><!-- ko if: bookingDetails.hotelDetails.locationReview  --> <div class=icon-message-container> <i id=pinIcon class="ficon ficon-16 ficon-left ficon-pin-excellent"></i> <span class=location data-bind="text: bookingDetails.hotelDetails.locationReview"></span><!-- ko if: bookingDetails.hotelDetails.whatsNearByText  --> <span class=whats-near-by data-bind="text: bookingDetails.hotelDetails.whatsNearByText, popover: whatsNearByPopoverBindingOptions"></span><!-- /ko--> </div><!-- /ko--><!-- /ko--><!-- ko ifnot: isShowWhatsNearBy --><!-- ko if: bookingDetails.hotelDetails.locationReview  --> <span class=location data-bind="text: bookingDetails.hotelDetails.locationReview"></span><!-- /ko--><!-- /ko--> </div> </div><!-- ko if: shouldShowDiscountBadge  --> <div class="crossout-discount-ribbon hidden-xs hidden-sm" data-bind="foreach: bookingDetails.formattedCrossOutRateDiscountOrderedTexts, css: { \'with-dod\': bookingDetails.dealOfTheDayText, \'with-bestSeller\': bookingDetails.hotelDetails.bestSellerText }"> <div data-bind="text: $data, class: $parent.containsNumber($data) ? \'discount-number\' : \'discount-text\'"></div> </div><!-- /ko --><!-- ko if: ko.unwrap(isTablet) --> <div class=room-information> <dl class="dl-horizontal dl-horizontal-left"> <dt data-bind="text: bookingDetails.checkinText() + \' :\'"></dt> <dd id=checkin data-bind="text: bookingDetails.checkin"></dd> <dt data-bind="text: bookingDetails.checkoutText() + \' :\'"></dt> <dd id=checkout data-bind="text: bookingDetails.checkout"></dd> <dt data-bind="text: bookingDetails.stayText() + \' :\'"></dt> <dd id=occupancyDetails class=occupancy-details data-bind="text: bookingDetails.occupancy"></dd><!-- ko if:bookingDetails.isMaxOccupancyWithChildren && bookingDetails.capacity --> <dt data-bind="text: bookingDetails.capacityText() + \' :\'"></dt> <dd id=capacity data-bind="text: bookingDetails.capacity"></dd><!-- /ko --><!-- ko if: isShowClickToCheckText && bookingDetails.bookingStatusText --> <dt data-bind="text: bookingDetails.bookingStatusText"></dt> <dd id=pending-host class=room data-bind="html: bookingDetails.clickToCheckText"></dd><!-- /ko --> </dl> </div><!-- /ko --><!-- ko if: bookingDetails.hotelDetails.similarPropertiesSoldoutText --> <div class=soldoutMessage data-element-name=similar-propreties-soldout data-bind="attr: { data-message-value: bookingDetails.hotelDetails.numberOfSimilarPropertiesSoldout }"> <span class=arrow-up></span> <span data-bind="html: bookingDetails.hotelDetails.similarPropertiesSoldoutText"></span> </div><!-- /ko --> </div> <script type=text/html id=hotelWhatsNearByPopover><div data-bind="foreach: { data: placesOfInterest.placesOfInterestProperties(), as: \'category\' }">\r\n        <div class="col-sm-6">\r\n            <p class="header" data-bind="text: category.categoryName"></p>\r\n\r\n            <p class="items" data-bind="foreach: { data: category.places, as: \'place\' }">\r\n                <span data-bind="text: name() + \' - \' + distanceDisplay()"></span>\r\n            </p>\r\n        </div>\r\n    </div></script>'},function(e,t){e.exports='<div class="well special-requests-room-and-bed"> <span class=title-text data-bind="text: specialRequests.selectYourSmokingPreferenceText"></span> <div class="form-group no-padding"> <div class=form-column> <input type=radio name=smoking-preference id=non-smoking-radio data-bind="checkedValue: 1, checked: smokingRoomPreferenceChoice"/> <label for=non-smoking-radio data-element-name=non-smoking-preference> <span class=radio-check></span> <i class="ficon ficon-20 ficon-non-smoking-room"></i> <span data-bind="text: specialRequests.nonSmokingRoomText"></span> </label> </div> <div class=form-column> <input type=radio name=smoking-preference id=smoking-radio data-bind="checkedValue: 2, checked: smokingRoomPreferenceChoice"/> <label for=smoking-radio data-element-name=smoking-preference> <span class=radio-check></span> <i class="ficon ficon-20 ficon-smoking-area"></i> <span data-bind="text: specialRequests.smokingRoomText"></span> </label> </div> </div> <span class=title-text data-bind="text: specialRequests.selectYourBedConfigurationText"></span> <div class="form-group no-padding"> <div class=form-column> <input type=radio name=bed-type-preference id=king-bed-radio data-bind="checkedValue: 1, checked: bedPreferenceChoice"/> <label for=king-bed-radio data-element-name=king-bed-type-preference> <span class=radio-check></span><!-- ko if: specialRequests.isExperimentIKKI7807Applied --> <i class="ficon ficon-20 ficon-bed"></i><!-- /ko --><!-- ko ifnot: specialRequests.isExperimentIKKI7807Applied --> <i class="ficon ficon-20 ficon-king-bed"></i><!-- /ko --> <span data-bind="text: specialRequests.isRequestLargeBedText"></span> </label> </div> <div class=form-column> <input type=radio name=bed-type-preference id=twin-bed-radio data-bind="checkedValue: 2, checked: bedPreferenceChoice"/> <label for=twin-bed-radio data-element-name=twin-bed-type-preference> <span class=radio-check></span><!-- ko if: specialRequests.isExperimentIKKI7807Applied --> <i class="ficon ficon-20 ficon-twin-bed"></i><!-- /ko --><!-- ko ifnot: specialRequests.isExperimentIKKI7807Applied --> <i class="ficon ficon-20 ficon-single-bed"></i> <i class="ficon ficon-20 ficon-single-bed"></i><!-- /ko --> <span data-bind="text: specialRequests.isRequestTwinBedsText"></span> </label> </div> </div><!-- ko if: isEarlyCheckInToggleApplied --> <span class=title-text data-bind="text: specialRequests.selectYourCheckInTimeText"></span> <div class="form-group no-padding"> <div class=form-column> <input type=radio name=checkin-preference id=early-checkin-radio data-bind="checkedValue: 1, checked: checkInPreferenceChoice"/> <label for=early-checkin-radio data-element-name=early-checkin-preference> <span class=radio-check></span> <i class="ficon ficon-20 ficon-early-check-in"></i> <span data-bind="text: specialRequests.iwouldLikeToCheckinEarlyText"></span> </label> </div> <div class=form-column> <input type=radio name=checkin-preference id=late-checkin-radio data-bind="checkedValue: 2, checked: checkInPreferenceChoice"/> <label for=late-checkin-radio data-element-name=late-checkin-preference> <span class=radio-check></span> <i class="ficon ficon-20 ficon-late-check-out"></i> <span data-bind="text: specialRequests.iwillBeCheckingInLateText"></span> </label> </div> </div><!-- /ko --><!-- ko if: isExperimentShowMessageOnSpecialRequestApplied && ko.unwrap(messageWarning) --> <div class=warning-message-container data-element-name=special-request-warning-message-container> <i class="ficon ficon-16 ficon-information" data-element-name=special-request-warning-icon></i> <span class=warning-message data-bind="text: messageWarning" data-element-name=special-request-warning-message> </span> </div><!-- /ko --><!-- ko if: isExpandedSpecialRequestsWithCheckbox --> <div class="divider-dotted-bottom m-b-0 p-b-0"></div><!-- ko component: {\r\n\t\tname: "special-requests",\r\n\t\tparams: {\r\n\t\t\tspecialRequests: specialRequests,\r\n\t\t\tisSpecialRequestsCollapsed: false,\r\n\t\t\thasFocusOnSpecialRequestTextArea: false\r\n\t\t}\r\n\t\t} --><!-- /ko --><!-- /ko --> </div>'},function(e,t,n){(function(t){"use strict";var i=n(388),a=n(88),o=n(86),r=function(){function e(e){this.specialRequests=e.specialRequests,this.isExpandedSpecialRequestsWithCheckbox=o.isApplied(a.ExpandedSpecialRequestsWithCheckbox),this.init(),this.subscribe()}return e.prototype.dispose=function(){this.smokingRoomPreferenceChoiceSubscriber&&this.smokingRoomPreferenceChoiceSubscriber.dispose(),this.bedPreferenceChoiceSubscriber&&this.bedPreferenceChoiceSubscriber.dispose(),this.bedPreferenceChoiceSubscriber&&this.bedPreferenceChoiceSubscriber.dispose()},e.prototype.init=function(){this.isEarlyCheckInToggleApplied=o.isApplied(a.EarlyCheckInCheckoutToggle),t.isObservable(this.smokingRoomPreferenceChoice)||(this.smokingRoomPreferenceChoice=t.observable(i.SmokingPreferenceType.None)),t.unwrap(this.specialRequests.isRequestSmokingOption)&&(t.unwrap(this.specialRequests.specialRequest.isRequestNonSmokingRoom)===!0?this.smokingRoomPreferenceChoice(i.SmokingPreferenceType.NonSmoking):t.unwrap(this.specialRequests.specialRequest.isRequestNonSmokingRoom)===!1&&this.smokingRoomPreferenceChoice(i.SmokingPreferenceType.Smoking)),t.isObservable(this.bedPreferenceChoice)||(this.bedPreferenceChoice=t.observable(i.BedPreferenceType.None)),t.unwrap(this.specialRequests.specialRequest.isRequestLargeBed)?this.bedPreferenceChoice(i.BedPreferenceType.OneLarge):t.unwrap(this.specialRequests.specialRequest.isRequestTwinBeds)&&this.bedPreferenceChoice(i.BedPreferenceType.TwoTwin),this.isEarlyCheckInToggleApplied&&(t.isObservable(this.checkInPreferenceChoice)||(this.checkInPreferenceChoice=t.observable(i.CheckInPreferenceType.None))),this.isExperimentShowMessageOnSpecialRequestApplied=!!this.specialRequests.smokingOption&&!!this.specialRequests.bedOption,this.isExperimentShowMessageOnSpecialRequestApplied&&(this.roomBedOption=t.unwrap(this.specialRequests.bedOption),this.roomSmokingOption=t.unwrap(this.specialRequests.smokingOption))},e.prototype.subscribe=function(){var e=this;this.smokingRoomPreferenceChoice&&(this.smokingRoomPreferenceChoiceSubscriber=this.smokingRoomPreferenceChoice.subscribe(function(n){t.isObservable(e.specialRequests.isRequestSmokingOption)?e.specialRequests.isRequestSmokingOption(!0):t.observable(!0),e.specialRequests.specialRequest.isRequestNonSmokingRoom(n===i.SmokingPreferenceType.NonSmoking),e.specialRequests.specialRequest.isRequestSmokingRoom(n===i.SmokingPreferenceType.Smoking)})),this.bedPreferenceChoice&&(this.bedPreferenceChoiceSubscriber=this.bedPreferenceChoice.subscribe(function(t){e.specialRequests.specialRequest.isRequestLargeBed(t===i.BedPreferenceType.OneLarge),e.specialRequests.specialRequest.isRequestTwinBeds(t===i.BedPreferenceType.TwoTwin)})),this.isEarlyCheckInToggleApplied&&this.checkInPreferenceChoice&&(this.checkInPreferenceChoiceSubscriber=this.checkInPreferenceChoice.subscribe(function(t){e.specialRequests.specialRequest.isRequestCheckinEarly(t===i.CheckInPreferenceType.EarlyCheckIn),e.specialRequests.specialRequest.isRequestCheckinLate(t===i.CheckInPreferenceType.LateCheckIn)})),this.isExperimentShowMessageOnSpecialRequestApplied&&this.smokingRoomPreferenceChoice&&this.bedPreferenceChoice&&(this.messageWarning=t.computed(function(){var n=t.unwrap(e.bedPreferenceChoice),a=t.unwrap(e.smokingRoomPreferenceChoice),o=n!==i.BedPreferenceType.None&&n!==e.roomBedOption&&e.roomBedOption!==i.SupportedBedOption.Unknown&&e.roomBedOption!==i.SupportedBedOption.Both,r=a!==i.SmokingPreferenceType.None&&a!==e.roomSmokingOption&&e.roomSmokingOption!==i.SupportedSmokingOption.Unknown;return r||o?r&&o?t.unwrap(e.specialRequests.messageWarningForSmokingAndBed)?t.unwrap(e.specialRequests.messageWarningForSmokingAndBed):t.unwrap(e.messageWarning):r?t.unwrap(e.specialRequests.messageWarningForSmoking):t.unwrap(e.specialRequests.messageWarningForBed):null},this))},e}();e.exports=r}).call(t,n(3))},function(e,t){"use strict";!function(e){e[e.Unknown=0]="Unknown",e[e.LargeBed=1]="LargeBed",e[e.TwinBed=2]="TwinBed",e[e.Both=3]="Both"}(t.SupportedBedOption||(t.SupportedBedOption={})),t.SupportedBedOption,!function(e){e[e.Unknown=0]="Unknown",e[e.NonSmoking=1]="NonSmoking",e[e.Smoking=2]="Smoking"}(t.SupportedSmokingOption||(t.SupportedSmokingOption={})),t.SupportedSmokingOption,!function(e){e[e.None=0]="None",e[e.NonSmoking=1]="NonSmoking",e[e.Smoking=2]="Smoking"}(t.SmokingPreferenceType||(t.SmokingPreferenceType={})),t.SmokingPreferenceType,!function(e){e[e.None=0]="None",e[e.OneLarge=1]="OneLarge",e[e.TwoTwin=2]="TwoTwin"}(t.BedPreferenceType||(t.BedPreferenceType={})),t.BedPreferenceType,!function(e){e[e.None=0]="None",e[e.EarlyCheckIn=1]="EarlyCheckIn",e[e.LateCheckIn=2]="LateCheckIn"}(t.CheckInPreferenceType||(t.CheckInPreferenceType={})),t.CheckInPreferenceType},function(e,t){e.exports='<div class="component-selector container"><!-- ko ifnot: shouldAlomostDoneTextApplied--><!-- ko if: lastStepYouAreAlmostDoneText --><!-- ko component: {\r\n            name: "almost-done",\r\n            params: {\r\n                almostDoneText: lastStepYouAreAlmostDoneText\r\n            }\r\n        } --><!-- /ko --><!-- /ko --><!-- /ko --> <div class=row><!-- ko if: headerComponent --> <div data-bind="component: headerComponent"></div><!-- /ko --> </div> <div class=row> <div class=col-lg-6> <div class="form-group has-feedback" data-bind="validationElement: selectedKey"><!-- ko if: isDesktop --><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=paymentMethod class=control-label data-bind="text: params.selectorTitle"></label><!-- /ko --><!-- ko component: {\r\n                    name: "payment-method-dropdown",\r\n                    params: {\r\n                        value: selectedKey,\r\n                        options: params.components,\r\n                        dataElementName: getDropDownDataElementName(),\r\n                        labelText: params.selectorTitle\r\n                    }\r\n                } --><!-- /ko --><!-- ko ifnot: isAddMoreLifeExperiment --> <i class="ficon form-control-feedback payment-method-dropdown-feedback"></i><!-- /ko --><!-- /ko --><!-- ko ifnot: isDesktop --><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=paymentMethod class=control-label data-bind="text: params.selectorTitle"></label> <select class="form-control paymentMethod" data-bind="options: params.components,\r\n                        optionsText: \'text\',\r\n                        optionsValue: \'optionsValue\',\r\n                        optionsCaption: params.defaultOptionText,\r\n                        value: selectedKey,\r\n                        valueAllowUnset: true,\r\n                        allowEmpty,\r\n                        selectElement,\r\n                        attr: {\r\n                            data-element-name: getDropDownDataElementName(),\r\n                            id: params.elementId,\r\n                            name: params.elementName\r\n                        }"></select> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                        name: "form-dropdown",\r\n                        params : {\r\n                            labelText: params.selectorTitle,\r\n                            value: selectedKey,\r\n                            options: params.components,\r\n                            optionsText: \'text\',\r\n                            optionsValue: \'optionsValue\',\r\n                            valueAllowUnset: true,\r\n                            emptyOptionLabel: params.defaultOptionText,\r\n                            css: { \'has-value\': ko.unwrap(selectedKey) != null },\r\n                            inputAttributes: {\r\n                                name: params.elementName,\r\n                                id: params.elementId,\r\n                                \'data-element-name\': getDropDownDataElementName()\r\n                            }\r\n                        }\r\n                    } --><!-- /ko --><!-- /ko --><!-- /ko --> </div> </div> </div> <div class=row><!-- ko if: selectedComponent --> <div data-bind="component: selectedComponent"></div><!-- /ko --> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(10),a=n(86),o=n(88),r=n(90),s=n(9),l=n(91),d=n(391),c=n(392),p=function(){function e(e){var n=this;if(this.getDropDownDataElementName=function(){return i.camelToDash(n.params.elementId)},null!==e&&"paymentMethod-counterPayment"===e.elementId&&a.isApplied(o.EnableJapanConvenientStoreFakePaymentOptions)&&null!==t.unwrap(e.components)&&e.components.length>0){var p=d.deepCopy(e.components[0]);"0"!==p.key&&(p.text=e.pleaseSelectOneText,p.value=t.observable(0),p.key="0",p.optionsValue="0",p.logoClassList=[],p.name="redirect-payment",e.components.splice(0,0,p)),e.selectedKey("0")}this.params=e,this.selectedKey=this.params.selectedKey,this.headerComponent=this.params.headerComponent,this.lastStepYouAreAlmostDoneText=this.params.lastStepYouAreAlmostDoneText,this.experimentApiService=new r,this.isAddMoreLifeExperiment=s.getFeature(l.AddMoreLifeToBookingForm),this.isDesktop=!(s.getPageData().jsonViewModel&&s.getPageData().jsonViewModel.isMobile),this.shouldAlomostDoneTextApplied=this.isDesktop&&a.isApplied(o.MakeAlmostDoneForCreditDebitCardOnly)&&this.params.elementId!==c.ELEMENT_PAYMENT_CREDIT_DEBIT_CARD,this.selectedComponent=t.observable(this._findSelectedComponent(t.unwrap(this.selectedKey),t.unwrap(this.params.components),t.unwrap(this.params.defaultComponent))),this.initSubscriber()}return e.prototype.initSubscriber=function(){var e=this;this._selectedComponentSubscription=this.selectedKey.subscribe(function(n){e.selectedComponent(e._findSelectedComponent(n,t.unwrap(e.params.components),t.unwrap(e.params.defaultComponent)))})},e.prototype.dispose=function(){this._selectedComponentSubscription&&this._selectedComponentSubscription.dispose()},e.prototype._findSelectedComponent=function(e,t,n){var i=t.filter(function(t){return t.key===e});return 1===i.length?i[0]:n},e}();e.exports=p}).call(t,n(3))},function(e,t){"use strict";var n=function(){function e(){}return e.deepCopy=function(e){return JSON.parse(JSON.stringify(e))},e}();e.exports=n},function(e,t){"use strict";var n;!function(e){var t;!function(e){e.TYPE_CREDIT_DEBIT_CARD="creditDebitCard",e.TYPE_DIGITAL_PAYMENT="digitalPayment",e.COMPONENT_ALMOST_DONE="almost-done",e.COMPONENT_DIRECT_CARD_PAYMENT="direct-card-wrapper",e.COMPONENT_MESSAGE_LIST="message-list",e.COMPONENT_PROMOTION_MESSAGE="promotion-message",e.COMPONENT_REDIRECT_PAYMENT="redirect-payment",e.COMPONENT_SAVED_CARD="saved-cards",e.COMPONENT_SELECTOR_COMPONENT="component-selector",e.COMPONENT_UNION_PAY_DEBIT_CARD="union-pay-debit-card",e.COMPONENT_WRAPPER_COMPONENT="component-wrapper",e.ELEMENT_PAYMENT_CREDIT_DEBIT_CARD="paymentMethod-creditDebitCard"}(t=e.constants||(e.constants={}))}(n||(n={})),e.exports=n.constants},function(e,t){e.exports='<div class=accordion-item data-bind="css: { \'active\': isActive() }"> <div class=header> <a role=button class=header-content data-bind="click: onHeaderClick, attr: { \'data-element-name\': headerElementName }"><!-- ko if: shouldShowRadioButton --> <span class=radio-check></span><!-- /ko --> <span class=header-title data-bind="text: headerTitle"></span><!-- ko if: headerIcons().length > 0 --> <ul class=payment-method-logos><!-- ko foreach:{ data:headerIcons, as: \'iconname\' }--> <li class="payment-logo payment-logo-s" data-bind="css: iconname, attr: { data-element-name: \'payment-logo-\'+iconname }"></li><!-- /ko --><!-- ko if: moreIconTextDesktop != "" --> <li class="payment-logo payment-logo-s more more-desktop"> <span data-element-name=payment-logo-more data-bind="text: moreIconTextDesktop"></span> </li><!-- /ko --><!-- ko if: moreIconTextTablet != "" --> <li class="payment-logo payment-logo-s more more-tablet"> <span data-element-name=payment-logo-more data-bind="text: moreIconTextTablet"></span> </li><!-- /ko --> </ul><!-- /ko --> </a> </div> <div class=collapsible-item data-bind="isExpand: isExpand,\r\n            attr: { aria-expanded: isCollapse() ? \'false\' : \'true\',\r\n                \'data-element-name\': bodyElementName }"><!-- ko if: isExpand --> <div class=collapsible-content data-bind="component: pageItem.item.body.component"></div><!-- /ko --> </div> </div>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){var n=this;this.subscribeEvents=function(){n.selectedCategoryIdSubscription=n.pageItem.selectedCategoryId.subscribe(function(e){n.isCollapse(e!==n.pageItem.item.itemId),n.isExpand(e===n.pageItem.item.itemId),n.isActive(e===n.pageItem.item.itemId)})},this.modifyHeaderIcons=function(e){if(!e||0===e.length)return t.observableArray([]);var i=e.length,a=i>n.desktopIconCount?i-n.desktopIconCount+1:0,o=i>n.tabletIconCount?i-n.tabletIconCount+1:0,r=e.map(function(e,t){return i>n.tabletIconCount&&t>=n.tabletIconCount-1?e+" more-desktop":e});return n.moreIconTextDesktop=a>0?"+"+a:"",n.moreIconTextTablet=o>0?"+"+o:"",t.observableArray(r.length<=n.desktopIconCount?r:r.slice(0,n.desktopIconCount-1))},this.getCategoryId=function(){return n.pageItem.item.itemId},this.onHeaderClick=function(){n.pageItem.onHeaderClick(n.getCategoryId())},this.dispose=function(){n.selectedCategoryIdSubscription&&n.selectedCategoryIdSubscription.dispose()},this.pageItem=e,this.desktopIconCount=8,this.tabletIconCount=4,this.headerElementName=t.observable(e.item.header.elementName),this.bodyElementName=t.observable(e.item.body.elementName),this.shouldShowRadioButton=t.observable(e.item.header.shouldShowRadioButton),this.isActive=t.observable(e.selectedCategoryId()===e.item.itemId),this.isCollapse=t.observable(e.selectedCategoryId()!==e.item.itemId),this.isExpand=t.observable(e.selectedCategoryId()===e.item.itemId),this.moreIconTextDesktop="",this.moreIconTextTablet="",this.headerTitle=t.observable(e.item.header.title),this.headerIcons=this.modifyHeaderIcons(e.item.header.content),this.subscribeEvents()}return e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div class=accordion-group><!-- ko if: page.group.title && page.group.title() !== "" --> <span class=group-title data-bind=text:page.group.title></span><!-- /ko --><!-- ko foreach: page.group.accordionItems --><!-- ko component: {\r\n        name: "accordion-item",\r\n        params: {\r\n            selectedCategoryId: $parent.page.selectedCategoryId,\r\n            item: $data,\r\n            onHeaderClick: $parent.page.onHeaderClick\r\n        }\r\n    } --><!-- /ko --><!-- /ko --> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.page=e}return e}();e.exports=n},function(e,t){e.exports='<div class=bf-accordion><!-- ko foreach: params.accordionGroups --><!-- ko component: {\r\n        name: "accordion-group",\r\n        params: {\r\n            selectedCategoryId: $parent.selectedCategoryId,\r\n            onHeaderClick: $parent.onHeaderClick,\r\n            group: $data,\r\n        }\r\n    } --><!-- /ko --><!-- /ko --> </div>'},function(e,t){"use strict";var n=function(){function e(e){var t=this;this.params=e,this.selectedCategoryId=this.params.defaultSelectedId,this.onHeaderClick=function(e){t.selectedCategoryId()!==e&&t.params.accordionChangeHandler(e)}}return e}();e.exports=n},function(e,t){e.exports='<div class=payment-methods-accordion><!-- ko component: {\r\n        name: "bf-accordion",\r\n        params: {\r\n            accordionChangeHandler: accordionHeaderChangeHandler,\r\n            accordionGroups: paymentCategoryView,\r\n            defaultSelectedId: selectedCategory\r\n        }\r\n    } --><!-- /ko --> </div>'},function(e,t,n){(function(t){"use strict";var i=n(81),a=n(11),o=n(401),r=n(21),s="0",l=function(){function e(e){this.params=e,this.selectedPaymentMethodKeyParam=this.params.paymentDetails.selectedPaymentMethod,this.paymentCategoryDescriptions=this.params.paymentDetails.paymentCategoryDescriptions,this.paymentChartOptionSelector=this.params.paymentDetails.paymentChargeOptionSelector?this.params.paymentDetails.paymentChargeOptionSelector.paymentChargeOption:null,this.initHandler(),this.initObservable(),this.initSubscriber();var n=this.params.errorMessage?t.unwrap(this.params.errorMessage):null;t.unwrap(this.selectedPaymentMethodKeyParam)?t.isObservable(this.selectedPaymentMethodKeyParam)&&t.validation.group(this.selectedPaymentMethodKeyParam).showAllMessages(!0):this.accordionHeaderChangeHandler(this.selectedCategory()),n&&t.isObservable(this.params.errorMessage)&&this.params.errorMessage(n)}return e.prototype.initObservable=function(){var e=t.unwrap(this.params.paymentDetails.paymentMethod.creditCardOnFileList);this.paymentCategorySource=t.observableArray(this.mapPaymentCategorySource(t.unwrap(this.paymentCategoryDescriptions),t.unwrap(this.params.paymentMethods),e&&e.length>0)),this.paymentCategoryView=t.observableArray(o.createPaymentCategoryGroups(this.getPaymentComponentParams(t.unwrap(this.paymentCategorySource),this.selectedPaymentMethodKeyParam,this.params,this.componentSelectorChangeHandler))),this.selectedCategory=t.observable(this.resolveDefaultCategory(t.unwrap(this.paymentCategorySource),t.unwrap(this.selectedPaymentMethodKeyParam)))},e.prototype.initSubscriber=function(){var e=this;this.subscriptionPaymentMethods=this.params.paymentMethods.subscribe(function(n){var i=t.unwrap(e.params.paymentDetails.paymentMethod.creditCardOnFileList);e.paymentCategorySource(e.mapPaymentCategorySource(t.unwrap(e.paymentCategoryDescriptions),n,i&&i.length>0)),e.accordionHeaderChangeHandler(e.resolveDefaultCategory(t.unwrap(e.paymentCategorySource),t.unwrap(e.selectedPaymentMethodKeyParam)))}),this.subscriptionPaymentCategoryView=this.paymentCategorySource.subscribe(function(t){e.paymentCategoryView(o.createPaymentCategoryGroups(e.getPaymentComponentParams(t,e.selectedPaymentMethodKeyParam,e.params,e.componentSelectorChangeHandler)));
}),this.subscriptionSelectedPaymentMethodKeyParam=this.selectedPaymentMethodKeyParam.subscribe(function(n){var i=e.getSelectedCategory(t.unwrap(e.paymentCategorySource),n);i&&e.selectedCategory(i)}),this.paymentChartOptionSelector&&(this.subscriptionPaymentChartOptionSelector=this.paymentChartOptionSelector.subscribe(function(){e.accordionHeaderChangeHandler(e.resolveDefaultCategory(t.unwrap(e.paymentCategorySource),t.unwrap(e.selectedPaymentMethodKeyParam)))}))},e.prototype.initHandler=function(){var e=this;this.accordionHeaderChangeHandler=function(n){if(e.selectedCategory(n),n===s)e.selectedPaymentMethodKeyParam(r.MySavedPaymentMethod+","+i.Unknown),t.validation.group(e.selectedPaymentMethodKeyParam).showAllMessages(!1),t.postbox.publish(a.SELECT_FIRST_CARD_OF_MY_SAVE_CARD);else{var o=t.unwrap(e.paymentCategorySource).filter(function(e){return e.key===n}),l=o.length>0?o[0]:null;l?e.selectedPaymentMethodKeyParam(t.unwrap(l.paymentMethods[0].key)):e.resetValues()}},this.componentSelectorChangeHandler=function(n){n===t.unwrap(e.selectedPaymentMethodKeyParam)?e.selectedPaymentMethodKeyParam.notifySubscribers():e.selectedPaymentMethodKeyParam(n)}},e.prototype.getPaymentComponentParams=function(e,t,n,i){return{availablePaymentCurrencies:n.availablePaymentCurrencies,categories:e,combinedCardTypes:n.combinedCardTypes,countrySelectList:n.countrySelectList,isAddMoreLifeExperiment:n.isAddMoreLifeExperiment,isDontShowPaymentMethodDropdown:n.isDontShowPaymentMethodDropdown,isFocused:n.isFocused,isRequireMoreGuestDetails:n.isRequireMoreGuestDetails,onSelect:i,paymentDetails:n.paymentDetails,responseFormattedPaymentAmount:n.responseFormattedPaymentAmount,selectedPaymentMethodKeyParam:t,selectedPaymentMethodObs:n.selectedPaymentMethodObs,isLoggedIn:n.isLoggedIn}},e.prototype.resolveDefaultCategory=function(e,t){var n=e&&e.length?e[0].key:null,i=this.getSelectedCategory(e,t);return i?i:n},e.prototype.mapPaymentCategorySource=function(e,n,i){var a=this;return e&&n?e.map(function(e,i){var o=t.unwrap(e.supportedCategories);return{key:i.toString(),name:t.unwrap(e.name),paymentMethods:a.filterPaymentMethodsFromCategories(n,o),supportedCategories:o,title:t.unwrap(e.titleText),logos:a.distinctLogos(a.getLogosFromFilteredPaymentMethods(n,o)),isSupportPaylaterOnly:t.unwrap(e.isSupportPaylaterOnly),isAllowEmptySelection:!1,defaultMessages:t.unwrap(e.defaultMessages)}}).filter(function(e){return e.paymentMethods.length>0}).filter(function(e){return e.key!==s||i}).map(function(e){return e.isAllowEmptySelection&&1===e.paymentMethods.length&&(e.isAllowEmptySelection=!1),e}):[]},e.prototype.getSelectedCategory=function(e,n){if(e&&e.length>0){var i=e.filter(function(e){if(e.paymentMethods.length>0){var i=e.paymentMethods.filter(function(e){return t.unwrap(e.key)===n});return i.length>0}return!1});return i.length>0?i[0].key:null}return null},e.prototype.getLogosFromFilteredPaymentMethods=function(e,n){return e.filter(function(e){return n.indexOf(e.category?t.unwrap(e.category):0)>=0}).map(function(e){return e.logoClass?e.logoClass():""}).reduce(function(e,t){return e.concat(t?t.split(" "):[])},[]).filter(function(e){return null!=e&&""!==e})},e.prototype.distinctLogos=function(e){if(e&&e.length>0){var t={};return e.forEach(function(e){t[e]=!0}),Object.keys(t)}return e},e.prototype.filterPaymentMethodsFromCategories=function(e,n){return e.filter(function(e){return t.unwrap(n).indexOf(e.category?t.unwrap(e.category):0)>=0})},e.prototype.resetValues=function(){this.selectedPaymentMethodKeyParam(null),t.validation.group(this.selectedPaymentMethodKeyParam).showAllMessages(!1)},e.prototype.dispose=function(){this.subscriptionPaymentMethods&&this.subscriptionPaymentMethods.dispose(),this.subscriptionPaymentCategoryView&&this.subscriptionPaymentCategoryView.dispose(),this.subscriptionSelectedCategory&&this.subscriptionSelectedCategory.dispose(),this.subscriptionSelectedPaymentMethodKeyParam&&this.subscriptionSelectedPaymentMethodKeyParam.dispose(),this.subscriptionPaymentChartOptionSelector&&this.subscriptionPaymentChartOptionSelector.dispose()},e}();e.exports=l}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var i=n(392),a=n(68),o=n(69),r=n(21),s=n(402),l=n(403),d=n(86),c=n(88),p=function(){function e(){}return e.createPaymentCategoryGroups=function(n){return[{title:t.observable(""),accordionItems:t.observableArray(e.createPaymentCategoryComponents(n).slice())}]},e.createPaymentCategoryComponents=function(n){return n.categories?n.categories.map(function(a){var o;return o=a.supportedCategories.indexOf(r.MySavedPaymentMethod)>=0?e.createWrapperComponent(i.COMPONENT_WRAPPER_COMPONENT,e.createPaymentComponent(a.paymentMethods[0],n)):n.isDontShowPaymentMethodDropdown&&a.supportedCategories.indexOf(r.Visa)>=0&&1===a.paymentMethods.length?t.unwrap(n.paymentDetails.lastStepYouAreAlmostDoneText)?e.createWrapperComponent(i.COMPONENT_WRAPPER_COMPONENT,e.createPaymentComponent(a.paymentMethods[0],n),e.createAlmostDoneMessageComponent(n.paymentDetails.lastStepYouAreAlmostDoneText)):e.createWrapperComponent(i.COMPONENT_WRAPPER_COMPONENT,e.createPaymentComponent(a.paymentMethods[0],n)):e.createPaymentSelectorComponent(a,n),{itemId:a.key,header:{title:1===n.categories.length?t.unwrap(n.paymentDetails.availablePaymentMethods):a.title,content:a.logos,elementName:l.PAYMENT_ACCORDION_HEADER+"-"+t.unwrap(a.name),shouldShowRadioButton:!(1===n.categories.length)},body:{component:o,elementName:l.PAYMENT_ACCORDION_BODY+"-"+t.unwrap(a.name)}}}):[]},e.createPaymentSelectorComponent=function(n,a){if(!n)return null;var o=a.paymentDetails,r=n.paymentMethods.map(function(t){return e.createPaymentComponent(t,a)});return r.length>0?{key:n.key,name:i.COMPONENT_SELECTOR_COMPONENT,params:{headerComponent:this.resolveComponent(n.name,t.unwrap(o.paymentDetailsMessages),t.unwrap(o.paymentMethod.isRedirectPaymentMethodOptionShown),t.unwrap(o.promotionDiscountInfo.isDisplayPromotionDiscountText),t.unwrap(o.promotionDiscountInfo.promotionDiscountLogoClass),o.promotionDiscountInfo.promotionDiscountText,t.unwrap(o.promotionDiscountInfo.isAlipayCampaign),o.promotionDiscountInfo.alipayCampaignMessageText,o.promotionDiscountInfo.alipayCampaignMessageTextPopoverOptions),components:r,defaultComponent:"0"!==n.key&&"1"!==n.key?t.observable(e.createMessageComponent([{messages:t.observableArray(n.defaultMessages)}],s.MessageComponentStyle.Bullet)):null,defaultOptionText:this.DisplayDefaultCaptionForPaymentMethod(n)?t.unwrap(o.paymentMethod.pleaseSelectOneText):null,elementId:l.PREFIX_PAYMENT_METHOD_ELEMENT_ID+"-"+n.name,elementName:l.PREFIX_PAYMENT_METHOD_ELEMENT_NAME,onSelect:a.onSelect,selectedKey:a.selectedPaymentMethodKeyParam,selectorError:t.unwrap(o.paymentMethod.pleaseSelectAMethodOfPaymentText),selectorTitle:t.unwrap(o.paymentMethod.selectPaymentMethodText),lastStepYouAreAlmostDoneText:o.lastStepYouAreAlmostDoneText,pleaseSelectOneText:o.paymentMethod.pleaseSelectOneText}}:null},e.createWrapperComponent=function(e,t,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),{key:e,name:i.COMPONENT_WRAPPER_COMPONENT,params:{bodyComponent:t,headerComponent:n,footerComponent:a}}},e.createPaymentComponent=function(e,n){if(!e)return null;var s=null,l=null,d=this.serializePaymentMethod(e),c=t.unwrap(e.value),p=a.determinePaymentMethodOption(c,!0),u=n.paymentDetails;switch(p){case o.DirectCard:switch(c){case r.UnionPayDebitCard:s=i.COMPONENT_UNION_PAY_DEBIT_CARD,l={isAddMoreLifeExperiment:n.isAddMoreLifeExperiment,isFocused:n.isFocused,payLaterDate:u.paymentChargeOptionSelector.payLaterDate,paymentChargeOption:u.paymentChargeOptionSelector.paymentChargeOption,paymentMethod:u.paymentMethod,selectedPaymentMethod:n.selectedPaymentMethodKeyParam,selectedPaymentMethodType:u.selectedPaymentMethodType,lastStepYouAreAlmostDoneText:u.lastStepYouAreAlmostDoneText};break;default:s=i.COMPONENT_DIRECT_CARD_PAYMENT,l={availablePaymentCurrencies:n.availablePaymentCurrencies,combinedCardTypes:n.combinedCardTypes,countrySelectList:n.countrySelectList,isAddMoreLifeExperiment:n.isAddMoreLifeExperiment,isFocused:n.isFocused,paymentDetails:u}}break;case o.RedirectCard:s=i.COMPONENT_REDIRECT_PAYMENT,l={paymentDetails:u,responseFormattedPaymentAmount:n.responseFormattedPaymentAmount,selectedPaymentMethodObs:n.selectedPaymentMethodObs,isRedesignPaymentCard:!0};break;case o.SavedCards:s=i.COMPONENT_SAVED_CARD,l={availablePaymentCurrencies:n.availablePaymentCurrencies,isFocused:n.isFocused,isRedesignPaymentCard:!0,paymentChargeOption:u.paymentChargeOptionSelector.paymentChargeOption,paymentMethod:u.paymentMethod,selectedPaymentMethod:n.selectedPaymentMethodKeyParam,selectedPaymentMethodType:u.selectedPaymentMethodType,lastStepYouAreAlmostDoneText:u.lastStepYouAreAlmostDoneText,isRequireMoreGuestDetails:n.isRequireMoreGuestDetails,cardsNotAcceptedText:u.cardsNotAcceptedText,isLoggedIn:n.isLoggedIn};break;default:return null}return{key:d,name:s,params:l,text:e.text,value:e.value,optionsValue:d,logoClassList:null!=t.unwrap(e.logoClass)?e.logoClass().split(" "):[]}},e.createMessageComponent=function(e,n){return void 0===n&&(n=s.MessageComponentStyle.None),e&&t.unwrap(e).length>0?{key:null,name:i.COMPONENT_MESSAGE_LIST,params:{messageGroups:e,style:n}}:null},e.createPromotionMessageComponent=function(e,t,n,a,o,r,s){return{key:null,name:i.COMPONENT_PROMOTION_MESSAGE,params:{isRedirectPaymentMethodOptionShown:e,isDisplayPromotionDiscountText:t,promotionDiscountLogoClass:n,promotionDiscountText:a,isAlipayCampaign:o,alipayCampaignMessageText:r,alipayCampaignMessageTextPopoverOptions:s}}},e.createAlmostDoneMessageComponent=function(e){return{key:null,name:i.COMPONENT_ALMOST_DONE,params:{almostDoneText:e}}},e.resolveComponent=function(t,n,a,o,r,s,l,d,c){switch(t){case i.TYPE_CREDIT_DEBIT_CARD:return e.createMessageComponent(n);case i.TYPE_DIGITAL_PAYMENT:return e.createPromotionMessageComponent(a,o,r,s,l,d,c);default:return null}},e.serializePaymentMethod=function(e){return e.value()+","+(e.cardClass()||0)},e.DisplayDefaultCaptionForPaymentMethod=function(e){if(null!==e){if(e.isAllowEmptySelection)return!0;if(null!=e.supportedCategories&&e.supportedCategories.length>0&&6===e.supportedCategories[0]&&d.isApplied(c.EnableJapanConvenientStoreFakePaymentOptions))return!0}return!1},e}();e.exports=p}).call(t,n(3))},function(e,t){"use strict";!function(e){e[e.None=0]="None",e[e.Bullet=1]="Bullet"}(t.MessageComponentStyle||(t.MessageComponentStyle={})),t.MessageComponentStyle},function(e,t){"use strict";var n;!function(e){var t;!function(e){e.CONTINUE_BUTTON=".step1-continue-btn",e.BOOK_BUTTON=".step2-submit-btn",e.PAYPAL_BUTTON="#paypal-button .paypal-button",e.RIPPLE_CLASS="ripple-effect",e.RISK_FREE_SUBMIT_MESSAGE=".continue-submit-button .risk-free-message",e.PAYMENT_ACCORDION_BODY="payment-accordion-content",e.PAYMENT_ACCORDION_HEADER="payment-accordion-header",e.PREFIX_PAYMENT_METHOD_ELEMENT_ID="paymentMethod",e.PREFIX_PAYMENT_METHOD_ELEMENT_NAME="paymentMethod"}(t=e.ui||(e.ui={}))}(n||(n={})),e.exports=n.ui},function(e,t){e.exports='<div class=travel-with-kids data-element-name=travel-with-kids-container> <h4 class="travel-with-kids-title m-t-4" data-bind="text: travelWithKids.title"></h4> <div class="checkbox travel-with-kids-title-container"> <label> <input type=checkbox data-element-name=travel-with-kids name=travelWithKids id=travelWithKids data-bind="checked: travelWithKids.travelWithKidsDto.isSelect"/> <span data-bind="text: travelWithKids.description"></span> </label> <div class=policy-note><!-- ko ifnot: travelWithKids.changeToHtmlBind --> <span data-bind="text: travelWithKids.note"></span><!-- /ko --><!-- ko if: travelWithKids.changeToHtmlBind --> <span data-bind="html: travelWithKids.note"></span><!-- /ko --> </div> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.travelWithKids=e.travelWithKids}return e}();e.exports=n},function(e,t){e.exports='<!-- ko if: selfServiceFree --> <div class=self-service-free data-element-name=self-service-free-container> <div class=self-service-free-panel> <div class=icon-container> <img data-bind="attr:{ src: cdnUrl + \'/images/new-bf/checkbox-include.svg\' }" width=20 height=20 /> <div class=include data-bind="text: selfServiceFree.includedText"></div> </div> <div class=self-service-free-note> <h4 class=self-service-free-header data-bind="text: selfServiceFree.title"></h4> <div data-bind="text: selfServiceFree.description"></div> </div> </div> </div> <!-- /ko -->'},function(e,t,n){"use strict";var i=n(9),a=function(){function e(e){this.selfServiceFree=e.selfServiceFree,this.cdnUrl=i.getPageData().cdnUrl}return e}();e.exports=a},function(e,t){e.exports='<div class=airport-transfer-form data-selenium=transportation-panel data-bind="visible: shouldDisplayMainPanel, css: { \'panel panel-default panel-body\': !ko.unwrap(isMobile) && isSeparateSectionsInLeftColumnIntoCardsExperimentApplied }"><!-- ko if: !ko.unwrap(isMobile) && isSeparateSectionsInLeftColumnIntoCardsExperimentApplied --> <i class="ficon ficon-20 ficon-left ficon-solid-airport-transfer-service"></i><!-- /ko --> <h4 data-bind="text: airportTransferPanel.title, css: { \'m-t-4\': (ko.unwrap(isMobile) || !isSeparateSectionsInLeftColumnIntoCardsExperimentApplied) && !isRemovePhoneNumberFieldApplied }"></h4> <div class="p-l-3 provider" data-selenium=atf-partnername-bf1 data-bind="text: providerName"></div><!-- ko ifnot: shouldDisplayCheckBoxView --> <div data-bind="visible: airportTransferPanel.isPanelVisible" data-element-name=transportation-module> <div class=p-t-10 data-bind="css: { half-opaque: _noResults() }"> <input id=checkBox type=checkbox data-bind="checked: isSelectedAirportTransfer,\r\n                            click: selectAirportTransfer,\r\n                            disable: _noResults()" data-element-name=booking-form-transportation-module-checkbox data-selenium=transportation-checkbox> <span class=p-l-3 data-bind="html: checkboxDisplay"></span> </div> <div data-bind="css: { half-opaque: _noResults() }"> <span class=p-r-10 data-bind="text: airportTransferPanel.priceIncludesText"></span> <span data-bind="visible: isShowOccupancy"> <i class="p-r-5 ficon ficon-solo"></i> <span class=p-r-10 data-bind="text: occupancyDisplay"></span> </span> <span data-bind="visible: isShowBags"> <i class="p-r-5 ficon ficon-luggage"></i> <span class=p-r-10 data-bind="text: bagDisplay"></span> </span> <i class="p-r-5 ficon ficon-concierge"></i> <span class=p-r-10 data-bind="text: airportTransferPanel.meetAndGreetText"></span> <i class="p-r-5 ficon ficon-time-icon"></i> <span class=p-r-10 data-bind="text: airportTransferPanel.maximumWaitingTimeText"></span> </div> <div class=p-t-10 data-bind="visible: isShowCancellation, css: { half-opaque: _noResults() }"> <i class="ficon ficon-circle ficon-12 ficon-free-cancellation"></i> <span class=cancel-text data-bind="text: cancellationDisplay"></span> </div> <div class=airport-transfer-expand data-bind="visible: isFormDisplayed"> <hr> <div class=row> <div class="col-sm-6 has-feedback arrivalAirport" data-bind="validationElement: selectedAirport, css: { \'form-group\': isAddMoreLifeExperiment }"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=arrivalAirportSelect class=control-label data-bind="text: airportTransferPanel.arrivalAirportText"></label> <select data-element-name=airport-transfer-arrival-airport-dropdown class="form-control sensitive" name=arrivalAirportSelect id=arrivalAirportSelect data-bind="options: airportTransferPanel.hotelAirports.list.options(),\r\n                                    optionsText : \'text\',\r\n                                    optionsValue: \'value\',\r\n                                    value: selectedAirport"></select> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                                name: "form-dropdown",\r\n                                params : {\r\n                                    value: selectedAirport,\r\n                                    labelText: airportTransferPanel.arrivalAirportText,\r\n                                    options: airportTransferPanel.hotelAirports.list.options(),\r\n                                    optionsText: \'text\',\r\n                                    optionsValue: \'value\',\r\n                                    css: { \'has-value\': ko.unwrap(selectedAirport) != null },\r\n                                    inputAttributes: {\r\n                                        name: \'arrivalAirportSelect\',\r\n                                        id: \'arrivalAirportSelect\',\r\n                                        \'data-element-name\': \'airport-transfer-arrival-airport-dropdown\',\r\n                                    },\r\n                                }\r\n                            } --><!-- /ko --><!-- /ko --> </div> <div class="col-sm-6 has-feedback numberOfTravelers" data-bind="validationElement: selectedNumberTravelers, css: { \'form-group\': isAddMoreLifeExperiment }"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=numberOfTravelersSelect class=control-label data-bind="text: airportTransferPanel.numberOfTravelersText"></label> <select id=numberOfTravelersSelect class="form-control sensitive" data-bind="options: numberTravelers, value: selectedNumberTravelers"></select> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                                name: "form-dropdown",\r\n                                params : {\r\n                                    value: selectedNumberTravelers,\r\n                                    labelText: airportTransferPanel.numberOfTravelersText,\r\n                                    options: numberTravelers,\r\n                                    css: { \'has-value\': ko.unwrap(selectedNumberTravelers) != null },\r\n                                    inputAttributes: {\r\n                                        name: \'numberOfTravelersSelect\',\r\n                                        id: \'numberOfTravelersSelect\',\r\n                                    },\r\n                                }\r\n                            } --><!-- /ko --><!-- /ko --> </div> </div> <div class="row p-t-10"> <div class="col-sm-6 form-group has-feedback pickupTime" data-bind="validationElement: airportTransferPanel.details.selectedPickupTime, css: { \'form-group\': isAddMoreLifeExperiment }"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=pickupTimeSelect class=control-label data-bind="text: airportTransferPanel.pickUpTimeText"></label> <select data-element-name=airport-transfer-pickup-time-dropdown class="form-control sensitive" name=pickupTimeSelect id=pickupTimeSelect data-bind="options: airportTransferPanel.pickupTimeForm.pickupTimeList.options(),\r\n                                    optionsText: \'text\',\r\n                                    optionsValue: \'value\',\r\n                                    value: airportTransferPanel.details.selectedPickupTime,\r\n                                    optionsCaption: airportTransferPanel.pickupTimeDefaultSelection()"></select> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko component: {\r\n                                name: "form-dropdown",\r\n                                params : {\r\n                                    value: airportTransferPanel.details.selectedPickupTime,\r\n                                    labelText: airportTransferPanel.pickUpTimeText,\r\n                                    emptyOptionLabel: airportTransferPanel.pickupTimeDefaultSelection(),\r\n                                    options: airportTransferPanel.pickupTimeForm.pickupTimeList.options(),\r\n                                    optionsText: \'text\',\r\n                                    optionsValue: \'value\',\r\n                                    css: { \'has-value\': ko.unwrap(airportTransferPanel.details.selectedPickupTime) != null },\r\n                                    inputAttributes: {\r\n                                        name: \'pickupTimeSelect\',\r\n                                        id: \'pickupTimeSelect\',\r\n                                        \'data-element-name\': \'airport-transfer-pickup-time-dropdown\',\r\n                                    },\r\n                                }\r\n                            } --><!-- /ko --><!-- /ko --> </div> <div class="col-sm-6 form-group has-feedback arrivalFlightNumber" data-bind="validationElement: airportTransferPanel.details.flightNumber"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=arrivalFlightNumberInput class=control-label data-bind="text: airportTransferPanel.arrivalFlightNumberText"></label> <input data-element-name=airport-transfer-arrival-flight-number type=text class="form-control sensitive" name=arrivalFlightNumberInput id=arrivalFlightNumberInput autocomplete=off data-bind="value: airportTransferPanel.details.flightNumber"/> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <input type=text class="form-control sensitive" name=arrivalFlightNumberInput id=arrivalFlightNumberInput autocomplete=off autocorrect=off data-element-name=airport-transfer-arrival-flight-number data-bind="value: airportTransferPanel.details.flightNumber, css: { \'has-value\': airportTransferPanel.details.flightNumber }"/> <label for=arrivalFlightNumberInput class=floating-label data-bind="text: airportTransferPanel.arrivalFlightNumberText"></label><!-- /ko --><!-- /ko --> </div> </div> </div> <span class=apt-no-results data-bind="visible: _noResults, \r\n                                text: airportTransferPanel.noSearchResultsText" data-element-name=transfer-module-greyout> </span> <div class=loading data-bind="visible: loading"> <div class="apt-loading blockUI blockOverlay"> </div> <div class="apt-loading-gif blockUI block-ui-message blockElement"> <img data-bind="attr:{ srcset: cdnUrl + \'/images/new-bf/preloader.gif 1x, \' + cdnUrl + \'/images/new-bf/preloader@2x.gif 2x\', src: cdnUrl + \'/images/new-bf/preloader.gif\' }"/> </div> </div> </div><!-- /ko --> <div class=p-t-10 data-element-name=transportation-module-without-form data-bind="visible: shouldDisplayCheckBoxView"> <label aria-expanded=false> <input id=checkBox type=checkbox data-bind="checked: airportTransferPanel.details.isRequestedAiportTransfer" data-element-name=booking-form-transfer-request-checkbox data-selenium=transportation-request-checkbox> <span class="p-l-3 checkboxView" data-bind="text: airportTransferPanel.checkboxViewText"></span> </label> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(410),a=n(412),o=n(9),r=n(86),s=n(88),l=n(109),d=n(91),c=function(){function e(e){var n=this;this.isAirportTransferRequestCheckboxApplied=r.isApplied(s.AirportTransferCheckboxView),this.isAirportTransferOptionalFlightNumber=r.isApplied(s.AirportTransferOptionalFlightNumber),this.isAirportTransferOptionalAirportCode=r.isApplied(s.AirportTransferOptionalAirportCode),this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied=r.isApplied(s.SeparateSectionsInLeftColumnIntoCards),this.vendorName=t.observable("Mozio"),this.shouldDisplayMainPanel=t.observable(!1),this.airportTransferPanel=e.airportTransferPanel,this._airportTransferService=new i,this._airportTransferPickupDateTimeService=new a,this._setDefaultAirportTransferDetailValue(),this.updatePickupDatetime(),this.airportTransferPanel.isPanelVisible(!1),this.isSelectedAirportTransfer=this.airportTransferPanel.details.isSelectedAirportTransfer,this.isFormDisplayed=t.observable(this.isSelectedAirportTransfer()),this.occupancyDisplay=t.observable(""),this.isShowOccupancy=t.observable(!1),this.priceDisplay=t.observable(""),this.bagDisplay=t.observable(""),this.isShowBags=t.observable(!1),this.cancellationDisplay=t.observable(""),this.isShowCancellation=t.observable(!1),this.checkboxDisplay=t.observable(""),this.selectedAirport=t.observable(""),this._noResults=t.observable(!1),this.cdnUrl="",this.loading=t.observable(!1);var l=this.buildNumberOfTravelersOptions();this.numberTravelers=t.observableArray(l),this.selectedNumberTravelers=t.observable(1),this.isInValidForAirportTransfer=t.observable(!1),this.shouldDisplayCheckBoxView=t.observable(!1),this.isMobile=e.isMobile,this.isAddMoreLifeExperiment=o.getFeature(d.AddMoreLifeToBookingForm),this.isRemovePhoneNumberFieldApplied=e.isRemovePhoneNumberFieldApplied,this.airportTransferPanel.details.isUserAirportTransferClickPerform?this.airportTransferPanel.details.isUserAirportTransferClickPerform(!1):this.airportTransferPanel.details.isUserAirportTransferClickPerform=t.observable(!1),this.searchParams={noPoll:!1,mode:"one_way",startLat:this.airportTransferPanel.startLatitude(),startLng:this.airportTransferPanel.startLongitude(),endLat:this.airportTransferPanel.endLatitude(),endLng:this.airportTransferPanel.endLongitude(),pickupDatetime:this.airportTransferPanel.pickupDatetime(),numPassengers:this.airportTransferPanel.numberAdult()+this.airportTransferPanel.numberChildren(),currency:this.airportTransferPanel.currency(),startAddress:this.airportTransferPanel.startAddress(),endAddress:this.airportTransferPanel.endAddress()},this.registerFormFieldValidation(),this.selectedAirport(this.airportTransferPanel.startAddress()+","+this.airportTransferPanel.startLatitude()+","+this.airportTransferPanel.startLongitude()),this.selectedNumberTravelers(this.airportTransferPanel.numberAdult()+this.airportTransferPanel.numberChildren()),t.unwrap(this.airportTransferPanel.formValues)&&this.airportTransferPanel.formValues().numberOfTraverler&&this.updateAirportFormValue(this.airportTransferPanel.formValues()),this.providerName=t.observable(this.airportTransferPanel.providerText().replace("{0}",this.vendorName())),this._validate(),this._subscribe(),this.airportTransferPanel.checkboxViewText(this.airportTransferPanel.checkboxViewText().replace("{0}",this.airportTransferPanel.endAddress())),this.shouldDisplayCheckBoxView=t.computed(function(){return n.isAirportTransferRequestCheckboxApplied&&!n.airportTransferPanel.isPanelVisible()&&(n.isInValidForAirportTransfer()||n._noResults())}),this.shouldDisplayMainPanel=t.computed(function(){return n.shouldDisplayCheckBoxView()||n.airportTransferPanel.isPanelVisible()})}return e.prototype._setDefaultAirportTransferDetailValue=function(){this.airportTransferPanel.details||(this.airportTransferPanel.details={}),t.isObservable(this.airportTransferPanel.details.searchId)||(this.airportTransferPanel.details.searchId=t.observable("")),t.isObservable(this.airportTransferPanel.details.resultId)||(this.airportTransferPanel.details.resultId=t.observable("")),t.isObservable(this.airportTransferPanel.details.vendorData)||(this.airportTransferPanel.details.vendorData=t.observable("")),t.isObservable(this.airportTransferPanel.details.vendorName)||(this.airportTransferPanel.details.vendorName=t.observable("")),t.isObservable(this.airportTransferPanel.details.airline)||(this.airportTransferPanel.details.airline=t.observable("")),t.isObservable(this.airportTransferPanel.details.airportCode)||(this.airportTransferPanel.details.airportCode=t.observable("")),t.isObservable(this.airportTransferPanel.details.commentsForDriver)||(this.airportTransferPanel.details.commentsForDriver=t.observable("")),t.isObservable(this.airportTransferPanel.details.isSelectedAirportTransfer)||(this.airportTransferPanel.details.isSelectedAirportTransfer=t.observable(!1)),t.isObservable(this.airportTransferPanel.details.isRequestedAiportTransfer)||(this.airportTransferPanel.details.isRequestedAiportTransfer=t.observable(!1)),t.isObservable(this.airportTransferPanel.details.paxNumber)||(this.airportTransferPanel.details.paxNumber=t.observable(0)),t.isObservable(this.airportTransferPanel.details.localPrice)||(this.airportTransferPanel.details.localPrice=t.observable(0)),t.isObservable(this.airportTransferPanel.details.selectedPickupTime)||(this.airportTransferPanel.details.selectedPickupTime=t.observable({})),t.isObservable(this.airportTransferPanel.details.flightNumber)||(this.airportTransferPanel.details.flightNumber=t.observable("")),t.isObservable(this.airportTransferPanel.searchResponse)||(this.airportTransferPanel.searchResponse=t.observable({})),t.isObservable(this.airportTransferPanel.formValues)||(this.airportTransferPanel.formValues=t.observable({})),this.airportTransferPanel.hotelAirports||(this.airportTransferPanel.hotelAirports={}),t.isObservable(this.airportTransferPanel.isPanelVisible)||(this.airportTransferPanel.isPanelVisible=t.observable(!1)),t.isObservable(this.airportTransferPanel.startLatitude)||(this.airportTransferPanel.startLatitude=t.observable(0)),t.isObservable(this.airportTransferPanel.startLongitude)||(this.airportTransferPanel.startLongitude=t.observable(0)),t.isObservable(this.airportTransferPanel.pickupDatetime)||(this.airportTransferPanel.pickupDatetime=t.observable("")),t.isObservable(this.airportTransferPanel.numberAdult)||(this.airportTransferPanel.numberAdult=t.observable(0)),t.isObservable(this.airportTransferPanel.numberChildren)||(this.airportTransferPanel.numberChildren=t.observable(0)),t.isObservable(this.airportTransferPanel.currency)||(this.airportTransferPanel.currency=t.observable("")),t.isObservable(this.airportTransferPanel.startAddress)||(this.airportTransferPanel.startAddress=t.observable("")),t.isObservable(this.airportTransferPanel.endAddress)||(this.airportTransferPanel.endAddress=t.observable(""))},e.prototype.selectAirportTransfer=function(){return this.airportTransferPanel.details.isUserAirportTransferClickPerform(!0),this.airportTransferPanel.details.isSelectedAirportTransfer(this.isSelectedAirportTransfer()),this.isFormDisplayed(this.isSelectedAirportTransfer()),this._airportTransferService.selectAirportTransfer(this.airportTransferPanel.details.localPrice(),this.isSelectedAirportTransfer(),this.airportTransferPanel.details.isUserAirportTransferClickPerform(),this.vendorName()),!0},e.prototype._subscribe=function(){var e=this;this._numberTravelersSubscription=this.selectedNumberTravelers.subscribe(function(t){e.airportTransferPanel.numberAdult(t),e.airportTransferPanel.numberChildren(0),e.updateOccupancyDisplay(t,0),e.searchParams.numPassengers=t,e.getSearchResult()}),this._pickupTimeSubscription=this.airportTransferPanel.details.selectedPickupTime.subscribe(function(n){var i=t.unwrap(e.airportTransferPanel.pickupTimeForm.pickupTimeList.options);if(n&&i&&i[n]){l.instance.track("airport-transfer-pickup-time-dropdown",{action_element_value:n});var a=i[n],o=+a.text().substring(0,2),r=+a.text().substring(3,5),s=new Date(e.searchParams.pickupDatetime);s.setHours(o),s.setMinutes(r);var d=e._airportTransferPickupDateTimeService.formatDateTime(s);e.searchParams.pickupDatetime=d,e.getSearchResult()}}),this._airportSubscription=this.selectedAirport.subscribe(function(n){if(n&&n.indexOf(",")){l.instance.track("airport-transfer-arrival-airport-dropdown",{action_element_value:n});var i=n.split(","),a=i[0],o=i[1],r=i[2];e.searchParams.startAddress=a,e.searchParams.startLat=+o,e.searchParams.startLng=+r,t.isObservable(e.airportTransferPanel.details.airportCode)?e.airportTransferPanel.details.airportCode(a):e.airportTransferPanel.details.airportCode=t.observable(a),t.isObservable(e.airportTransferPanel.startAddress)?e.airportTransferPanel.startAddress(a):e.airportTransferPanel.startAddress=t.observable(a)}}),this.isAirportTransferOptionalAirportCode||this._subscribeAirportSelectionForSearchResult(),this._flightNumberSubscription=this.airportTransferPanel.details.flightNumber.subscribe(function(t){e.airportTransferPanel.formValues().flightNumber=t})},e.prototype._subscribeAirportSelectionForSearchResult=function(){var e=this;this._airportSubscriptionForSearchResult=this.selectedAirport.subscribe(function(t){t&&t.indexOf(",")&&e.getSearchResult()})},
e.prototype._validate=function(){var e=this;this._airportTransferService.validate().then(function(t){t?e.isDataExist()||e.getSearchResult(!0):e.isInValidForAirportTransfer(!0)})},e.prototype.isDataExist=function(){var e=o.getPageData();return this.cdnUrl=e.cdnUrl,!!(this.airportTransferPanel&&this.airportTransferPanel.details&&t.unwrap(this.airportTransferPanel.details.searchId)&&t.unwrap(this.airportTransferPanel.searchResponse))&&(this.updateAirportTransferPanel(this.airportTransferPanel.searchResponse()),!0)},e.prototype.updateAirportFormValue=function(e){this.selectedAirport(e.selectedAirport),this.selectedNumberTravelers(e.numberOfTraverler),this.airportTransferPanel.details.selectedPickupTime(e.selectedPickupTimeIndex),this.airportTransferPanel.details.flightNumber(e.flightNumber)},e.prototype.getSearchResult=function(e){var n=this;void 0===e&&(e=!1),this.loading(!0);var i={currency:this.searchParams.currency,endLat:this.searchParams.endLat,endLng:this.searchParams.endLng,numPassengers:this.searchParams.numPassengers,pickupDatetime:this.searchParams.pickupDatetime,startAddress:this.searchParams.startAddress,initialSearch:e};this.isAirportTransferOptionalAirportCode?this._airportTransferService.getPriceV2(i).then(function(i){i&&(i.results&&i.results.length>0&&i.nearbyAirports&&i.nearbyAirports.length>0&&i.nearbyAirports.forEach(function(e){var i=t.utils.arrayFirst(n.airportTransferPanel.hotelAirports.list.options(),function(t){return 0===t.value().indexOf(e.airportCode)});i||n.airportTransferPanel.hotelAirports.list.options.push({text:t.observable(e.name+" ("+e.airportCode+")"),value:t.observable(e.value)})}),e&&n._subscribeAirportSelectionForSearchResult(),n.airportTransferPanel.searchResponse(i),n.updateAirportTransferPanel(i),n.airportTransferPanel.formValues().selectedAirport=n.selectedAirport(),n.airportTransferPanel.formValues().numberOfTraverler=n.selectedNumberTravelers(),n.airportTransferPanel.formValues().selectedPickupTimeIndex=n.airportTransferPanel.details.selectedPickupTime())}).always(function(){n.loading(!1)}):this._airportTransferService.getPrice(i).then(function(e){e&&(n.airportTransferPanel.searchResponse(e),n.updateAirportTransferPanel(e),n.airportTransferPanel.formValues().selectedAirport=n.selectedAirport(),n.airportTransferPanel.formValues().numberOfTraverler=n.selectedNumberTravelers(),n.airportTransferPanel.formValues().selectedPickupTimeIndex=n.airportTransferPanel.details.selectedPickupTime())}).always(function(){n.loading(!1)})},e.prototype.updateAirportTransferPanel=function(e){if(e&&e.results&&e.results.length>0){var t=this.getFirstResultMatchFullRefund(e);t?(this._noResults(!1),this.airportTransferPanel.details.searchId(e.searchId),this.updatePriceDisplay(t),""!==this.priceDisplay()&&(this.updateBagsDisplay(t),this.updateCancellationDisplay(t),this.updateOccupancyDisplay(this.airportTransferPanel.numberAdult(),this.airportTransferPanel.numberChildren()),this.updateAirportTransferDetails(t),this.airportTransferPanel.isPanelVisible(!0))):this.resetAirportTransferRideResult()}else this.resetAirportTransferRideResult();this._airportTransferService.selectAirportTransfer(this.airportTransferPanel.details.localPrice(),!this._noResults()&&this.airportTransferPanel.details.isSelectedAirportTransfer(),this.airportTransferPanel.details.isUserAirportTransferClickPerform(),this.vendorName())},e.prototype.resetAirportTransferRideResult=function(){this._noResults(!0),l.instance.track("atapi-no-result",{action_element_value:!0}),this.airportTransferPanel.details.searchId(""),this.airportTransferPanel.searchResponse({}),this._setDefaultAirportTransferDetailValue()},e.prototype.getFirstResultMatchFullRefund=function(e){var t=e.results.filter(function(e){return e&&e.cancellable});return t.length>0?t[0]:null},e.prototype.updatePriceDisplay=function(e){if(e&&e.formatedValue){this.priceDisplay(e.formatedValue);var n=t.unwrap(this.airportTransferPanel.checkboxText);n=n.replace("{0}",t.unwrap(this.airportTransferPanel.hotelName)),n=n.replace("{1}",'<span class="price" dir="ltr">'+this.priceDisplay()+"</span>"),this.checkboxDisplay(n)}},e.prototype.updateBagsDisplay=function(e){if(e&&e.luggage>0){var n=t.unwrap(this.airportTransferPanel.bagsText);n=n.replace("{0}",e.luggage.toString()),this.bagDisplay(n),this.isShowBags(!0)}else this.isShowBags(!1)},e.prototype.updateCancellationDisplay=function(e){if(e&&e.cancellationDateIgnoreLocale&&e.cancellationDate&&e.cancellationTime)if(this._airportTransferPickupDateTimeService.isTimeAfterNow(e.cancellationDateIgnoreLocale,e.cancellationTime)){var n=t.unwrap(this.airportTransferPanel.cancellationText);n=n.replace("{0}",e.cancellationTime),n=n.replace("{1}",e.cancellationDate),this.cancellationDisplay(n),this.isShowCancellation(!0)}else this.isShowCancellation()&&this.isShowCancellation(!1)},e.prototype.updateOccupancyDisplay=function(e,t){var n="",i=e+t;i>1?n=this.airportTransferPanel.numberTravelersText().replace("{0}",i.toString()):1===i&&(n=this.airportTransferPanel.numberTravelerText()),""!==n&&(this.occupancyDisplay(""+n),this.isShowOccupancy(!0))},e.prototype.updateAirportTransferDetails=function(e){this.airportTransferPanel.details.airline("DD"),this.airportTransferPanel.details.commentsForDriver(""),this.airportTransferPanel.details.airportCode(this.airportTransferPanel.startAddress()),this.airportTransferPanel.details.paxNumber(this.airportTransferPanel.numberAdult()+this.airportTransferPanel.numberChildren()),this.airportTransferPanel.details.resultId(e.priceId),e.value&&this.airportTransferPanel.details.localPrice(e.value),this.vendorName(e.vendorName),this.providerName(this.airportTransferPanel.providerText().replace("{0}",this.vendorName())),this.isAirportTransferOptionalAirportCode?this.airportTransferPanel.details.vendorData(e.vendorData):this.airportTransferPanel.details.vendorData(e.details),this.airportTransferPanel.details.vendorName(e.vendorName)},e.prototype.registerFormFieldValidation=function(){this.flighNumberFormFieldValidation(),this.pickupTimeFormFieldValidation(),this.airportFormFieldValidation(),this.numberOfTravelersFormFieldValidation()},e.prototype.flighNumberFormFieldValidation=function(){var e=this;this.airportTransferPanel.details.flightNumber.extend({required:{message:this.airportTransferPanel.flightNumberValidationText(),params:!0,onlyIf:function(){return!e.isAirportTransferOptionalFlightNumber&&e.airportTransferPanel.details.isSelectedAirportTransfer()&&!e._noResults()}}})},e.prototype.pickupTimeFormFieldValidation=function(){var e=this;this.airportTransferPanel.details.selectedPickupTime=t.observable(void 0).extend({required:{message:this.airportTransferPanel.pickupTimeValidationText(),params:!0,onlyIf:function(){return e.airportTransferPanel.details.isSelectedAirportTransfer()&&!e._noResults()}}})},e.prototype.airportFormFieldValidation=function(){var e=this;this.selectedAirport.extend({required:{params:!0,onlyIf:function(){return e.airportTransferPanel.details.isSelectedAirportTransfer()}}})},e.prototype.numberOfTravelersFormFieldValidation=function(){var e=this;this.selectedNumberTravelers.extend({required:{params:!0,onlyIf:function(){return e.airportTransferPanel.details.isSelectedAirportTransfer()}}})},e.prototype.buildNumberOfTravelersOptions=function(){for(var e=30,t=[],n=1;n<=e;n++)t.push(n);return t},e.prototype.updatePickupDatetime=function(){if(t.unwrap(this.airportTransferPanel.pickupDatetime)){var e=this._airportTransferPickupDateTimeService.getLocalPickupTime(this.airportTransferPanel.dateTimeNow,this.airportTransferPanel.pickupDatetime),n=this._airportTransferPickupDateTimeService.formatString(this.airportTransferPanel.pickupDatetime());if(n){n.setHours(0,0,0,0),n.setMinutes(e);var i=this._airportTransferPickupDateTimeService.formatDateTime(n);this.airportTransferPanel.pickupDatetime(i)}}},e}();e.exports=c}).call(t,n(3))},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(97),r=n(96),s=n(99),l=n(11),d=n(109),c=function(){function e(){this.AIRPORT_TRANSFER_BOOKING_RESULT_UPDATED="AIRPORT_TRANSFER_BOOKING_RESULT_UPDATED",this.AIRPORT_TRANSFER_BOOKING_REQUEST="AIRPORT_TRANSFER_BOOKING_REQUEST",this.pollingAirportTransferResultCount=0,this.pollingAirportTransferResultRetry=7,this.pollingAirportTransferResultInterval=6e3,this._apiEndpointService=new a,this.subscribePollAirportTransferBooking()}return e.prototype.validate=function(){var e=this._apiEndpointService.create("transportationapi/validate"),n={url:e,timeout:5e3};return t.post(n).then(function(e){return e.result})},e.prototype.getPrice=function(e){var n={url:this._apiEndpointService.create("transportationapi/price"),contentType:"application/json",method:"POST",data:e,error:this.errorHandler};return t.post(n).then(function(e){return e})},e.prototype.getPriceV2=function(e){var n={url:this._apiEndpointService.create("transportationapi/pricev2"),contentType:"application/json",method:"POST",data:e,error:this.errorHandler};return t.post(n).then(function(e){return e})},e.prototype.getAirportTransferDetail=function(e){return e?{searchId:e.searchId(),resultId:e.resultId(),airline:e.airline(),commentsForDriver:e.commentsForDriver(),flightNumber:e.flightNumber(),airportCode:e.airportCode(),paxNumber:e.paxNumber(),isSelectedAirportTransfer:e.isSelectedAirportTransfer(),localPrice:e.localPrice(),vendorData:e.vendorData(),vendorName:e.vendorName()}:null},e.prototype.openPaymentModal=function(e,a,l){this.modalBindingOptions=new o,this.modalBindingOptions.header.data={isCloseBtnDisplayed:!0,title:""},this.modalBindingOptions.body.name=r.AIRPORT_TRANSFER_PAYMENT_MODAL_BODY,i.stringTemplateEngine.instance.addTemplate(this.modalBindingOptions.body.name,n(411));var d={title:e.paymentModalTitle,description:e.paymentModalDescription,proceedWithoutText:e.proceedWithoutAirportTransferText,proceedWithText:e.proceedWithAirportTransferText,proceedWithoutHandler:a,proceedWithCreditHandler:l};this.modalBindingOptions.body.data=d,this.modalBindingOptions.dialogCss=r.AIRPORT_TRANSFER_PAYMENT_MODAL_CLASS,this.modalBindingOptions.options.keyboard=!1,this.modalBindingOptions.visible(!0),this.modalBindingOptions.elementName="transfer-modal-backdrop",this.modalBindingOptions.onClose=function(){t("body").removeAttr("data-element-name")},this.modalService=this.modalService||new s,this.modalService.open(this.modalBindingOptions),t("button.ficon-close-popup").attr("data-element-name","transfer-modal-close")},e.prototype.pollAirportTransferBookingResult=function(e){var t=this._apiEndpointService.create("transportationapi/pollAirportTransferBookingResult");this.getAirportTransferBookingResult(t,e)},e.prototype.getAirportTransferBookingResult=function(e,n){var a=this;this.pollingAirportTransferResultCount++,t.post(e).then(function(e){i.postbox.publish(a.AIRPORT_TRANSFER_BOOKING_RESULT_UPDATED,e)})},e.prototype.subscribePollAirportTransferBooking=function(){var e=this;this._airportTransferBookingRequestSubscription=i.postbox.subscribe(this.AIRPORT_TRANSFER_BOOKING_REQUEST,function(){e.pollAirportTransferBookingResult("")}),this._airportTransferBookingResultSubscription=i.postbox.subscribe(this.AIRPORT_TRANSFER_BOOKING_RESULT_UPDATED,function(t){2===t.bookAirportStatus||3===t.bookAirportStatus||e.pollingAirportTransferResultCount>e.pollingAirportTransferResultRetry?i.postbox.publish(l.AIRPORT_TRANSFER_BOOKING_UPDATED,t):setTimeout(function(){i.postbox.publish("AIRPORT_TRANSFER_BOOKING_REQUEST")},e.pollingAirportTransferResultInterval)})},e.prototype.selectAirportTransfer=function(e,n,a,o){var r={url:this._apiEndpointService.create("transportationapi/select"),data:{amount:e,isSelected:n,isUserAirportTransferClickPerform:a,vendor:o},timeout:5e3};t.post(r).then(function(e){e&&i.postbox.publish(l.AIRPORT_TRANSFER_PRICE_UPDATE,e.priceDetails)})},e.prototype.errorHandler=function(e,t,n){"timeout"===t?d.instance.track("transportation-module-display",{action_element_value:"timeout"}):d.instance.track("transportation-module-display",{action_element_value:"error"})},e}();e.exports=c}).call(t,n(2),n(3))},function(e,t){e.exports='<!-- ko component: {\r\n    name: "airport-transfer-payment-modal",\r\n    params: {\r\n        title: title,\r\n        description: description,\r\n        proceedWithoutText: proceedWithoutText,\r\n        proceedWithText: proceedWithText,\r\n        proceedWithoutHandler: proceedWithoutHandler,\r\n        proceedWithCreditHandler: proceedWithCreditHandler\r\n    }\r\n} --> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var n=function(){function e(){}return e.prototype.formatDateTime=function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},e.prototype.formatString=function(e){if(e){var t=e.replace("T"," ").split(" ");if(2===t.length){var n=t[0].split("-");if(3===n.length){var i=t[1].split(":");if(!(i.length<2))return new Date((+n[0]),+n[1]-1,(+n[2]),(+i[0]),(+i[1]))}}}},e.prototype.getLocalPickupTime=function(e,n){var i=720;if(!t.unwrap(n))return i;var a=new Date(n());a.setHours(0,0,0,0),e=e||new Date;var o=new Date(e.getTime());return o.setHours(0,0,0,0),a.getTime()===o.getTime()?this.getTimeHoursFromNow(e):i},e.prototype.getTimeHoursFromNow=function(e,t){return void 0===t&&(t=3),e=e||new Date,e.getHours()<=20?e.setHours(e.getHours()+t):(e.setHours(23),e.setMinutes(59)),e.getMinutes()+60*e.getHours()},e.prototype.isTimeAfterNow=function(e,t){var n=this.formatString(e+" "+t),i=new Date;return+n-+i>0},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div class=airport-transfer-payment-modal data-selenium=airport-transfer-payment-modal data-element-name=transfer-modal> <div class=row> <p class=title><strong data-bind="text: title"></strong></p> </div> <div class=row> <p class=description data-bind="text: description"> </p> </div> <div class="row proceed proceed-without"> <p data-element-name=transfer-modal-without data-selenium=transfer-modal-without class=text data-bind="text: proceedWithoutText, click:proceedWithout"></p> </div> <div class="row proceed proceed-with"> <p data-element-name=transfer-modal-with data-selenium=transfer-modal-with class=text data-bind="text: proceedWithText, click: proceedWith"></p> </div> </div>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.title=e.title,this.description=e.description,this.proceedWithoutText=e.proceedWithoutText,this.proceedWithText=e.proceedWithText,this.proceedWithoutHandler=e.proceedWithoutHandler,this.proceedWithCreditHandler=e.proceedWithCreditHandler}return e.prototype.proceedWithout=function(){t(".modal").modal("hide"),this.proceedWithoutHandler()},e.prototype.proceedWith=function(){this.proceedWithCreditHandler(),t(".modal").modal("hide")},e}();e.exports=n}).call(t,n(2))},function(e,t){e.exports='<div class=payment-options-title> <span id=paymentOptionsDescription data-bind="text: paymentOptionsModal.paymentOptionsText"></span> </div> <div class=payment-options-modal-body> <div class=payment-options-row> <div class=payment-options-col> </div> <div class="payment-options-col header"> <span class="" data-bind="text: paymentOptionsModal.payNowText"></span> </div> <div class="payment-options-col header"> <span class="" data-bind="text: paymentOptionsModal.payLaterText"></span> </div> </div> <div class=payment-options-row> <div class=payment-options-col> <span class=title data-bind="text: paymentOptionsModal.pricePerNightText"></span> </div> <div class="payment-options-col align-top"> <p class=total-price data-bind="text: paymentOptionsModal.payNowPrice"></p> </div> <div class="payment-options-col align-top"> <p class=total-price data-bind="text: paymentOptionsModal.payLaterPrice"></p><!-- ko if: paymentOptionsModal.youWillBeChargedText --> <p><span class=shadow-rate-amount data-bind="text: paymentOptionsModal.youWillBeChargedText"></span></p><!-- /ko --> </div> </div> <div class=payment-options-row> <div class=payment-options-col> <span class=title data-bind="text: paymentOptionsModal.cancellationPolicyText"></span> </div> <div class=payment-options-col> <span class=description-font data-bind="text: paymentOptionsModal.youCanCancelAndGetFullRefundText"></span> </div> <div class=payment-options-col> <span class=description-font data-bind="text: paymentOptionsModal.cancelBeforeForFreeText"></span> </div> </div> <div class=payment-options-row> <div class=payment-options-col> <span class=title data-bind="text: paymentOptionsModal.paymentTermsText"></span> </div> <div class=payment-options-col> <span class=description-font data-bind="text: paymentOptionsModal.payTheFullAmountNowText"></span> </div> <div class=payment-options-col> <span class=description-font data-bind="text: paymentOptionsModal.provideYourCardDetailsNowText"></span> </div> </div> <div class=payment-options-row> <div class=payment-options-col> <span class=title data-bind="text: paymentOptionsModal.paymentMethodsText"></span> </div> <div class=payment-options-col> <ul class="list-inline payment-method-logos" data-bind="foreach: payNowDisplayLogos().slice(0,10)"> <li class="payment-logo payment-logo-l" data-bind="css: $data"></li> </ul><!-- ko if: payNowDisplayLogos().length > 10 --> <p class=plus-more><span data-bind="text: paymentOptionsModal.plusMoreText"></span></p><!-- /ko --> </div> <div class=payment-options-col> <ul class="list-inline payment-method-logos" data-bind="foreach: payLaterDisplayLogos"> <li class="payment-logo payment-logo-l" data-bind="css: $data"></li> </ul> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(84),a=n(9),o=function(){function e(e){this.params=e,this.paymentOptionsModal=e.paymentOptionsModal;var n=a.getPageData().viewModel;this.payLaterDisplayLogos=t.pureComputed(function(){return i.getPaymentDisplayLogosForPayLater(n.paymentDetails)}),this.payNowDisplayLogos=t.pureComputed(function(){return i.getPaymentDisplayLogosForPayNow(n.paymentDetails)})}return e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div data-bind="foreach: { data: messageGroups, as: \'messageGroup\'}"><!-- ko if: messages --><!-- ko if: $parents[0].style === 0 --> <ul class="well confident-message" data-bind="foreach: messageGroup.messages"> <li class=list-unstyled data-bind="text: $data"></li> </ul><!-- /ko --><!-- ko if: $parents[0].style === 1 --> <div class="well confident-message m-t-1 m-b-0"> <ul class="list-default m-b-0" data-bind="foreach: messageGroup.messages"> <li data-bind="text: $data"></li> </ul> </div><!-- /ko --><!-- /ko --> </div>'},function(e,t,n){"use strict";var i=n(402),a=function(){function e(e){this.messageGroups=e.messageGroups,this.style=e.style?e.style:i.MessageComponentStyle.None}return e}();e.exports=a},function(e,t){e.exports='<!-- ko if: isRedirectPaymentMethodOptionShown && isDisplayPromotionDiscountText === true --> <div class=promotion-message> <div class=row> <div class="col-sm-2 col-md-2 col-lg-2"><!-- ko if: promotionDiscountLogoClass --> <span class="payment-logo payment-logo-s" data-bind="css: promotionDiscountLogoClass"> </span><!-- /ko --> </div> <div class="col-sm-10 col-md-10 col-lg-10 promotion-message-text"> <div class=promotion-text data-bind="text: promotionDiscountText"> </div><!-- ko if: isAlipayCampaign && alipayCampaignMessageText --> <div class=promotion-text> <span data-bind="html: alipayCampaignMessageText,\r\n                        popover: alipayCampaignMessageTextPopoverOptions"> </span> <span> <i class="ficon ficon-16 ficon-info-with-circle" data-bind="popover: alipayCampaignMessageTextPopoverOptions"> </i> </span> </div><!-- /ko --> </div> </div> </div> <!-- /ko -->'},function(e,t){"use strict";var n=function(){function e(e){this.isRedirectPaymentMethodOptionShown=e.isRedirectPaymentMethodOptionShown,this.isDisplayPromotionDiscountText=e.isDisplayPromotionDiscountText,this.promotionDiscountLogoClass=e.promotionDiscountLogoClass,this.promotionDiscountText=e.promotionDiscountText,this.isAlipayCampaign=e.isAlipayCampaign,this.alipayCampaignMessageText=e.alipayCampaignMessageText,this.alipayCampaignMessageTextPopoverOptions=e.alipayCampaignMessageTextPopoverOptions}return e}();e.exports=n},function(e,t){e.exports='<div data-bind="class: giftCardEarn.containerClass, css: { \'panel panel-default banner\': isDesktop && isSeparateSectionsInLeftColumnIntoCardsExperimentApplied }"> <div class=giftcard-earn-header> <i data-bind="class: iconClass()"></i> <span class=title data-bind="html: giftCardEarn.title" data-element-name=giftcard-earn-value> </span> </div> <div class=giftcard-earn-body><!-- ko ifnot: giftCardEarn.isOptInRequired() --> <span class=giftcard-message-container data-bind="foreach: giftCardEarn.messages"> <span class=giftcard-message data-bind="html: $data"></span> </span><!-- /ko --><!-- ko if: giftCardEarn.isOptInRequired() --> <label class=giftcard-opt-in-label for=giftcard-opt-in-checkbox-input> <input class=giftcard-opt-in-checkbox-input id=giftcard-opt-in-checkbox-input type=checkbox name=giftcard-opt-in-checkbox-input data-element-name=giftcard-optin data-bind="checked: giftCardEarn.isEarnGiftCardSelected, click : giftCardEarn.earnCallback, visible: giftCardEarn.isDisplayOptIn"> <span class=giftcard-message-container data-bind="foreach: giftCardEarn.messages"> <span class=giftcard-message data-bind="html: $data"></span> </span> </label><!-- /ko --> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(198),a=n(11),o=n(109),r=n(86),s=n(88),l=n(9),d="gc_opt_in",c=function(){function e(e){this.subscribeEventsNewUI(),this.moneyBackDetails=e;var n=r.isApplied(s.NewAgodaCashIcon),i="ficon "+(n?"ficon-24 ficon-agoda-cash":"ficon-16 ficon-cash-line-circle-h");this.giftCardEarn={containerClass:t.observable("giftcard-earn-container"),title:t.observable(this.moneyBackDetails.bonusYouEarnedFreeGiftCardText()),iconClass:t.observable(i),messages:[t.observable(this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText()),this.moneyBackDetails.giftcardAutoMigratedRewardUserText],earnCallback:this.updateGCOptInSelectionNewUI,expiryDate:this.moneyBackDetails.expiryDate,moneyBackAmount:this.moneyBackDetails.moneyBackAmount,moneyBackAmountInPaymentCurrency:this.moneyBackDetails.moneyBackAmountInPaymentCurrency,isEarnGiftCardSelected:t.observable(this.isOptinSelected()),isDisplayOptIn:t.observable(!0),isOptInRequired:this.moneyBackDetails.isOptInRequired};var a=l.getPageData();this.isDesktop=!(a.jsonViewModel&&a.jsonViewModel.isMobile),this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied=r.isApplied(s.SeparateSectionsInLeftColumnIntoCards),this.giftCardEarn&&this._sendGiftcardEarnMessage()}return e.prototype.updateBanner=function(e){e&&""!==e.moneyBackAmount()?(this.moneyBackDetails.shouldShowMoneyBackDetails(!0),this.moneyBackDetails.immediateDiscountTitle(e.immediateDiscountTitle()),this.moneyBackDetails.bonusYouEarnedFreeGiftCardText(e.bonusYouEarnedFreeGiftCardText()),this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText(e.yourGiftCardWillBeAddedAfterCheckOutText()),this.giftCardEarn.isOptInRequired(e.isOptInRequired()),this.giftCardEarn.isDisplayOptIn(!0),this.giftCardEarn.containerClass("giftcard-earn-container"),this.giftCardEarn.title(this.moneyBackDetails.bonusYouEarnedFreeGiftCardText()),this.giftCardEarn.messages[0](this.moneyBackDetails.yourGiftCardWillBeAddedAfterCheckOutText())):this.moneyBackDetails.shouldShowMoneyBackDetails(!1)},e.prototype.isOptinSelected=function(){var e=this.moneyBackDetails.isPreSelectOptin()&&null==i.getSessionStorageItem(d),t="true"===i.getSessionStorageItem(d);return e&&i.setSessionStorageItem(d,"true"),e||t},e.prototype.updateGCOptInSelectionNewUI=function(e){return e.giftCardEarn.isDisplayOptIn()&&e.persistOptIn(e.giftCardEarn.isEarnGiftCardSelected()),!0},e.prototype.persistOptIn=function(e){i.setSessionStorageItem(d,e?"true":"false"),t.postbox.publish(a.GIFTCARD_EARN_OPTIN_UPDATED,e)},e.prototype.checkPromotionInCart=function(e){return null!==e&&null!==e.promotionDiscount&&(0!==e.promotionDiscount.amount||0!==e.promotionDiscount.percentage)},e.prototype.subscribeEventsNewUI=function(){var e=this;this._moneyBackDeatilsUpdatedSubscription=t.postbox.subscribe(a.MONEYBACK_DETAILS_UPDATED,function(n){n&&(e.updateBanner(t.mapping.fromJS(n)),e.giftCardEarn&&e._sendGiftcardEarnMessage())}),this._moneyBackPaymentAmountUpdatedSubscription=t.postbox.subscribe(a.FORMATTED_MONEY_BACK_PAYMENT_AMOUNT_UPDATED,function(t){e.giftCardEarn.moneyBackAmountInPaymentCurrency(t)})},e.prototype._sendGiftcardEarnMessage=function(){o.instance.track("giftcard-earn-value",{action_element_name:"giftcard-earn-value",giftcard_earn_expiry:this.giftCardEarn.expiryDate()})},e.prototype.dispose=function(){this._moneyBackPaymentAmountUpdatedSubscription&&this._moneyBackPaymentAmountUpdatedSubscription.dispose()},e.prototype.iconClass=function(){var e=this.isDesktop&&this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied?"ficon-20":"ficon-16";return"ficon "+e+" "+this.giftCardEarn.iconClass()},e}();e.exports=c}).call(t,n(3))},function(e,t){e.exports='<div class="why-agoda row"> <div class="why-agoda-panel container" data-bind="foreach: { data:page.items, as: \'item\' }"> <div class=why-agoda-item data-bind="attr: { data-element-name: item.itemClass }"> <div class=vertical-line></div> <img class=content data-bind="\r\n                 css: item.itemClass, \r\n                 attr: { \r\n                 src: $parent.getImagePath(item),\r\n                 srcset: $parent.getSourceSetForImage(item), \r\n                 alt:item.title }"/> <span class="content title" data-bind=text:item.title></span> <span class="content tagline" data-bind=text:item.tagLine></span> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.cdnUrl=e.cdnUrl,this.page=e.whyAgodaPanel}return e.prototype.getImagePath=function(e){var n=t.unwrap(e.imagePath);return n?this.cdnUrl()+n+"@2x.png":""},e.prototype.getSourceSetForImage=function(e){var n=t.unwrap(e.imagePath);if(!n)return"";var i=this.cdnUrl()+e.imagePath();return i+".png 1x, "+i+"@2x.png 2x"},e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<div class="panel panel-default cc-promo-container" data-element-name=creditcard-promo-eligible data-bind="visible: isDisplayed"> <div class=panel-body> <div class=cc-promo> <span class=cc-promo__badge data-bind="text: promoEligibleText"></span> <img class=cc-promo__decorator data-bind="attr:{ srcset: cdnUrl + \'/images/new-bf/promo-decorative_element.png 1x, \' + cdnUrl + \'/images/new-bf/promo-decorative_element@2x.png 2x\',\r\n\t\t\t\tsrc: cdnUrl + \'/images/new-bf/promo-decorative_element.png\' }"/> </div> <div class=cc-detail> <span class=cc-detail__title data-bind="text: promoDiscountPercentageHeader"></span> <div class=cc-detail__content> <span data-bind="text: promoDiscountPercentageInfo"></span> </div> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(330),a=n(9),o=function(){function e(){this.isDisplayed=t.observable(!1),this.promoEligibleText=t.observable(""),this.promoDiscountPercentageHeader=t.observable(""),this.promoDiscountPercentageInfo=t.observable(""),this.cdnUrl=a.getPageData().cdnUrl,this.promocodeService=new i,this._subscribe()}return e.prototype._subscribe=function(){if(e._isNonInternalSiteId()){var t=this;this.promocodeService.getEligibleEmailCreditCardPromotionInfo().then(function(e){t.isDisplayed(e.hasEligibleCreditcardPromotion),t.promoEligibleText(e.promoEligibleText),t.promoDiscountPercentageHeader(e.promoDiscountPercentageHeader),t.promoDiscountPercentageInfo(e.promoDiscountPercentageInfo)})}},e._isNonInternalSiteId=function(){var e=parseInt(a.getPageData().siteId,10);return!isNaN(e)&&e>0},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class="contact-details-summary row"> <div class="col-sm-9 col-xs-8"> <h4 data-bind="text: contactDetails.contactDetailsText"></h4> <span data-bind="text: contactDetails.fullName"></span> <span data-bind="text: contactDetails.email"></span> <span data-bind="text: contactDetails.phoneNumber"></span><!-- ko if: contactDetails.isMakingThisBookingForSomeoneElse --> <span data-bind="html: contactDetails.guestFullName"></span><!-- /ko --> </div> <div class="col-sm-3 col-xs-4"> <a target=_blank href=# data-element-name=bf-cds-edit-details-link data-bind="click: backToFirstStep"> <span data-bind="text: contactDetails.editText"></span> </a> </div> <i class="ficon ficon-20 ficon-check-valid-state"></i> </div>'},function(e,t,n){(function(t){"use strict";var i=n(11),a=function(){function e(e){this.contactDetails=e.contactDetails}return e.prototype.backToFirstStep=function(){t.postbox.publish(i.BACK_TO_FIRST_STEP)},e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports='<template id=tmpl-terms-of-uses-tooltip> <ul class=popover-installment-terms-of-uses data-element-name=installment-terms-of-uses-tooltip><!-- ko foreach: { data: termsOfUsesArray, as: \'content\'} --> <li data-bind="text: content"></li><!-- /ko --> </ul> </template><!-- ko if: isInstallmentApplicable --> <div class=installment-details data-element-name=installment-details-block> <div> <i class="ficon ficon-16 ficon-installment-graph"></i> <strong data-bind=text:yourPaymentQualifiesText></strong> </div> <div class="row header grid-row-header"> <div class="col col-xs-1 col-sm-1 text-center"> <span></span> </div> <div class="col col-xs-3 col-sm-3 text-center"> <span><strong data-bind=text:periodText></strong></span> </div> <div class="col col-xs-2 col-sm-2 text-center"> <span><strong data-bind=text:interestText></strong></span> </div> <div class="col col-xs-3 col-sm-3 text-center"> <span><strong data-bind=text:monthlyInstallmentsText></strong></span> </div> <div class="col col-xs-3 col-sm-3 text-center"> <span><strong data-bind=text:totalPaidToBankText></strong></span> </div> </div> <div class=installment-plan-options-container><!-- ko foreach: { data: installmentDetails, as: \'installmentDetail\'} --> <div class="row grid-row"> <div class="col col-xs-1 col-sm-1 text-center"> <div class="installment-plan-radio radio"> <input type=radio name=installmentPlanChoice data-bind="checkedValue: installmentDetail.id,\r\n                                value: installmentDetail.id ,\r\n                                checked: $parent.installmentOptionSelected,\r\n                                attr: {\r\n                                    \'id\': $parent.generateElementId(installmentDetail.id),\r\n                                    \'data-num-of-month\': installmentDetail.period\r\n                                }" data-element-name=installment-plan-radio-button /> <label data-bind="attr: {\'for\': $parent.generateElementId(installmentDetail.id)}"><!-- ko if: $index() === 0 --> <span class=installment-radio-check data-element-name=installment-plan-radio-button-span></span><!-- /ko --><!-- ko ifnot: $index() === 0 --> <span class=installment-radio-check></span><!-- /ko --> </label> </div> </div> <div class="col col-xs-3 col-sm-3 grid-row-data"> <span data-bind="text: installmentDetail.periodText"></span> </div> <div class="col col-xs-2 col-sm-2 grid-row-data"> <span data-bind="text: installmentDetail.interest"></span> </div> <div class="col col-xs-3 col-sm-3 grid-row-data"> <span data-bind="text: installmentDetail.monthlyInstallment"></span> </div> <div class="col col-xs-3 col-sm-3 grid-row-data"> <span data-bind="text: installmentDetail.totalPaidToBank"></span> </div> </div><!-- /ko --> </div> <input type=radio name=installmentPlanChoice data-bind="checkedValue: 0, checked: installmentOptionSelected"/> </div> <br/><!-- ko ifnot: isNoThanksInstallment --> <div class=how-installments-work> <div> <strong data-bind="text: howInstallmentsWorkText"></strong> </div> <div class=how-installments-work-tc> <ul> <li data-bind="html: yourCardLimitTextWithValues"></li> <li data-bind="html: yourBankMayTakeText"></li> <li data-bind="html: youWillBeChargedTextWithValues"></li> <li><span data-bind="html: installmentApplyText"></span><i class="ficon ficon-16 ficon-right ficon-info-with-circle text-primary terms-of-uses-icon" data-bind="popover: termsOfUsesPopoverBindingOptions"></i></li> </ul> </div> </div><!-- /ko --> <div class="checkbox newsletter-subscription m-t-3 opt-out-of-installment"> <label> <input type=checkbox id=chkPayInstallmentFreeAmount data-bind="checked:isNoThanksInstallment, click:enableDisableInstallmentOption" data-element-name=no-thanks-installment-checkbox> <span class="No-thanks-I-prefer display-inline-block" data-bind="text: noThanksText"></span> </label> </div> <!-- /ko -->';
},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(10),o=n(89),r=function(){function e(e){var n=this;this.popoverTemplateName="tmpl-terms-of-uses-tooltip",this.installmentDetailsMaster=e.installmentDetailsMaster,this.installmentDetails=t.observableArray(),this.yourPaymentQualifiesText=t.observable(),this.periodText=t.observable(),this.interestText=t.observable(),this.monthlyInstallmentsText=t.observable(),this.totalPaidToBankText=t.observable(),this.howInstallmentsWorkText=t.observable(),this.yourCardLimitText=t.observable(),this.yourBankMayTakeText=t.observable(),this.youWillBeChargedText=t.observable(),this.youWillBeChargedTextWithValues=t.observable(),this.yourCardLimitTextWithValues=t.observable(),this.installmentApplyText=t.observable(),this.termsAndConditionsText=t.observable(),this.noThanksText=t.observable(),this.installmentBreakdownText=t.observable(),this.interestChargedByBankText=t.observable(),this.installmentsPayableText=t.observable(),this.isNoThanksInstallment=t.observable(),this.isInstallmentApplicable=t.observable(),this.defaultSelectedInstallmentPlanId=t.observable(),this.installmentOptionSelected=t.observable(),this.installmentPayable=t.observable(),this.termsOfUsesArray=t.observable(),this.installmentDetailsMaster.subscribe(this._updateInstallmentDetails.bind(this)),this.installmentOptionSelected.extend({notify:"always"}),this.installmentOptionSelected.subscribe(function(e){0!==e&&(n.isNoThanksInstallment(!1),n.installmentPlanSelectionChangedByUser(e)),n.publishInstallmentIdForBookingService(e)}),this._initPopover()}return e.prototype._initPopover=function(){this.termsOfUsesPopoverBindingOptions=new o,this.termsOfUsesPopoverBindingOptions.options.title=" ",this.termsOfUsesPopoverBindingOptions.template=this.popoverTemplateName,this.termsOfUsesPopoverBindingOptions.data={termsOfUsesArray:this.termsOfUsesArray}},e.prototype._updateInstallmentDetails=function(e){e?(this.yourPaymentQualifiesText(e.yourPaymentQualifiesText),this.periodText(e.periodText),this.interestText(e.interestText),this.monthlyInstallmentsText(e.monthlyInstallmentsText),this.totalPaidToBankText(e.totalPaidToBankText),this.howInstallmentsWorkText(e.howInstallmentsWorkText),this.yourCardLimitText(e.yourCardLimitText),this.yourBankMayTakeText(e.yourBankMayTakeText),this.youWillBeChargedText(e.youWillBeChargedText),this.installmentApplyText(e.installmentApplyText),this.termsAndConditionsText(e.termsAndConditionsText),this.noThanksText(e.noThanksText),this.installmentBreakdownText(e.installmentBreakdownText),this.interestChargedByBankText(e.interestChargedByBankText),this.installmentsPayableText(e.installmentsPayableText),this.installmentDetails(e.installmentDetails),this.installmentPayable(e.installmentPayable),this.isInstallmentApplicable(!0),this.isNoThanksInstallment(!1),this.publishInstalllmentDetailsMaster({installmentBreakdownText:e.installmentBreakdownText,interestChargedByBankText:e.interestChargedByBankText,installmentsPayableText:e.installmentsPayableText,totalCostText:e.totalCostText,payableToBankText:e.payableToBankText}),this.defaultSelectedInstallmentPlanId(this.installmentDetails()[0].id),this.installmentOptionSelected(this.defaultSelectedInstallmentPlanId()),this.termsOfUsesArray([e.installmentAvailableForAmountText,e.installmentWillAvailableForCardsText,e.inCaseOfCustomerAmendBookingText,e.inCaseOfCancellationText,e.theInstallmentArrangementText])):this.hideInstallmentPlanControlsAndResetInstallmentId()},e.prototype.hideInstallmentPlanControlsAndResetInstallmentId=function(){this.isNoThanksInstallment(!0),this.isInstallmentApplicable(!1),this.publishInstalllmentDetailsMaster({isNoThanksInstallment:!0,isInstallmentApplicable:!1}),this.publishInstallmentIdForBookingService(0)},e.prototype.publishInstalllmentDetailsMaster=function(e){t.postbox.publish(i.INSTALLMENT_DETAILS_MASTER,e)},e.prototype.publishEnableDisableInstallmentOption=function(e){t.postbox.publish(i.NO_THANKS_INSTALLMENT,e)},e.prototype.publishInstallmentIdForBookingService=function(e){t.postbox.publish(i.INSTALLMENT_ID_FOR_BOOKING,e)},e.prototype.publishMonthlyInstallmentTextForPriceDetails=function(e){t.postbox.publish(i.MONTHLY_INSTALLMENT_TEXT_UPDATE,e)},e.prototype.installmentPlanSelectionChangedByUser=function(e){if(0!==e){for(var t=null,n=0;n<this.installmentDetails().length&&(t=this.installmentDetails()[n],String(t.id)!==String(e));n++);var i=a.formatZeroBased("<b>{0}</b>",t.monthlyInstallment),o=t.period.toString(),r=a.formatZeroBased("<b>{0}</b>",t.totalPaidToBank);this.youWillBeChargedTextWithValues(a.formatZeroBased(this.youWillBeChargedText(),"",i,o)),this.yourCardLimitTextWithValues(a.formatZeroBased(this.yourCardLimitText(),"",r));var s=String(t.monthlyInstallment),l=String(t.period),d=String(t.interest),c=a.formatZeroBased(this.installmentPayable(),s,l);this.publishMonthlyInstallmentTextForPriceDetails({interestChargedByBank:d,installmentPayable:c,isNoThanksInstallment:this.isNoThanksInstallment(),isInstallmentApplicable:this.isInstallmentApplicable()})}},e.prototype.enableDisableInstallmentOption=function(e){return e.isNoThanksInstallment()?this.installmentOptionSelected(0):this.installmentOptionSelected(this.defaultSelectedInstallmentPlanId()),this.publishEnableDisableInstallmentOption(e.isNoThanksInstallment()),!0},e.prototype.generateElementId=function(e){return"installment-plan-"+e},e}();e.exports=r}).call(t,n(3))},function(e,t){e.exports='<div class="form-group has-feedback phone-number" data-element-name=up-mobile-phone-number-error data-bind="validationElement: paymentMethod.creditCard.mobilePhoneNumber"><!-- ko ifnot: isAddMoreLifeExperiment --> <label for=mobilePhoneNumber class=control-label data-bind="text: paymentMethod.mobileNumberText"></label> <input type=tel class="form-control sensitive" name=mobilePhoneNumber id=mobilePhoneNumber autocomplete=tel autocorrect=off data-element-name=up-mobile-phone-number data-bind="value: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    intlTelInput: getCombinedPhoneNumber(),\r\n                    phoneCharacterOnly: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    allowEmpty" maxlength=16 /> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <input type=tel class="form-control sensitive" name=mobilePhoneNumber id=mobilePhoneNumber autocomplete=tel autocorrect=off data-element-name=up-mobile-phone-number data-bind="value: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    intlTelInput: getCombinedPhoneNumber(),\r\n                    phoneCharacterOnly: paymentMethod.creditCard.mobilePhoneNumber,\r\n                    allowEmpty" maxlength=16 /> <label for=mobilePhoneNumber class=floating-label data-bind="text: paymentMethod.mobileNumberText"></label><!-- /ko --> </div>'},function(e,t,n){(function(t){"use strict";var i=n(52),a=n(9),o=n(75),r=n(88),s=function(){function e(e){this.allValidationRules=new Array,this.isAddMoreLifeExperiment=a.getFeature("addMoreLifeToBookingForm"),this.paymentMethod=e.paymentMethod,this.paymentMethod.creditCard&&(this._init(),this._setValidation())}return e.prototype._init=function(){this._intlTelInputService=new i("mobilePhoneNumber"),this._initIntlTelInput()},e.prototype._initIntlTelInput=function(){var e=this;if(this.paymentMethod.creditCard.mobilePhoneCountryCode=t.observable("default"),!this.paymentMethod.creditCard.mobilePhoneNumber()){var n=t.unwrap(this.paymentMethod.countryOfResidenceId),i=t.unwrap(this.paymentMethod.phoneNumber);(a.getFeature(r.UnionPayGen2CreditCard)||a.getFeature(r.UnionPayGen2DebitCard))&&-1===i.indexOf("+")&&191===n&&(i="+86"+i,this.paymentMethod.phoneNumber(i)),this.paymentMethod.creditCard.mobilePhoneNumber(i)}this._intlTelInputService.onCountryChangeCallback(function(t,n){e.paymentMethod.creditCard.mobilePhoneCountryCode("+"+n.dialCode)},this),this.paymentMethod.creditCard.mobilePhoneNumber.subscribe(function(t){e._intlTelInputService.intlTelInput("setNumber",t)})},e.prototype._setValidation=function(){var e=this;this.paymentMethod.creditCard.mobilePhoneNumber.extend({required:{message:o.getValidationMessage(t.unwrap(this.paymentMethod.pleaseEnterPhoneNumberText),"mobilePhoneNumber-span"),params:!0},pattern:{message:o.getValidationMessage(t.unwrap(this.paymentMethod.pleaseEnterPhoneNumberText),"mobilePhoneNumber-span"),params:this.paymentMethod.mobilePhoneRegex()},validation:[{validator:function(){var n=t.unwrap(e.paymentMethod.creditCard.mobilePhoneCountryCode);return!n||"default"===n||e._intlTelInputService.intlTelInput("getNumber").length<=20&&e._intlTelInputService.intlTelInput("isValidNumber")},message:o.getValidationMessage(t.unwrap(this.paymentMethod.pleaseEnterPhoneNumberText),"mobilePhoneNumber-span")},{validator:function(){return t.unwrap(e.paymentMethod.creditCard.mobilePhoneCountryCode)&&"default"!==t.unwrap(e.paymentMethod.creditCard.mobilePhoneCountryCode)},message:o.getValidationMessage(t.unwrap(this.paymentMethod.pleaseEnterCountryCodeText),"countrycode-span")},{validator:function(){var n=t.unwrap(e.paymentMethod.creditCard.mobilePhoneCountryCode);return!n||"default"===n||e._intlTelInputService.intlTelInput("getNumber").length>=8&&e._intlTelInputService.intlTelInput("isValidNumber")},message:o.getValidationMessage(t.unwrap(this.paymentMethod.pleaseEnterPhoneNumberText),"mobilePhoneNumber-span")}]}),t.unwrap(this.paymentMethod.creditCard.mobilePhoneNumber)&&this.paymentMethod.creditCard.mobilePhoneNumber.isModified(!0),this.allValidationRules.push(this.paymentMethod.creditCard.mobilePhoneNumber.rules)},e.prototype.getCombinedPhoneNumber=function(){var e=t.unwrap(this.paymentMethod.creditCard.mobilePhoneCountryCode)&&"default"!==this.paymentMethod.creditCard.mobilePhoneCountryCode()?this.paymentMethod.creditCard.mobilePhoneCountryCode():"",n=t.unwrap(this.paymentMethod.creditCard.mobilePhoneNumber);return n.indexOf(e)<0?t.observable(e+n):t.observable(n)},e.prototype.dispose=function(){this.allValidationRules.forEach(function(e){e&&e.removeAll()})},e}();e.exports=s}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: message && showBanner --> <div class="alert alert-warning china-compliance"> <i class="ficon ficon-bold ficon-cancellation-policy-non-refund-special-condition ficon-16 ficon-left"></i> <span data-bind="html: message"></span> </div> <!-- /ko -->'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.message=e.message,this.showBanner=t.observable(!0)}return e}();e.exports=n}).call(t,n(3))},function(e,t){e.exports='<!-- ko ifnot: isAddMoreLifeExperiment --><!-- ko if: params.labelText --> <label class=control-label data-bind="text: params.labelText,\r\n                  attr: { for: ko.unwrap(params.inputAttributes) ? ko.unwrap(params.inputAttributes).id : null },\r\n                  css: params.labelCss"></label><!-- /ko --><!-- ko if: params.intlTelInput != null --> <input class="form-control sensitive" data-bind="value: params.value, disable: params.disable, allowEmpty, hasFocus: params.hasFocus, ccFormat: params.ccFormat,\r\n\t   valueUpdate: params.valueUpdate, attr: ko.unwrap(params.inputAttributes), ccExpiryDateFormat: params.ccExpiryDateFormat,\r\n\t   intlTelInput: params.intlTelInput, phoneCharacterOnly: params.phoneCharacterOnly, css: params.css, enter: params.enter,\r\n       event: ko.unwrap(params.event), dobFormat: params.dobFormat, countryCodeFormat: params.countryCodeFormat, \r\n       usPostCodeFormat: params.usPostCodeFormat, taxIdFormat: params.taxIdFormat"/><!-- /ko --><!-- ko if: params.intlTelInput == null --> <input class="form-control sensitive" data-bind="value: params.value, disable: params.disable, allowEmpty, hasFocus: params.hasFocus, ccFormat: params.ccFormat,\r\n\t   valueUpdate: params.valueUpdate, attr: ko.unwrap(params.inputAttributes), ccExpiryDateFormat: params.ccExpiryDateFormat,\r\n\t   css: params.css, enter: params.enter, event: ko.unwrap(params.event), dobFormat: params.dobFormat, \r\n\t   countryCodeFormat: params.countryCodeFormat, usPostCodeFormat: params.usPostCodeFormat, taxIdFormat: params.taxIdFormat"/><!-- /ko --><!-- ko if: params.iconClass != null --> <i class=ficon data-bind="class: params.iconClass"></i><!-- /ko --> <i class="ficon form-control-feedback" data-bind="css: params.iconCss"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --><!-- ko if: params.intlTelInput != null --> <input class="form-control sensitive" data-bind="value: params.value, disable: params.disable, allowEmpty, hasFocus: params.hasFocus, ccFormat: params.ccFormat,\r\n\t   valueUpdate: params.valueUpdate, attr: ko.unwrap(params.inputAttributes), ccExpiryDateFormat: params.ccExpiryDateFormat,\r\n\t   intlTelInput: params.intlTelInput, phoneCharacterOnly: params.phoneCharacterOnly, css: params.css, enter: params.enter,\r\n       event: ko.unwrap(params.event), dobFormat: params.dobFormat, countryCodeFormat: params.countryCodeFormat, \r\n       usPostCodeFormat: params.usPostCodeFormat, taxIdFormat: params.taxIdFormat"/><!-- /ko --><!-- ko if: params.intlTelInput == null --> <input class="form-control sensitive" data-bind="value: params.value, disable: params.disable, allowEmpty, hasFocus: params.hasFocus, ccFormat: params.ccFormat,\r\n\t   valueUpdate: params.valueUpdate, attr: ko.unwrap(params.inputAttributes), ccExpiryDateFormat: params.ccExpiryDateFormat,\r\n\t   css: params.css, enter: params.enter, event: ko.unwrap(params.event), dobFormat: params.dobFormat, \r\n\t   countryCodeFormat: params.countryCodeFormat, usPostCodeFormat: params.usPostCodeFormat, taxIdFormat: params.taxIdFormat,\r\n       css: { \'has-value\': params.value }"/><!-- /ko --><!-- ko if: params.iconClass != null --> <i class=ficon data-bind="class: params.iconClass"></i><!-- /ko --><!-- ko if: params.labelText --> <label class=floating-label data-bind="text: params.labelText,\r\n                  attr: { for: ko.unwrap(params.inputAttributes) ? ko.unwrap(params.inputAttributes).id : null },\r\n                  css: params.labelCss"></label><!-- /ko --> <!-- /ko -->'},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.params=e,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm)}return e}();e.exports=o},function(e,t){e.exports='<!-- ko ifnot: isAddMoreLifeExperiment --><!-- ko if: params.labelText --> <label class=control-label data-bind="text: params.labelText, attr: { for: ko.unwrap(params.inputAttributes) ? ko.unwrap(params.inputAttributes).id : null }"></label><!-- /ko --><!-- ko if: params.options --> <select class="form-control sensitive" data-bind="value: params.value, valueAllowUnset: params.valueAllowUnset, allowEmpty, selectElement,\r\n                   options: params.options, optionsText: params.optionsText, optionsValue: params.optionsValue,\r\n                   optionsCaption: params.emptyOptionLabel,\r\n                   hasFocus: params.hasFocus, attr: ko.unwrap(params.inputAttributes)"> </select><!-- /ko --><!-- ko if: params.optionGroups --> <select class="form-control sensitive" data-bind="value: params.value, valueAllowUnset: params.valueAllowUnset, allowEmpty, selectElement,\r\n                   hasFocus: params.hasFocus, attr: ko.unwrap(params.inputAttributes)"><!-- ko if: params.emptyOptionLabel --> <option value="" data-bind="text: params.emptyOptionLabel"></option><!-- /ko --><!-- ko foreach: { data: params.optionGroups, as: \'optGroup\' } --> <optgroup data-bind="foreach: optGroup.options, attr: { \'label\': optGroup.label }"> <option data-bind="text: text, value: value"></option> </optgroup><!-- /ko --> </select><!-- /ko --> <i class="ficon form-control-feedback"></i><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <div class=form-select><!-- ko if: params.options --> <select class="form-control sensitive" data-bind="value: params.value, valueAllowUnset: params.valueAllowUnset, allowEmpty, selectElement,\r\n                   options: params.options, optionsText: params.optionsText, optionsValue: params.optionsValue, \r\n                   hasFocus: params.hasFocus, attr: ko.unwrap(params.inputAttributes), css: params.css"> </select><!-- /ko --><!-- ko if: params.optionGroups --> <select class="form-control sensitive" data-bind="value: params.value, valueAllowUnset: params.valueAllowUnset, allowEmpty, selectElement, \r\n\t\t\thasFocus: params.hasFocus, attr: ko.unwrap(params.inputAttributes), css: params.css"> <option value="" disabled=disabled hidden></option><!-- ko foreach: { data: params.optionGroups, as: \'optGroup\' } --> <optgroup data-bind="foreach: optGroup.options, attr: { \'label\': optGroup.label }"> <option data-bind="text: text, value: value"></option> </optgroup><!-- /ko --> </select><!-- /ko --><!-- ko if: params.labelText --> <label class=floating-label data-bind="text: params.labelText"></label><!-- /ko --> <i class="ficon ficon-desktop-ic-black-down select-icon"></i> </div> <!-- /ko -->'},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.params=e,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm)}return e}();e.exports=o},function(e,t){e.exports='<!-- ko ifnot: isAddMoreLifeExperiment --> <label class=control-label data-bind="html: params.labelText"></label> <textarea class="form-control fixed-text-area sensitive" data-bind="value: params.value, hasFocus: params.hasFocus, attr: params.inputAttributes, css: params.css"></textarea><!-- /ko --><!-- ko if: isAddMoreLifeExperiment --> <textarea class="form-control fixed-text-area sensitive" data-bind="value: params.value, hasFocus: params.hasFocus, attr: params.inputAttributes, css: params.css"></textarea> <label class=floating-label data-bind="html: params.labelText"></label> <!-- /ko -->'},function(e,t,n){"use strict";var i=n(9),a=n(91),o=function(){function e(e){this.params=e,this.isAddMoreLifeExperiment=i.getFeature(a.AddMoreLifeToBookingForm)}return e}();e.exports=o},function(e,t){e.exports='<div class="component-wrapper container"> <div class=row><!-- ko if: headerComponent --> <div data-bind="component: headerComponent"></div><!-- /ko --> </div> <div class=row><!-- ko if: bodyComponent --> <div data-bind="component: bodyComponent"></div><!-- /ko --> </div> <div class=row><!-- ko if: footerComponent --> <div data-bind="component: footerComponent"></div><!-- /ko --> </div> </div>'},function(e,t){"use strict";var n=function(){function e(e){this.footerComponent=e.footerComponent,this.headerComponent=e.headerComponent,this.bodyComponent=e.bodyComponent}return e}();e.exports=n},function(e,t){e.exports='<div class="panel panel-default banner about-payment"> <h4 data-bind="text: aboutPaymentTitle"></h4> <div class=divider-solid-bottom></div> <div class=about-payment> <data data-bind="text: aboutPaymentDetail"></data> <a target=_blank data-bind="click: openBookingConditionsModal" href=#> <span data-bind="text: aboutPaymentLink"></span> </a> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(97),a=n(96),o=n(99),r=function(){function e(e){this.aboutPaymentTitle=e.aboutPaymentTitle,this.aboutPaymentDetail=e.aboutPaymentDetail,this.aboutPaymentLink=e.aboutPaymentLink,this.roomDetails=e.roomDetails,this._modalService=new o,t.stringTemplateEngine.instance.addTemplate(a.BOOKING_CONDITIONS_MODAL_BODY,n(187))}return e.prototype.openBookingConditionsModal=function(){var e=new i;e.header.data={isCloseBtnDisplayed:!0,title:this.roomDetails.roomTypes()[0].bookingConditionsModal.title()},e.body.name=a.BOOKING_CONDITIONS_MODAL_BODY,e.body.data={vm:this.roomDetails.roomTypes()[0].bookingConditionsModal},e.dialogCss="booking-conditions-modals",e.options.keyboard=!0,this._modalService.open(e)},e.prototype.dispose=function(){t.stringTemplateEngine.instance.removeTemplate(a.BOOKING_CONDITIONS_MODAL_BODY)},e}();e.exports=r}).call(t,n(3))},function(e,t){e.exports='<div class=payment-method-dropdown> <div class="form-control paymentMethod" data-bind="click: toggleOptionsDisplay, event: { keydown: keyDownOnInput }, hasFocus: hasFocusOnMainInput" tabindex=0><!-- ko if: ko.unwrap(selectedOption) --><!-- ko if: selectedOption().optionsValue !== \'0\' --> <p class="payment-logo payment-logo-s" data-bind="css: getLogoCssForOption(selectedOption)"></p><!-- /ko --><!-- /ko --> <span data-bind="text: ko.unwrap(selectedOption) ? ko.unwrap(selectedOption).text : \'\'"></span> <i class="ficon ficon-icon-arrow-down ficon-left"></i> </div><!-- ko if: isAddMoreLifeExperiment --> <label for=paymentMethod class=control-label data-bind="text: params.labelText"></label><!-- /ko --> <ul data-bind="foreach: params.options, css: { hidden: isOptionsHidden }, attr: { \'data-element-name\': params.dataElementName }"> <li data-bind="css: { selected: $parent.isListElementSelected($data) }, click: $parent.selectOption, attr: { value: optionsValue }, event: { keydown: $parent.keyDownOnListElement, mouseover: $parent.mouseOverOnListElement }" tabindex=0><!-- ko if: $data.key !== \'0\' --> <p class="payment-logo payment-logo-s" data-bind="css: $parent.getLogoCssForOption($data)"></p><!-- /ko --> <span data-bind="text: text"></span> </li> </ul> </div>'},function(e,t,n){(function(t,i){"use strict";var a=n(109),o=n(447),r=n(9),s=n(91),l=function(){function e(e){this.DROPDOWN_MAIN_SELECTOR=".payment-method-dropdown",this.LIST_ELEMENT_SELECTOR=".payment-method-dropdown ul li:nth-child(#elementNumber)",this.GLOBAL_CLICK_HANDLER_ID="click.payment-method-dropdown",this.params=e,this.isOptionsHidden=t.observable(!0),this.focusedListElementNumber=1,this.hasFocusOnMainInput=t.observable(!1),this.isAddMoreLifeExperiment=r.getFeature(s.AddMoreLifeToBookingForm),this.initSelectedOption(),a.instance.track(this.params.dataElementName,{action_type:"reveal",action_element_value:t.unwrap(this.selectedOption)?this.selectedOption().key:""})}return e.prototype.initSelectedOption=function(){var e=this;this.selectedOption=t.observable(this.findOptionByValue(this.params.value())),this.params.value.subscribe(function(t){e.selectedOption(e.findOptionByValue(t))})},e.prototype.findOptionByValue=function(e){var t=this.params.options.filter(function(t){return t.optionsValue===e});return t.length>0?t[0]:null},e.prototype.selectOption=function(e){this.selectedOption()&&this.selectedOption().key!==e.optionsValue&&a.instance.track(this.params.dataElementName,{action_type:"change",action_element_value:e.optionsValue}),this.params.value(e.optionsValue),this.selectedOption(this.findOptionByValue(this.params.value())),this.hideOptionList()},e.prototype.getLogoCssForOption=function(e){return 1===t.unwrap(e).logoClassList.length&&t.unwrap(e).logoClassList[0]?t.unwrap(e).logoClassList[0]:"visa-master"},e.prototype.toggleOptionsDisplay=function(){this.isOptionsHidden()?this.showOptionList():this.hideOptionList()},e.prototype.showOptionList=function(){a.instance.track(this.params.dataElementName,{action_type:"click"}),this.isOptionsHidden(!1),this.focusedListElementNumber=this.params.options.indexOf(this.selectedOption())+1,this.focusOnListElement(this.focusedListElementNumber),this.bindPageClickHandling()},e.prototype.hideOptionList=function(){var e=this;a.instance.track(this.params.dataElementName,{action_type:"click"}),this.isOptionsHidden(!0),setTimeout(function(){i("*").off(e.GLOBAL_CLICK_HANDLER_ID)},1)},e.prototype.focusOnListElement=function(e){i(this.LIST_ELEMENT_SELECTOR.replace("#elementNumber",""+e)).focus()},e.prototype.bindPageClickHandling=function(){var e=this;i("*").on(this.GLOBAL_CLICK_HANDLER_ID,function(t){0!==i(t.target).parents(e.DROPDOWN_MAIN_SELECTOR).length||e.isOptionsHidden()||e.hideOptionList()})},e.prototype.keyDownOnInput=function(e,t){if(t){if(t.keyCode===o.Enter)return this.toggleOptionsDisplay(),this.isOptionsHidden()&&this.hasFocusOnMainInput(!0),!1;if(!this.isOptionsHidden()&&t.keyCode===o.Esc)return this.hideOptionList(),this.hasFocusOnMainInput(!0),!1}return!0},e.prototype.keyDownOnListElement=function(e,t){if(t)switch(t.keyCode){case o.Enter:return this.selectOption(e),this.hasFocusOnMainInput(!0),!1;case o.Esc:this.hideOptionList(),this.hasFocusOnMainInput(!0);break;case o.Tab:return this.hideOptionList(),!0;case o.ArrowUp:return this.handleArrowUpOnListElement(),!1;case o.ArrowDown:return this.handleArrowDownOnListElement(),!1}return!0},e.prototype.mouseOverOnListElement=function(e){var t=this.params.options.indexOf(e)+1;return t>0&&(this.focusedListElementNumber=t,this.focusOnListElement(t)),!0},e.prototype.handleArrowDownOnListElement=function(){this.focusedListElementNumber===this.params.options.length?this.focusedListElementNumber=1:this.focusedListElementNumber++,this.focusOnListElement(this.focusedListElementNumber)},e.prototype.handleArrowUpOnListElement=function(){1===this.focusedListElementNumber?this.focusedListElementNumber=this.params.options.length:this.focusedListElementNumber--,this.focusOnListElement(this.focusedListElementNumber)},e.prototype.isListElementSelected=function(e){return t.unwrap(this.selectedOption)&&this.selectedOption().optionsValue===e.optionsValue},e}();e.exports=l}).call(t,n(3),n(2))},function(e,t){"use strict";var n;!function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowDown=40]="ArrowDown"}(n||(n={})),e.exports=n},function(e,t){e.exports='<div class="panel panel-default payment-type-panel row"> <div class=payment-section> <div class=payment-section-title data-bind="text: chooseYourPaymentOption"></div> <div class=payment-section-option> <input type=radio name=payment-option id=pay-later-option-radio value=1 data-bind="checkedValue: 1, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-later-option-radio data-element-name=payment-panel-pay-later> <span class=radio-button></span> <span data-bind="text: payLaterOption"></span> </label> </div> <div class=payment-type-content> <div class=payment-type-content-firstline> <span data-bind="text: capRiskFree" class=free-message></span> <span data-bind="text: bnplMessage"></span> </div> <div data-bind="text: freeCancellationBefore" class=payment-type-info></div> </div> <div data-bind="html: disclaimer" class="payment-type-footnote payment-type-disclaimer"></div> </div> <div class="payment-section payment-section-option"> <input type=radio name=payment-option id=pay-now-option-radio value=0 data-bind="checkedValue: 0, checked: paymentChargeOptionSelector.paymentChargeOption"/> <label for=pay-now-option-radio data-element-name=payment-panel-pay-now> <span class=radio-button></span> <div class=radio-button-paynow> <div data-bind="text: payNowOption"></div> <div class=payment-type-footnote data-bind="text: youCanChooseToPayNow"></div> </div> </label> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(83),o=function(){function e(e){this.params=e,this.capRiskFree=e.capRiskFree,this.freeCancellationBefore=e.freeCancellationBefore,this.youCanChooseToPayNow=e.youCanChooseToPayNow,this.chooseYourPaymentOption=e.chooseYourPaymentOption,this.payNowOption=e.payNowOption,this.payLaterOption=e.payLaterOption,this.bnplMessage=t.unwrap(e.bnplMessage),this.termsOfUseLink=t.unwrap(e.termsOfUseLink),this.disclaimerUrl=t.unwrap(e.disclaimerUrl),this.disclaimer=this.createPolicyLinkElement(t.unwrap(e.disclaimer)),this.paymentChargeOptionSelector=e.paymentChargeOptionSelector,this.subscribePaymentChargeOption()}return e.prototype.createPolicyLinkElement=function(e){var t='<a href="{0}" target="_blank" data-element-name="terms-of-use">{1}</a>';return e.replace("{0}",t.replace("{0}",this.disclaimerUrl).replace("{1}",this.termsOfUseLink))},e.prototype.subscribePaymentChargeOption=function(){t.isObservable(this.paymentChargeOptionSelector.paymentChargeOption)||(this.paymentChargeOptionSelector.paymentChargeOption=t.observable(a.PayLater)),this.paymentChargeOptionSelector.paymentChargeOption.subscribe(function(e){e===a.PayNow?t.postbox.publish(i.PAYMENT_CHARGE_OPTION_UPDATED,a.PayNow):t.postbox.publish(i.PAYMENT_CHARGE_OPTION_UPDATED,a.PayLater)})},e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class=modal-body-inner> <h4 class=title data-bind="text: areYouSureYouWantToGoText"></h4> <div class=giftcard-balance> <i data-bind="class: iconClass"></i> <span class=text data-bind="text: balanceCanBeUsedText"></span> </div> <p class=spend-it-before-expire data-bind="text: spendItBeforeItExpireText"></p> <div class=complete-my-booking data-bind="text: completeMyBooking, click: closePopup"></div> </div>'},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(86),s=n(88),l=function(e){function a(t,n){e.call(this),this.page=t,this.popupCloseHandler=n,this.leavingBookingFormModal=this.page.leavingModal,this._init()}return i(a,e),a.prototype._init=function(){this.header.data={isCloseBtnDisplayed:!0,title:""},this.body.name=o.LEAVING_BOOKING_FROM_MODAL_BODY;var e=this.leavingBookingFormModal.balanceCanBeUsedText,i=e&&e.peek().length>0;if(i){var a=r.isApplied(s.NewAgodaCashIcon),l="ficon "+(a?"ficon-agoda-cash":"ficon-cash-solid-new");t.stringTemplateEngine.instance.addTemplate(this.body.name,n(450)),this.body.data={areYouSureYouWantToGoText:this.leavingBookingFormModal.areYouSureYouWantToGoText,balanceCanBeUsedText:this.leavingBookingFormModal.balanceCanBeUsedText,spendItBeforeItExpireText:this.leavingBookingFormModal.spendItBeforeItExpireText,completeMyBooking:this.leavingBookingFormModal.completeMyBooking,closePopup:this.popupCloseHandler,page:this.page,iconClass:l}}else t.stringTemplateEngine.instance.addTemplate(this.body.name,n(452)),this.body.data=this.leavingBookingFormModal,this.footer={name:o.LEAVING_BOOKING_FORM_MODAL_FOOTER,templateEngine:t.stringTemplateEngine.instance,data:{travelersConsiderThisPropertyText:this.leavingBookingFormModal.travelersConsiderThisPropertyText}},t.stringTemplateEngine.instance.addTemplate(this.footer.name,n(453));this.dialogCss=o.LEAVING_BOOKING_FROM_MODAL_CLASS},a}(a);e.exports=l}).call(t,n(3))},function(e,t){e.exports='<div> <h4 data-bind="text: areYouSureYouWantToGoText"></h4> <span data-bind="text: theDetailsWillBeLostText"></span> <span data-bind="text: onlyACompletedBookingGuaranteesPriceText"></span> </div><!-- ko if: isShowPriceGuarantee --> <div class=price-guarantee> <i class="ficon ficon-20 ficon-price-messaging ficon-left lawn-green"></i> <span class=price-guarantee-content data-bind="html: agodaPriceGuaranteeText"></span> </div> <!-- /ko-->'},function(e,t){e.exports='<div> <span class="ficon ficon-16 ficon-hotel-people-looking ficon-left"></span><span data-bind="html: travelersConsiderThisPropertyText"></span> </div>'},function(e,t){e.exports='<!-- ko if: isAgodaVIP --> <div class=agoda-vip-panel> <div class=header-banner> <p class=text-message data-bind="html: vipText"></p> </div> <div class=message> <span class="ladda-label text-message" data-bind="text: agodaVIPHeaderText"></span> </div> </div> <!-- /ko-->'},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(10),o=function(){function e(e){var n=this;this.params=e,e?(this.isAgodaVIP=e.isAgodaVIP,this.agodaVIPHeaderText=e.agodaVIPHeaderText,this.vipText=t.observable(a.format('{1}<span class="vip-helight">{2}<i class="ficon ficon-9 ficon-star-1"></i></span>',e.agodaText(),e.vipText()))):(this.isAgodaVIP=t.observable(!1),this.agodaVIPHeaderText=t.observable(""),this.vipText=t.observable("")),this._guestDetailsUpdatedSubscription=t.postbox.subscribe(i.GUEST_DETAILS_UPDATED,function(e){e.agodaVIP?(n.isAgodaVIP(e.agodaVIP.isAgodaVIP),n.agodaVIPHeaderText(e.agodaVIP.agodaVIPHeaderText),n.vipText(a.format('{1}<span class="vip-helight">{2}<i class="ficon ficon-9 ficon-star-1"></i></span>',e.agodaVIP.agodaText,e.agodaVIP.vipText))):n.isAgodaVIP(!1)})}return e}();e.exports=o}).call(t,n(3))},function(e,t){e.exports='<div class=travel-packages-summary> <h4 data-bind="text: travelPackagesSummary.travelPackagesTitle"></h4> <div class=travel-packages-information> <p class=travel-packages-dates-container> <span data-bind="text: travelPackagesSummary.travelPackagesPeriod"></span> </p> <p class=travel-packages-nights-container> <span data-bind="text: travelPackagesSummary.travelPackagesDuration"></span> </p> </div> </div>';
},function(e,t){"use strict";var n=function(){function e(e){this.travelPackagesSummary=e.travelPackagesSummary}return e}();e.exports=n},function(e,t){e.exports='<div class=ground-transportation-details> <div class=ground-transportation-title-container> <div class=ground-transportation-pickup-date-container> <h4 class=ground-transportation-pickup-date data-bind="text: groundTransportationDetails.pickupDate"></h4> </div> <i class="ficon ficon-20 ficon-airport-transfer-solid"></i> </div> <div class=divider-solid-bottom></div> <div class=ground-transportation-information> <p class=ground-transportation-information-left> <i class="ficon ficon-20 ficon-city-buses"></i> </p> <div class=ground-transportation-information-right> <div class=row> <span data-bind="text: groundTransportationDetails.groundTransportationType"></span> <p><span data-bind="text: groundTransportationDetails.umrahOperatorTitle"></span> <span data-bind="text: groundTransportationDetails.umrahOperatorName"></span></p> <p><span data-bind="text: fromText"></span> <span data-bind="text: groundTransportationDetails.pickupLocation"></span></p> <p><span data-bind="text: toText"></span> <span data-bind="text: groundTransportationDetails.dropOffLocation"></span></p> </div> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){for(var n=0,i=0;i<e.groundTransportationDetails().length;i++)if(!e.groundTransportationDetails()[i].isRendered){n=i,e.groundTransportationDetails()[i].isRendered=t.observable(!0);break}this.groundTransportationDetails=e.groundTransportationDetails()[n],this.fromText=e.fromText,this.toText=e.toText,this.pickupTimeText=e.pickupTimeText}return e}();e.exports=n}).call(t,n(3))},375,function(e,t,n){(function(t){"use strict";var i=n(9),a=function(){function e(){var e=i.getPageData(),n=e&&e.jsonViewModel&&e.jsonViewModel.banners;if(n){var a="hotelTreat",o=n[a];o?this.banner={category:t.observable(a),templateName:t.observable("hotel-treat-banner"),icon:t.observable(o.icon),messages:[{message:t.observable(o.messages[0].message),popover:t.observable(o.messages[0].popover),template:'\n                            <div class="popover fade top in hotelTreatPopup">\n                                <div class="arrow position-left"></div>\n                                <div class="popover-content"></div>\n                            </div>\n                        '}],title:t.observable(""),isPanel:t.observable(!0)}:this.banner={category:t.observable(a),templateName:t.observable("hotel-treat-banner"),icon:null,messages:null,title:null,isPanel:t.observable(!1)}}}return e}();e.exports=a}).call(t,n(3))},function(e,t){e.exports="<div class=session-countdown data-bind=\"css: { 'panel panel-default panel-body': params.isGuestDetailsSplitToPanels },\r\n                html: initialText\"> </div>"},function(e,t,n){(function(t){"use strict";var n=function(){function e(e){this.params=e,this.initialText=this.formatCountdownText("00 : 20 : 00"),this.initTimer()}return e.prototype.initTimer=function(){var t=this;null==this.params.sessionCountdown.sessionExpiryTime&&(this.params.sessionCountdown.sessionExpiryTime=new Date((new Date).getTime()+12e5),this.params.sessionCountdown.sessionExpiryTime.setMilliseconds(0)),null!=e.countdownInterval&&clearInterval(e.countdownInterval),e.countdownInterval=setInterval(function(){var n=t.params.sessionCountdown.sessionExpiryTime.getTime()-(new Date).getTime();if(n<=0)clearInterval(e.countdownInterval),t.setCountdownText(t.formatCountdownText("00 : 00 : 00")),setTimeout(function(){t.setCountdownText(t.params.sessionCountdown.confirmingPricingText())},1e3),setTimeout(function(){t.params.sessionCountdown.sessionExpiryTime=null,t.initTimer()},6e3);else{var i=t.formatNumber(Math.floor(n%864e5/36e5)),a=t.formatNumber(Math.floor(n%36e5/6e4)),o=t.formatNumber(Math.floor(n%6e4/1e3));t.setCountdownText(t.formatCountdownText(i+" : "+a+" : "+o))}},1e3)},e.prototype.formatCountdownText=function(e){return this.params.sessionCountdown.holdingPricingText().replace("{0}",e)},e.prototype.setCountdownText=function(e){t(".session-countdown").html(e)},e.prototype.formatNumber=function(e){return e<0?"00":e<10?"0"+e:""+e},e}();e.exports=n}).call(t,n(2))},function(e,t,n){"use strict";var i=n(465),a=n(466),o=function(){function e(){}return e.register=function(){i(),a()},e}();e.exports=o},function(e,t,n){(function(t){"use strict";function n(){t.extenders.confirmable=function(e,n){var i=n.unless||function(){return!1},a=t.computed({read:e,write:function(t){var n=e();i(n,t)?e(t):e.notifySubscribers(n)}}).extend({notify:"always"});return a}}e.exports=n}).call(t,n(3))},function(e,t,n){(function(t,n){"use strict";function i(){t.extenders.preloadImage=function(e,i){var a=null,o=i||"../../../images/new-bf/preloader.gif",r=t.computed({read:e,write:function(t){var i,r=e();t===o||t===a?i=t:(a=t,i=o,n("<img />").attr("src",t).load(function(n){i=t,a=null;var o=n.target,r=o.width,s=o.height,l=1;r<2&&s<2&&(l=0),e(l),e.notifySubscribers(l)})),i!==r?e(i):t!==r&&e.notifySubscribers(i)}});return r(e()),r}}e.exports=i}).call(t,n(3),n(2))},function(e,t,n){(function(t,i){"use strict";var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(168),r=n(468),s=n(81),l=n(86),d=n(67),c=n(11),p=n(88),u=n(470),m=n(471),h=n(481),f=n(83),g=n(84),b=n(69),y=n(21),v=n(483),C=n(484),T=n(10),k=n(486),P=n(519),x=n(520),D=n(521),_=n(525),w=n(8),M=n(52),S=n(9),A=n(97),O=n(96),E=n(99),N=n(70),R=n(68),I=n(528),L=n(152),F=n(154),B=n(86),U=n(403),V=n(410),q=n(90),j=n(109),G=n(530),H=n(531),W=n(532),Y=n(535),K=n(153),$=n(184),z=n(62),J=n(198),X=n(91),Z=n(209),Q=n(538),ee=function(e){function m(i){var a=this;e.call(this,i),this.page=i,this._isShowLeavingModal=!1,this._isShowBookingTooLargeModal=!1,this._isShowPrebookingSessionExceededModal=!1,this.isExperimentIkki9635Applied=!1,this.submitSecondStep=function(){if(t.postbox.publish(c.SUBMIT_SECOND_STEP),!a.isProcessing()&&!a._shouldShowAirportTransferPopup(!0)){a.page.secondStepErrorMessage("");var e=t.validation.group(a.page.paymentDetails.selectedPaymentMethodType);if(e().length||(e=t.validation.group(a.page.paymentDetails,{deep:!0})),a.page.isPolicyConfirmationCheckBoxRequired()){var i=a.page.isAcceptTermsAndConditions();if(!i)return a.isUserClickOnTermsAndConditionsTextbox(!0),void a.isFormInvalid(!0)}if(a.page.isChinaDisclaimerTextCheckBoxRequired()){var o=a.page.isAcceptChinaDisclaimer();if(!o)return a.isUserClickOnChinaDisclaimerTextbox(!0),void a.isFormInvalid(!0)}if(a.page.requireMoreGuestDetails()){var r=t.validation.group([a.page.guestDetails.customer.dateOfBirth,a.page.guestDetails.customer.placeOfBirth]);if(r().length)return r.showAllMessages(!0),void a.isFormInvalid(!0)}var s=a.page.paymentDetails.paymentMethod;if(a.isExperimentIKKI9356Applied&&!a.validateCcofForL1LoggedInFlow(t.unwrap(a.page.paymentDetails.selectedPaymentMethodType),s.creditCard))return t.isObservable(s.creditCardOnFileErrorMessage)&&s.creditCardOnFileErrorMessage(s.pleaseSelectOneOfYourSavedCardOrChooseAdifferentPaymentMethodAboveText()),void a.isFormInvalid(!0);if(e().length)e.showAllMessages(!0),a.isFormInvalid(!0);else{var l=a.page.isSubscribedToNewsletter();a._isShowLeavingModal=!1;var d,p,u,m;if(a.page.requireMoreGuestDetails()&&(d=a.page.guestDetails.customer),a.page.paymentDetails.paymentMethod.paymentMethodOption()===b.RedirectCard)switch(a.isProcessing(!0),a.page.paymentDetails.selectedPaymentMethodType()){case y.PayPal:a.handleSubmitPayPalBooking(l,d,p,u,m);break;case y.UnionPayDebitCard:a.handleUnionPayDebitBooking(l,d,p,u,m);break;case y.WeChat:a.handleSubmitWeChatPayBooking(l,d,p,u,m);break;default:w.blockPage(!0),!function(e){var t=n(484),i=new t;i.submitRedirectPaymentBooking(l,d,p,u,m,a.page.isAcceptTermsAndConditions()).always(function(){a.isProcessing(!1)}).then(function(e){switch(e.action){case k.DisplayErrorMessageOnPaymentDetails:w.unblockPage(),a.page.secondStepErrorMessage(a._buildErrorMessage(e.result))}})}(n)}else a.isProcessing(!0),a.shouldBlockPageWithOverlayWhenSubmitSecondStep()&&w.blockPage(!0),a._submitSecondStep(l,d,p,u,m)}}},this.validateCcofForL1LoggedInFlow=function(e,n){return!!(e!==y.MySavedPaymentMethod||n&&t.unwrap(n.cardId)>0)},this.shouldBlockPageWithOverlayWhenSubmitSecondStep=function(){return!l.isApplied(p.EnableThreeDSecure2Payment)||l.isApplied(p.EnableThreeDSecure2Payment)&&t.unwrap(a.page.paymentDetails.paymentMethod.creditCard.threeDSecure2Details)&&null==a.page.paymentDetails.paymentMethod.creditCard.threeDSecure2Details().deviceFingerprintResult},this.handleOnPopStateChanged=function(e){a.page.progress()!==K.Two||e||(j.instance.track("back-button-pressed"),a.backToFirstStep())},this.applyStep2Hash=function(){w.isOnPopStateInit||w.initOnPopState(a.handleOnPopStateChanged),w.setHash("#payment")},this._initLandingPageViewModel(),this.intlTelInputService=new M("mobilePhoneNumber"),this._measurementService=new L,this.experimentService=new q,this.threeDSecureBookingHandler=new Q,setTimeout(function(){a._displayVisitingCustomerToastNotification()},3e3),setTimeout(function(){a._displayRemainingRoomsToastNotification()},5e3),this._subscribeEvents(),this.isRewardsRedemptionAvailable=t.pureComputed(function(){return a.page.rewardsRedemption&&a.page.rewardsRedemption.currentRewardsPoints()>0}),this._redirectCardBookingService=new C,this.processingUnionPayOtp=!1,setTimeout(function(){a._isShowLeavingModal=a.page.leavingModal.isShowLeavingModal()&&!a.page.isMobile()},3e3),this.page.isTheValueOfTheBookingTooLarge()===!0&&(l.isApplied(p.ConvertBookingTooLargePopToModal)?(this._isShowBookingTooLargeModal=!0,setTimeout(function(){a.bookingTooLargeModal()},0)):(alert(this.page.sorryTheValueOfTheBookingIsTooLargeText()),w.redirect(this.page.referralUrl()))),this.isPayPalButtonShown=t.observable(!1),this.isLoginModalOpenned=t.observable(!1),this.isSubmitBookingButtonMessageVisible=t.observable(!0),this._getTermsAndPrivacyResult(i),this.newsletterSubscriptionText=t.observable(t.unwrap(this.page.letMeKnowAboutExclusiveAgodaPromotionsAndLastMinuteDeals)),this.shouldShowWithoutBookingDetails=S.getFeature("shouldShowWithOutBookingDetails"),this.page.suspiciousCheckResult=t.observable(null),this.isExperimentAirportTransferPanelApplied=B.isApplied(p.AirportTransferPanel),this.isExperimentAirportTransferPanelApplied&&this.page.airportTransferPanel&&(t.isObservable(this.page.airportTransferPanel.isPanelVisible)||(this.page.airportTransferPanel.isPanelVisible=t.observable(!1))),this.isExperimentAff2001Applied=l.isApplied(p.CreditCardPromoEligiblePanel),this.isExperimentIKKI8271Applied=l.isApplied(p.AddContactDetailsSummaryOnStep2),this.isExperimentMIN15487=S.getFeature(X.ShouldShowPaymentOptionPanel),this.isDesktop=S.isDesktop(),this.isNotTYP=!(S.getPageData().jsonViewModel.progress===K.Typ),this.isHotelAndRoomDetailsCombine=l.isApplied(p.CutTheRightPanelDonwToBeAllAboveTheFold)&&this.isDesktop&&this.isNotTYP,this.isEligibleForTravelPackages=this.page.isEligibleForTravelPackages(),this.showHidePriceDetails(),this.isExperimentIKKI9356Applied=this.isDesktop&&l.isApplied(p.ShowCcofForL1User),this.isExpandedSpecialRequestsWithCheckbox=B.isApplied(p.ExpandedSpecialRequestsWithCheckbox),this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied=l.isApplied(p.SeparateSectionsInLeftColumnIntoCards),this.hasFocusOnSpecialRequestTextArea=t.observable(!1),this.addFocusOnSpecialRequestTextArea=function(){a.hasFocusOnSpecialRequestTextArea(!0)},this.isExperimentPHONE761Applied=l.isApplied(p.ShouldHideAirportTransferPanelForPhoneTypeUser),this.isExperimentPHONE761Applied&&null!=this.page.guestDetails&&this.page.guestDetails.isPhoneNumberLoginUser()?this.shouldHideAirportTransferPanel=!0:this.shouldHideAirportTransferPanel=!1,this.breakfastUpgradeModal(),this.shouldShowPaymentTypePanel=!!t.unwrap(this.page.roomDetails.freeCancellationBeforeMessage),this.isBookingForSomeoneElse=t.observable(!1),this.isCollapseGuestDetailsApplied=t.pureComputed(function(){return a.page.isLoggedIn()&&l.isApplied(p.ShowCollapsedContactDetails)}),l.isUnseenExperiment(p.ShowCollapsedContactDetails)&&this.page.isLoggedIn.subscribe(function(e){a.experimentService.experimentSeen(p.ShowCollapsedContactDetails)}),this.isCollapseGuestDetailsInit=!1,this.isCollapseGuestDetails=t.pureComputed(function(){return!!a.isCollapseGuestDetailsApplied()&&!a.page.isContactDetailsCollapsed()}),this.bookingForText=t.pureComputed(function(){return a.isCollapseGuestDetailsApplied()?a.isBookingForSomeoneElse()?a.page.guestDetails.iamMakingThisBookingForText().replace("{0}",a.getGuestFullName()):a.page.guestDetails.imMakingThisBookingForSomeoneElseText():""}),this.isBookingForSomeoneElse.subscribe(function(e){a.isCollapseGuestDetailsApplied()&&a.toggleBookingForSomeoneElse()}),this.page.guestDetails.isMakingThisBookingForSomeoneElse&&this.page.guestDetails.isMakingThisBookingForSomeoneElse.subscribe(function(e){a.isCollapseGuestDetailsApplied()&&a.isBookingForSomeoneElse(e)}),this.page.isContactDetailsCollapsed=t.observable(this.isCollapseGuestDetailsApplied()),this.isExperimentIKKI9548Applied=l.isApplied(p.EarlyCheckInCheckoutToggle),l.isApplied(p.ReactHeaderComponent)&&(r["default"](i),this.registerReactEvent())}return a(m,e),m.prototype.bookingTooLargeModal=function(){if(this._isShowBookingTooLargeModal){var e=n(539),t=new e(this.page.bookingTooLargeModal);this._isShowBookingTooLargeModal=!1,this._modalService.open(t,!0)}},m.prototype.breakfastUpgradeModal=function(){var e=this;this.page.breakfastUpgradeModal&&this.page.breakfastUpgradeModal.shouldDisplay()&&setTimeout(function(){var t="bf_upgrade_showed",i="true"===J.getSessionStorageItem(t);if(!i){var a=S.getPageData(),o=n(542),r=new o(e.page.breakfastUpgradeModal,a.cdnUrl);e._modalService.open(r,!0),J.setSessionStorageItem(t,"true")}},3e3)},m.prototype.cancelLeavingModal=function(){window.clearTimeout(this._timeOutId)},m.prototype.showLeavingModal=function(){var e=this;this._timeOutId=window.setTimeout(function(){if(!e._isShowPrebookingSessionExceededModal&&e._isShowLeavingModal&&!e.isLoginModalOpenned()&&(!e.page.facebookDetails.isFacebookEnabled()||e.page.isLoggedIn())){var t=n(451),i=function(){e._modalService.close()},a=new t(e.page,i);e._isShowLeavingModal=!1,e._modalService.updateLeavingModalSessionValue(),e._modalService.open(a,!0)}},2e3)},m.prototype.submitFirstStep=function(){var e=this;this.isProcessing()||(this.isProcessing(!0),w.blockPage(),z.executeAfterRegisteredApiCallsReturn(function(){e.isProcessing(!1),w.unblockPage(),e.processFirstStep()}))},m.prototype.processFirstStep=function(){var e,i=this;if(!this.isProcessing()){var a=l.isApplied(p.AirportTransferPanel)?t.validation.group(this.page.airportTransferPanel.details,{deep:!0}):t.validation.group({}),o=t.validation.group(void 0===this.page.specialRequestForm||null===this.page.specialRequestForm?{}:this.page.specialRequestForm,{deep:!0}),r=t.validation.group(this.page.passwordVerification,{deep:!0});this.isPromoCodeRedemptionDisplayed()?this._promoCodeValidationResult=t.validation.group(this.page.promoCodeRedemption,{deep:!0})():this._promoCodeValidationResult=[],e=this.page.guestDetails.isMakingThisBookingForSomeoneElse()?t.validation.group(this.page.guestDetails,{deep:!0}):t.validation.group(this.page.guestDetails.customer,{deep:!0});var s=void 0,d=void 0;this.isEligibleForTravelPackages&&(s=t.validation.group(this.page.guestDetails.guestVisa,{deep:!0}),d=t.validation.group(this.page.guestDetails.guestFlight,{deep:!0})),a().length&&j.instance.track("transfer-validation-failed",{action_element_value:!0}),a().length||e().length||o().length||r().length||this.isEligibleForTravelPackages&&(s().length||d().length)||this._promoCodeValidationResult.length?(a.showAllMessages(!0),e.showAllMessages(!0),o.showAllMessages(!0),r.showAllMessages(!0),this.isEligibleForTravelPackages&&(s.showAllMessages(!0),d.showAllMessages(!0)),this.isFormInvalid(!0)):(this.isProcessing(!0),w.blockPage(),this.page.accountChangedText(""),n.e(20,function(e){(function(e){var t=n(497),a=new t,o=i.page.isSubscribedToNewsletter(),r=i.page.moneyBackDetails&&i.page.moneyBackDetails.isMigrateToGiftCardUser(),s=void 0!==i.page.travelWithKids&&null!==i.page.travelWithKids?i.page.travelWithKids.travelWithKidsDto:null,l=void 0===i.page.arrivalTimeForm||void 0===i.page.arrivalTimeForm.indexOfArrivalTime()?null:i.page.arrivalTimeForm.indexOfArrivalTime(),d=e.unwrap(i.page.paymentDetails.paymentChargeOptionSelector)?e.unwrap(i.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption):void 0;i.page.isCreditCardRequired()?a.submitFirstStep(i.page.guestDetails.customer,i.page.guestDetails.guest,void 0===i.page.specialRequestForm?null:i.page.specialRequestForm.specialRequest,i.page.passwordVerification.password(),i.page.guestDetails.isMakingThisBookingForSomeoneElse(),o,l,s,i.page.guestDetails.isPhoneNumberLoginUser(),i.isExperimentMIN15487&&void 0!==d?d.toString():null,i.isEligibleForTravelPackages?i.page.guestDetails.guestVisa.visas():null,i.isEligibleForTravelPackages?i.page.guestDetails.guestFlight.guestFlight:null).then(function(e){i._handleSubmitFirstStepResponse(e)}).always(function(){w.unblockPage(),i.isProcessing(!1)}):a.submitWithoutCreditCard(i.page.guestDetails.customer,i.page.guestDetails.guest,void 0===i.page.specialRequestForm?null:i.page.specialRequestForm.specialRequest,i.page.passwordVerification.password(),i.page.guestDetails.isMakingThisBookingForSomeoneElse(),o,r,l,s,i.page.guestDetails.isPhoneNumberLoginUser(),i.isExperimentMIN15487&&void 0!==d?d.toString():null).then(function(e){i._handleSubmitFirstStepResponse(e)}).always(function(){w.unblockPage(),i.isProcessing(!1)}),null!==s&&i.page.travelWithKids.travelWithKidsDto.isSelect()&&j.instance.track("travel-with-kids")}).call(this,n(3))}))}},m.prototype.submitDirectPaymentBooking=function(e,t,n){this.submitBooking(this.page.isSubscribedToNewsletter(),this.page.guestDetails.customer,this.page.guestDetails.guest,this.page.passwordVerification.password(),this.page.guestDetails.isMakingThisBookingForSomeoneElse(),e,t,n)},m.prototype.submitBooking=function(e,i,a,o,r,s,l,d){var m=this;t.postbox.publish(c.RESET_IDLE_TIMER,u.Submitting);var h=t.unwrap(this.page.paymentDetails.paymentChargeOptionSelector)?t.unwrap(this.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption):void 0;n.e(20,function(t){(function(t){var c,u=n(497),f=new u,g=m.page.moneyBackDetails&&m.page.moneyBackDetails.isMigrateToGiftCardUser(),b=m.page.requireMoreGuestDetails();c=m.page.paymentDetails.paymentMethod.creditCard,S.getFeature(p.UnionPayGen2DebitCard)&&!c.cardHolderName()&&c.cardHolderName(m.page.guestDetails.customer.firstName()+" "+m.page.guestDetails.customer.lastName());var y=m.page.airportTransferPanel&&m.page.airportTransferPanel.details&&t.unwrap(m.page.airportTransferPanel.details.isSelectedAirportTransfer)?m.page.airportTransferPanel.details:null;f.submitSecondStep(c,m.page.paymentDetails.paymentMethod.isAddCreditCardToFile(),m.page.paymentDetails.paymentMethod.paymentCurrencyCode(),h,e,g,i,a,o,r,y,m.page.isAcceptTermsAndConditions(),b,m.page.guestDetails.isPhoneNumberLoginUser()).fail(s?s:function(){}).then(l?l:function(){}).always(d?d:function(){})}).call(this,n(3))})},m.prototype._submitSecondStep=function(e,n,i,a,o){var r=this,s=function(){r.isProcessing(!1),w.unblockPage()},d=function(e){switch(e.action){case k.DisplayErrorMessageOnPaymentDetails:r.page.secondStepErrorMessage(e.result);break;case k.DisplayRequireIdentificationNumberMessage:t.postbox.publish(c.DISPLAY_REQUIRE_ID_NUMBER_MESSAGE);break;case k.DisplayUnionPayNationalIdModal:r.openUnionPayIdentificationModal();break;case k.InvalidUnionPayInformation:if(428===e.result||6013===e.result){r.openUnionPayIdentificationModal();break}if(426===e.result){r.page.secondStepErrorMessage(r.page.paymentDetails.paymentMethod.unionPayInvalidPhoneNumberErrorText());break}r.page.secondStepErrorMessage(e.result);break;case k.DisplayUnionPayOtpModal:r.openUnionPayOtpModal();break;case k.RenderCollectDeviceFingerprintForPaymentThreeDSecure2:if(l.isApplied(p.EnableThreeDSecure2Payment)){w.blockPage(!0),r.threeDSecureBookingHandler.handleRenderCollectDeviceFingerprintForPaymentThreeDSecure2(r.page.paymentDetails.paymentMethod.creditCard.threeDSecure2Details,e.result,r.submitSecondStep.bind(r));break}case k.RenderChallengeCustomerForPaymentThreeDSecure2:if(l.isApplied(p.EnableThreeDSecure2Payment)){r.threeDSecureBookingHandler.handleRenderChallengeCustomerForPaymentThreeDSecure2(r.page.paymentDetails.paymentMethod.creditCard.threeDSecure2Details,e.result,r.submitSecondStep.bind(r));break}}},m=function(){t.postbox.publish(c.RESET_IDLE_TIMER,u.Submitted),r.isProcessing(!1)};this.submitBooking(e,n,i,a,o,s,d,m)},m.prototype.logout=function(e){var t=this;(this.page.showLoginModal()||this.page.facebookDetails.isFacebookEnabled())&&e&&"signOut"!==(e.target||e.srcElement).className||(this.isLoginPanelBlocked(!0),!function(e){var i=n(209),a=new i;a.logout().always(function(e){t.isLoginPanelBlocked(!1)})}(n))},m.prototype.backToFirstStep=function(){var e=new d;this._resetPaymentMethod(),t.mapping.fromJS(e,{},this.page.paymentDetails.paymentMethod.creditCard),this.page.progress(1),l.isApplied(p.ReactHeaderComponent)&&o["default"]("ko/PAGE_PROGRESS_DECREASE"),this.showHidePriceDetails(),this._resetGuestMoreDetails(),t.postbox.publish(c.PAYMENT_METHOD_CREDIT_CARD_UPDATED),t.postbox.publish(c.RESET_PAYMENT_METHOD),t.postbox.publish(c.CLICK_BACK_TO_FIRST_STEP),this._backToFirstStepMessage(),null!=this.page.travelWithKids&&this._resetRoomDetails(),this.isExperimentIkki9635Applied&&w.setHash("")},m.prototype.dismissChinaIcpBanner=function(){this.page.youHaveNowBeenRedirectedText("")},m.prototype.handleSubmitPayPalBooking=function(e,t,i,a,o){var r=this;!function(s){var l=n(484),d=new l;d.preSubmitPayPalBooking(e,t,i,a,o,r.page.isAcceptTermsAndConditions()).then(function(e){switch(e.action){case k.DisplayPayPalExpressCheckoutPopup:w.redirect(e.result.url);break;case k.DisplayErrorMessageOnPaymentDetails:r.page.secondStepErrorMessage(e.result)}}).always(function(){r.isProcessing(!1)})}(n)},m.prototype.handleSubmitWeChatPayBooking=function(e,t,i,a,o){var r=this;!function(s){var l=n(484),d=new l;d.preSubmitWeChatPayBooking(e,t,i,a,o,r.page.isAcceptTermsAndConditions()).then(function(e){switch(e.action){case k.DisplayErrorMessageOnPaymentDetails:r.page.secondStepErrorMessage(e.result)}}).always(function(){r.isProcessing(!1)})}(n)},m.prototype.handleUnionPayDebitBooking=function(e,t,n,i,a){S.getFeature(p.UnionPayGen2DebitCard)?this._submitSecondStep(e,t,n,i,a):(this._unionPayBookingService||(this._unionPayBookingService=new x),this._handleUnionPayDebitBooking(t,n,i,a))},m.prototype.setChangeRoomUrl=function(){var e=S.getPageData();if(e&&e.jsonViewModel.features&&e.jsonViewModel.features.propertypageanchorsubfix){var t=e.jsonViewModel.features.propertypageanchorsubfix;if(t.length>0)return void(this.changeRoomUrl=this.page.referralUrl()+t)}this.changeRoomUrl=this.page.referralUrl()},m.prototype._resetPaymentMethod=function(){this.page.paymentDetails.paymentMethod.creditCard.type(y.AllCreditCards),this.page.paymentDetails.selectedPaymentMethodType(null),this.page.paymentDetails.selectedPaymentMethod(null),this.page.paymentDetails.selectedPaymentMethod.isModified&&this.page.paymentDetails.selectedPaymentMethod.isModified(!1)},m.prototype._setDefaultPaymentMethod=function(){this.page.paymentDetails.paymentMethod.creditCardOnFileList&&this.page.paymentDetails.paymentMethod.creditCardOnFileList()&&this.page.paymentDetails.paymentMethod.creditCardOnFileList().length>0?this._setSelectedPaymentMethod(y.MySavedPaymentMethod,s.Unknown):this._resetPaymentMethod()},m.prototype._resetGuestMoreDetails=function(){this.page.guestDetails.customer.dateOfBirth&&(this.page.guestDetails.customer.dateOfBirth(null),this.page.guestDetails.customer.dateOfBirth.isModified(!1),this.page.guestDetails.customer.dateOfBirth.clearError()),this.page.guestDetails.customer.placeOfBirth&&(this.page.guestDetails.customer.placeOfBirth(null),this.page.guestDetails.customer.placeOfBirth.isModified(!1),this.page.guestDetails.customer.placeOfBirth.clearError()),this.page.isPolicyConfirmationCheckBoxRequired&&this.page.isPolicyConfirmationCheckBoxRequired(!1),this.page.requireMoreGuestDetails&&this.page.requireMoreGuestDetails(!1)},m.prototype._setSelectedPaymentMethod=function(e,n){void 0===this.page.paymentDetails.selectedPaymentMethod()&&(this.page.paymentDetails.selectedPaymentMethod=t.observable("")),this.page.paymentDetails.selectedPaymentMethodType(e),null===e?this.page.paymentDetails.selectedPaymentMethod(null):this.page.paymentDetails.selectedPaymentMethod(g.toString({type:e,cardClass:n}))},m.prototype._handleUnionPayDebitBooking=function(e,n,i,a){var o=this;this.processingUnionPayOtp=!1;var r=null,s=this.page.paymentDetails.paymentMethod.creditCard,l=this.intlTelInputService.intlTelInput("getNumber");l.length>20&&(l=l.substr(0,20)),l=l.replace(s.mobilePhoneCountryCode(),""),s.mobilePhoneNumber(l);var d=new D(this);d.visible(!1),d.continueButtonCss("disabled"),d.closeButtonEnabled(!1),this._unionPayBookingService.requestUnionPayConfig().then(function(e){d.requestNewOtpLoadingTime(e.requestNewOtpLoadingTime),d.requestNewOtpMessageTime(e.requestNewOtpMessageTime),d.requestNewOtpInactiveTime(e.requestNewOtpInactiveTime)}),this._modalService.getWaitingForConfirmationModal().then(function(l){var p=new _(l),u=t.observable(!1),m=function(){u(!0),d.clearTimeouts(),clearTimeout(r),d.clearErrors(),p.visible(!1),d.visible(!1),o.isProcessing(!1),w.unblockPage()};r=setTimeout(function(){p.visible(!1),u()===!1&&d.visible()===!1&&o.processUnionPayOtp(d)},l.displayTime),o._modalService.open(p,!0),o._unionPayBookingService.verifyUnionPayCard(s,e,n,i,a,o.page.isAcceptTermsAndConditions()).then(function(e){switch(e.action){case k.DisplayErrorMessageOnPaymentDetails:d.visible()&&o._measurementService.countByMetricName("UnionPayOtpCloseAfterUserSeesPopUp"),m(),o.page.secondStepErrorMessage(e.result);break;case k.UnionPayCardClassMismatch:m(),o.page.paymentDetails.paymentMethod.creditCardNumberErrorMessage(e.result);break;case k.DisplayRequireIdentificationNumberMessage:m(),t.postbox.publish(c.DISPLAY_REQUIRE_ID_NUMBER_MESSAGE);break;case k.OpenUnionPayOtpModal:clearTimeout(r),p.visible(!1),d.continueButtonCss(""),d.closeButtonEnabled(!0),d.visible()||o.processUnionPayOtp(d),o.page.paymentDetails.paymentMethod.paymentGateway=e.result.paymentGateway;break;case k.RequestOtpAndOpenUnionPayOtpModal:clearTimeout(r),p.visible(!1),o._unionPayBookingService.requestUnionPayOtp(s).then(function(e){null!=e.errorMessage?(m(),o.page.secondStepErrorMessage(e.errorMessage)):(d.continueButtonCss(""),d.closeButtonEnabled(!0),d.visible()||o.processUnionPayOtp(d))});break;default:m()}}).always(function(){d.visible.subscribe(function(e){e===!1&&m()})})})},m.prototype.processUnionPayOtp=function(e){this.processingUnionPayOtp||(this.processingUnionPayOtp=!0,this._modalService.open(e))},m.prototype._handleSubmitFirstStepResponse=function(e){var n=this;switch(e.action){case k.DisplayAccountChanged:this.page.accountChangedText(e.result.accountChangedText);break;case k.GoToSecondStep:var i=e.result;this.page.paymentDetails=t.mapping.fromJS(i.paymentDetails),this.page.progress(2),l.isApplied(p.ReactHeaderComponent)&&o["default"]("ko/PAGE_PROGRESS_INCREASE"),this.showHidePriceDetails(),this.page.isCreditCardRequired(!0),this.page.roomDetails.roomTypes()[0].bookingConditionsModal.isCreditCardRequired(!0),i.roomDetails&&i.roomDetails.occupancy&&(this.page.roomDetails&&this.page.roomDetails.occupancy&&this.page.roomDetails.occupancy(i.roomDetails.occupancy),this.page.bookingDetails&&this.page.bookingDetails.occupancy&&this.page.bookingDetails.occupancy(i.roomDetails.occupancy)),i.isPolicyConfirmationCheckBoxRequired&&(this.page.isPolicyConfirmationCheckBoxRequired(i.isPolicyConfirmationCheckBoxRequired),this.isUserClickOnTermsAndConditionsTextbox(!1)),this._isShowLeavingModal=i.isShowLeavingModal,i.creditCardRequiredMessage&&this.page.creditCardRequiredMessage(i.creditCardRequiredMessage),i.continueBtnText&&this.page.continueBtnText(i.continueBtnText),"undefined"!=typeof paypal&&paypal&&paypal.Button&&(this._setupPayPalButton(),this.page.paymentDetails.paymentMethod.creditCard.type.subscribe(function(e){n.isPayPalButtonShown(e===y.PayPal)})),"undefined"!=typeof e.suspiciousCheckResult&&e.suspiciousCheckResult?(e.suspiciousCheckResult.isRequireInfo&&(this.page.guestDetails.customer.dateOfBirth||(this.page.guestDetails.customer.dateOfBirth=t.observable("")),this.page.guestDetails.customer.placeOfBirth||(this.page.guestDetails.customer.placeOfBirth=t.observable(""))),this.page.suspiciousCheckResult(e.suspiciousCheckResult),this.page.requireMoreGuestDetails(e.suspiciousCheckResult.isRequireInfo)):(this.page.suspiciousCheckResult(null),this.page.requireMoreGuestDetails(!1)),setTimeout(function(){t.postbox.publish(c.CHECK_SECOND_STEP_VALIDATION)},1e3),this.experimentService.experimentSeen(p.AddContactDetailsSummaryOnStep2),t.unwrap(this.isCollapseGuestDetailsApplied)&&!t.unwrap(this.page.isContactDetailsCollapsed)&&(this.isCollapseGuestDetailsInit=!1);var a=this.page.isLoggedIn()&&l.isApplied(p.GiftCardDisplayRedeemBoxForSoftLogin);this.isExperimentLOY3185Applied(this.isGiftCardRedemptionDisplayed&&a),t.postbox.publish(c.DISCOUNT_BANNER_TEXT,i.discountBannerText),w.scrollToTop(),t.unwrap(i.isMakeBrowserBackButtonOnBf2GoBackToBf1Applied)&&(this.isExperimentIkki9635Applied=!0,this.applyStep2Hash())}},m.prototype.setPaypalValidation=function(e){this.paypalAction=e,this.page.isPolicyConfirmationCheckBoxRequired()&&this.paypalAction.disable()},m.prototype.triggerPaypalValidation=function(){if(this.paypalAction)return this.page.isPolicyConfirmationCheckBoxRequired()&&!this.page.isAcceptTermsAndConditions()?this.paypalAction.disable():this.paypalAction.enable()},m.prototype._setupPayPalButton=function(){var e=this;paypal.Button.render({env:v.getEnvironment(),locale:v.getCulture(),style:v.getButtonStyle(),validate:function(t){e.setPaypalValidation(t)},onClick:function(){if(e.page.isPolicyConfirmationCheckBoxRequired()){var t=e.page.isAcceptTermsAndConditions();t||e.isUserClickOnTermsAndConditionsTextbox(!0)}},payment:function(t,n){e.page.secondStepErrorMessage("");var i=e.page.guestDetails;e._redirectCardBookingService.preSubmitPayPalBooking(!0,i.customer,i.guest,e.page.passwordVerification.password(),i.isMakingThisBookingForSomeoneElse()).then(function(i){switch(i.action){case k.DisplayPayPalExpressCheckoutPopup:var a=i&&i.result&&v.parseToken(i.result.url);if(a)return e._redirectCardBookingService.countPayPalInteraction(1),t(a);break;case k.DisplayErrorMessageOnPaymentDetails:e.page.secondStepErrorMessage(i.result)}n()})},onAuthorize:function(t){e._redirectCardBookingService.countPayPalInteraction(3),e.isProcessing(!0),w.blockPage(!0),e._redirectCardBookingService.submitPayPalBooking().always(function(){e.isProcessing(!1)})},onCancel:function(t){e._redirectCardBookingService.countPayPalInteraction(2),e.page.secondStepErrorMessage(e.page.previousPaymentCancelledText())}},v.BUTTON_SELECTOR)},m.prototype._isSubscribedToNewsletter=function(e){return!e},m.prototype._displayVisitingCustomerToastNotification=function(){this._messageService.getVisitingCustomerMessage()},m.prototype._backToFirstStepMessage=function(){this._messageService.backToFirstStepMessage()},m.prototype._displayRemainingRoomsToastNotification=function(){this._messageService.getRemainingRoomsMessage()},m.prototype._initLandingPageViewModel=function(){var e=this;this._messageService=new h,this._performanceMessage=new I,this._occupancyService=new G,this.isLoginPanelCollapsed=t.observable(!0),this.isSpecialRequestsCollapsed=t.observable(!this.page.specialRequestFormExpanded()),
this.isRewardsRedemptionCollapsed=t.observable(!0),this.isRewardsRedemptionDisplayed=t.observable(!!this.page.rewardsRedemption),this.isGiftCardRedemptionDisplayed=t.observable(!!this.page.giftCardRedemption),this.isPromoCodeRedemptionDisplayed=t.observable(!!this.page.promoCodeRedemption),this.isAirlinePromotionDisplayed=t.observable(!!this.page.airlinePromotionRedemption),this.isProcessing=this.page.isSubmitStepProcessing,this.isPaymentDetailsBlocked=t.observable(!1),this.isLoginPanelBlocked=t.observable(!1),this.isFormInvalid=t.observable(!1),this.page.accountChangedText=t.observable(""),this.page.creditCardRequiredMessage=t.observable(""),this.isClickBackToFirstStep=t.observable(!1),this.convenientStorePaymentMessage=t.observable(""),this.isImGuestForThisRoom=t.observable(!0),this.loginPanelName="login-panel"+(this.page.showLoginModal()||this.page.facebookDetails.isFacebookEnabled()?"-v2":""),this.page.isPolicyConfirmationCheckBoxRequired=t.observable(!1),this.page.isAcceptTermsAndConditions=t.observable(!1),this.isUserClickOnTermsAndConditionsTextbox=t.observable(!1),this.page.isAcceptChinaDisclaimer=t.observable(!1),this.isUserClickOnChinaDisclaimerTextbox=t.observable(!1),this.page.isChinaDisclaimerTextCheckBoxRequired=t.observable(!!this.page.isChinaDisclaimerTextCheckBoxRequired&&this.page.isChinaDisclaimerTextCheckBoxRequired()),this.isShowTermsAndConditionsError=t.computed(function(){return e.triggerPaypalValidation(),e.page.isPolicyConfirmationCheckBoxRequired()&&!e.page.isAcceptTermsAndConditions()&&e.isUserClickOnTermsAndConditionsTextbox()}),this.isShowChinaDisclaimerError=t.computed(function(){return e.page.isChinaDisclaimerTextCheckBoxRequired()&&!e.page.isAcceptChinaDisclaimer()&&e.isUserClickOnChinaDisclaimerTextbox()}),this.page.secondStepErrorMessage||(this.page.secondStepErrorMessage=t.observable("")),this.page.paymentDetails||(this.page.paymentDetails={}),this.page.weWillSendConfirmationToEmailComputedText=t.pureComputed(function(){return e.page.weWillSendConfirmationToEmailText().replace("{1}",e.page.guestDetails.customer.email())}),this.page.submitBookingBtn.submitBookingBtnText=t.pureComputed(function(){return e.isProcessing()?e.page.submitBookingBtn.processingText():!t.unwrap(e.page.paymentDetails.paymentChargeOptionSelector)||e.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption()!==f.PayLater&&e.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption()!==f.PayOnCheckIn?e.page.submitBookingBtn.defaultSubmitBookingBtnText():e.page.submitBookingBtn.payLaterSubmitBookingBtnText()}),this.page.termsAndConditionsText(this.page.termsAndConditionsText()),this.mouseStatsHandler=t.computed(function(){return 1===e.page.progress()?e.trackStepOne():2===e.page.progress()&&e.trackStepTwo(),e.page.progress()}),this.isConvenientStorePayment=t.observable(!1),this.setChangeRoomUrl(),this.page.loginPanel.mobilePhoneWithCountryCode=t.computed(function(){return{countryCode:e.page.loginPanel.countryCode()||"",phoneNumber:e.page.loginPanel.mobilePhone()||""}}),this.page.requireMoreGuestDetails=t.observable(!1),this.isCouponPanelDisplayed=t.observable(!!this.page.couponPanel),this.page.installmentDetailsMaster=t.observable(),this.isExperimentLOY3185Applied=t.observable(this.isGiftCardRedemptionDisplayed&&l.isApplied(p.GiftCardDisplayRedeemBoxForSoftLogin)),this.isExperimentIkki9635Applied=t.unwrap(this.page.isMakeBrowserBackButtonOnBf2GoBackToBf1Applied),this.isExperimentIkki9635Applied&&this.page.progress()===K.Two&&this.applyStep2Hash()},m.prototype._buildErrorMessage=function(e){var n=t.unwrap(this.page.paymentDetails.paymentMethod.selectedPaymentMethodText);return T.format(e,n)},m.prototype._fillYourInfomationText=function(){return this.isCollapseGuestDetailsApplied()?this.page.guestDetailsHeaderText():this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied&&!this.page.isMobile()||this.isRemovePhoneNumberFieldApplied()?this.page.guestDetailsHeaderText():this.page.facebookDetails.isFacebookEnabled()&&!this.page.isLoggedIn()?this.page.pleaseFillInYourInformationText():this.page.yourInformationText()},m.prototype._subscribeEvents=function(){var e=this;t.postbox.subscribe(c.APS_PEEK_MODAL_DISPLAYED,function(t){e._apsPeekDiscountAmount=t,e.page.loginPanel._apsPeekDiscountAmount=t}),t.postbox.subscribe(c.REWARDS_REDEMPTION_UPDATED,function(n){n?(e.page.rewardsRedemption?t.mapping.fromJS(n,{},e.page.rewardsRedemption):e.page.rewardsRedemption=t.mapping.fromJS(n),e.isRewardsRedemptionDisplayed(!0)):(e.isRewardsRedemptionDisplayed(!1),e.page.rewardsRedemption=void 0)}),t.postbox.subscribe(c.SUBSCRIBED_TO_NEWSLETTER_UPDATED,function(t){e.page.isSubscribedToNewsletter(t)}),t.postbox.subscribe(c.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,function(t){e.page.isDisplayNewsletterSubscription(t)}),t.postbox.subscribe(c.PROMO_CODE_REDEMPTION_UPDATED,function(t){return e.isPromoCodeRedemptionDisplayed(!!t)}),t.postbox.subscribe(c.PAYMENT_DETAILS_UPDATED,function(n){return t.mapping.fromJS(n,{},e.page.paymentDetails)}),t.postbox.subscribe(c.GIFTCARD_REDEMPTION_UPDATED,function(n){n?(e.page.giftCardRedemption?t.mapping.fromJS(n,{},e.page.giftCardRedemption):e.page.giftCardRedemption=t.mapping.fromJS(n),e.isGiftCardRedemptionDisplayed(!0)):(e.isGiftCardRedemptionDisplayed(!1),e.page.giftCardRedemption=void 0)}),t.postbox.subscribe(c.COUPON_PANEL_UPDATED,function(n){n&&(e.page.couponPanel?t.mapping.fromJS(n,{},e.page.couponPanel):e.page.couponPanel=t.mapping.fromJS(n))}),t.postbox.subscribe(c.UPDATE_CURRENT_LEAVING_GC_BALANCE_TEXT,function(t){e.page.leavingModal.balanceCanBeUsedText&&e.page.leavingModal.balanceCanBeUsedText(t)}),t.postbox.subscribe(c.LOGIN_SUCCESSFUL,function(t){e.page.isLoggedIn(!0),e.isLoginPanelCollapsed(!0),e.page.accountChangedText(""),e.page.agodaMembersLogoutText(t)}),t.postbox.subscribe(c.LOGIN_COMPLETE,function(){l.isApplied(p.ShowCollapsedContactDetails)&&e.collapseContactDetails()}),t.postbox.subscribe(c.LOGOUT_SUCCESSFUL,function(){var n;e.isCollapseGuestDetailsApplied()&&e.page.isContactDetailsCollapsed()&&e.toggleContactDetailsPanel(),e.page.isLoggedIn(!1),e.isGiftCardRedemptionDisplayed(!1),e.isRewardsRedemptionDisplayed(!1),e.page.accountChangedText(""),n=e.page.guestDetails.isMakingThisBookingForSomeoneElse()?t.validation.group(e.page.guestDetails.customer,{deep:!0}):t.validation.group(e.page.guestDetails,{deep:!0}),n.showAllMessages(!1),e.page.facebookDetails&&e.page.facebookDetails.loginErrorMessage&&e.page.facebookDetails.loginErrorMessage(""),l.isApplied(p.ReactHeaderComponent)&&o["default"]("ko/LOGOUT")}),t.postbox.subscribe(c.OPEN_LOGIN_PANEL,function(n){if(!e.page.isMobile()&&e.page.showLoginModal()||e.page.facebookDetails.isFacebookEnabled())if(e.page.loginPanel._apsPeekDiscountAmount=e._apsPeekDiscountAmount,"string"==typeof n)e.page.loginPanel.username(n),e.openLoginModal(n);else{var i=e.page.guestDetails.customer.email();e.page.loginPanel.username(i);var a=n.isFromCcof?t.unwrap(e.page.loginPanel.signInToAccessYourSavedCards):null,o={loginPanel:e.page.loginPanel,termsAndPrivacyData:e.termsAndPrivacyData,isLoginPanelBlocked:t.observable(!1),isMobile:e.page.isMobile,isLoggedIn:e.page.isLoggedIn,isLoginModalOpenned:e.isLoginModalOpenned,facebookDetails:e.page.facebookDetails,isLandingPage:!1,customTitleText:a,isShowLoginFromCCOF:n.isFromCcof};e.openLoginModal(i,null,null,o)}else e.isLoginPanelCollapsed(!1)}),t.postbox.subscribe(c.OPEN_PHONE_LOGIN_PANEL,function(t){!e.page.isMobile()&&e.page.showLoginModal()||e.page.facebookDetails.isFacebookEnabled()?(e.page.loginPanel._apsPeekDiscountAmount=e._apsPeekDiscountAmount,e.page.loginPanel.loginTab(1),e.openLoginModal(t)):e.isLoginPanelCollapsed(!1)}),t.postbox.subscribe(c.SUBSCRIBE_FIELD_TO_UPDATE_PAYMENT,function(){e.page.secondStepErrorMessage("")}),t.postbox.subscribe(c.RESET_PAYMENT_METHOD,function(){e.page.secondStepErrorMessage("")}),t.postbox.subscribe(c.UPDATE_SECOND_STEP_ERROR_MESSAGE,function(t){e.page.secondStepErrorMessage(t)}),t.postbox.subscribe(c.PREBOOKING_SESSION_EXCEEDED_MODAL,function(t){if(!e._isShowPrebookingSessionExceededModal){var i=n(545),a=new i(e.page.prebookingSessionExceededModal);e._modalService.open(a,!0),e._isShowPrebookingSessionExceededModal=!0,e._isShowLeavingModal=!0}}),t.postbox.subscribe(c.CLICK_BACK_TO_FIRST_STEP,function(){e.isClickBackToFirstStep(!0),e.isExperimentLOY3185Applied(e.isGiftCardRedemptionDisplayed&&l.isApplied(p.GiftCardDisplayRedeemBoxForSoftLogin))}),t.postbox.subscribe(c.UPDATED_SELECTED_PAYMENT_METHOD,function(t){if(e.isConvenientStorePayment(R.isConvenientStore(t)),e.isConvenientStorePayment())switch(R.getThirdPartyPaymentServiceGateway(t)){case N.OneTwoThree:e.convenientStorePaymentMessage(e.page.youWillBeTakenToOneTwoThreeServiceForFinalPaymentText());break;case N.Doku:e.convenientStorePaymentMessage(e.page.youWillBeTakenToDokuServiceForFinalPaymentText());break;case N.MolPay:e.convenientStorePaymentMessage(e.page.youWillBeTakenToMolPayServiceForFinalPaymentText());break;case N.Adyen:e.convenientStorePaymentMessage(e.page.youWillBeTakenToAdyenServiceForFinalPaymentText());break;default:e.convenientStorePaymentMessage("")}e.isUserClickOnTermsAndConditionsTextbox(!1)}),this._performanceMessage.registerEventHandler(),this.page.progress.subscribe(function(t){switch(e._performanceMessage.checkCriticalMessageAndSendMetric(t),t){case 1:rtag_pagetypeid=H.Landing;break;case 2:rtag_pagetypeid=H.Payment}j.instance.visit()}),this.page.isPolicyConfirmationCheckBoxRequired.subscribe(function(n){n&&e.page.isAcceptTermsAndConditions.subscribe(function(n){t.postbox.publish(c.CHECK_SECOND_STEP_VALIDATION,[e.page.paymentDetails.paymentMethodValidationErrors,e.page.paymentDetails.validationErrors])})}),this.page.requireMoreGuestDetails.subscribe(function(n){n&&(e._guestMoreDetailValidationResult=t.validation.group([e.page.guestDetails.customer.dateOfBirth,e.page.guestDetails.customer.placeOfBirth],{deep:!1,observable:!0}),e._guestMoreDetailValidationResult.subscribe(function(n){n&&0===n.length&&t.postbox.publish(c.CHECK_SECOND_STEP_VALIDATION,[e.page.paymentDetails.paymentMethodValidationErrors,e.page.paymentDetails.validationErrors])}))}),t.postbox.subscribe(c.CHECK_SECOND_STEP_VALIDATION,function(){var n=[e.page.paymentDetails.validationErrors,e.page.paymentDetails.paymentMethodValidationErrors],a=!e.isExperimentIKKI9356Applied||e.validateCcofForL1LoggedInFlow(t.unwrap(e.page.paymentDetails.selectedPaymentMethodType),e.page.paymentDetails.paymentMethod.creditCard);!(n&&n[0]&&n[1]&&0===n[0]().length&&0===n[1]().length)||e.page.isPolicyConfirmationCheckBoxRequired()&&!e.page.isAcceptTermsAndConditions()||e.page.requireMoreGuestDetails()&&e._guestMoreDetailValidationResult().length||!a?setTimeout(function(){i(U.BOOK_BUTTON).removeClass(U.RIPPLE_CLASS)},0):setTimeout(function(){i(U.BOOK_BUTTON).addClass(U.RIPPLE_CLASS)},0)}),this.isAirportTransferPanelVisible()&&(t.postbox.subscribe(c.PRICE_DETAILS_UPDATED,function(){t.unwrap(e.page.airportTransferPanel.details.isSelectedAirportTransfer)&&t.unwrap(e.page.airportTransferPanel.details.searchId)&&(e._airportTransferService=e._airportTransferService||new V,setTimeout(function(){e._airportTransferService.selectAirportTransfer(e.page.airportTransferPanel.details.localPrice(),e.page.airportTransferPanel.details.isSelectedAirportTransfer(),e.page.airportTransferPanel.details.isUserAirportTransferClickPerform(),e.page.airportTransferPanel.details.vendorName())},0))}),t.postbox.subscribe(c.UPDATED_SELECTED_PAYMENT_METHOD,function(n){t.unwrap(e.page.airportTransferPanel.details.isSelectedAirportTransfer)&&t.unwrap(e.page.airportTransferPanel.details.searchId)&&n===y.PayPal&&e._shouldShowAirportTransferPopup(!1)})),this.isPaymentDetailsBlocked.subscribe(function(t){e.isSubmitBookingButtonMessageVisible(!t)}),this.page.moneyBackDetails&&t.postbox.subscribe(c.MONEYBACK_DETAILS_UPDATED,function(n){n&&(e.page.moneyBackDetails?t.mapping.fromJS(n,{},e.page.moneyBackDetails):e.page.moneyBackDetails=t.mapping.fromJS(n))}),l.isApplied(p.ReactLoginComponet)&&t.postbox.subscribe(c.REACT_DISPLAY_ALLOTMENT_NOT_AVAILABLE_MODAL,function(t){n.e(8,function(i){var a=n(213);e._modalService.open(new a(t))})})},m.prototype._getTermsAndPrivacyResult=function(e){var t={isEligibleForTravelPackages:e.isEligibleForTravelPackages,umrahTermsOfUseAndPrivacySentence:e.umrahTermsOfUseAndPrivacySentence,termsOfUseAndPrivacySentence:e.termsOfUseAndPrivacySentence,termsOfUseText:e.termsOfUseText,termsOfUseUrl:e.termsOfUseUrl,privacyPolicyText:e.privacyPolicyText,privacyPolicyUrl:e.privacyPolicyUrl,clickHereText:e.clickHereText};this.termsAndPrivacyData=(new P).CreateTermsAndPrivacySentence(t);var n={isEligibleForTravelPackages:e.isEligibleForTravelPackages,umrahTermsOfUseAndPrivacySentence:e.umrahTermsOfUseAndPrivacySentence,termsOfUseAndPrivacySentence:e.termsOfUseAndPrivacySentenceForSignIn,termsOfUseText:e.termsOfUseTextForSignIn,termsOfUseUrl:e.termsOfUseUrl,privacyPolicyText:e.privacyPolicyTextForSignIn,privacyPolicyUrl:e.privacyPolicyUrl,clickHereText:e.clickHereText};this.termsAndPrivacyDataForSignIn=(new P).CreateTermsAndPrivacySentence(n)},m.prototype.openUnionPayIdentificationModal=function(){var e=new W(this);e.visible(!0),e.closeButtonEnabled(!0),this._modalService.open(e)},m.prototype.openUnionPayOtpModal=function(){var e=new Y(this);e.visible(!0),e.closeButtonEnabled(!0),this._modalService.open(e)},m.prototype.openLoginModal=function(e,i,a,o){var r=this;a&&(a.target||a.srcElement).className.indexOf("signIn")<0||(this.isLoginModalOpenned(!0),this.bindingOptions=new A,this.bindingOptions.header.data={isCloseBtnDisplayed:!0,title:""},this.bindingOptions.body.name=O.LOGIN_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.bindingOptions.body.name,n(547)),o?(this.bindingOptions.body.data=o,this.bindingOptions.body.data.email=e):this.bindingOptions.body.data={loginPanel:this.page.loginPanel,termsAndPrivacyData:this.termsAndPrivacyData,isLoginPanelBlocked:t.observable(!1),email:e,isMobile:this.page.isMobile,isLoggedIn:this.page.isLoggedIn,isLoginModalOpenned:this.isLoginModalOpenned,facebookDetails:this.page.facebookDetails,isLandingPage:!0,customTitleText:null,isShowLoginFromCCOF:!1},this.bindingOptions.dialogCss=O.LOGIN_MODAL_CLASS+(this.bindingOptions.body.data.isMobile()?" mobile":""),this.bindingOptions.options.keyboard=!0,this.bindingOptions.visible(!0),this.bindingOptions.onClose=function(){r.isLoginModalOpenned(!1)},this._modalService=this._modalService||new E,this._modalService.open(this.bindingOptions))},m.prototype.isPaymentChargeOptionPanelVisible=function(){if(this.page.paymentDetails.paymentChargeOptionSelector&&void 0!==this.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption){if(this.page.isMobile())return!0;var e=S.getPageData();if(e&&e.jsonViewModel&&e.jsonViewModel.features&&e.jsonViewModel.features.shouldShowPaymentOptionForSingleRoom)return e.jsonViewModel.features.shouldShowPaymentOptionForSingleRoom}return!1},m.prototype.isPaymentDetailsBnplMessageVisible=function(){if(null==this.page.paymentDetails.paymentChargeOptionSelector)return!1;var e=t.unwrap(this.page.paymentDetails.paymentChargeOptionSelector.paymentChargeOption),n=t.unwrap(this.page.paymentDetails.paymentChargeOptionSelector.isPayNowPayLaterOption);return n&&!t.unwrap(this.page.isMobile)&&1===e||!this.isPaymentChargeOptionPanelVisible()&&1===e},m.prototype.renderComplete=function(e){t.postbox.publish(c.SEND_CRITICAL_MARK,F[e])},m.prototype.isAirportTransferPanelVisible=function(){return S.getFeature("shouldShowAirportTransferPanel")},m.prototype.isSeparateSpecialRequestVisible=function(){return null!=this.page.specialRequestForm},m.prototype._shouldShowAirportTransferPopup=function(e){var n=this;return!(!this.isAirportTransferPanelVisible()||!t.unwrap(this.page.airportTransferPanel.details.isSelectedAirportTransfer)||this.page.paymentDetails.paymentMethod.paymentMethodOption()===b.DirectCard||this.page.paymentDetails.paymentMethod.paymentMethodOption()===b.SavedCards||(this._airportTransferService=this._airportTransferService||new V,this._airportTransferService.openPaymentModal(this.page.airportTransferPanel,e?function(){n.page.airportTransferPanel.details.isSelectedAirportTransfer(!1),n._airportTransferService.selectAirportTransfer(n.page.airportTransferPanel.details.localPrice(),!1,n.page.airportTransferPanel.details.isUserAirportTransferClickPerform(),n.page.airportTransferPanel.details.vendorName()),n.submitSecondStep()}:function(){n.page.airportTransferPanel.details.isSelectedAirportTransfer(!1),n._airportTransferService.selectAirportTransfer(n.page.airportTransferPanel.details.localPrice(),!1,n.page.airportTransferPanel.details.isUserAirportTransferClickPerform(),n.page.airportTransferPanel.details.vendorName())},function(){n._setSelectedPaymentMethod(y.AllCreditCards,s.Unknown),t.postbox.publish(c.PAYMENT_METHOD_CREDIT_CARD_UPDATED),t.postbox.publish(c.RESET_PAYMENT_METHOD)}),0))},m.prototype._resetRoomDetails=function(){var e=this;this._occupancyService.getOccupancy(this.page.travelWithKids.travelWithKidsDto.noOfChildren(),this.page.travelWithKids.travelWithKidsDto.childAges()).then(function(t){e.page.roomDetails&&e.page.roomDetails.occupancy&&e.page.roomDetails.occupancy(t),e.page.bookingDetails&&e.page.bookingDetails.occupancy&&e.page.bookingDetails.occupancy(t)})},m.prototype.isRiskFreeMessageDisplayed=function(){var e=null!=t.unwrap(this.page.roomDetails.roomTypes)&&t.unwrap(this.page.roomDetails.roomTypes()[0].isFreeCancellation);return this.page.progress()===K.Two&&e},m.prototype.riskFreeMessageRendered=function(){var e=this;setTimeout(function(){var n;n=t.unwrap(e.isPayPalButtonShown)?i(U.PAYPAL_BUTTON).width():i(U.BOOK_BUTTON).width()+(e.page.isTablet?22:48),n&&i(U.RISK_FREE_SUBMIT_MESSAGE).width(n)},0)},m.prototype.getContactDetailsSummary=function(){var e=this;if(!this.page.contactDetailsSummary)return null;this.page.contactDetailsSummary.email=this.page.guestDetails.customer.email,this.page.contactDetailsSummary.phoneNumber=this.page.guestDetails.customer.phoneNumber,this.page.contactDetailsSummary.isMakingThisBookingForSomeoneElse=this.page.guestDetails.isMakingThisBookingForSomeoneElse;var n=this.page.guestDetails.customer,i=this.page.guestDetails.guest,a=n.translatedFirstName&&t.unwrap(n.translatedFirstName)?$.TranslatedName(t.unwrap(n.translatedFirstName),t.unwrap(n.translatedLastName),this.page.guestDetails.showLastNameFirst()):$.TranslatedName(t.unwrap(n.firstName),t.unwrap(n.lastName),this.page.guestDetails.showLastNameFirst());if(this.page.contactDetailsSummary.fullName=t.observable(a),this.page.contactDetailsSummary.isMakingThisBookingForSomeoneElse){a=i.translatedFirstName&&t.unwrap(i.translatedFirstName)?$.TranslatedName(t.unwrap(i.translatedFirstName),t.unwrap(i.translatedLastName),this.page.guestDetails.showLastNameFirst()):$.TranslatedName(t.unwrap(i.firstName),t.unwrap(i.lastName),this.page.guestDetails.showLastNameFirst());var o=t.unwrap(this.page.contactDetailsSummary.bookingForText).replace("{0}",a);this.page.contactDetailsSummary.guestFullName=t.observable(o)}return t.postbox.subscribe(c.BACK_TO_FIRST_STEP,function(){e.backToFirstStep()}),this.page.contactDetailsSummary},m.prototype.onStepTwoLogin=function(){this.page.isLoggedIn()||t.postbox.publish(c.OPEN_LOGIN_PANEL,"")},m.prototype.isSeparateGuestDetailsToPanels=function(){return!t.unwrap(this.page.isMobile)&&this.isSeparateSectionsInLeftColumnIntoCardsExperimentApplied},m.prototype.isRemovePhoneNumberFieldApplied=function(){return!t.unwrap(this.page.isLoggedIn)&&l.isApplied(p.RemovePhoneNumberField)&&this.isDesktop&&this.isNotTYP},m.prototype.getCustomerFullName=function(){var e=this.page.guestDetails.customer;return t.unwrap(e.translatedFirstName)?$.TranslatedName(t.unwrap(e.translatedFirstName),t.unwrap(e.translatedLastName),this.page.guestDetails.showLastNameFirst()):$.TranslatedName(t.unwrap(e.firstName),t.unwrap(e.lastName),this.page.guestDetails.showLastNameFirst())},m.prototype.getGuestFullName=function(){var e=this.page.guestDetails.guest;return e.translatedFirstName&&t.unwrap(e.translatedFirstName)?$.TranslatedName(t.unwrap(e.translatedFirstName),t.unwrap(e.translatedLastName),this.page.guestDetails.showLastNameFirst()):$.TranslatedName(t.unwrap(e.firstName),t.unwrap(e.lastName),this.page.guestDetails.showLastNameFirst())},m.prototype.getLoginUserIdentification=function(){if(this.isCollapseGuestDetailsApplied())return this.page.guestDetails.isPhoneNumberLoginUser()?t.unwrap(this.page.guestDetails.customer.phoneNumber):t.unwrap(this.page.guestDetails.customer.email)},m.prototype.toggleContactDetailsPanel=function(){this.isCollapseGuestDetailsApplied()&&(this.page.isContactDetailsCollapsed()?this.page.isContactDetailsCollapsed(!1):this.collapseContactDetails(!0))},m.prototype.collapseContactDetails=function(e){var n=this;void 0===e&&(e=!1);var i;return i=t.unwrap(this.page.guestDetails.isMakingThisBookingForSomeoneElse)?t.validation.group(this.page.guestDetails,{deep:!0}):t.validation.group(this.page.guestDetails.customer,{deep:!0}),i&&i().length?void i.showAllMessages(!0):void setTimeout(function(){return n.page.isContactDetailsCollapsed(!0)},e?100:500)},m.prototype.toggleBookingForSomeoneElse=function(){var e=this;this.isCollapseGuestDetailsApplied()&&(this.isBookingForSomeoneElse()?(this.page.isContactDetailsCollapsed(!1),setTimeout(function(){e.page.guestDetails.isMakingThisBookingForSomeoneElse(!0)},250)):this.page.guestDetails.isMakingThisBookingForSomeoneElse(!1))},m.prototype.showHidePriceDetails=function(){this.priceDetailsCssClass?this.priceDetailsCssClass(this.isEligibleForTravelPackages&&1===this.page.progress()?"panel panel-default price-details hidden":"panel panel-default price-details"):this.priceDetailsCssClass=t.observable(this.isEligibleForTravelPackages&&1===this.page.progress()?"panel panel-default price-details hidden":"panel panel-default price-details")},m.prototype.getCollapseCSS=function(){return this.isCollapseGuestDetailsInit&&t.unwrap(this.page.isContactDetailsCollapsed)?"sliderAnimation":t.unwrap(this.isCollapseGuestDetailsApplied)?(this.isCollapseGuestDetailsInit=!0,t.unwrap(this.page.isContactDetailsCollapsed)?"slideDown collapse in":"slideUp collapse"):"slideUp collapse"},m.prototype.getContactDetailIcon=function(){return t.unwrap(this.isCollapseGuestDetailsApplied)&&t.unwrap(this.page.isContactDetailsCollapsed)?"ficon-check-valid-state":"ficon-solid-contact-details"},m.prototype.isLoggedInCSS=function(){return this.isRemovePhoneNumberFieldApplied()?t.unwrap(this.page.isLoggedIn)?t.unwrap(this.isCollapseGuestDetailsApplied)&&t.unwrap(this.page.isLoggedIn)?"user-logged-in":"":"user-not-logged-in":t.unwrap(this.isCollapseGuestDetailsApplied)&&t.unwrap(this.page.isLoggedIn)?"user-logged-in":""},m.prototype.registerReactEvent=function(){var e=this;t.postbox.subscribe(c.REACT_LOGOUT,function(){e.isLoginPanelBlocked(!0);var t=new Z;t.logout().always(function(){e.isLoginPanelBlocked(!1)})})},m}(m);e.exports=ee}).call(t,n(3),n(2))},function(e,t,n){(function(e){"use strict";var i=n(298),a=n(469),o=function(t){window.addEventListener("ko/update",function(n){var o=n.detail,r=o.type,s=o.payload;switch(r){case"viewModel":var l=s,d=l.viewModelPath,c=l.value,p=i(t,d);e.isObservable(p)&&p(c);break;case"event":var u=s,m=u.topic,h=u.content,f=a.mapEventTopic(m);f?e.postbox.publish(f,h):console.error("Knockout publish event: cannot map event name");break;default:console.error("Knockout publish event: cannot map event name")}})};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}).call(t,n(3))},function(e,t,n){"use strict";var i=n(11);t.mapEventTopic=function(e){switch(e){case"ko/loginModal/open":return i.OPEN_LOGIN_PANEL;case"ko/logout":return i.REACT_LOGOUT;case"ko/allotmentNotAvailableModal/open":return i.REACT_DISPLAY_ALLOTMENT_NOT_AVAILABLE_MODAL;default:return null}}},function(e,t){"use strict";var n;!function(e){e[e.Initial=0]="Initial",e[e.Warning=1]="Warning",e[e.Timeout=2]="Timeout",e[e.Submitting=3]="Submitting",e[e.Submitted=4]="Submitted",e[e.WechatPayPending=5]="WechatPayPending"}(n||(n={})),e.exports=n},function(e,t,n){(function(t,i){"use strict";var a=n(97),o=n(96),r=n(99),s=n(89),l=n(472),d=n(9),c=n(11);n(473);var p=function(){function e(e){this.page=e,this._init()}return e.prototype._init=function(){var e=this;this._modalService=new r,this.bookingConditionData=this._getBookingConditionsBindingData(),t.touchevents||(this._initBookingConditionsPopoverBindingOptions(),this.page.isPointsMaxBooking()?this._initPointsMaxConditionsPopoverBindingOptions():this._initAgodaPriceGuaranteePopoverBindingOptions()),d.getPageData().isRtl?this.popoverOption="right":this.popoverOption="left",this.openAgodaPriceGuaranteeModalSubscription=i.postbox.subscribe(c.DISPLAY_PRICE_GUARANTEE_POPUP,function(t){return e.openAgodaPriceGuaranteeModal()})},e.prototype.cancelLeavingModal=function(){},e.prototype.showLeavingModal=function(){},e.prototype.openBookingConditionsModal=function(){var e=new a;e.header.data={isCloseBtnDisplayed:!0,title:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.title()},e.body.name=o.BOOKING_CONDITIONS_MODAL_BODY,i.stringTemplateEngine.instance.addTemplate(e.body.name,n(187)),e.body.data={vm:this.page.roomDetails.roomTypes()[0].bookingConditionsModal},e.dialogCss="booking-conditions-modals",e.options.keyboard=!0,this._modalService.open(e)},e.prototype.openAgodaPriceGuaranteeModal=function(){var e=this;this.agodaPriceGuaranteeModalBindingOptions?this._modalService.open(this.agodaPriceGuaranteeModalBindingOptions):this._modalService.getAgodaPriceGuaranteeModal().then(function(t){e.agodaPriceGuaranteeModalBindingOptions=new a,e.agodaPriceGuaranteeModalBindingOptions.header.data={title:t.title,isCloseBtnDisplayed:!0},e.agodaPriceGuaranteeModalBindingOptions.body.name=o.AGODA_PRICE_GUARANTEE_MODAL_BODY,i.stringTemplateEngine.instance.addTemplate(e.agodaPriceGuaranteeModalBindingOptions.body.name,n(478)),e.agodaPriceGuaranteeModalBindingOptions.body.data=t,e.agodaPriceGuaranteeModalBindingOptions.dialogCss="agoda-price-guarantee-modals",e.agodaPriceGuaranteeModalBindingOptions.options.keyboard=!0,e._modalService.open(e.agodaPriceGuaranteeModalBindingOptions)})},e.prototype.openPointsMaxConditionsModal=function(){var e=this;this.pointsMaxConditionsModalBindingOptions?this._modalService.open(this.pointsMaxConditionsModalBindingOptions):this._modalService.getPointsMaxConditionsModal().then(function(t){e.pointsMaxConditionsModalBindingOptions=new a,e.pointsMaxConditionsModalBindingOptions.header.data={title:t.title,isCloseBtnDisplayed:!0},e.pointsMaxConditionsModalBindingOptions.body.name=o.POINTS_MAX_CONDITIONS_MODAL_BODY,i.stringTemplateEngine.instance.addTemplate(e.pointsMaxConditionsModalBindingOptions.body.name,n(479)),e.pointsMaxConditionsModalBindingOptions.body.data=t,e.pointsMaxConditionsModalBindingOptions.dialogCss="points-max-conditions-modal",e.pointsMaxConditionsModalBindingOptions.options.keyboard=!0,e._modalService.open(e.pointsMaxConditionsModalBindingOptions)})},e.prototype.openRoomLevelBorModal=function(){var e=this;this.roomLevelBorModalBindingOptions?this._modalService.open(this.roomLevelBorModalBindingOptions):this._modalService.getRoomLevelBorModal().then(function(t){e.roomLevelBorModalBindingOptions=new a,e.roomLevelBorModalBindingOptions.header.data={title:t.title,isCloseBtnDisplayed:!0},e.roomLevelBorModalBindingOptions.body.name=o.ROOM_LEVEL_BOR_MODAL_BODY,i.stringTemplateEngine.instance.addTemplate(e.roomLevelBorModalBindingOptions.body.name,n(480)),e.roomLevelBorModalBindingOptions.body.data=t,e.roomLevelBorModalBindingOptions.dialogCss="room-level-bor-modals",e.roomLevelBorModalBindingOptions.options.keyboard=!0,e._modalService.open(e.roomLevelBorModalBindingOptions)})},e.prototype._initBookingConditionsPopoverBindingOptions=function(){this.bookingConditionsPopoverBindingOptions=new s;var e=d.getPageData(),t=e&&e.jsonViewModel&&e.jsonViewModel.features&&e.jsonViewModel.features.isuseroriginkorea;this.bookingConditionsPopoverBindingOptions.options.title=t&&0===this.page.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicyId()?"<span class='korea-non-refundable'>"+this.page.roomDetails.roomTypes()[0].bookingConditionsModal.bookingConditionsText()+"</span>":this.page.roomDetails.roomTypes()[0].bookingConditionsModal.bookingConditionsText(),this.bookingConditionsPopoverBindingOptions.template=o.BOOKING_CONDITIONS_POPOVER,this.bookingConditionsPopoverBindingOptions.data=this.bookingConditionData},e.prototype._getBookingConditionsBindingData=function(){return{cancellationPolicy:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicy(),additionalCancellationPolicyText:i.unwrap(this.page.roomDetails.roomTypes()[0].bookingConditionsModal.additionalCancellationPolicyText),freeCancellationPeriod:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.freeCancellationPeriod(),shouldShowRoomPolicyInPopover:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.shouldShowRoomPolicyInPopover,roomPolicyText:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.roomPolicyText,cancellationPolicyId:this.page.roomDetails.roomTypes()[0].bookingConditionsModal.cancellationPolicyId()}},e.prototype._initAgodaPriceGuaranteePopoverBindingOptions=function(){this.agodaPriceGuaranteePopoverBindingOptions=new s,this.agodaPriceGuaranteePopoverBindingOptions.options.title=this.page.agodaPriceGuaranteeText(),this.agodaPriceGuaranteePopoverBindingOptions.options.content=this.page.agodaPriceGuaranteePopoverContent()},e.prototype._initPointsMaxConditionsPopoverBindingOptions=function(){this.pointsMaxConditionsPopoverBindingOptions=new s,this.pointsMaxConditionsPopoverBindingOptions.options.title=this.page.pointsMaxConditionsText(),this.pointsMaxConditionsPopoverBindingOptions.options.content=this.page.pointsMaxConditionsPopoverContent()},e.prototype.trackStepOne=function(){l.trackLandingStep()},e.prototype.trackStepTwo=function(){l.trackPaymentStep()},e.prototype.trackStepThree=function(){l.trackThankyouStep()},e}();e.exports=p}).call(t,n(25),n(3))},function(e,t,n){(function(e){"use strict";function i(){var e=this;try{this.stop(),mousestats_project=l.getPageData().isRtl?m:c,this.start()}catch(t){setTimeout(function(){e.trackLandingStep()},100)}}function a(){var e=this;try{this.stop(),mousestats_project=l.getPageData().isRtl?h:p,this.start()}catch(t){setTimeout(function(){e.trackPaymentStep()},100)}}function o(){var e=this;try{this.stop(),mousestats_project=l.getPageData().isRtl?f:u,this.start()}catch(t){setTimeout(function(){e.trackThankyouStep()},100)}}function r(){MouseStatsHeatmaps.Resume(),MouseStatsVisitorPlaybacks.Resume(),MouseStatsFormAnalytics.Resume()}function s(){MouseStatsHeatmaps.Stop()}var l=n(9),d=n(11),c="5042278916175508855",p="5735164722014760951",u="5502792973917628047",m="5484024046380090457",h="5345845156291133753",f="5553835563110338347";t.trackLandingStep=i,t.trackPaymentStep=a,t.trackThankyouStep=o,t.start=r,t.stop=s,e.postbox.subscribe(d.SUBMIT_SECOND_STEP,function(){try{MouseStatsFormAnalytics.Submitted()}catch(e){}})}).call(t,n(3))},function(e,t,n){"use strict";var i=n(474),a=n(475),o=n(476),r=n(477),s=n(110),l=window.agoda;if(l.pmc_bundle){var d=new a.PerformanceClient(i.config,s);window.performanceClient=d,d.measureNavigationMoments(o.pageReady),d.measureContinuouslyInteractiveMoment(o.pageReady),d.measureFirstContentfulPaintMoment(o.pageReady),d.measureIdleDurations(o.pageReady),d.measureResourceAggregateDurations(o.pageReady,r.resourceAggregates),d.measureVisuallyCompleteMoment()}},function(e,t){"use strict";var n=window,i=1,a="desktop";"t"===n.rtag_devicetype?(i=2,a="tablet"):"m"===n.rtag_devicetype&&(i=4,a="mobile"),t.config={userId:n.rtag_uid,memberId:n.rtag_uid,languageId:n.rtag_langid,origin:n.rtag_country_origin,devicePlatformId:i,trafficGroupId:n.rtag_trafficgroupId,cid:n.rtag_cid,aid:n.rtag_aid,
clientId:1,pageTypeId:n.rtag_pagetypeid,pageType:"bookingform",deviceType:a}},function(e,t,n){!function(t,n){e.exports=n()}(window,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(t){return e[t]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(4),o=n(5),r=n(6),s=n(7),l=n(8),d=n(11),c=n(12),p=n(1),u=n(13),m=n(14);t.PerformanceClientError={MEASUREMENT_INVALID:"Measurement is invalid",VISIBILITY_CHANGED:"Visibility Changed",TIMEOUT:"Measurement timed out",INCOMPATIBLE:"Browser Incompatible"},function(e){e.MARK_PREFIX="MARK.",e.TIME_PREFIX="TIME.",e.DURATION_START_SUFFIX=".START",e.DURATION_SUFFIX=".DURATION"}(i||(i={}));var h=function(){function e(e,t){this.marks=[],this.measurements={},this.config=e,this.messagingClient=t}return e.prototype.updateConfig=function(e){var t=this;Object.keys(e).forEach(function(n){t.config[n]=e[n]||t.config[n]})},e.prototype.logIncompatibility=function(n){this.messagingClient.send(this.messagingClient.create("log",{level:"error",applicationName:e.applicationName,callerFunctionName:n,message:t.PerformanceClientError.INCOMPATIBLE,referrerUrl:document.referrer,url:document.location.href}))},e.prototype.logError=function(t,n){return this.messagingClient.send(this.messagingClient.create("log",{level:"error",applicationName:e.applicationName,callerFunctionName:n,message:t.message,stackTrace:t.stack,referrerUrl:document.referrer,url:document.location.href,longTags:{outerWidth:window.outerWidth,outerHeight:window.outerHeight,innerWidth:window.innerWidth,innerHeight:window.innerHeight}})),t},e.prototype.sendMeasurement=function(t,n,i){void 0===i&&(i={});var a={country:this.config.origin,device:this.config.deviceType,page:this.config.pageType};Object.keys(a).forEach(function(e){i[e]=a[e]||"none"}),this.messagingClient.send(this.messagingClient.create("measurement",{tags:i,measurement:Math.round(n),name:e.measurementPrefix+t,count:1}))},e.prototype.sendEvent=function(t,n){this.messagingClient.send(this.messagingClient.create("EventMessage",{uid:this.config.userId,mid:this.config.memberId,language:this.config.languageId,origin:this.config.origin,device:this.config.devicePlatformId,tid:this.config.trafficGroupId,cid:this.config.cid,aid:this.config.aid,clientid:this.config.clientId,eventcollection:[{name:e.eventPrefix+t,value:n,tags:{}}],expclientversion:e.applicationVersion}))},e.prototype.isValidMeasurement=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.mark=function(e){var t=new p.Moment;return this.marks.push({name:e,value:t.value}),this.sendEvent(e.toLowerCase()+"."+this.config.pageTypeId,t.value),this.sendMeasurement(i.MARK_PREFIX+e,t.value),t.value},e.prototype.measure=function(e,n,i){var a=this;return new Promise(function(o,r){Promise.resolve(n).then(function(n){if(null==n||!a.isValidMeasurement(n.value))throw new Error(t.PerformanceClientError.MEASUREMENT_INVALID+": "+e+" is "+n.value);a.sendEvent(e.toLowerCase()+"."+a.config.pageTypeId,n.value),a.sendMeasurement(e,n.value,i),o(n.value)})["catch"](function(n){n.message===t.PerformanceClientError.INCOMPATIBLE?a.logIncompatibility(e):a.logError(n,e),m.isDebugMode()&&r(n)})})},e.prototype.moment=function(e,t,n){return this.measurements[e]=t,this.measure(i.TIME_PREFIX+e,Promise.resolve(t),n)},e.prototype.duration=function(e,t,n){var a=this;return this.measurements[e]=t,Promise.resolve(t).then(function(t){a.measure(i.TIME_PREFIX+e+i.DURATION_SUFFIX+i.DURATION_START_SUFFIX,new p.Moment(t.start),n),a.measure(i.TIME_PREFIX+e+i.DURATION_SUFFIX,new u.Index(t.value),n)})["catch"](function(t){return a.logError(t,e)})},e.prototype.measureFrameRateIndex=function(e,t){return this.measure("FPS_SUM",d.fps(e),t)},e.prototype.measureFirstImportantRenderMoment=function(e){return this.moment("FIRST.IMPORTANT.RENDER",new p.Moment,e)},e.prototype.measureContinuouslyInteractiveMoment=function(e,t){return this.measure("TTI",l.tti(e),t)},e.prototype.measureFirstContentfulPaintMoment=function(e,t){return this.moment("PAINT.FIRST.CONTENTFUL",r.paintTime(e),t)},e.prototype.measureVisuallyCompleteMoment=function(e){return this.moment("VISUAL.SIMILAR.LITE",o.newVc(),e)},e.prototype.measureIdleDurations=function(e,t){var n=this;return s.requestIdleCallback(e).then(function(e){return Promise.all(e.map(function(e,i){n.duration("IDLE.CALLBACK."+i,e,t)}))})["catch"](function(e){return n.logError(e,"IDLE.CALLBACK")})},e.prototype.measureResourceAggregateDurations=function(e,t,n){var i=this;return c.resourceAggregates(e,t).then(function(e){return Promise.all(e.map(function(e,a){var o=t[a];return i.duration(o.stage?o.metric+"."+o.stage:o.metric,e,n)}))})["catch"](function(e){return i.logError(e,"RESOURCE.DURATIONS")})},e.prototype.measureNavigationMoments=function(e,t){var n=this;return Promise.all([["REDIRECT",function(e){return e.redirectEnd-e.redirectStart}],["DNS",function(e){return e.domainLookupEnd-e.domainLookupStart}],["TCP",function(e){return e.connectEnd-e.connectStart}],["SECURE",function(e){return e.secureConnectionStart?e.connectEnd-e.secureConnectionStart:0}],["REQUEST",function(e){return e.responseStart-e.requestStart}],["RESPONSE",function(e){return e.responseEnd-e.responseStart}],["START",function(e){return e.fetchStart}],["DURATION",function(e){return e.responseEnd-e.fetchStart}]].map(function(i){var o=i[0],r=i[1];return n.moment("DOC."+o,a.navigationTiming(e,r),t)}))["catch"](function(e){return n.logError(e,"RESOURCE.DURATIONS")})},e.applicationName="performanceClient",e.applicationVersion="per-3.0.8",e.measurementPrefix="PER.RUM.",e.eventPrefix="fe.perf.client.",e}();t.PerformanceClient=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){void 0===e&&(e=window.performance.now()),this.value=e}}();t.Moment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.start=e,this.stop=t,this.update()}return e.prototype.startBefore=function(e){(null===this.start||this.start>e)&&(this.start=e,this.update())},e.prototype.stopAfter=function(e){this.stop<e&&(this.stop=e,this.update())},e.prototype.update=function(){this.value=null!==this.stop&&null!==this.start?this.stop-this.start:null},e}();t.Duration=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.PerformanceClient=i.PerformanceClient;var a=n(2);t.Duration=a.Duration;var o=n(1);t.Moment=o.Moment,(window.performance||(window.performance={})).now||(window.performance.now=function(){return window.performance.timing&&window.performance.timing.navigationStart?Date.now()-window.performance.timing.navigationStart:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(0);t.navigationTiming=function(e,t){return e.then(function(){if(!window.performance||!window.performance.getEntriesByType)throw new Error(a.PerformanceClientError.INCOMPATIBLE);return new i.Moment(t(window.performance.getEntriesByType("navigation")[0]))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1);t.newVc=function(){return new Promise(function(e,t){function n(){for(var e=[],t=0,n=document.body.firstElementChild;n;){var i=null;if(n.clientWidth||n.clientHeight){var a=n.getBoundingClientRect();if(a.top<window.innerHeight){var o=[];n.className&&o.push(n.className),n.id&&o.push(n.id),o.push(n.clientWidth^n.clientHeight^a.top^a.left);var r=o.join("");f.get(n)===r?e.push(1):(f.set(n,r),e.push(0)),i=n.firstElementChild}}for(i=i||n.nextElementSibling;!i&&n;)i=(n=n.parentElement)&&n.nextElementSibling;n=i}for(var s=0,l=e;s<l.length;s++)t+=l[s];return t/e.length>=d}function o(){for(var e=window.performance.getEntriesByType("resource").map(function(e){return e.name}),t=document.querySelectorAll("img"),n=0;n<t.length;n+=1){var i=t[n];if(i.clientHeight&&i.getBoundingClientRect().top<window.innerHeight&&e.indexOf(i.src)<0)return!1}return!0}if(window.performance&&window.performance.getEntriesByType&&window.requestAnimationFrame&&WeakMap){var r,s,l,d=.95,c=3e3,p=3e4,u=32,m=0,h=400,f=new WeakMap;window.performance.setResourceTimingBufferSize&&(window.performance.setResourceTimingBufferSize(h),window.performance.onresourcetimingbufferfull=function(){window.performance.setResourceTimingBufferSize(h+=100)}),document.addEventListener("visibilitychange",function(){l=!0}),window.requestAnimationFrame(function g(d){if(d-m>u){if(m=d,r||(r=d),d-r>p)return void t(new Error(i.PerformanceClientError.TIMEOUT));if(l)return void t(new Error(i.PerformanceClientError.VISIBILITY_CHANGED));if(function(e,t){for(var n=0;n<t.length;n+=1)if(!t[n]())return s=e,!1;return s||(s=e),e-s>c}(d,[n,o]))return window.performance.onresourcetimingbufferfull=function(){},void e(new a.Moment(Math.round(s)))}window.requestAnimationFrame(g)})}else t(new Error(i.PerformanceClientError.INCOMPATIBLE))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(0);t.paintTime=function(e){return e.then(function(){try{var e=performance.getEntriesByName("first-contentful-paint")[0];return new i.Moment(e.startTime)}catch(e){throw new Error(a.PerformanceClientError.INCOMPATIBLE)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(0);t.requestIdleCallback=function(e){return new Promise(function(t,n){if(window.requestIdleCallback){var o=[0],r=0,s=!1;e.then(function(){s=!0;for(var e=[],n=0;n<o.length-1;n+=1)e.push(new i.Duration(o[n],o[n+1]));t(e)});var l=function(){window.requestIdleCallback(function(){var e=performance.now();e-r>200&&o.push(e),r=e,s||l()})};l()}else n(a.PerformanceClientError.INCOMPATIBLE)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(1);!function(){if("PerformanceLongTaskTiming"in window){var e=window.__tti={e:[]};e.o=new PerformanceObserver(function(t){return e.e=e.e.concat(t.getEntries())}),e.o.observe({entryTypes:["longtask"]})}}(),t.tti=function(e){return e.then(function(){return i.getFirstConsistentlyInteractive().then(function(e){return new a.Moment(e)})})}},function(e,t,n){(function(n){var i;!function(){function a(){a=function(){},f.Symbol||(f.Symbol=o)}function o(e){return"jscomp_symbol_"+(e||"")+b++}function r(){a();var e=f.Symbol.iterator;e||(e=f.Symbol.iterator=f.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&g(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return s(this)}}),r=function(){}}function s(e){var t=0;return function(e){return r(),(e={next:e})[f.Symbol.iterator]=function(){return this},e}(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function l(e){r();var t=e[Symbol.iterator];return t?t.call(e):s(e)}function d(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function c(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||c(n.children,t))return!0;return!1}function p(e,t){if(2<e.length)return performance.now();for(var n=[],i=(t=l(t)).next();!i.done;i=t.next())i=i.value,n.push({timestamp:i.start,type:"requestStart"}),n.push({timestamp:i.end,type:"requestEnd"});for(i=(t=l(e)).next();!i.done;i=t.next())n.push({timestamp:i.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(i=n[t],i.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return i.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function u(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,i=y++;XMLHttpRequest.prototype.send=function(a){for(var o=[],r=0;r<arguments.length;++r)o[r-0]=arguments[r];var s=this;return e(i),this.addEventListener("readystatechange",function(){4===s.readyState&&t(i)}),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(i){for(var a=[],o=0;o<arguments.length;++o)a[o-0]=arguments[o];return new Promise(function(i,o){var r=y++;e(r),n.apply(null,[].concat(d(a))).then(function(e){t(r),i(e)},function(e){t(e),o(e)})})}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver(function(t){for(var n=(t=l(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),h(e,p(e.g,e.b)+5e3)),"longtask"===n.entryType){var i=n.startTime+n.duration;e.a.push({start:n.startTime,end:i}),h(e,i+5e3)}}),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver(function(t){for(var n=(t=l(t)).next();!n.done;n=t.next())"childList"==(n=n.value).type&&c(n.addedNodes,v)?e(n):"attributes"==n.type&&v.includes(n.target.tagName.toLowerCase())&&e(n)});return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function m(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=p(e.g,e.b);h(e,Math.max(n+5e3,t))}function h(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout(function(){var t=performance.timing.navigationStart,n=p(e.g,e.b);if(t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t,e.u)var i=e.u;else i=performance.timing.domContentLoadedEventEnd?(i=performance.timing).domContentLoadedEventEnd-i.navigationStart:null;var a=performance.now();null===i&&h(e,Math.max(n+5e3,a+1e3));var o=e.a;n=5e3>a-n?null:5e3>a-(n=o.length?o[o.length-1].end:t)?null:Math.max(n,i),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),h(e,performance.now()+1e3)},t-performance.now()),e.v=t)}var f="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this,g="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},b=0,y=0,v="img script iframe link audio video source".split(" ");u.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise(function(t){e.s=t,"complete"==document.readyState?m(e):window.addEventListener("load",function(){m(e)})})},u.prototype.m=function(e){this.f.set(e,performance.now())},u.prototype.l=function(e){this.f["delete"](e)},u.prototype.B=function(){h(this,performance.now()+5e3)},f.Object.defineProperties(u.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(d(this.f.values()))}}});var C={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new u(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};e.exports?e.exports=C:void 0===(i=function(){return C}.apply(t,[]))||(e.exports=i)}()}).call(this,n(10))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.fps=function(e,t,n){return void 0===t&&(t=3e3),void 0===n&&(n=15e3),new Promise(function(a,o){if(window.requestAnimationFrame&&window.performance&&window.performance.getEntriesByType){var r=performance.getEntriesByType("navigation")[0];if(r){var s=!1,l=[],d=[],c=0,p=null,u=!1,m=function(e){if(!(s||c>=t||e>n)){if(c+=1,r&&r.responseEnd){var i=Math.ceil((e-r.responseEnd)/1e3);d[i]=d[i]+1||1}if(l.push(e-p),p=e,u&&d.slice(-3).reduce(function(e,t){return e+t},0)/3>59){s=!0,l.sort(function(e,t){return e-t});var o=l[Math.floor(.01*l.length)],h=l.reduce(function(e,t){return e+Math.max(0,Math.floor(t-o))},0);a({value:Math.round(h)})}window.requestAnimationFrame(m)}};e.then(function(){u=!0}),window.requestAnimationFrame(m)}else o(new Error(i.PerformanceClientError.INCOMPATIBLE))}else o(new Error(i.PerformanceClientError.INCOMPATIBLE))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(0);t.resourceAggregates=function(e,t){return e.then(function(){if(!window.performance||!window.performance.getEntriesByType)throw new Error(a.PerformanceClientError.INCOMPATIBLE);var e=t.map(function(){return new i.Duration});return window.performance.getEntriesByType("resource").forEach(function(n){t.forEach(function(t,i){var a=e[i];t.initiatorType.indexOf(n.initiatorType)>=0&&(!t.urlPattern||n.name.match(t.urlPattern))&&(a.startBefore(n.startTime),a.stopAfter(n.responseEnd))})}),e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){this.value=e}}();t.Index=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDebugMode=function(){var e=window&&window.location&&window.location.search;return!!e&&e.indexOf("pmcDebug=true")>=0}}])})},function(e,t){"use strict";t.pageReady=new Promise(function(e){window.addEventListener("load",function(){setTimeout(e,2e3)})})},function(e,t){"use strict";t.resourceAggregates=[{metric:"STYLE",initiatorType:["css","link"],urlPattern:/\/new-bf\/.*\.css/gi,start:0,stop:0,value:0},{metric:"SCRIPT",initiatorType:["script","link"],urlPattern:/\/new-bf\/.*\.js/gi,stage:1,start:0,stop:0,value:0},{metric:"IMG",initiatorType:["img"],urlPattern:/pix\d*\./gi,start:0,stop:0,value:0},{metric:"FONT",initiatorType:["css","other"],urlPattern:/cdn\d*\..*\/fonts.*\.(eot|woff2?|ttf|svg)/gi,start:0,stop:0,value:0},{metric:"DATA",initiatorType:["xmlhttprequest"],urlPattern:/\/api\/.*transportationapi/gi,start:0,stop:0,value:0}]},function(e,t){e.exports='<div data-bind="html: agodaPriceGuaranteePopupContentText"></div>'},function(e,t){e.exports='<p><strong data-bind="text: importantNote"></strong></p> <ul data-bind="foreach: message"> <li data-bind="text: $data"></li> </ul>'},function(e,t){e.exports='<div data-bind="html: roomLevelBorPopupContentText"></div>'},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=function(){function e(){this._apiEndpointService=new a}return e.prototype.getVisitingCustomerMessage=function(){var e=this;this._getVisitingCustomerMessage().then(function(t){t&&e._buildToastInfoMessage(t,void 0,"visiting-customer-notification")})},e.prototype.getRemainingRoomsMessage=function(){var e=this;this._getRemainingRoomsMessage().then(function(t){t&&e._buildToastInfoMessage(t,void 0,"remaining-rooms-notification")})},e.prototype.backToFirstStepMessage=function(){this._backToFirstStepMessage()},e.prototype._getRemainingRoomsMessage=function(){var e=this._apiEndpointService.create("message/getRemainingRoomsMessage");return t.post(e).then(function(e){return e.toString()})},e.prototype._getVisitingCustomerMessage=function(){var e=this._apiEndpointService.create("message/getVisitingCustomerMessage");return t.post(e).then(function(e){return e.toString()})},e.prototype._backToFirstStepMessage=function(){var e=this._apiEndpointService.create("message/backToFirstStepMessage");t.post(e)},e.prototype._buildToastInfoMessage=function(e,n,a){var o={closeButton:!0,positionClass:"toast-bottom-right",showMethod:"slideDown",newestOnTop:!1,hideMethod:"fadeOut",showDuration:500,hideDuration:500,timeOut:4e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",toastClass:a};t(window).width()<=480&&(o.showDuration=300,o.hideDuration=400,o.timeOut=3750),i.info(e,void 0,o)},e}();e.exports=o}).call(t,n(2),n(482))},,function(e,t,n){"use strict";var i=n(9),a=function(){function e(){}return e.getButtonStyle=function(){return{size:"medium",color:"blue",shape:"rect"}},e.getCulture=function(){this._pageData||(this._pageData=i.getPageData());var e=this._pageData.culture;this._supportedLocales.indexOf(e)===-1&&(e="en-us");var t=e.split("-"),n=t[0],a=t[1];return[n,a.toUpperCase()].join("_")},e.getEnvironment=function(){switch(this._pageData||(this._pageData=i.getPageData()),this._pageData.dataCenter){case"dev":case"qa":return"sandbox";default:return"production"}},e.parseToken=function(e){if(!e||"string"!=typeof e)return null;var t=e.match(/token=((EC-)?[A-Z0-9]{17})/);return t&&t[1]},e.BUTTON_SELECTOR="#paypal-button",e._supportedLocales=["en-us","en-au","en-gb","fr-ca","es-es","it-it","fr-fr","de-de","pt-br","zh-cn","da-dk","zh-hk","id-id","he-il","jp-jp","nl-nl","no-no","pl-pl","pt-pt","ru-ru","sv-se","th-th","zh-tw"],e}();e.exports=a},function(e,t,n){(function(t){"use strict";var i=n(62),a=n(485),o=function(){function e(){this._apiEndpointService=new i,this._submitBookingResponse=new a}return e.prototype.countPayPalInteraction=function(e){var n=this._apiEndpointService.create("redirectCardBooking/countPayPalInteraction"),i={metric:e};t.post(n,i)},e.prototype.preSubmitPayPalBooking=function(e,n,i,a,o,r){var s=this,l=this._apiEndpointService.create("redirectCardBooking/preSubmitPayPalBooking"),d={isSubscribedToNewsletter:e,isAcceptTermsAndConditions:r};return t.post(l,d).then(function(e){return s._submitBookingResponse.handleResponse(e)})},e.prototype.submitPayPalBooking=function(){var e=this,n=this._apiEndpointService.create("redirectCardBooking/submitPayPalBooking");return t.post(n).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.submitRedirectPaymentBooking=function(e,n,i,a,o,r){var s=this,l=this._apiEndpointService.create("redirectCardBooking/submitRedirectPaymentBooking"),d={isSubscribedToNewsletter:e,isAcceptTermsAndConditions:r};return t.post(l,d).then(function(e){return s._submitBookingResponse.handleResponse(e)})},e.prototype.preSubmitWeChatPayBooking=function(e,n,i,a,o,r){var s=this,l=this._apiEndpointService.create("weChatPay/RequestWeChatQrPay"),d={isSubscribedToNewsletter:e,isAcceptTermsAndConditions:r};return t.post(l,d).then(function(e){return s._submitBookingResponse.handleResponse(e)})},e.prototype.submitWeChatPaySuccess=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnSuccessClicked"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.submitWeChatPayProblem=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnHadProblemClicked"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.submitWeChatPayTimeout=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnPaymentTimeOut"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.weChatPayInAppSuccess=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnInAppSuccessCallback"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.weChatPayInAppFailure=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnInAppFailureCallback"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e.prototype.weChatPayInAppCancel=function(){var e=this,n=this._apiEndpointService.create("weChatPay/OnInAppCancelCallback"),i={};return t.post(n,i).then(function(t){return e._submitBookingResponse.handleResponse(t)})},e}();e.exports=o}).call(t,n(2))},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(99),o=n(486),r=n(8),s=n(487),l=n(9),d=n(21),c=n(86),p=n(88),u=function(){function e(){this._redirectResponseActions=[o.GoToThankYouPage,o.GoToRedirectPaymentPage,o.PostRedirectPaymentPage],this._modalService=new a,this._pageData=l.getPageData()}return e.prototype.handleResponse=function(e){var a=this;switch(e.action){case o.PasswordVerificationFailedAndAccountLocked:n.e(10,function(t){var i=n(492),o=e.result;a._modalService.open(new i(o))});break;case o.PasswordVerificationFailedAndLetCustomerFix:t.postbox.publish(i.PASSWORD_VERIFICATION_FAILED_AND_LET_CUSTOMER_FIX);break;case o.GoToThankYouPage:r.redirect(e.result.url);break;case o.GoToErrorPage:throw"Go to error page.";case o.DisplayAllotmentNotAvailableModal:n.e(8,function(t){var i=n(213),o=e.result;a._modalService.open(new i(o))});break;case o.DisplayDuplicateBookingModal:n.e(11,function(t){(function(t){var i=n(494),o=t.mapping.fromJS(e.result);a._modalService.open(new i(o),!0)}).call(this,n(3))});break;case o.DisplayFraudHighRiskModal:n.e(13,function(t){var i=n(498),o=e.result;a._modalService.open(new i(o))});break;case o.DisplayCrossSellingModal:n.e(14,function(t){(function(t){var i=t.mapping.fromJS(e.result);a._registerCrossSellingModalComponent();var o=n(501);a._modalService.open(new o(i))}).call(this,n(3))});break;case o.DisplayCrossSellingAllotmentNotAvailableModal:n.e(15,function(t){var i=n(504),o=e.result;a._modalService.open(new i(o))});break;case o.DisplayUnableToProcessThisBookingModal:n.e(16,function(t){var i=n(507),o=e.result;a._modalService.open(new i(o))});break;case o.OpenCvcModal:n.e(17,function(t){(function(t){var i=n(510),o=t.mapping.fromJS(e.result);a._modalService.open(new i(o))}).call(this,n(3))});break;case o.GoToRedirectPaymentPage:if(e.result.paymentMethodType===d.PayPal)r.redirect(e.result.url);else{if(r.isOnPopStateInit){if(e.result.queryStringForHistory){var l=e.result.queryStringForHistory;l.indexOf("#payment")<0&&(l+="#payment"),history.replaceState("","",l)}}else document.addEventListener&&e.result.isHtmlFiveSupported&&e.result.queryStringForHistory&&history.pushState("","",e.result.queryStringForHistory);r.redirect(e.result.url,!1)}break;case o.DisplayWeChatPayModal:n.e(18,function(t){var i=n(512),o=e.result;a._modalService.open(new i(o))});break;case o.DisplayWeChatPayPinDialog:"undefined"==typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){return a._onBridgeReady(e)},!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this._onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",this._onBridgeReady)):this._onBridgeReady(e);break;case o.PostRedirectPaymentPage:if(r.isOnPopStateInit){if(e.result.queryStringForHistory){var l=e.result.queryStringForHistory;l.indexOf("#payment")<0&&(l+="#payment"),history.replaceState("","",l)}}else document.addEventListener&&e.result.isHtmlFiveSupported&&e.result.queryStringForHistory&&history.pushState("","",e.result.queryStringForHistory);r.postRedirect(e.result.url,e.result.data);break;case o.UnionPayDebitCardBookingSuccess:t.postbox.publish(i.DISPLAY_UNION_PAY_DEBIT_POPUP);break;case o.DisplayAccountChanged:var u=e.result;switch(u.accountChangedStatus){case s.ToBeLoggedIn:t.postbox.publish(i.LOGIN_SUCCESSFUL),t.postbox.publish(i.GUEST_DETAILS_UPDATED,u.loginResponse.guestDetails),t.postbox.publish(i.GIFTCARD_REDEMPTION_UPDATED,u.loginResponse.giftCardRedemption),t.postbox.publish(i.PRICE_DETAILS_UPDATED,u.loginResponse.priceDetails),t.postbox.publish(i.PROMO_CODE_REDEMPTION_UPDATED,u.loginResponse.promoCodeRedemption),t.postbox.publish(i.REWARDS_REDEMPTION_UPDATED,u.loginResponse.rewardsRedemption),t.postbox.publish(i.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,u.loginResponse.isDisplayNewsletterSubscription),t.postbox.publish(i.SUBSCRIBED_TO_NEWSLETTER_UPDATED,u.loginResponse.isSubscribedToNewsletter),t.postbox.publish(i.MONEYBACK_DETAILS_UPDATED,u.loginResponse.moneyBackDetails),u.loginResponse.priceDetails&&t.postbox.publish(i.TOTAL_SAVING_UPDATE,u.loginResponse.priceDetails.smartChoiceYouSaveText),c.isApplied(p.GCBalanceOnLeavingBFPopup)&&t.postbox.publish(i.UPDATE_CURRENT_LEAVING_GC_BALANCE_TEXT),u.loginResponse.couponPanel&&t.postbox.publish(i.COUPON_PANEL_UPDATED,u.loginResponse.couponPanel);break;case s.ToBeLoggedOut:t.postbox.publish(i.GUEST_DETAILS_UPDATED,u.logoutResponse.guestDetails),t.postbox.publish(i.PAYMENT_DETAILS_UPDATED,u.logoutResponse.paymentDetails),t.postbox.publish(i.PRICE_DETAILS_UPDATED,u.logoutResponse.priceDetails),t.postbox.publish(i.PROMO_CODE_REDEMPTION_UPDATED,u.logoutResponse.promoCodeRedemption),t.postbox.publish(i.LOGOUT_SUCCESSFUL),t.postbox.publish(i.DISPLAY_NEWSLETTER_SUBSCRIPTION_UPDATED,u.logoutResponse.isDisplayNewsletterSubscription),t.postbox.publish(i.SUBSCRIBED_TO_NEWSLETTER_UPDATED,u.logoutResponse.isSubscribedToNewsletter),t.postbox.publish(i.MONEYBACK_DETAILS_UPDATED,u.logoutResponse.moneyBackDetails),u.logoutResponse.priceDetails&&t.postbox.publish(i.TOTAL_SAVING_UPDATE,u.logoutResponse.priceDetails.totalSavingText),c.isApplied(p.GCBalanceOnLeavingBFPopup)&&t.postbox.publish(i.UPDATE_CURRENT_LEAVING_GC_BALANCE_TEXT),u.logoutResponse.couponPanel&&t.postbox.publish(i.COUPON_PANEL_UPDATED,u.logoutResponse.couponPanel)}break;case o.RedirectToSecondStepWithErrorMessageOnPaymentDetails:r.redirect(e.result);break;case o.BlockSuspiciousBooking:n.e(19,function(t){var i=n(515),o=e.result;a._modalService.open(new i(o))})}return this._redirectResponseActions.indexOf(e.action)===-1&&r.unblockPage(),e},e.prototype._registerCrossSellingModalComponent=function(){t.components.isRegistered("cross-selling-room-condition")||t.components.register("cross-selling-room-condition",{template:n(488),viewModel:n(489)}),t.components.isRegistered("cross-selling-room")||t.components.register("cross-selling-room",{template:n(491),viewModel:n(489)})},e.prototype._onBridgeReady=function(e){window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.result.data.appId,timeStamp:e.result.data.timeStamp,nonceStr:e.result.data.nonceStr,"package":e.result.data["package"],signType:e.result.data.signType,paySign:e.result.data.paySign},function(e){!function(t){var i=n(484),a=new i;"get_brand_wcpay_request:ok"===e.err_msg?a.weChatPayInAppSuccess():"get_brand_wcpay_request:fail"===e.err_msg?a.weChatPayInAppFailure():"get_brand_wcpay_request:cancel"===e.err_msg?a.weChatPayInAppCancel():a.weChatPayInAppFailure()}(n)})},e}();e.exports=u}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){e[e.Unknown=-1]="Unknown",e[e.GoToThankYouPage=100]="GoToThankYouPage",e[e.GoToFirstStep=101]="GoToFirstStep",e[e.GoToSecondStep=102]="GoToSecondStep",e[e.RedirectToSecondStepWithErrorMessageOnPaymentDetails=103]="RedirectToSecondStepWithErrorMessageOnPaymentDetails",e[e.GoToFallbackVersion=200]="GoToFallbackVersion",e[e.GoToHotelPage=201]="GoToHotelPage",e[e.DisplayErrorMessageAndLetCustomerFix=300]="DisplayErrorMessageAndLetCustomerFix",e[e.DisplayAllotmentNotAvailableModal=301]="DisplayAllotmentNotAvailableModal",e[e.DisplayDuplicateBookingModal=302]="DisplayDuplicateBookingModal",e[e.DisplayRateIncreaseModal=303]="DisplayRateIncreaseModal",e[e.DisplayFraudHighRiskModal=304]="DisplayFraudHighRiskModal",e[e.PasswordVerificationFailedAndLetCustomerFix=305]="PasswordVerificationFailedAndLetCustomerFix",e[e.PasswordVerificationFailedAndAccountLocked=306]="PasswordVerificationFailedAndAccountLocked",e[e.DisplayTechnicalDifficultiesModal=307]="DisplayTechnicalDifficultiesModal",e[e.DisplayGenericMessageModal=308]="DisplayGenericMessageModal",e[e.DisplayCrossSellingModal=309]="DisplayCrossSellingModal",e[e.DisplayCrossSellingAllotmentNotAvailableModal=310]="DisplayCrossSellingAllotmentNotAvailableModal",e[e.DisplayPayPalExpressCheckoutPopup=311]="DisplayPayPalExpressCheckoutPopup",
e[e.GoToRedirectPaymentPage=312]="GoToRedirectPaymentPage",e[e.DisplayErrorMessageOnPaymentDetails=313]="DisplayErrorMessageOnPaymentDetails",e[e.DisplayUnableToProcessThisBookingModal=314]="DisplayUnableToProcessThisBookingModal",e[e.DisplayAccountChanged=315]="DisplayAccountChanged",e[e.DisplayErrorMessageOnOtpModal=316]="DisplayErrorMessageOnOtpModal",e[e.OpenUnionPayOtpModal=317]="OpenUnionPayOtpModal",e[e.PostRedirectPaymentPage=318]="PostRedirectPaymentPage",e[e.OpenCvcModal=319]="OpenCvcModal",e[e.RequestOtpAndOpenUnionPayOtpModal=320]="RequestOtpAndOpenUnionPayOtpModal",e[e.DisplayWeChatPayModal=330]="DisplayWeChatPayModal",e[e.DisplayRequireIdentificationNumberMessage=331]="DisplayRequireIdentificationNumberMessage",e[e.UnionPayDebitCardBookingSuccess=332]="UnionPayDebitCardBookingSuccess",e[e.UnionPayCardClassMismatch=333]="UnionPayCardClassMismatch",e[e.BlockSuspiciousBooking=334]="BlockSuspiciousBooking",e[e.DisplayWeChatPayPinDialog=335]="DisplayWeChatPayPinDialog",e[e.DisplayUnionPayOtpModal=340]="DisplayUnionPayOtpModal",e[e.DisplayUnionPayNationalIdModal=341]="DisplayUnionPayNationalIdModal",e[e.InvalidUnionPayInformation=342]="InvalidUnionPayInformation",e[e.RenderCollectDeviceFingerprintForPaymentThreeDSecure2=343]="RenderCollectDeviceFingerprintForPaymentThreeDSecure2",e[e.RenderChallengeCustomerForPaymentThreeDSecure2=344]="RenderChallengeCustomerForPaymentThreeDSecure2",e[e.GoToErrorPage=500]="GoToErrorPage"}(n||(n={})),e.exports=n},function(e,t){"use strict";var n;!function(e){e[e.ToBeLoggedIn=1]="ToBeLoggedIn",e[e.ToBeLoggedOut=2]="ToBeLoggedOut"}(n||(n={})),e.exports=n},function(e,t){e.exports='<ul class="list-inline m-b-0"> <li class=booking-conditions><span class="link text-primary" data-bind="text: crossSellingRoomDetails.roomTypes()[0].bookingConditionsText, popover: bookingConditionsPopoverBindingOptions"></span></li><!-- ko if: crossSellingRoomDetails.roomTypes()[0].breakfastIncludedText --> <li class=breakfast data-bind="text: crossSellingRoomDetails.roomTypes()[0].breakfastIncludedText" data-element-name=include-breakfast></li><!-- /ko --><!-- ko if: crossSellingRoomDetails.roomTypes()[0].benefitListText --> <li class=breakfast-included data-bind="text: crossSellingRoomDetails.roomTypes()[0].benefitListText"></li><!-- /ko --><!-- ko if: crossSellingRoomDetails.roomTypes()[0].maxOccupancyText --> <li class=max-occupancy data-bind="text: crossSellingRoomDetails.roomTypes()[0].maxOccupancyText"></li><!-- /ko --><!-- ko if: crossSellingRoomDetails.roomTypes()[0].payAtHotelText --> <li class=pay-at-hotel><span class=text-success data-bind="text: crossSellingRoomDetails.roomTypes()[0].payAtHotelText"></span></li><!-- /ko --><!-- ko if: crossSellingRoomDetails.roomTypes()[0].taxReceiptAvailableText --> <li class=tax-receipt data-bind="text: crossSellingRoomDetails.roomTypes()[0].taxReceiptAvailableText"></li><!-- /ko --><!-- ko if: crossSellingRoomDetails.extraBedIncludedText --> <li class=tax-receipt data-bind="text: crossSellingRoomDetails.extraBedIncludedText"></li><!-- /ko --> </ul>'},function(e,t,n){(function(t){"use strict";var i=n(490),a=function(){function e(e){this.crossSellingRoomDetails=e.crossSellingRoomDetails,this.bookingConditionsPopoverBindingOptions=e.bookingConditionsPopoverBindingOptions,this._crossSellingService=e.crossSellingService,this.isRoomFeatureCollapsed=t.observable(!0),this._subscribeEvents()}return e.prototype._subscribeEvents=function(){var e=this;this._roomFeatureCollapsedSubscription=this.isRoomFeatureCollapsed.subscribe(function(t){t||null==e._crossSellingService||(e._crossSellingService.log(i.ClickExpandRoomFeatures),e._roomFeatureCollapsedSubscription.dispose())})},e.prototype.dispose=function(){this._roomFeatureCollapsedSubscription&&this._roomFeatureCollapsedSubscription.dispose()},e}();e.exports=a}).call(t,n(3))},function(e,t){"use strict";var n;!function(e){e[e.ClickUseADifferentCard=3]="ClickUseADifferentCard",e[e.DisplayCrossSellingModal=4]="DisplayCrossSellingModal",e[e.ClickPayHotelDirectly=5]="ClickPayHotelDirectly",e[e.TimedOutAndCannotCompleteBooking=9]="TimedOutAndCannotCompleteBooking",e[e.DisplayCrossSellingAllotmentUnavailableModal=10]="DisplayCrossSellingAllotmentUnavailableModal",e[e.ClickCloseCrossSellPopup=11]="ClickCloseCrossSellPopup",e[e.ClickExpandRoomFeatures=12]="ClickExpandRoomFeatures"}(n||(n={})),e.exports=n},function(e,t){e.exports='<div class="media media-xs-responsive"> <div class=media-left> <div class="media-object media-object-240 room-image room-placeholder-image"> <div class="media-object media-object-240 hidden-xs" data-bind="style: {backgroundImage: \'url(\\\'\'+ crossSellingRoomDetails.roomTypes()[0].squareRoomImageUrl()+\'\\\')\'}"></div> <div class="media-object media-object-240 visible-xs-block" data-bind="style: {backgroundImage: \'url(\\\'\'+ crossSellingRoomDetails.roomTypes()[0].panoramaRoomImageUrl()+\'\\\')\'}"></div> </div> </div> <div class="media-body cross-selling-room-info"> <h4 class=room-type-name data-bind="text: crossSellingRoomDetails.roomTypes()[0].title"></h4> <dl class="dl-horizontal dl-horizontal-left"><!-- ko if: crossSellingRoomDetails.roomTypes()[0].shouldShowRoomBed --> <dt></dt> <dd data-bind="text: crossSellingRoomDetails.roomTypes()[0].roomBed"></dd><!-- /ko --><!-- ko if: crossSellingRoomDetails.roomTypes()[0].shouldShowRoomView --> <dt></dt> <dd data-bind="text: crossSellingRoomDetails.roomTypes()[0].roomView"></dd><!-- /ko --> </dl><!-- ko if: crossSellingRoomDetails.roomTypes()[0].shouldShowRoomFacilities --> <a href=javascript:void(0) id=roomFeatureToggle class=simple-toggle aria-controls=roomFeatureContainer data-bind="text: crossSellingRoomDetails.roomFeatureText, collapse: isRoomFeatureCollapsed" data-target=#roomFeatureContainer> </a><!-- /ko --> </div><!-- ko if: crossSellingRoomDetails.roomTypes()[0].shouldShowRoomFacilities --> <div id=roomFeatureContainer class="cross-selling-room-features m-t-1 collapse"> <ul data-bind="foreach: crossSellingRoomDetails.roomTypes()[0].roomFacilities"> <li> <i class="ficon ficon-positive color-jade"></i> <span data-bind="text: $data"></span> </li> </ul> </div><!-- /ko --> <div class=cross-selling-room-condition><!-- ko component: {\r\n        name: "cross-selling-room-condition",\r\n        params: {\r\n            crossSellingRoomDetails : crossSellingRoomDetails,\r\n            bookingConditionsPopoverBindingOptions : bookingConditionsPopoverBindingOptions\r\n        }\r\n        } --><!-- /ko --> </div> </div>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(t){"use strict";var i=n(10),a=function(){function e(){this._linkElement='<a data-element-name="{2}" href="{0}" target="_blank">{1}</a>'}return e.prototype.CreateTermsAndPrivacySentence=function(e){var n="";if(this._requestIsValid(e)){var a=this._createTermsAndPrivacyLinkElement(e.termsOfUseUrl(),e.termsOfUseText(),"term-of-use-link"),o=this._createTermsAndPrivacyLinkElement(e.privacyPolicyUrl(),e.privacyPolicyText(),"privacy-policy-link");n=e.termsOfUseAndPrivacySentence().replace("{0}",a).replace("{1}",o)}if(e.isEligibleForTravelPackages()){var r="{1} {2}",s=this._createTermsAndPrivacyLinkElement(e.termsOfUseUrl(),e.clickHereText(),"term-of-use-link"),l=i.formatZeroBased(e.umrahTermsOfUseAndPrivacySentence(),s);n=i.format(r,n,l)}return{termsOfUseAndPrivacyCompleteSentence:t.observable(n)}},e.prototype._createTermsAndPrivacyLinkElement=function(e,t,n){return this._linkElement.replace("{0}",e).replace("{1}",t).replace("{2}",n)},e.prototype._requestIsValid=function(e){return null!==e&&"undefined"!=typeof e&&null!==e.termsOfUseUrl&&"undefined"!=typeof e.termsOfUseUrl&&null!==e.termsOfUseText&&"undefined"!=typeof e.termsOfUseText&&null!==e.privacyPolicyUrl&&"undefined"!=typeof e.privacyPolicyUrl&&null!==e.privacyPolicyText&&"undefined"!=typeof e.privacyPolicyText&&null!==e.termsOfUseAndPrivacySentence&&"undefined"!=typeof e.termsOfUseAndPrivacySentence},e}();e.exports=a}).call(t,n(3))},function(e,t,n){(function(t,i){"use strict";var a=n(62),o=n(485),r=function(){function e(){this._apiEndpointService=new a,this._submitBookingResponse=new o}return e.prototype.verifyUnionPayCard=function(e,n,a,o,r){var s=this,l=this._apiEndpointService.create("unionPay/verifyUnionPayCard"),d={};t.extend(d,{cvcCode:e.cvcCode(),type:e.type(),cardClass:2});var c=e.cardNumber();c=c.replace(/[^0-9]/g,"");var p=e.mobilePhoneNumber();p=p.replace(/[^0-9]/g,""),t.extend(d,{cardNumber:c,expiryMonth:e.expiryMonth(),expiryYear:e.expiryYear(),mobilePhoneNumber:p,mobilePhoneCountryCode:e.mobilePhoneCountryCode(),identificationNumber:i.unwrap(e.identificationNumber())});var u={creditCard:d,isAcceptTermsAndConditions:r};return t.post(l,u).then(function(e){return s._submitBookingResponse.handleResponse(e)})},e.prototype.requestUnionPayOtp=function(e){var n=this._apiEndpointService.create("unionPay/requestUnionPayOtp"),a={};t.extend(a,{cvcCode:e.cvcCode(),type:e.type(),cardClass:2});var o=e.cardNumber();o=o.replace(/[^0-9]/g,"");var r=e.mobilePhoneNumber();r=r.replace(/[^0-9]/g,""),t.extend(a,{cardNumber:o,expiryMonth:e.expiryMonth(),expiryYear:e.expiryYear(),mobilePhoneNumber:r,identificationNumber:i.unwrap(e.identificationNumber())});var s={creditCard:a};return t.post(n,s)},e.prototype.requestUnionPayConfig=function(){var e=this._apiEndpointService.create("unionPay/requestUnionPayConfig");return t.post(e)},e.prototype.submitUnionPayOtp=function(e,n){var a=this,o=this._apiEndpointService.create("unionPay/submitUnionPayOtp"),r={};t.extend(r,{cvcCode:n.cvcCode(),type:n.type(),cardClass:2});var s=n.cardNumber();s=s.replace(/[^0-9]/g,"");var l=n.mobilePhoneNumber();l=l.replace(/[^0-9]/g,""),t.extend(r,{cardNumber:s,expiryMonth:n.expiryMonth(),expiryYear:n.expiryYear(),mobilePhoneNumber:l,identificationNumber:i.unwrap(n.identificationNumber())});var d={creditCard:r,password:e};return t.post(o,d).then(function(e){return a._submitBookingResponse.handleResponse(e)})},e}();e.exports=r}).call(t,n(2),n(3))},function(e,t,n){(function(t,i){"use strict";var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(97),r=n(96),s=n(486),l=n(520),d=n(11),c=n(99),p=n(9),u=n(522),m=n(75),h=n(91),f=function(e){function o(i){var a=this;e.call(this),this._unionPayOtpModal=i,this.cdnUrl=p.getPageData().cdnUrl,this.isOtpFocused=t.observable(!1),this._modalService=new c,this.requestNewOtpLoadingTime=t.observable(0),this.requestNewOtpMessageTime=t.observable(0),this.requestNewOtpInactiveTime=t.observable(0),this.requestNewPasswordCss=t.observable(""),this.continueButtonCss=t.observable(""),this.requestHasBeenReceived=t.observable(!1),this.showSpinner=t.observable(!1),this.shouldShowYourRequestHasBeenReceived=!1,this.otpErrorMessage=t.observable(""),this.isProcessing=t.observable(!1),this.closeButtonEnabled=t.observable(!0),this._spinnerTimeout=null,this._passwordClassTimeout=null,this._hasBeenReceivedTimeout=null,this.closeDone=!1,this.header={name:r.UNION_PAY_OTP_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{close:function(){return a.close()},title:i.page.paymentDetails.paymentMethod.paymentConfirmationText(),closeButtonVisible:this.closeButtonEnabled}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(523)),this.body.name=r.UNION_PAY_OTP_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(524)),this.body.data={submitUnionPayOtp:function(){return a.submitUnionPayOtp()},requestNewOtp:function(){return a.requestNewOtp()},paymentMethod:i.page.paymentDetails.paymentMethod,requestNewOtpLoadingTime:this.requestNewOtpLoadingTime,requestNewOtpMessageTime:this.requestNewOtpMessageTime,requestNewOtpInactiveTime:this.requestNewOtpLoadingTime,requestNewPasswordClass:this.requestNewPasswordCss,continueButtonClass:this.continueButtonCss,requestHasBeenReceived:this.requestHasBeenReceived,showSpinner:this.showSpinner,isProcessing:this.isProcessing,cdnUrl:this.cdnUrl,isOtpFocused:this.isOtpFocused,isAddMoreLifeExperiment:p.getFeature(h.AddMoreLifeToBookingForm)},this.dialogCss=r.UNION_PAY_OTP_MODAL_CLASS,this.options.backdrop="static",this._paymentMethod=i.page.paymentDetails.paymentMethod,this._paymentMethod.otp=t.observable(""),this._otpSubscription=i.page.paymentDetails.paymentMethod.otp.subscribe(function(e){a.clearErrors()}),this._setValidation()}return a(o,e),o.prototype.close=function(e){void 0===e&&(e=!0),this.closeDone||(this.clearTimeouts(),e&&(this.clearErrors(),this._unionPayOtpModal.page.secondStepErrorMessage("")),this.visible(!1),this._unionPayOtpModal.isProcessing(!1),this.closeDone=!0)},o.prototype.clearErrors=function(){this.otpErrorMessage(""),this._paymentMethod.otp.clearError()},o.prototype.clearTimeouts=function(){clearTimeout(this._spinnerTimeout),clearTimeout(this._passwordClassTimeout),clearTimeout(this._hasBeenReceivedTimeout)},o.prototype.requestNewOtp=function(){var e=this,t=new l;"disabled"!==this.requestNewPasswordCss()&&(this.requestNewPasswordCss("disabled"),this._passwordClassTimeout=setTimeout(function(){e.requestNewPasswordCss("")},this.requestNewOtpInactiveTime()),this.showSpinner(!0),this._spinnerTimeout=setTimeout(function(){e.showSpinner(!1),e.shouldShowYourRequestHasBeenReceived&&(e.requestHasBeenReceived(!0),setTimeout(function(){e.requestHasBeenReceived(!1)},e.requestNewOtpMessageTime()))},this.requestNewOtpLoadingTime()),this._paymentMethod.paymentGateway===u.Adyen?t.verifyUnionPayCard(this._unionPayOtpModal.page.paymentDetails.paymentMethod.creditCard,this._unionPayOtpModal.page.guestDetails.customer,this._unionPayOtpModal.page.guestDetails.guest,this._unionPayOtpModal.page.passwordVerification.password(),this._unionPayOtpModal.page.guestDetails.isMakingThisBookingForSomeoneElse()).then(function(t){t.action===s.OpenUnionPayOtpModal?e.handleRequestUnionPayOtp(null):e.handleRequestUnionPayOtp(t.result)}):t.requestUnionPayOtp(this._unionPayOtpModal.page.paymentDetails.paymentMethod.creditCard).then(function(t){e.handleRequestUnionPayOtp(t.errorMessage)}))},o.prototype.handleRequestUnionPayOtp=function(e){var t=this;return null!=e?(this._unionPayOtpModal.page.secondStepErrorMessage(e),void this.visible(!1)):(this.shouldShowYourRequestHasBeenReceived=!0,void(this.showSpinner()===!1&&(this.requestHasBeenReceived(!0),this._hasBeenReceivedTimeout=setTimeout(function(){t.requestHasBeenReceived(!1)},this.requestNewOtpMessageTime()))))},o.prototype.subscribeToDuplicateModalResponse=function(){var e=this;this._subscribeDuplicateModalResponse=t.postbox.subscribe(d.DUPLICATE_MODAL_RESPONSE,function(t){e.handleOtpBookingResponse(t)})},o.prototype.handleOtpBookingResponse=function(e){switch(e.action){case s.DisplayErrorMessageOnOtpModal:this.visible()===!1&&this._modalService.open(this,!0),this.closeButtonEnabled(!0),this.otpErrorMessage(e.result.errorMessage);break;case s.GoToThankYouPage:this.close();break;case s.DisplayErrorMessageOnPaymentDetails:case s.DisplayErrorMessageAndLetCustomerFix:if(this.visible()===!1){var t=i(".modal");t.length&&i(".modal").modal("hide")}this._unionPayOtpModal.page.secondStepErrorMessage(e.result),this.close(!1);break;case s.DisplayDuplicateBookingModal:this.subscribeToDuplicateModalResponse();break;default:this.closeButtonEnabled(!0)}},o.prototype.submitUnionPayOtp=function(){var e=this;if(this._paymentMethod.otp.isValid()){if("disabled"!==this.continueButtonCss()){this.requestNewPasswordCss("disabled");var i=n(520),a=new i;this.otpErrorMessage(""),this.isProcessing(!0),this.closeButtonEnabled(!1),a.submitUnionPayOtp(this._paymentMethod.otp(),this._paymentMethod.creditCard).then(function(t){e.handleOtpBookingResponse(t)}).always(function(){e.isProcessing(!1),e.requestNewPasswordCss("")})}}else{var o=t.validation.group(this._paymentMethod.otp);o.showAllMessages(!0)}},o.prototype._setValidation=function(){var e=this;this._paymentMethod.otp.extend({required:{params:!0,message:m.getValidationMessage(this._paymentMethod.pleaseEnterYourPasswordBeforeContinuingText(),"otp-span"),onlyIf:function(){return!e.isOtpFocused()}},pattern:{params:this._paymentMethod.unionPayOtpRegex(),message:m.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"otp-span")},minLength:{params:4,message:m.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"otp-span")},maxLength:{params:6,message:m.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"otp-span")},validation:{validator:function(){return!e.otpErrorMessage()||""===e.otpErrorMessage()},message:function(){return e.otpErrorMessage()}}})},o.prototype.dispose=function(){this._subscribeDuplicateModalResponse&&this._subscribeDuplicateModalResponse.dispose()},o}(o);e.exports=f}).call(t,n(3),n(2))},function(e,t){"use strict";var n;!function(e){e[e.Adyen=8]="Adyen"}(n||(n={})),e.exports=n},function(e,t){e.exports='<!-- ko if: closeButtonVisible --> <button type=button class="ficon ficon-close-popup close verify-identity-close-btn" data-dismiss=modal aria-hidden=true data-bind="click: close"></button><!-- /ko --> <h4 class=modal-title data-bind="html: title"></h4>'},function(e,t){e.exports='<!-- union pay otp details starts --> <div class=union-pay-credit-card-details> <p data-bind="html: paymentMethod.youWillNowReceiveAnSmsContainingAOneTimePasswordText"></p> <form class=well name=unionPayOtpModal> <div class="form-group has-feedback" data-bind="validationElement: paymentMethod.otp"><!-- ko component: {\r\n\t\t\t\tname: "form-input",\r\n\t\t\t\tparams : {\r\n\t\t\t\t\tlabelText: paymentMethod.passwordUnionPayText,\r\n\t\t\t\t\tvalue: paymentMethod.otp,\r\n\t\t\t\t\thasFocus: isOtpFocused,\r\n\t\t\t\t\tnumericOnly: paymentMethod.otp,\r\n\t\t\t\t\tinputAttributes: {\r\n\t\t\t\t\t\tname: \'otp\',\r\n\t\t\t\t\t\tid: \'otp\',\r\n\t\t\t\t\t\ttype: \'tel\',\r\n\t\t\t\t\t\t\'data-element-name\': \'up-otp\',\r\n\t\t\t\t\t\tpattern: \'[0-9]*\',\r\n\t\t\t\t\t\tmaxlength: \'6\',\r\n\t\t\t\t\t\tautocomplete: \'off\'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} --><!-- /ko --> </div> <div class=text-center> <button type=submit class="btn btn-primary" data-bind="ladda: isProcessing, click: submitUnionPayOtp, css: continueButtonClass" data-style=expand-right data-element-name=submit-unionpay-otp> <span class=ladda-label data-bind="text: paymentMethod.continueText"/> <span class=ladda-spinner /> </button> </div> </form> <p> <span data-bind="text: paymentMethod.whatIfMyPasswordHasNotArrivedAfter5MinutesText"></span> <a href=javascript:void(0) data-bind="text: paymentMethod.requestNewPasswordText, click: requestNewOtp, css: requestNewPasswordClass" data-element-name=request-new-password-unionpay></a> </p><!-- ko if: requestHasBeenReceived --> <div class="alert alert-success" data-bind="text: paymentMethod.yourRequestHasBeenReceivedAndYouWillReceiveAPasswordShortlyText"></div><!-- /ko --><!-- ko if: showSpinner --> <div class=text-center> <img data-bind="attr:{ srcset: cdnUrl + \'/images/new-bf/preloader_v2.gif 1x, \' + cdnUrl + \'/images/new-bf/preloader_v2@2x.gif 2x\',\r\n\t\t\t\tsrc: cdnUrl + \'/images/new-bf/preloader_v2.gif\' }"/> </div><!-- /ko --> </div> <!-- union pay otp details ends -->'},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(9),s=function(e){function a(i){e.call(this),this.header.name=o.WAITING_FOR_CONFIRMATION_MODAL_HEADER,this.cdnUrl=r.getPageData().cdnUrl,this.header={name:o.WAITING_FOR_CONFIRMATION_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{title:i.title}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(526)),this.body.name=o.WAITING_FOR_CONFIRMATION_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(527)),this.body.data={cdnUrl:this.cdnUrl},this.dialogCss=o.WAITING_FOR_CONFIRMATION_MODAL_CLASS,this.options.backdrop="static"}return i(a,e),a}(a);e.exports=s}).call(t,n(3))},function(e,t){e.exports='<h4 class=modal-title data-bind="html: title"></h4>'},function(e,t){e.exports="<div class=text-center> <img data-bind=\"attr:{ srcset: cdnUrl + '/images/new-bf/preloader_v2.gif 1x, ' + cdnUrl + '/images/new-bf/preloader_v2@2x.gif 2x',\r\n\t\t\t\tsrc: cdnUrl + '/images/new-bf/preloader_v2.gif' }\"/> </div>"},function(e,t,n){(function(t){"use strict";var i=n(11),a=n(152),o=n(9),r=n(529),s=function(){function e(){this.measurementService=new a}return e.prototype.registerEventHandler=function(){var n=this;this._Subsription=t.postbox.subscribe(i.SEND_CRITICAL_MARK,function(t){e._isCriticalMarkSent||r.includes(e._callList,t)||(e._criticalMarkStatus+=t,0===(e._criticalMarkStatus^e._criticalMarkCheck)&&(window&&window.performance&&window.performance.now&&(e._criticalMeasurement=window.performance.now()),n.sendCriticalMark()),e._callList.push(t))})},e.prototype.sendCriticalMark=function(){var t=o.getPageData();if(!(t.jsonViewModel&&t.jsonViewModel.features&&t.jsonViewModel.features.clientSideBotWillNotSendMessage&&t.isTob)&&!e._isCriticalMarkSent&&e._criticalMeasurement>0){var n={value:""+e._criticalMeasurement};this.measurementService.sendEvent("mark_critical_load",JSON.stringify(n)),e._isCriticalMarkSent=!0}},e.prototype.checkCriticalMessageAndSendMetric=function(t){var n=o.getPageData();if(!(n.jsonViewModel&&n.jsonViewModel.features&&n.jsonViewModel.features.clientSideBotWillNotSendMessage&&n.isTob||2!==t||e._isCriticalMarkSent)){var i={componentStatus:e._criticalMarkStatus.toString(2)};this.measurementService.sendMessage("critical-mark-failed",JSON.stringify(i)),e._isCriticalMarkSent=!0}},e._isCriticalMarkSent=!1,e._criticalMeasurement=-1,e._criticalMarkStatus=0,e._criticalMarkCheck=31,e._callList=new Array(6),e}();e.exports=s}).call(t,n(3))},function(e,t,n){var i;(function(e,a){(function(){function o(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t,n,i){for(var a=-1,o=e?e.length:0;++a<o;){var r=e[a];t(i,r,n(r),e)}return i}function d(e,t){for(var n=-1,i=e?e.length:0;++n<i&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function p(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(!t(e[n],n,e))return!1;return!0}function u(e,t){for(var n=-1,i=e?e.length:0,a=0,o=[];++n<i;){var r=e[n];t(r,n,e)&&(o[a++]=r)}return o}function m(e,t){var n=e?e.length:0;return!!n&&x(e,t,0)>-1}function h(e,t,n){for(var i=-1,a=e?e.length:0;++i<a;)if(n(t,e[i]))return!0;return!1}function f(e,t){for(var n=-1,i=e?e.length:0,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}function g(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}function b(e,t,n,i){var a=-1,o=e?e.length:0;for(i&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}function y(e,t,n,i){var a=e?e.length:0;for(i&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function v(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function C(e){return e.split("")}function T(e){return e.match(Nt)||[]}function k(e,t,n){var i;return n(e,function(e,n,a){if(t(e,n,a))return i=n,!1}),i}function P(e,t,n,i){for(var a=e.length,o=n+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function x(e,t,n){if(t!==t)return P(e,_,n);for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}function D(e,t,n,i){for(var a=n-1,o=e.length;++a<o;)if(i(e[a],t))return a;return-1}function _(e){return e!==e}function w(e,t){var n=e?e.length:0;return n?E(e,t)/n:Ee}function M(e){return function(t){return null==t?ae:t[e]}}function S(e){return function(t){return null==e?ae:e[t]}}function A(e,t,n,i,a){return a(e,function(e,a,o){n=i?(i=!1,e):t(n,e,a,o)}),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function E(e,t){for(var n,i=-1,a=e.length;++i<a;){var o=t(e[i]);o!==ae&&(n=n===ae?o:n+o)}return n}function N(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function R(e,t){return f(t,function(t){return[t,e[t]]})}function I(e){return function(t){return e(t)}}function L(e,t){return f(t,function(t){return e[t]})}function F(e,t){return e.has(t)}function B(e,t){for(var n=-1,i=e.length;++n<i&&x(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length;n--&&x(t,e[n],0)>-1;);return n}function V(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&i++;return i}function q(e){return"\\"+Gn[e]}function j(e,t){return null==e?ae:e[t]}function G(e){return Rn.test(e)}function H(e){return In.test(e)}function W(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function Y(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function $(e,t){return function(n){return e(t(n))}}function z(e,t){for(var n=-1,i=e.length,a=0,o=[];++n<i;){var r=e[n];r!==t&&r!==de||(e[n]=de,o[a++]=n)}return o}function J(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function X(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Z(e){return G(e)?ee(e):ri(e)}function Q(e){return G(e)?te(e):C(e)}function ee(e){for(var t=En.lastIndex=0;En.test(e);)t++;return t}function te(e){return e.match(En)||[]}function ne(e){return e.match(Nn)||[]}function ie(e){function t(e){if(Fs(e)&&!jp(e)&&!(e instanceof a)){if(e instanceof i)return e;if(zd.call(e,"__wrapped__"))return No(e)}return new i(e)}function n(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ae}function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function C(){var e=new a(this.__wrapped__);return e.__actions__=xa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xa(this.__views__),e}function S(){if(this.__filtered__){var e=new a(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ee(){var e=this.__wrapped__.value(),t=this.__dir__,n=jp(e),i=t<0,a=n?e.length:0,o=so(0,a,this.__views__),r=o.start,s=o.end,l=s-r,d=i?s:r-1,c=this.__iteratees__,p=c.length,u=0,m=Tc(l,this.__takeCount__);if(!n||a<re||a==l&&m==l)return oa(e,this.__actions__);var h=[];e:for(;l--&&u<m;){d+=t;for(var f=-1,g=e[d];++f<p;){var b=c[f],y=b.iteratee,v=b.type,C=y(g);if(v==we)g=C;else if(!C){if(v==_e)continue e;break e}}h[u++]=g}return h}function te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nt(){this.__data__=Ac?Ac(null):{}}function Yt(e){return this.has(e)&&delete this.__data__[e]}function Kt(e){var t=this.__data__;if(Ac){var n=t[e];return n===le?ae:n}return zd.call(t,e)?t[e]:ae}function $t(e){var t=this.__data__;return Ac?t[e]!==ae:zd.call(t,e)}function zt(e,t){var n=this.__data__;return n[e]=Ac&&t===ae?le:t,this}function Jt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Xt(){this.__data__=[]}function Zt(e){var t=this.__data__,n=kn(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():lc.call(t,n,1),!0}function Qt(e){var t=this.__data__,n=kn(t,e);return n<0?ae:t[n][1]}function en(e){return kn(this.__data__,e)>-1}function tn(e,t){var n=this.__data__,i=kn(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function nn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function an(){this.__data__={hash:new te,map:new(_c||Jt),string:new te}}function on(e){return ao(this,e)["delete"](e)}function rn(e){return ao(this,e).get(e)}function sn(e){return ao(this,e).has(e)}function ln(e,t){return ao(this,e).set(e,t),this}function dn(e){var t=-1,n=e?e.length:0;for(this.__data__=new nn;++t<n;)this.add(e[t])}function cn(e){return this.__data__.set(e,le),this}function pn(e){return this.__data__.has(e)}function un(e){this.__data__=new Jt(e)}function mn(){this.__data__=new Jt}function hn(e){return this.__data__["delete"](e)}function fn(e){return this.__data__.get(e)}function gn(e){return this.__data__.has(e)}function bn(e,t){var n=this.__data__;if(n instanceof Jt){var i=n.__data__;if(!_c||i.length<re-1)return i.push([e,t]),this;n=this.__data__=new nn(i)}return n.set(e,t),this}function yn(e,t){var n=jp(e)||Ps(e)?N(e.length,qd):[],i=n.length,a=!!i;for(var o in e)!t&&!zd.call(e,o)||a&&("length"==o||go(o,i))||n.push(o);return n}function vn(e,t,n,i){return e===ae||ks(e,Wd[n])&&!zd.call(i,n)?t:e}function Cn(e,t,n){(n===ae||ks(e[t],n))&&("number"!=typeof t||n!==ae||t in e)||(e[t]=n)}function Tn(e,t,n){var i=e[t];zd.call(e,t)&&ks(i,n)&&(n!==ae||t in e)||(e[t]=n)}function kn(e,t){for(var n=e.length;n--;)if(ks(e[n][0],t))return n;return-1}function Pn(e,t,n,i){return Gc(e,function(e,a,o){t(i,e,n(e),o)}),i}function xn(e,t){return e&&Da(t,yl(t),e)}function Dn(e,t){for(var n=-1,i=null==e,a=t.length,o=Rd(a);++n<a;)o[n]=i?ae:fl(e,t[n]);return o}function _n(e,t,n){return e===e&&(n!==ae&&(e=e<=n?e:n),t!==ae&&(e=e>=t?e:t)),e}function wn(e,t,n,i,a,o,r){var s;if(i&&(s=o?i(e,a,o,r):i(e)),s!==ae)return s;if(!Ls(e))return e;var l=jp(e);if(l){if(s=po(e),!t)return xa(e,s)}else{var c=Qc(e),p=c==je||c==Ge;if(Hp(e))return ua(e,t);if(c==Ye||c==Fe||p&&!o){if(W(e))return o?e:{};if(s=uo(p?{}:e),!t)return _a(e,xn(s,e))}else{if(!Un[c])return o?e:{};s=mo(e,c,wn,t)}}r||(r=new un);var u=r.get(e);if(u)return u;if(r.set(e,s),!l)var m=n?Qa(e):yl(e);return d(m||e,function(a,o){m&&(o=a,a=e[o]),Tn(s,o,wn(a,t,n,i,o,e,r))}),s}function Mn(e){var t=yl(e);return function(n){return Sn(n,e,t)}}function Sn(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ud(e);i--;){var a=n[i],o=t[a],r=e[a];if(r===ae&&!(a in e)||!o(r))return!1}return!0}function En(e){return Ls(e)?rc(e):{}}function Nn(e,t,n){if("function"!=typeof e)throw new jd(se);return np(function(){e.apply(ae,n)},t)}function Rn(e,t,n,i){var a=-1,o=m,r=!0,s=e.length,l=[],d=t.length;if(!s)return l;n&&(t=f(t,I(n))),i?(o=h,r=!1):t.length>=re&&(o=F,r=!1,t=new dn(t));e:for(;++a<s;){var c=e[a],p=n?n(c):c;if(c=i||0!==c?c:0,r&&p===p){for(var u=d;u--;)if(t[u]===p)continue e;l.push(c)}else o(t,p,i)||l.push(c)}return l}function In(e,t){var n=!0;return Gc(e,function(e,i,a){return n=!!t(e,i,a)}),n}function Vn(e,t,n){for(var i=-1,a=e.length;++i<a;){var o=e[i],r=t(o);if(null!=r&&(s===ae?r===r&&!$s(r):n(r,s)))var s=r,l=o}return l}function qn(e,t,n,i){var a=e.length;for(n=el(n),n<0&&(n=-n>a?0:a+n),i=i===ae||i>a?a:el(i),i<0&&(i+=a),i=n>i?0:tl(i);n<i;)e[n++]=t;return e}function jn(e,t){var n=[];return Gc(e,function(e,i,a){t(e,i,a)&&n.push(e)}),n}function Gn(e,t,n,i,a){var o=-1,r=e.length;for(n||(n=fo),a||(a=[]);++o<r;){var s=e[o];t>0&&n(s)?t>1?Gn(s,t-1,n,i,a):g(a,s):i||(a[a.length]=s)}return a}function Yn(e,t){return e&&Wc(e,t,yl)}function Kn(e,t){return e&&Yc(e,t,yl)}function zn(e,t){return u(t,function(t){return Ns(e[t])})}function Jn(e,t){t=yo(t,e)?[t]:ca(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[Ao(t[n++])];return n&&n==i?e:ae}function Zn(e,t,n){var i=t(e);return jp(e)?i:g(i,n(e))}function Qn(e){return Zd.call(e)}function ri(e,t){return e>t}function pi(e,t){return null!=e&&zd.call(e,t)}function ui(e,t){return null!=e&&t in Ud(e)}function mi(e,t,n){return e>=Tc(t,n)&&e<Cc(t,n)}function hi(e,t,n){for(var i=n?h:m,a=e[0].length,o=e.length,r=o,s=Rd(o),l=1/0,d=[];r--;){var c=e[r];r&&t&&(c=f(c,I(t))),l=Tc(c.length,l),s[r]=!n&&(t||a>=120&&c.length>=120)?new dn(r&&c):ae}c=e[0];var p=-1,u=s[0];e:for(;++p<a&&d.length<l;){var g=c[p],b=t?t(g):g;if(g=n||0!==g?g:0,!(u?F(u,b):i(d,b,n))){for(r=o;--r;){var y=s[r];if(!(y?F(y,b):i(e[r],b,n)))continue e}u&&u.push(b),d.push(g)}}return d}function fi(e,t,n,i){return Yn(e,function(e,a,o){t(i,n(e),a,o)}),i}function gi(e,t,n){yo(t,e)||(t=ca(t),
e=Mo(e,t),t=Zo(t));var i=null==e?e:e[Ao(t)];return null==i?ae:s(i,e,n)}function bi(e){return Fs(e)&&Zd.call(e)==et}function yi(e){return Fs(e)&&Zd.call(e)==Ve}function vi(e,t,n,i,a){return e===t||(null==e||null==t||!Ls(e)&&!Fs(t)?e!==e&&t!==t:Ci(e,t,vi,n,i,a))}function Ci(e,t,n,i,a,o){var r=jp(e),s=jp(t),l=Be,d=Be;r||(l=Qc(e),l=l==Fe?Ye:l),s||(d=Qc(t),d=d==Fe?Ye:d);var c=l==Ye&&!W(e),p=d==Ye&&!W(t),u=l==d;if(u&&!c)return o||(o=new un),r||zp(e)?Ja(e,t,n,i,a,o):Xa(e,t,l,n,i,a,o);if(!(a&Te)){var m=c&&zd.call(e,"__wrapped__"),h=p&&zd.call(t,"__wrapped__");if(m||h){var f=m?e.value():e,g=h?t.value():t;return o||(o=new un),n(f,g,i,a,o)}}return!!u&&(o||(o=new un),Za(e,t,n,i,a,o))}function Ti(e){return Fs(e)&&Qc(e)==He}function ki(e,t,n,i){var a=n.length,o=a,r=!i;if(null==e)return!o;for(e=Ud(e);a--;){var s=n[a];if(r&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){s=n[a];var l=s[0],d=e[l],c=s[1];if(r&&s[2]){if(d===ae&&!(l in e))return!1}else{var p=new un;if(i)var u=i(d,c,l,e,t,p);if(!(u===ae?vi(c,d,i,Ce|Te,p):u))return!1}}return!0}function Pi(e){if(!Ls(e)||To(e))return!1;var t=Ns(e)||W(e)?ec:Vt;return t.test(Oo(e))}function xi(e){return Ls(e)&&Zd.call(e)==$e}function Di(e){return Fs(e)&&Qc(e)==ze}function _i(e){return Fs(e)&&Is(e.length)&&!!Bn[Zd.call(e)]}function wi(e){return"function"==typeof e?e:null==e?ld:"object"==typeof e?jp(e)?Ni(e[0],e[1]):Ei(e):gd(e)}function Mi(e){if(!ko(e))return vc(e);var t=[];for(var n in Ud(e))zd.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Si(e){if(!Ls(e))return wo(e);var t=ko(e),n=[];for(var i in e)("constructor"!=i||!t&&zd.call(e,i))&&n.push(i);return n}function Ai(e,t){return e<t}function Oi(e,t){var n=-1,i=xs(e)?Rd(e.length):[];return Gc(e,function(e,a,o){i[++n]=t(e,a,o)}),i}function Ei(e){var t=oo(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||ki(n,e,t)}}function Ni(e,t){return yo(e)&&Po(t)?xo(Ao(e),t):function(n){var i=fl(n,e);return i===ae&&i===t?bl(n,e):vi(t,i,ae,Ce|Te)}}function Ri(e,t,n,i,a){if(e!==t){if(!jp(t)&&!zp(t))var o=Si(t);d(o||t,function(r,s){if(o&&(s=r,r=t[s]),Ls(r))a||(a=new un),Ii(e,t,s,n,Ri,i,a);else{var l=i?i(e[s],r,s+"",e,t,a):ae;l===ae&&(l=r),Cn(e,s,l)}})}}function Ii(e,t,n,i,a,o,r){var s=e[n],l=t[n],d=r.get(l);if(d)return void Cn(e,n,d);var c=o?o(s,l,n+"",e,t,r):ae,p=c===ae;p&&(c=l,jp(l)||zp(l)?jp(s)?c=s:Ds(s)?c=xa(s):(p=!1,c=wn(l,!0)):Ws(l)||Ps(l)?Ps(s)?c=il(s):!Ls(s)||i&&Ns(s)?(p=!1,c=wn(l,!0)):c=s:p=!1),p&&(r.set(l,c),a(c,l,i,o,r),r["delete"](l)),Cn(e,n,c)}function Li(e,t){var n=e.length;if(n)return t+=t<0?n:0,go(t,n)?e[t]:ae}function Fi(e,t,n){var i=-1;t=f(t.length?t:[ld],I(io()));var a=Oi(e,function(e,n,a){var o=f(t,function(t){return t(e)});return{criteria:o,index:++i,value:e}});return O(a,function(e,t){return Ta(e,t,n)})}function Bi(e,t){return e=Ud(e),Ui(e,t,function(t,n){return n in e})}function Ui(e,t,n){for(var i=-1,a=t.length,o={};++i<a;){var r=t[i],s=e[r];n(s,r)&&(o[r]=s)}return o}function Vi(e){return function(t){return Jn(t,e)}}function qi(e,t,n,i){var a=i?D:x,o=-1,r=t.length,s=e;for(e===t&&(t=xa(t)),n&&(s=f(e,I(n)));++o<r;)for(var l=0,d=t[o],c=n?n(d):d;(l=a(s,c,l,i))>-1;)s!==e&&lc.call(s,l,1),lc.call(e,l,1);return e}function ji(e,t){for(var n=e?t.length:0,i=n-1;n--;){var a=t[n];if(n==i||a!==o){var o=a;if(go(a))lc.call(e,a,1);else if(yo(a,e))delete e[Ao(a)];else{var r=ca(a),s=Mo(e,r);null!=s&&delete s[Ao(Zo(r))]}}}return e}function Gi(e,t){return e+hc(Pc()*(t-e+1))}function Hi(e,t,n,i){for(var a=-1,o=Cc(mc((t-e)/(n||1)),0),r=Rd(o);o--;)r[i?o:++a]=e,e+=n;return r}function Wi(e,t){var n="";if(!e||t<1||t>Ae)return n;do t%2&&(n+=e),t=hc(t/2),t&&(e+=e);while(t);return n}function Yi(e,t){return t=Cc(t===ae?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Cc(n.length-t,0),o=Rd(a);++i<a;)o[i]=n[t+i];i=-1;for(var r=Rd(t+1);++i<t;)r[i]=n[i];return r[t]=o,s(e,this,r)}}function Ki(e,t,n,i){if(!Ls(e))return e;t=yo(t,e)?[t]:ca(t);for(var a=-1,o=t.length,r=o-1,s=e;null!=s&&++a<o;){var l=Ao(t[a]),d=n;if(a!=r){var c=s[l];d=i?i(c,l,s):ae,d===ae&&(d=Ls(c)?c:go(t[a+1])?[]:{})}Tn(s,l,d),s=s[l]}return e}function $i(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Rd(a);++i<a;)o[i]=e[i+t];return o}function zi(e,t){var n;return Gc(e,function(e,i,a){return n=t(e,i,a),!n}),!!n}function Ji(e,t,n){var i=0,a=e?e.length:i;if("number"==typeof t&&t===t&&a<=Ie){for(;i<a;){var o=i+a>>>1,r=e[o];null!==r&&!$s(r)&&(n?r<=t:r<t)?i=o+1:a=o}return a}return Xi(e,t,ld,n)}function Xi(e,t,n,i){t=n(t);for(var a=0,o=e?e.length:0,r=t!==t,s=null===t,l=$s(t),d=t===ae;a<o;){var c=hc((a+o)/2),p=n(e[c]),u=p!==ae,m=null===p,h=p===p,f=$s(p);if(r)var g=i||h;else g=d?h&&(i||u):s?h&&u&&(i||!m):l?h&&u&&!m&&(i||!f):!m&&!f&&(i?p<=t:p<t);g?a=c+1:o=c}return Tc(o,Re)}function Zi(e,t){for(var n=-1,i=e.length,a=0,o=[];++n<i;){var r=e[n],s=t?t(r):r;if(!n||!ks(s,l)){var l=s;o[a++]=0===r?0:r}}return o}function Qi(e){return"number"==typeof e?e:$s(e)?Ee:+e}function ea(e){if("string"==typeof e)return e;if($s(e))return jc?jc.call(e):"";var t=e+"";return"0"==t&&1/e==-Se?"-0":t}function ta(e,t,n){var i=-1,a=m,o=e.length,r=!0,s=[],l=s;if(n)r=!1,a=h;else if(o>=re){var d=t?null:zc(e);if(d)return J(d);r=!1,a=F,l=new dn}else l=t?[]:s;e:for(;++i<o;){var c=e[i],p=t?t(c):c;if(c=n||0!==c?c:0,r&&p===p){for(var u=l.length;u--;)if(l[u]===p)continue e;t&&l.push(p),s.push(c)}else a(l,p,n)||(l!==s&&l.push(p),s.push(c))}return s}function na(e,t){t=yo(t,e)?[t]:ca(t),e=Mo(e,t);var n=Ao(Zo(t));return!(null!=e&&zd.call(e,n))||delete e[n]}function ia(e,t,n,i){return Ki(e,t,n(Jn(e,t)),i)}function aa(e,t,n,i){for(var a=e.length,o=i?a:-1;(i?o--:++o<a)&&t(e[o],o,e););return n?$i(e,i?0:o,i?o+1:a):$i(e,i?o+1:0,i?a:o)}function oa(e,t){var n=e;return n instanceof a&&(n=n.value()),b(t,function(e,t){return t.func.apply(t.thisArg,g([e],t.args))},n)}function ra(e,t,n){for(var i=-1,a=e.length;++i<a;)var o=o?g(Rn(o,e[i],t,n),Rn(e[i],o,t,n)):e[i];return o&&o.length?ta(o,t,n):[]}function sa(e,t,n){for(var i=-1,a=e.length,o=t.length,r={};++i<a;){var s=i<o?t[i]:ae;n(r,e[i],s)}return r}function la(e){return Ds(e)?e:[]}function da(e){return"function"==typeof e?e:ld}function ca(e){return jp(e)?e:ap(e)}function pa(e,t,n){var i=e.length;return n=n===ae?i:n,!t&&n>=i?e:$i(e,t,n)}function ua(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function ma(e){var t=new e.constructor(e.byteLength);return new ic(t).set(new ic(e)),t}function ha(e,t){var n=t?ma(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function fa(e,t,n){var i=t?n(K(e),!0):K(e);return b(i,o,new e.constructor)}function ga(e){var t=new e.constructor(e.source,Lt.exec(e));return t.lastIndex=e.lastIndex,t}function ba(e,t,n){var i=t?n(J(e),!0):J(e);return b(i,r,new e.constructor)}function ya(e){return qc?Ud(qc.call(e)):{}}function va(e,t){var n=t?ma(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ca(e,t){if(e!==t){var n=e!==ae,i=null===e,a=e===e,o=$s(e),r=t!==ae,s=null===t,l=t===t,d=$s(t);if(!s&&!d&&!o&&e>t||o&&r&&l&&!s&&!d||i&&r&&l||!n&&l||!a)return 1;if(!i&&!o&&!d&&e<t||d&&n&&a&&!i&&!o||s&&n&&a||!r&&a||!l)return-1}return 0}function Ta(e,t,n){for(var i=-1,a=e.criteria,o=t.criteria,r=a.length,s=n.length;++i<r;){var l=Ca(a[i],o[i]);if(l){if(i>=s)return l;var d=n[i];return l*("desc"==d?-1:1)}}return e.index-t.index}function ka(e,t,n,i){for(var a=-1,o=e.length,r=n.length,s=-1,l=t.length,d=Cc(o-r,0),c=Rd(l+d),p=!i;++s<l;)c[s]=t[s];for(;++a<r;)(p||a<o)&&(c[n[a]]=e[a]);for(;d--;)c[s++]=e[a++];return c}function Pa(e,t,n,i){for(var a=-1,o=e.length,r=-1,s=n.length,l=-1,d=t.length,c=Cc(o-s,0),p=Rd(c+d),u=!i;++a<c;)p[a]=e[a];for(var m=a;++l<d;)p[m+l]=t[l];for(;++r<s;)(u||a<o)&&(p[m+n[r]]=e[a++]);return p}function xa(e,t){var n=-1,i=e.length;for(t||(t=Rd(i));++n<i;)t[n]=e[n];return t}function Da(e,t,n,i){n||(n={});for(var a=-1,o=t.length;++a<o;){var r=t[a],s=i?i(n[r],e[r],r,n,e):ae;Tn(n,r,s===ae?e[r]:s)}return n}function _a(e,t){return Da(e,Xc(e),t)}function wa(e,t){return function(n,i){var a=jp(n)?l:Pn,o=t?t():{};return a(n,e,io(i,2),o)}}function Ma(e){return Yi(function(t,n){var i=-1,a=n.length,o=a>1?n[a-1]:ae,r=a>2?n[2]:ae;for(o=e.length>3&&"function"==typeof o?(a--,o):ae,r&&bo(n[0],n[1],r)&&(o=a<3?ae:o,a=1),t=Ud(t);++i<a;){var s=n[i];s&&e(t,s,i,o)}return t})}function Sa(e,t){return function(n,i){if(null==n)return n;if(!xs(n))return e(n,i);for(var a=n.length,o=t?a:-1,r=Ud(n);(t?o--:++o<a)&&i(r[o],o,r)!==!1;);return n}}function Aa(e){return function(t,n,i){for(var a=-1,o=Ud(t),r=i(t),s=r.length;s--;){var l=r[e?s:++a];if(n(o[l],l,o)===!1)break}return t}}function Oa(e,t,n){function i(){var t=this&&this!==$n&&this instanceof i?o:e;return t.apply(a?n:this,arguments)}var a=t&ce,o=Ra(e);return i}function Ea(e){return function(t){t=ol(t);var n=G(t)?Q(t):ae,i=n?n[0]:t.charAt(0),a=n?pa(n,1).join(""):t.slice(1);return i[e]()+a}}function Na(e){return function(t){return b(id(Fl(t).replace(An,"")),e,"")}}function Ra(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=En(e.prototype),i=e.apply(n,t);return Ls(i)?i:n}}function Ia(e,t,n){function i(){for(var o=arguments.length,r=Rd(o),l=o,d=no(i);l--;)r[l]=arguments[l];var c=o<3&&r[0]!==d&&r[o-1]!==d?[]:z(r,d);if(o-=c.length,o<n)return Ya(e,t,Ba,i.placeholder,ae,r,c,ae,ae,n-o);var p=this&&this!==$n&&this instanceof i?a:e;return s(p,this,r)}var a=Ra(e);return i}function La(e){return function(t,n,i){var a=Ud(t);if(!xs(t)){var o=io(n,3);t=yl(t),n=function(e){return o(a[e],e,a)}}var r=e(t,n,i);return r>-1?a[o?t[r]:r]:ae}}function Fa(e){return Yi(function(t){t=Gn(t,1);var n=t.length,a=n,o=i.prototype.thru;for(e&&t.reverse();a--;){var r=t[a];if("function"!=typeof r)throw new jd(se);if(o&&!s&&"wrapper"==to(r))var s=new i([],(!0))}for(a=s?a:n;++a<n;){r=t[a];var l=to(r),d="wrapper"==l?Jc(r):ae;s=d&&Co(d[0])&&d[1]==(be|me|fe|ye)&&!d[4].length&&1==d[9]?s[to(d[0])].apply(s,d[3]):1==r.length&&Co(r)?s[l]():s.thru(r)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&jp(i)&&i.length>=re)return s.plant(i).value();for(var a=0,o=n?t[a].apply(this,e):i;++a<n;)o=t[a].call(this,o);return o}})}function Ba(e,t,n,i,a,o,r,s,l,d){function c(){for(var b=arguments.length,y=Rd(b),v=b;v--;)y[v]=arguments[v];if(h)var C=no(c),T=V(y,C);if(i&&(y=ka(y,i,a,h)),o&&(y=Pa(y,o,r,h)),b-=T,h&&b<d){var k=z(y,C);return Ya(e,t,Ba,c.placeholder,n,y,k,s,l,d-b)}var P=u?n:this,x=m?P[e]:e;return b=y.length,s?y=So(y,s):f&&b>1&&y.reverse(),p&&l<b&&(y.length=l),this&&this!==$n&&this instanceof c&&(x=g||Ra(x)),x.apply(P,y)}var p=t&be,u=t&ce,m=t&pe,h=t&(me|he),f=t&ve,g=m?ae:Ra(e);return c}function Ua(e,t){return function(n,i){return fi(n,e,t(i),{})}}function Va(e,t){return function(n,i){var a;if(n===ae&&i===ae)return t;if(n!==ae&&(a=n),i!==ae){if(a===ae)return i;"string"==typeof n||"string"==typeof i?(n=ea(n),i=ea(i)):(n=Qi(n),i=Qi(i)),a=e(n,i)}return a}}function qa(e){return Yi(function(t){return t=1==t.length&&jp(t[0])?f(t[0],I(io())):f(Gn(t,1),I(io())),Yi(function(n){var i=this;return e(t,function(e){return s(e,i,n)})})})}function ja(e,t){t=t===ae?" ":ea(t);var n=t.length;if(n<2)return n?Wi(t,e):t;var i=Wi(t,mc(e/Z(t)));return G(t)?pa(Q(i),0,e).join(""):i.slice(0,e)}function Ga(e,t,n,i){function a(){for(var t=-1,l=arguments.length,d=-1,c=i.length,p=Rd(c+l),u=this&&this!==$n&&this instanceof a?r:e;++d<c;)p[d]=i[d];for(;l--;)p[d++]=arguments[++t];return s(u,o?n:this,p)}var o=t&ce,r=Ra(e);return a}function Ha(e){return function(t,n,i){return i&&"number"!=typeof i&&bo(t,n,i)&&(n=i=ae),t=Qs(t),n===ae?(n=t,t=0):n=Qs(n),i=i===ae?t<n?1:-1:Qs(i),Hi(t,n,i,e)}}function Wa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=nl(t),n=nl(n)),e(t,n)}}function Ya(e,t,n,i,a,o,r,s,l,d){var c=t&me,p=c?r:ae,u=c?ae:r,m=c?o:ae,h=c?ae:o;t|=c?fe:ge,t&=~(c?ge:fe),t&ue||(t&=~(ce|pe));var f=[e,t,a,m,p,h,u,s,l,d],g=n.apply(ae,f);return Co(e)&&tp(g,f),g.placeholder=i,ip(g,e,t)}function Ka(e){var t=Bd[e];return function(e,n){if(e=nl(e),n=Tc(el(n),292)){var i=(ol(e)+"e").split("e"),a=t(i[0]+"e"+(+i[1]+n));return i=(ol(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function $a(e){return function(t){var n=Qc(t);return n==He?K(t):n==ze?X(t):R(t,e(t))}}function za(e,t,n,i,a,o,r,s){var l=t&pe;if(!l&&"function"!=typeof e)throw new jd(se);var d=i?i.length:0;if(d||(t&=~(fe|ge),i=a=ae),r=r===ae?r:Cc(el(r),0),s=s===ae?s:el(s),d-=a?a.length:0,t&ge){var c=i,p=a;i=a=ae}var u=l?ae:Jc(e),m=[e,t,n,i,a,c,p,o,r,s];if(u&&Do(m,u),e=m[0],t=m[1],n=m[2],i=m[3],a=m[4],s=m[9]=null==m[9]?l?0:e.length:Cc(m[9]-d,0),!s&&t&(me|he)&&(t&=~(me|he)),t&&t!=ce)h=t==me||t==he?Ia(e,t,s):t!=fe&&t!=(ce|fe)||a.length?Ba.apply(ae,m):Ga(e,t,n,i);else var h=Oa(e,t,n);var f=u?Kc:tp;return ip(f(h,m),e,t)}function Ja(e,t,n,i,a,o){var r=a&Te,s=e.length,l=t.length;if(s!=l&&!(r&&l>s))return!1;var d=o.get(e);if(d&&o.get(t))return d==t;var c=-1,p=!0,u=a&Ce?new dn:ae;for(o.set(e,t),o.set(t,e);++c<s;){var m=e[c],h=t[c];if(i)var f=r?i(h,m,c,t,e,o):i(m,h,c,e,t,o);if(f!==ae){if(f)continue;p=!1;break}if(u){if(!v(t,function(e,t){if(!u.has(t)&&(m===e||n(m,e,i,a,o)))return u.add(t)})){p=!1;break}}else if(m!==h&&!n(m,h,i,a,o)){p=!1;break}}return o["delete"](e),o["delete"](t),p}function Xa(e,t,n,i,a,o,r){switch(n){case tt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case et:return!(e.byteLength!=t.byteLength||!i(new ic(e),new ic(t)));case Ue:case Ve:case We:return ks(+e,+t);case qe:return e.name==t.name&&e.message==t.message;case $e:case Je:return e==t+"";case He:var s=K;case ze:var l=o&Te;if(s||(s=J),e.size!=t.size&&!l)return!1;var d=r.get(e);if(d)return d==t;o|=Ce,r.set(e,t);var c=Ja(s(e),s(t),i,a,o,r);return r["delete"](e),c;case Xe:if(qc)return qc.call(e)==qc.call(t)}return!1}function Za(e,t,n,i,a,o){var r=a&Te,s=yl(e),l=s.length,d=yl(t),c=d.length;if(l!=c&&!r)return!1;for(var p=l;p--;){var u=s[p];if(!(r?u in t:zd.call(t,u)))return!1}var m=o.get(e);if(m&&o.get(t))return m==t;var h=!0;o.set(e,t),o.set(t,e);for(var f=r;++p<l;){u=s[p];var g=e[u],b=t[u];if(i)var y=r?i(b,g,u,t,e,o):i(g,b,u,e,t,o);if(!(y===ae?g===b||n(g,b,i,a,o):y)){h=!1;break}f||(f="constructor"==u)}if(h&&!f){var v=e.constructor,C=t.constructor;v!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof C&&C instanceof C)&&(h=!1)}return o["delete"](e),o["delete"](t),h}function Qa(e){return Zn(e,yl,Xc)}function eo(e){return Zn(e,vl,Zc)}function to(e){for(var t=e.name+"",n=Rc[t],i=zd.call(Rc,t)?n.length:0;i--;){var a=n[i],o=a.func;if(null==o||o==e)return a.name}return t}function no(e){var n=zd.call(t,"placeholder")?t:e;return n.placeholder}function io(){var e=t.iteratee||dd;return e=e===dd?wi:e,arguments.length?e(arguments[0],arguments[1]):e}function ao(e,t){var n=e.__data__;return vo(t)?n["string"==typeof t?"string":"hash"]:n.map}function oo(e){for(var t=yl(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,Po(a)]}return t}function ro(e,t){var n=j(e,t);return Pi(n)?n:ae}function so(e,t,n){for(var i=-1,a=n.length;++i<a;){var o=n[i],r=o.size;switch(o.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=Tc(t,e+r);break;case"takeRight":e=Cc(e,t-r)}}return{start:e,end:t}}function lo(e){var t=e.match(Ot);return t?t[1].split(Et):[]}function co(e,t,n){t=yo(t,e)?[t]:ca(t);for(var i,a=-1,o=t.length;++a<o;){var r=Ao(t[a]);if(!(i=null!=e&&n(e,r)))break;e=e[r]}if(i)return i;var o=e?e.length:0;return!!o&&Is(o)&&go(r,o)&&(jp(e)||Ps(e))}function po(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&zd.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function uo(e){return"function"!=typeof e.constructor||ko(e)?{}:En(ac(e))}function mo(e,t,n,i){var a=e.constructor;switch(t){case et:return ma(e);case Ue:case Ve:return new a((+e));case tt:return ha(e,i);case nt:case it:case at:case ot:case rt:case st:case lt:case dt:case ct:return va(e,i);case He:return fa(e,i,n);case We:case Je:return new a(e);case $e:return ga(e);case ze:return ba(e,i,n);case Xe:return ya(e)}}function ho(e,t){var n=t.length,i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(At,"{\n/* [wrapped with "+t+"] */\n")}function fo(e){return jp(e)||Ps(e)||!!(dc&&e&&e[dc])}function go(e,t){return t=null==t?Ae:t,!!t&&("number"==typeof e||jt.test(e))&&e>-1&&e%1==0&&e<t}function bo(e,t,n){if(!Ls(n))return!1;var i=typeof t;return!!("number"==i?xs(n)&&go(t,n.length):"string"==i&&t in n)&&ks(n[t],e)}function yo(e,t){if(jp(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$s(e))||kt.test(e)||!Tt.test(e)||null!=t&&e in Ud(t)}function vo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Co(e){var n=to(e),i=t[n];if("function"!=typeof i||!(n in a.prototype))return!1;if(e===i)return!0;var o=Jc(i);return!!o&&e===o[0]}function To(e){return!!Kd&&Kd in e}function ko(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Wd;return e===n}function Po(e){return e===e&&!Ls(e)}function xo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==ae||e in Ud(n))}}function Do(e,t){var n=e[1],i=t[1],a=n|i,o=a<(ce|pe|be),r=i==be&&n==me||i==be&&n==ye&&e[7].length<=t[8]||i==(be|ye)&&t[7].length<=t[8]&&n==me;if(!o&&!r)return e;i&ce&&(e[2]=t[2],a|=n&ce?0:ue);var s=t[3];if(s){var l=e[3];e[3]=l?ka(l,s,t[4]):s,e[4]=l?z(e[3],de):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Pa(l,s,t[6]):s,e[6]=l?z(e[5],de):t[6]),s=t[7],s&&(e[7]=s),i&be&&(e[8]=null==e[8]?t[8]:Tc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function _o(e,t,n,i,a,o){return Ls(e)&&Ls(t)&&(o.set(t,e),Ri(e,t,ae,_o,o),o["delete"](t)),e}function wo(e){var t=[];if(null!=e)for(var n in Ud(e))t.push(n);return t}function Mo(e,t){return 1==t.length?e:Jn(e,$i(t,0,-1))}function So(e,t){for(var n=e.length,i=Tc(t.length,n),a=xa(e);i--;){var o=t[i];e[i]=go(o,n)?a[o]:ae}return e}function Ao(e){if("string"==typeof e||$s(e))return e;var t=e+"";return"0"==t&&1/e==-Se?"-0":t}function Oo(e){if(null!=e){try{return $d.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Eo(e,t){return d(Le,function(n){var i="_."+n[0];t&n[1]&&!m(e,i)&&e.push(i)}),e.sort()}function No(e){if(e instanceof a)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=xa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ro(e,t,n){t=(n?bo(e,t,n):t===ae)?1:Cc(el(t),0);var i=e?e.length:0;if(!i||t<1)return[];for(var a=0,o=0,r=Rd(mc(i/t));a<i;)r[o++]=$i(e,a,a+=t);return r}function Io(e){for(var t=-1,n=e?e.length:0,i=0,a=[];++t<n;){var o=e[t];o&&(a[i++]=o)}return a}function Lo(){for(var e=arguments.length,t=Rd(e?e-1:0),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return e?g(jp(n)?xa(n):[n],Gn(t,1)):[]}function Fo(e,t,n){var i=e?e.length:0;return i?(t=n||t===ae?1:el(t),$i(e,t<0?0:t,i)):[]}function Bo(e,t,n){var i=e?e.length:0;return i?(t=n||t===ae?1:el(t),t=i-t,$i(e,0,t<0?0:t)):[]}function Uo(e,t){return e&&e.length?aa(e,io(t,3),!0,!0):[]}function Vo(e,t){return e&&e.length?aa(e,io(t,3),!0):[]}function qo(e,t,n,i){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&bo(e,t,n)&&(n=0,i=a),qn(e,t,n,i)):[]}function jo(e,t,n){var i=e?e.length:0;if(!i)return-1;var a=null==n?0:el(n);return a<0&&(a=Cc(i+a,0)),P(e,io(t,3),a)}function Go(e,t,n){var i=e?e.length:0;if(!i)return-1;var a=i-1;return n!==ae&&(a=el(n),a=n<0?Cc(i+a,0):Tc(a,i-1)),P(e,io(t,3),a,!0)}function Ho(e){var t=e?e.length:0;return t?Gn(e,1):[]}function Wo(e){var t=e?e.length:0;return t?Gn(e,Se):[]}function Yo(e,t){var n=e?e.length:0;return n?(t=t===ae?1:el(t),Gn(e,t)):[]}function Ko(e){for(var t=-1,n=e?e.length:0,i={};++t<n;){var a=e[t];i[a[0]]=a[1]}return i}function $o(e){return e&&e.length?e[0]:ae}function zo(e,t,n){var i=e?e.length:0;if(!i)return-1;var a=null==n?0:el(n);return a<0&&(a=Cc(i+a,0)),x(e,t,a)}function Jo(e){var t=e?e.length:0;return t?$i(e,0,-1):[]}function Xo(e,t){return e?yc.call(e,t):""}function Zo(e){var t=e?e.length:0;return t?e[t-1]:ae}function Qo(e,t,n){var i=e?e.length:0;if(!i)return-1;var a=i;if(n!==ae&&(a=el(n),a=(a<0?Cc(i+a,0):Tc(a,i-1))+1),t!==t)return P(e,_,a-1,!0);for(;a--;)if(e[a]===t)return a;return-1}function er(e,t){return e&&e.length?Li(e,el(t)):ae}function tr(e,t){return e&&e.length&&t&&t.length?qi(e,t):e}function nr(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,io(n,2)):e}function ir(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,ae,n):e}function ar(e,t){var n=[];if(!e||!e.length)return n;var i=-1,a=[],o=e.length;for(t=io(t,3);++i<o;){var r=e[i];t(r,i,e)&&(n.push(r),a.push(i))}return ji(e,a),n}function or(e){return e?xc.call(e):e}function rr(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&bo(e,t,n)?(t=0,n=i):(t=null==t?0:el(t),n=n===ae?i:el(n)),$i(e,t,n)):[]}function sr(e,t){return Ji(e,t)}function lr(e,t,n){return Xi(e,t,io(n,2))}function dr(e,t){var n=e?e.length:0;if(n){var i=Ji(e,t);if(i<n&&ks(e[i],t))return i}return-1}function cr(e,t){return Ji(e,t,!0)}function pr(e,t,n){return Xi(e,t,io(n,2),!0)}function ur(e,t){var n=e?e.length:0;if(n){var i=Ji(e,t,!0)-1;if(ks(e[i],t))return i}return-1}function mr(e){return e&&e.length?Zi(e):[]}function hr(e,t){return e&&e.length?Zi(e,io(t,2)):[]}function fr(e){var t=e?e.length:0;return t?$i(e,1,t):[]}function gr(e,t,n){return e&&e.length?(t=n||t===ae?1:el(t),$i(e,0,t<0?0:t)):[]}function br(e,t,n){var i=e?e.length:0;return i?(t=n||t===ae?1:el(t),t=i-t,$i(e,t<0?0:t,i)):[]}function yr(e,t){return e&&e.length?aa(e,io(t,3),!1,!0):[]}function vr(e,t){return e&&e.length?aa(e,io(t,3)):[]}function Cr(e){return e&&e.length?ta(e):[]}function Tr(e,t){return e&&e.length?ta(e,io(t,2)):[]}function kr(e,t){return e&&e.length?ta(e,ae,t):[]}function Pr(e){if(!e||!e.length)return[];var t=0;return e=u(e,function(e){if(Ds(e))return t=Cc(e.length,t),!0}),N(t,function(t){return f(e,M(t))})}function xr(e,t){if(!e||!e.length)return[];var n=Pr(e);return null==t?n:f(n,function(e){return s(t,ae,e)})}function Dr(e,t){return sa(e||[],t||[],Tn)}function _r(e,t){return sa(e||[],t||[],Ki)}function wr(e){var n=t(e);return n.__chain__=!0,n}function Mr(e,t){return t(e),e}function Sr(e,t){return t(e)}function Ar(){return wr(this)}function Or(){return new i(this.value(),this.__chain__)}function Er(){this.__values__===ae&&(this.__values__=Zs(this.value()));var e=this.__index__>=this.__values__.length,t=e?ae:this.__values__[this.__index__++];return{done:e,value:t}}function Nr(){return this}function Rr(e){for(var t,i=this;i instanceof n;){var a=No(i);a.__index__=0,a.__values__=ae,t?o.__wrapped__=a:t=a;var o=a;i=i.__wrapped__}return o.__wrapped__=e,t}function Ir(){var e=this.__wrapped__;if(e instanceof a){var t=e;return this.__actions__.length&&(t=new a(this)),t=t.reverse(),t.__actions__.push({func:Sr,args:[or],thisArg:ae}),new i(t,this.__chain__)}return this.thru(or)}function Lr(){return oa(this.__wrapped__,this.__actions__)}function Fr(e,t,n){var i=jp(e)?p:In;return n&&bo(e,t,n)&&(t=ae),i(e,io(t,3))}function Br(e,t){var n=jp(e)?u:jn;return n(e,io(t,3))}function Ur(e,t){return Gn(Wr(e,t),1)}function Vr(e,t){return Gn(Wr(e,t),Se)}function qr(e,t,n){return n=n===ae?1:el(n),Gn(Wr(e,t),n)}function jr(e,t){var n=jp(e)?d:Gc;return n(e,io(t,3))}function Gr(e,t){var n=jp(e)?c:Hc;return n(e,io(t,3))}function Hr(e,t,n,i){e=xs(e)?e:Ol(e),n=n&&!i?el(n):0;var a=e.length;return n<0&&(n=Cc(a+n,0)),Ks(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&x(e,t,n)>-1}function Wr(e,t){var n=jp(e)?f:Oi;return n(e,io(t,3))}function Yr(e,t,n,i){return null==e?[]:(jp(t)||(t=null==t?[]:[t]),n=i?ae:n,jp(n)||(n=null==n?[]:[n]),Fi(e,t,n))}function Kr(e,t,n){var i=jp(e)?b:A,a=arguments.length<3;return i(e,io(t,4),n,a,Gc)}function $r(e,t,n){var i=jp(e)?y:A,a=arguments.length<3;return i(e,io(t,4),n,a,Hc)}function zr(e,t){var n=jp(e)?u:jn;return n(e,ds(io(t,3)))}function Jr(e){var t=xs(e)?e:Ol(e),n=t.length;return n>0?t[Gi(0,n-1)]:ae}function Xr(e,t,n){var i=-1,a=Zs(e),o=a.length,r=o-1;for(t=(n?bo(e,t,n):t===ae)?1:_n(el(t),0,o);++i<t;){var s=Gi(i,r),l=a[s];a[s]=a[i],a[i]=l}return a.length=t,a}function Zr(e){return Xr(e,Ne)}function Qr(e){if(null==e)return 0;if(xs(e))return Ks(e)?Z(e):e.length;var t=Qc(e);return t==He||t==ze?e.size:Mi(e).length}function es(e,t,n){var i=jp(e)?v:zi;return n&&bo(e,t,n)&&(t=ae),i(e,io(t,3))}function ts(e,t){if("function"!=typeof t)throw new jd(se);return e=el(e),function(){if(--e<1)return t.apply(this,arguments)}}function ns(e,t,n){return t=n?ae:t,t=e&&null==t?e.length:t,za(e,be,ae,ae,ae,ae,t)}function is(e,t){var n;if("function"!=typeof t)throw new jd(se);return e=el(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ae),n}}function as(e,t,n){t=n?ae:t;var i=za(e,me,ae,ae,ae,ae,ae,t);return i.placeholder=as.placeholder,i}function os(e,t,n){t=n?ae:t;var i=za(e,he,ae,ae,ae,ae,ae,t);return i.placeholder=os.placeholder,i}function rs(e,t,n){function i(t){var n=u,i=m;return u=m=ae,y=t,f=e.apply(i,n)}function a(e){return y=e,g=np(s,t),v?i(e):f}function o(e){var n=e-b,i=e-y,a=t-n;return C?Tc(a,h-i):a}function r(e){var n=e-b,i=e-y;return b===ae||n>=t||n<0||C&&i>=h}function s(){var e=Op();return r(e)?l(e):void(g=np(s,o(e)))}function l(e){return g=ae,T&&u?i(e):(u=m=ae,f)}function d(){g!==ae&&$c(g),y=0,u=b=m=g=ae}function c(){return g===ae?f:l(Op())}function p(){var e=Op(),n=r(e);if(u=arguments,m=this,b=e,n){if(g===ae)return a(b);if(C)return g=np(s,t),i(b)}return g===ae&&(g=np(s,t)),f}var u,m,h,f,g,b,y=0,v=!1,C=!1,T=!0;if("function"!=typeof e)throw new jd(se);return t=nl(t)||0,Ls(n)&&(v=!!n.leading,C="maxWait"in n,h=C?Cc(nl(n.maxWait)||0,t):h,T="trailing"in n?!!n.trailing:T),p.cancel=d,p.flush=c,p}function ss(e){return za(e,ve)}function ls(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new jd(se);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var r=e.apply(this,i);return n.cache=o.set(a,r),r};return n.cache=new(ls.Cache||nn),n}function ds(e){if("function"!=typeof e)throw new jd(se);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function cs(e){return is(2,e)}function ps(e,t){if("function"!=typeof e)throw new jd(se);return t=t===ae?t:el(t),Yi(e,t)}function us(e,t){if("function"!=typeof e)throw new jd(se);return t=t===ae?0:Cc(el(t),0),Yi(function(n){var i=n[t],a=pa(n,0,t);return i&&g(a,i),s(e,this,a)})}function ms(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new jd(se);return Ls(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),rs(e,t,{leading:i,maxWait:t,trailing:a})}function hs(e){return ns(e,1)}function fs(e,t){return t=null==t?ld:t,Fp(t,e)}function gs(){if(!arguments.length)return[];var e=arguments[0];return jp(e)?e:[e]}function bs(e){return wn(e,!1,!0)}function ys(e,t){return wn(e,!1,!0,t)}function vs(e){return wn(e,!0,!0)}function Cs(e,t){return wn(e,!0,!0,t)}function Ts(e,t){return null==t||Sn(e,t,yl(t))}function ks(e,t){return e===t||e!==e&&t!==t}function Ps(e){return Ds(e)&&zd.call(e,"callee")&&(!sc.call(e,"callee")||Zd.call(e)==Fe)}function xs(e){return null!=e&&Is(e.length)&&!Ns(e)}function Ds(e){return Fs(e)&&xs(e)}function _s(e){return e===!0||e===!1||Fs(e)&&Zd.call(e)==Ue}function ws(e){return!!e&&1===e.nodeType&&Fs(e)&&!Ws(e)}function Ms(e){if(xs(e)&&(jp(e)||"string"==typeof e||"function"==typeof e.splice||Hp(e)||Ps(e)))return!e.length;var t=Qc(e);if(t==He||t==ze)return!e.size;if(Nc||ko(e))return!vc(e).length;for(var n in e)if(zd.call(e,n))return!1;return!0}function Ss(e,t){return vi(e,t)}function As(e,t,n){n="function"==typeof n?n:ae;var i=n?n(e,t):ae;return i===ae?vi(e,t,n):!!i}function Os(e){return!!Fs(e)&&(Zd.call(e)==qe||"string"==typeof e.message&&"string"==typeof e.name)}function Es(e){return"number"==typeof e&&bc(e)}function Ns(e){var t=Ls(e)?Zd.call(e):"";return t==je||t==Ge}function Rs(e){return"number"==typeof e&&e==el(e)}function Is(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ae}function Ls(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Fs(e){return!!e&&"object"==typeof e}function Bs(e,t){return e===t||ki(e,t,oo(t))}function Us(e,t,n){return n="function"==typeof n?n:ae,ki(e,t,oo(t),n)}function Vs(e){return Hs(e)&&e!=+e}function qs(e){if(ep(e))throw new Ld("This method is not supported with core-js. Try https://github.com/es-shims.");return Pi(e)}function js(e){return null===e}function Gs(e){return null==e}function Hs(e){return"number"==typeof e||Fs(e)&&Zd.call(e)==We}function Ws(e){if(!Fs(e)||Zd.call(e)!=Ye||W(e))return!1;var t=ac(e);if(null===t)return!0;var n=zd.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$d.call(n)==Xd}function Ys(e){return Rs(e)&&e>=-Ae&&e<=Ae}function Ks(e){return"string"==typeof e||!jp(e)&&Fs(e)&&Zd.call(e)==Je}function $s(e){return"symbol"==typeof e||Fs(e)&&Zd.call(e)==Xe}function zs(e){return e===ae}function Js(e){return Fs(e)&&Qc(e)==Ze}function Xs(e){return Fs(e)&&Zd.call(e)==Qe}function Zs(e){if(!e)return[];if(xs(e))return Ks(e)?Q(e):xa(e);if(oc&&e[oc])return Y(e[oc]());var t=Qc(e),n=t==He?K:t==ze?J:Ol;return n(e)}function Qs(e){if(!e)return 0===e?e:0;if(e=nl(e),e===Se||e===-Se){var t=e<0?-1:1;return t*Oe}return e===e?e:0}function el(e){var t=Qs(e),n=t%1;return t===t?n?t-n:t:0}function tl(e){return e?_n(el(e),0,Ne):0}function nl(e){if("number"==typeof e)return e;if($s(e))return Ee;if(Ls(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ls(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(wt,"");var n=Ut.test(e);return n||qt.test(e)?Wn(e.slice(2),n?2:8):Bt.test(e)?Ee:+e}function il(e){return Da(e,vl(e))}function al(e){return _n(el(e),-Ae,Ae)}function ol(e){return null==e?"":ea(e)}function rl(e,t){var n=En(e);return t?xn(n,t):n}function sl(e,t){return k(e,io(t,3),Yn)}function ll(e,t){return k(e,io(t,3),Kn)}function dl(e,t){return null==e?e:Wc(e,io(t,3),vl)}function cl(e,t){return null==e?e:Yc(e,io(t,3),vl)}function pl(e,t){return e&&Yn(e,io(t,3))}function ul(e,t){return e&&Kn(e,io(t,3))}function ml(e){return null==e?[]:zn(e,yl(e))}function hl(e){return null==e?[]:zn(e,vl(e))}function fl(e,t,n){var i=null==e?ae:Jn(e,t);return i===ae?n:i}function gl(e,t){return null!=e&&co(e,t,pi)}function bl(e,t){return null!=e&&co(e,t,ui)}function yl(e){return xs(e)?yn(e):Mi(e)}function vl(e){return xs(e)?yn(e,!0):Si(e)}function Cl(e,t){var n={};return t=io(t,3),Yn(e,function(e,i,a){n[t(e,i,a)]=e}),n}function Tl(e,t){var n={};return t=io(t,3),Yn(e,function(e,i,a){n[i]=t(e,i,a)}),n}function kl(e,t){return Pl(e,ds(io(t)))}function Pl(e,t){return null==e?{}:Ui(e,eo(e),io(t))}function xl(e,t,n){t=yo(t,e)?[t]:ca(t);var i=-1,a=t.length;for(a||(e=ae,a=1);++i<a;){var o=null==e?ae:e[Ao(t[i])];o===ae&&(i=a,o=n),e=Ns(o)?o.call(e):o}return e}function Dl(e,t,n){return null==e?e:Ki(e,t,n)}function _l(e,t,n,i){return i="function"==typeof i?i:ae,null==e?e:Ki(e,t,n,i)}function wl(e,t,n){var i=jp(e)||zp(e);if(t=io(t,4),null==n)if(i||Ls(e)){var a=e.constructor;n=i?jp(e)?new a:[]:Ns(a)?En(ac(e)):{}}else n={};return(i?d:Yn)(e,function(e,i,a){return t(n,e,i,a)}),n}function Ml(e,t){return null==e||na(e,t)}function Sl(e,t,n){return null==e?e:ia(e,t,da(n))}function Al(e,t,n,i){return i="function"==typeof i?i:ae,null==e?e:ia(e,t,da(n),i)}function Ol(e){return e?L(e,yl(e)):[]}function El(e){return null==e?[]:L(e,vl(e))}function Nl(e,t,n){return n===ae&&(n=t,t=ae),n!==ae&&(n=nl(n),n=n===n?n:0),t!==ae&&(t=nl(t),t=t===t?t:0),_n(nl(e),t,n)}function Rl(e,t,n){return t=Qs(t),n===ae?(n=t,t=0):n=Qs(n),e=nl(e),mi(e,t,n)}function Il(e,t,n){if(n&&"boolean"!=typeof n&&bo(e,t,n)&&(t=n=ae),n===ae&&("boolean"==typeof t?(n=t,t=ae):"boolean"==typeof e&&(n=e,e=ae)),e===ae&&t===ae?(e=0,t=1):(e=Qs(e),t===ae?(t=e,e=0):t=Qs(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var a=Pc();return Tc(e+a*(t-e+Hn("1e-"+((a+"").length-1))),t);
}return Gi(e,t)}function Ll(e){return Tu(ol(e).toLowerCase())}function Fl(e){return e=ol(e),e&&e.replace(Gt,si).replace(On,"")}function Bl(e,t,n){e=ol(e),t=ea(t);var i=e.length;n=n===ae?i:_n(el(n),0,i);var a=n;return n-=t.length,n>=0&&e.slice(n,a)==t}function Ul(e){return e=ol(e),e&&bt.test(e)?e.replace(ft,li):e}function Vl(e){return e=ol(e),e&&_t.test(e)?e.replace(Dt,"\\$&"):e}function ql(e,t,n){e=ol(e),t=el(t);var i=t?Z(e):0;if(!t||i>=t)return e;var a=(t-i)/2;return ja(hc(a),n)+e+ja(mc(a),n)}function jl(e,t,n){e=ol(e),t=el(t);var i=t?Z(e):0;return t&&i<t?e+ja(t-i,n):e}function Gl(e,t,n){e=ol(e),t=el(t);var i=t?Z(e):0;return t&&i<t?ja(t-i,n)+e:e}function Hl(e,t,n){return n||null==t?t=0:t&&(t=+t),e=ol(e).replace(wt,""),kc(e,t||(Ft.test(e)?16:10))}function Wl(e,t,n){return t=(n?bo(e,t,n):t===ae)?1:el(t),Wi(ol(e),t)}function Yl(){var e=arguments,t=ol(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function Kl(e,t,n){return n&&"number"!=typeof n&&bo(e,t,n)&&(t=n=ae),(n=n===ae?Ne:n>>>0)?(e=ol(e),e&&("string"==typeof t||null!=t&&!Kp(t))&&(t=ea(t),!t&&G(e))?pa(Q(e),0,n):e.split(t,n)):[]}function $l(e,t,n){return e=ol(e),n=_n(el(n),0,e.length),t=ea(t),e.slice(n,n+t.length)==t}function zl(e,n,i){var a=t.templateSettings;i&&bo(e,n,i)&&(n=ae),e=ol(e),n=eu({},n,a,vn);var o,r,s=eu({},n.imports,a.imports,vn),l=yl(s),d=L(s,l),c=0,p=n.interpolate||Ht,u="__p += '",m=Vd((n.escape||Ht).source+"|"+p.source+"|"+(p===Ct?It:Ht).source+"|"+(n.evaluate||Ht).source+"|$","g"),h="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Fn+"]")+"\n";e.replace(m,function(t,n,i,a,s,l){return i||(i=a),u+=e.slice(c,l).replace(Wt,q),n&&(o=!0,u+="' +\n__e("+n+") +\n'"),s&&(r=!0,u+="';\n"+s+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),u+="';\n";var f=n.variable;f||(u="with (obj) {\n"+u+"\n}\n"),u=(r?u.replace(pt,""):u).replace(ut,"$1").replace(mt,"$1;"),u="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=ku(function(){return Fd(l,h+"return "+u).apply(ae,d)});if(g.source=u,Os(g))throw g;return g}function Jl(e){return ol(e).toLowerCase()}function Xl(e){return ol(e).toUpperCase()}function Zl(e,t,n){if(e=ol(e),e&&(n||t===ae))return e.replace(wt,"");if(!e||!(t=ea(t)))return e;var i=Q(e),a=Q(t),o=B(i,a),r=U(i,a)+1;return pa(i,o,r).join("")}function Ql(e,t,n){if(e=ol(e),e&&(n||t===ae))return e.replace(St,"");if(!e||!(t=ea(t)))return e;var i=Q(e),a=U(i,Q(t))+1;return pa(i,0,a).join("")}function ed(e,t,n){if(e=ol(e),e&&(n||t===ae))return e.replace(Mt,"");if(!e||!(t=ea(t)))return e;var i=Q(e),a=B(i,Q(t));return pa(i,a).join("")}function td(e,t){var n=ke,i=Pe;if(Ls(t)){var a="separator"in t?t.separator:a;n="length"in t?el(t.length):n,i="omission"in t?ea(t.omission):i}e=ol(e);var o=e.length;if(G(e)){var r=Q(e);o=r.length}if(n>=o)return e;var s=n-Z(i);if(s<1)return i;var l=r?pa(r,0,s).join(""):e.slice(0,s);if(a===ae)return l+i;if(r&&(s+=l.length-s),Kp(a)){if(e.slice(s).search(a)){var d,c=l;for(a.global||(a=Vd(a.source,ol(Lt.exec(a))+"g")),a.lastIndex=0;d=a.exec(c);)var p=d.index;l=l.slice(0,p===ae?s:p)}}else if(e.indexOf(ea(a),s)!=s){var u=l.lastIndexOf(a);u>-1&&(l=l.slice(0,u))}return l+i}function nd(e){return e=ol(e),e&&gt.test(e)?e.replace(ht,di):e}function id(e,t,n){return e=ol(e),t=n?ae:t,t===ae?H(e)?ne(e):T(e):e.match(t)||[]}function ad(e){var t=e?e.length:0,n=io();return e=t?f(e,function(e){if("function"!=typeof e[1])throw new jd(se);return[n(e[0]),e[1]]}):[],Yi(function(n){for(var i=-1;++i<t;){var a=e[i];if(s(a[0],this,n))return s(a[1],this,n)}})}function od(e){return Mn(wn(e,!0))}function rd(e){return function(){return e}}function sd(e,t){return null==e||e!==e?t:e}function ld(e){return e}function dd(e){return wi("function"==typeof e?e:wn(e,!0))}function cd(e){return Ei(wn(e,!0))}function pd(e,t){return Ni(e,wn(t,!0))}function ud(e,t,n){var i=yl(t),a=zn(t,i);null!=n||Ls(t)&&(a.length||!i.length)||(n=t,t=e,e=this,a=zn(t,yl(t)));var o=!(Ls(n)&&"chain"in n&&!n.chain),r=Ns(e);return d(a,function(n){var i=t[n];e[n]=i,r&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),a=n.__actions__=xa(this.__actions__);return a.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,g([this.value()],arguments))})}),e}function md(){return $n._===this&&($n._=Qd),this}function hd(){}function fd(e){return e=el(e),Yi(function(t){return Li(t,e)})}function gd(e){return yo(e)?M(Ao(e)):Vi(e)}function bd(e){return function(t){return null==e?ae:Jn(e,t)}}function yd(){return[]}function vd(){return!1}function Cd(){return{}}function Td(){return""}function kd(){return!0}function Pd(e,t){if(e=el(e),e<1||e>Ae)return[];var n=Ne,i=Tc(e,Ne);t=io(t),e-=Ne;for(var a=N(i,t);++n<e;)t(n);return a}function xd(e){return jp(e)?f(e,Ao):$s(e)?[e]:xa(ap(e))}function Dd(e){var t=++Jd;return ol(e)+t}function _d(e){return e&&e.length?Vn(e,ld,ri):ae}function wd(e,t){return e&&e.length?Vn(e,io(t,2),ri):ae}function Md(e){return w(e,ld)}function Sd(e,t){return w(e,io(t,2))}function Ad(e){return e&&e.length?Vn(e,ld,Ai):ae}function Od(e,t){return e&&e.length?Vn(e,io(t,2),Ai):ae}function Ed(e){return e&&e.length?E(e,ld):0}function Nd(e,t){return e&&e.length?E(e,io(t,2)):0}e=e?ci.defaults($n.Object(),e,ci.pick($n,Ln)):$n;var Rd=e.Array,Id=e.Date,Ld=e.Error,Fd=e.Function,Bd=e.Math,Ud=e.Object,Vd=e.RegExp,qd=e.String,jd=e.TypeError,Gd=Rd.prototype,Hd=Fd.prototype,Wd=Ud.prototype,Yd=e["__core-js_shared__"],Kd=function(){var e=/[^.]+$/.exec(Yd&&Yd.keys&&Yd.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$d=Hd.toString,zd=Wd.hasOwnProperty,Jd=0,Xd=$d.call(Ud),Zd=Wd.toString,Qd=$n._,ec=Vd("^"+$d.call(zd).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tc=Xn?e.Buffer:ae,nc=e.Symbol,ic=e.Uint8Array,ac=$(Ud.getPrototypeOf,Ud),oc=nc?nc.iterator:ae,rc=Ud.create,sc=Wd.propertyIsEnumerable,lc=Gd.splice,dc=nc?nc.isConcatSpreadable:ae,cc=e.clearTimeout!==$n.clearTimeout&&e.clearTimeout,pc=Id&&Id.now!==$n.Date.now&&Id.now,uc=e.setTimeout!==$n.setTimeout&&e.setTimeout,mc=Bd.ceil,hc=Bd.floor,fc=Ud.getOwnPropertySymbols,gc=tc?tc.isBuffer:ae,bc=e.isFinite,yc=Gd.join,vc=$(Ud.keys,Ud),Cc=Bd.max,Tc=Bd.min,kc=e.parseInt,Pc=Bd.random,xc=Gd.reverse,Dc=ro(e,"DataView"),_c=ro(e,"Map"),wc=ro(e,"Promise"),Mc=ro(e,"Set"),Sc=ro(e,"WeakMap"),Ac=ro(Ud,"create"),Oc=function(){var e=ro(Ud,"defineProperty"),t=ro.name;return t&&t.length>2?e:ae}(),Ec=Sc&&new Sc,Nc=!sc.call({valueOf:1},"valueOf"),Rc={},Ic=Oo(Dc),Lc=Oo(_c),Fc=Oo(wc),Bc=Oo(Mc),Uc=Oo(Sc),Vc=nc?nc.prototype:ae,qc=Vc?Vc.valueOf:ae,jc=Vc?Vc.toString:ae;t.templateSettings={escape:yt,evaluate:vt,interpolate:Ct,variable:"",imports:{_:t}},t.prototype=n.prototype,t.prototype.constructor=t,i.prototype=En(n.prototype),i.prototype.constructor=i,a.prototype=En(n.prototype),a.prototype.constructor=a,te.prototype.clear=Nt,te.prototype["delete"]=Yt,te.prototype.get=Kt,te.prototype.has=$t,te.prototype.set=zt,Jt.prototype.clear=Xt,Jt.prototype["delete"]=Zt,Jt.prototype.get=Qt,Jt.prototype.has=en,Jt.prototype.set=tn,nn.prototype.clear=an,nn.prototype["delete"]=on,nn.prototype.get=rn,nn.prototype.has=sn,nn.prototype.set=ln,dn.prototype.add=dn.prototype.push=cn,dn.prototype.has=pn,un.prototype.clear=mn,un.prototype["delete"]=hn,un.prototype.get=fn,un.prototype.has=gn,un.prototype.set=bn;var Gc=Sa(Yn),Hc=Sa(Kn,!0),Wc=Aa(),Yc=Aa(!0),Kc=Ec?function(e,t){return Ec.set(e,t),e}:ld,$c=cc||function(e){return $n.clearTimeout(e)},zc=Mc&&1/J(new Mc([,-0]))[1]==Se?function(e){return new Mc(e)}:hd,Jc=Ec?function(e){return Ec.get(e)}:hd,Xc=fc?$(fc,Ud):yd,Zc=fc?function(e){for(var t=[];e;)g(t,Xc(e)),e=ac(e);return t}:yd,Qc=Qn;(Dc&&Qc(new Dc(new ArrayBuffer(1)))!=tt||_c&&Qc(new _c)!=He||wc&&Qc(wc.resolve())!=Ke||Mc&&Qc(new Mc)!=ze||Sc&&Qc(new Sc)!=Ze)&&(Qc=function(e){var t=Zd.call(e),n=t==Ye?e.constructor:ae,i=n?Oo(n):ae;if(i)switch(i){case Ic:return tt;case Lc:return He;case Fc:return Ke;case Bc:return ze;case Uc:return Ze}return t});var ep=Yd?Ns:vd,tp=function(){var e=0,t=0;return function(n,i){var a=Op(),o=De-(a-t);if(t=a,o>0){if(++e>=xe)return n}else e=0;return Kc(n,i)}}(),np=uc||function(e,t){return $n.setTimeout(e,t)},ip=Oc?function(e,t,n){var i=t+"";return Oc(e,"toString",{configurable:!0,enumerable:!1,value:rd(ho(i,Eo(lo(i),n)))})}:ld,ap=ls(function(e){e=ol(e);var t=[];return Pt.test(e)&&t.push(""),e.replace(xt,function(e,n,i,a){t.push(i?a.replace(Rt,"$1"):n||e)}),t}),op=Yi(function(e,t){return Ds(e)?Rn(e,Gn(t,1,Ds,!0)):[]}),rp=Yi(function(e,t){var n=Zo(t);return Ds(n)&&(n=ae),Ds(e)?Rn(e,Gn(t,1,Ds,!0),io(n,2)):[]}),sp=Yi(function(e,t){var n=Zo(t);return Ds(n)&&(n=ae),Ds(e)?Rn(e,Gn(t,1,Ds,!0),ae,n):[]}),lp=Yi(function(e){var t=f(e,la);return t.length&&t[0]===e[0]?hi(t):[]}),dp=Yi(function(e){var t=Zo(e),n=f(e,la);return t===Zo(n)?t=ae:n.pop(),n.length&&n[0]===e[0]?hi(n,io(t,2)):[]}),cp=Yi(function(e){var t=Zo(e),n=f(e,la);return t===Zo(n)?t=ae:n.pop(),n.length&&n[0]===e[0]?hi(n,ae,t):[]}),pp=Yi(tr),up=Yi(function(e,t){t=Gn(t,1);var n=e?e.length:0,i=Dn(e,t);return ji(e,f(t,function(e){return go(e,n)?+e:e}).sort(Ca)),i}),mp=Yi(function(e){return ta(Gn(e,1,Ds,!0))}),hp=Yi(function(e){var t=Zo(e);return Ds(t)&&(t=ae),ta(Gn(e,1,Ds,!0),io(t,2))}),fp=Yi(function(e){var t=Zo(e);return Ds(t)&&(t=ae),ta(Gn(e,1,Ds,!0),ae,t)}),gp=Yi(function(e,t){return Ds(e)?Rn(e,t):[]}),bp=Yi(function(e){return ra(u(e,Ds))}),yp=Yi(function(e){var t=Zo(e);return Ds(t)&&(t=ae),ra(u(e,Ds),io(t,2))}),vp=Yi(function(e){var t=Zo(e);return Ds(t)&&(t=ae),ra(u(e,Ds),ae,t)}),Cp=Yi(Pr),Tp=Yi(function(e){var t=e.length,n=t>1?e[t-1]:ae;return n="function"==typeof n?(e.pop(),n):ae,xr(e,n)}),kp=Yi(function(e){e=Gn(e,1);var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(t){return Dn(t,e)};return!(t>1||this.__actions__.length)&&o instanceof a&&go(n)?(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Sr,args:[r],thisArg:ae}),new i(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ae),e})):this.thru(r)}),Pp=wa(function(e,t,n){zd.call(e,n)?++e[n]:e[n]=1}),xp=La(jo),Dp=La(Go),_p=wa(function(e,t,n){zd.call(e,n)?e[n].push(t):e[n]=[t]}),wp=Yi(function(e,t,n){var i=-1,a="function"==typeof t,o=yo(t),r=xs(e)?Rd(e.length):[];return Gc(e,function(e){var l=a?t:o&&null!=e?e[t]:ae;r[++i]=l?s(l,e,n):gi(e,t,n)}),r}),Mp=wa(function(e,t,n){e[n]=t}),Sp=wa(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ap=Yi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&bo(e,t[0],t[1])?t=[]:n>2&&bo(t[0],t[1],t[2])&&(t=[t[0]]),Fi(e,Gn(t,1),[])}),Op=pc||function(){return $n.Date.now()},Ep=Yi(function(e,t,n){var i=ce;if(n.length){var a=z(n,no(Ep));i|=fe}return za(e,i,t,n,a)}),Np=Yi(function(e,t,n){var i=ce|pe;if(n.length){var a=z(n,no(Np));i|=fe}return za(t,i,e,n,a)}),Rp=Yi(function(e,t){return Nn(e,1,t)}),Ip=Yi(function(e,t,n){return Nn(e,nl(t)||0,n)});ls.Cache=nn;var Lp=Yi(function(e,t){t=1==t.length&&jp(t[0])?f(t[0],I(io())):f(Gn(t,1),I(io()));var n=t.length;return Yi(function(i){for(var a=-1,o=Tc(i.length,n);++a<o;)i[a]=t[a].call(this,i[a]);return s(e,this,i)})}),Fp=Yi(function(e,t){var n=z(t,no(Fp));return za(e,fe,ae,t,n)}),Bp=Yi(function(e,t){var n=z(t,no(Bp));return za(e,ge,ae,t,n)}),Up=Yi(function(e,t){return za(e,ye,ae,ae,ae,Gn(t,1))}),Vp=Wa(ri),qp=Wa(function(e,t){return e>=t}),jp=Rd.isArray,Gp=ei?I(ei):bi,Hp=gc||vd,Wp=ti?I(ti):yi,Yp=ni?I(ni):Ti,Kp=ii?I(ii):xi,$p=ai?I(ai):Di,zp=oi?I(oi):_i,Jp=Wa(Ai),Xp=Wa(function(e,t){return e<=t}),Zp=Ma(function(e,t){if(Nc||ko(t)||xs(t))return void Da(t,yl(t),e);for(var n in t)zd.call(t,n)&&Tn(e,n,t[n])}),Qp=Ma(function(e,t){Da(t,vl(t),e)}),eu=Ma(function(e,t,n,i){Da(t,vl(t),e,i)}),tu=Ma(function(e,t,n,i){Da(t,yl(t),e,i)}),nu=Yi(function(e,t){return Dn(e,Gn(t,1))}),iu=Yi(function(e){return e.push(ae,vn),s(eu,ae,e)}),au=Yi(function(e){return e.push(ae,_o),s(du,ae,e)}),ou=Ua(function(e,t,n){e[t]=n},rd(ld)),ru=Ua(function(e,t,n){zd.call(e,t)?e[t].push(n):e[t]=[n]},io),su=Yi(gi),lu=Ma(function(e,t,n){Ri(e,t,n)}),du=Ma(function(e,t,n,i){Ri(e,t,n,i)}),cu=Yi(function(e,t){return null==e?{}:(t=f(Gn(t,1),Ao),Bi(e,Rn(eo(e),t)))}),pu=Yi(function(e,t){return null==e?{}:Bi(e,f(Gn(t,1),Ao))}),uu=$a(yl),mu=$a(vl),hu=Na(function(e,t,n){return t=t.toLowerCase(),e+(n?Ll(t):t)}),fu=Na(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),gu=Na(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),bu=Ea("toLowerCase"),yu=Na(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),vu=Na(function(e,t,n){return e+(n?" ":"")+Tu(t)}),Cu=Na(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Tu=Ea("toUpperCase"),ku=Yi(function(e,t){try{return s(e,ae,t)}catch(n){return Os(n)?n:new Ld(n)}}),Pu=Yi(function(e,t){return d(Gn(t,1),function(t){t=Ao(t),e[t]=Ep(e[t],e)}),e}),xu=Fa(),Du=Fa(!0),_u=Yi(function(e,t){return function(n){return gi(n,e,t)}}),wu=Yi(function(e,t){return function(n){return gi(e,n,t)}}),Mu=qa(f),Su=qa(p),Au=qa(v),Ou=Ha(),Eu=Ha(!0),Nu=Va(function(e,t){return e+t},0),Ru=Ka("ceil"),Iu=Va(function(e,t){return e/t},1),Lu=Ka("floor"),Fu=Va(function(e,t){return e*t},1),Bu=Ka("round"),Uu=Va(function(e,t){return e-t},0);return t.after=ts,t.ary=ns,t.assign=Zp,t.assignIn=Qp,t.assignInWith=eu,t.assignWith=tu,t.at=nu,t.before=is,t.bind=Ep,t.bindAll=Pu,t.bindKey=Np,t.castArray=gs,t.chain=wr,t.chunk=Ro,t.compact=Io,t.concat=Lo,t.cond=ad,t.conforms=od,t.constant=rd,t.countBy=Pp,t.create=rl,t.curry=as,t.curryRight=os,t.debounce=rs,t.defaults=iu,t.defaultsDeep=au,t.defer=Rp,t.delay=Ip,t.difference=op,t.differenceBy=rp,t.differenceWith=sp,t.drop=Fo,t.dropRight=Bo,t.dropRightWhile=Uo,t.dropWhile=Vo,t.fill=qo,t.filter=Br,t.flatMap=Ur,t.flatMapDeep=Vr,t.flatMapDepth=qr,t.flatten=Ho,t.flattenDeep=Wo,t.flattenDepth=Yo,t.flip=ss,t.flow=xu,t.flowRight=Du,t.fromPairs=Ko,t.functions=ml,t.functionsIn=hl,t.groupBy=_p,t.initial=Jo,t.intersection=lp,t.intersectionBy=dp,t.intersectionWith=cp,t.invert=ou,t.invertBy=ru,t.invokeMap=wp,t.iteratee=dd,t.keyBy=Mp,t.keys=yl,t.keysIn=vl,t.map=Wr,t.mapKeys=Cl,t.mapValues=Tl,t.matches=cd,t.matchesProperty=pd,t.memoize=ls,t.merge=lu,t.mergeWith=du,t.method=_u,t.methodOf=wu,t.mixin=ud,t.negate=ds,t.nthArg=fd,t.omit=cu,t.omitBy=kl,t.once=cs,t.orderBy=Yr,t.over=Mu,t.overArgs=Lp,t.overEvery=Su,t.overSome=Au,t.partial=Fp,t.partialRight=Bp,t.partition=Sp,t.pick=pu,t.pickBy=Pl,t.property=gd,t.propertyOf=bd,t.pull=pp,t.pullAll=tr,t.pullAllBy=nr,t.pullAllWith=ir,t.pullAt=up,t.range=Ou,t.rangeRight=Eu,t.rearg=Up,t.reject=zr,t.remove=ar,t.rest=ps,t.reverse=or,t.sampleSize=Xr,t.set=Dl,t.setWith=_l,t.shuffle=Zr,t.slice=rr,t.sortBy=Ap,t.sortedUniq=mr,t.sortedUniqBy=hr,t.split=Kl,t.spread=us,t.tail=fr,t.take=gr,t.takeRight=br,t.takeRightWhile=yr,t.takeWhile=vr,t.tap=Mr,t.throttle=ms,t.thru=Sr,t.toArray=Zs,t.toPairs=uu,t.toPairsIn=mu,t.toPath=xd,t.toPlainObject=il,t.transform=wl,t.unary=hs,t.union=mp,t.unionBy=hp,t.unionWith=fp,t.uniq=Cr,t.uniqBy=Tr,t.uniqWith=kr,t.unset=Ml,t.unzip=Pr,t.unzipWith=xr,t.update=Sl,t.updateWith=Al,t.values=Ol,t.valuesIn=El,t.without=gp,t.words=id,t.wrap=fs,t.xor=bp,t.xorBy=yp,t.xorWith=vp,t.zip=Cp,t.zipObject=Dr,t.zipObjectDeep=_r,t.zipWith=Tp,t.entries=uu,t.entriesIn=mu,t.extend=Qp,t.extendWith=eu,ud(t,t),t.add=Nu,t.attempt=ku,t.camelCase=hu,t.capitalize=Ll,t.ceil=Ru,t.clamp=Nl,t.clone=bs,t.cloneDeep=vs,t.cloneDeepWith=Cs,t.cloneWith=ys,t.conformsTo=Ts,t.deburr=Fl,t.defaultTo=sd,t.divide=Iu,t.endsWith=Bl,t.eq=ks,t.escape=Ul,t.escapeRegExp=Vl,t.every=Fr,t.find=xp,t.findIndex=jo,t.findKey=sl,t.findLast=Dp,t.findLastIndex=Go,t.findLastKey=ll,t.floor=Lu,t.forEach=jr,t.forEachRight=Gr,t.forIn=dl,t.forInRight=cl,t.forOwn=pl,t.forOwnRight=ul,t.get=fl,t.gt=Vp,t.gte=qp,t.has=gl,t.hasIn=bl,t.head=$o,t.identity=ld,t.includes=Hr,t.indexOf=zo,t.inRange=Rl,t.invoke=su,t.isArguments=Ps,t.isArray=jp,t.isArrayBuffer=Gp,t.isArrayLike=xs,t.isArrayLikeObject=Ds,t.isBoolean=_s,t.isBuffer=Hp,t.isDate=Wp,t.isElement=ws,t.isEmpty=Ms,t.isEqual=Ss,t.isEqualWith=As,t.isError=Os,t.isFinite=Es,t.isFunction=Ns,t.isInteger=Rs,t.isLength=Is,t.isMap=Yp,t.isMatch=Bs,t.isMatchWith=Us,t.isNaN=Vs,t.isNative=qs,t.isNil=Gs,t.isNull=js,t.isNumber=Hs,t.isObject=Ls,t.isObjectLike=Fs,t.isPlainObject=Ws,t.isRegExp=Kp,t.isSafeInteger=Ys,t.isSet=$p,t.isString=Ks,t.isSymbol=$s,t.isTypedArray=zp,t.isUndefined=zs,t.isWeakMap=Js,t.isWeakSet=Xs,t.join=Xo,t.kebabCase=fu,t.last=Zo,t.lastIndexOf=Qo,t.lowerCase=gu,t.lowerFirst=bu,t.lt=Jp,t.lte=Xp,t.max=_d,t.maxBy=wd,t.mean=Md,t.meanBy=Sd,t.min=Ad,t.minBy=Od,t.stubArray=yd,t.stubFalse=vd,t.stubObject=Cd,t.stubString=Td,t.stubTrue=kd,t.multiply=Fu,t.nth=er,t.noConflict=md,t.noop=hd,t.now=Op,t.pad=ql,t.padEnd=jl,t.padStart=Gl,t.parseInt=Hl,t.random=Il,t.reduce=Kr,t.reduceRight=$r,t.repeat=Wl,t.replace=Yl,t.result=xl,t.round=Bu,t.runInContext=ie,t.sample=Jr,t.size=Qr,t.snakeCase=yu,t.some=es,t.sortedIndex=sr,t.sortedIndexBy=lr,t.sortedIndexOf=dr,t.sortedLastIndex=cr,t.sortedLastIndexBy=pr,t.sortedLastIndexOf=ur,t.startCase=vu,t.startsWith=$l,t.subtract=Uu,t.sum=Ed,t.sumBy=Nd,t.template=zl,t.times=Pd,t.toFinite=Qs,t.toInteger=el,t.toLength=tl,t.toLower=Jl,t.toNumber=nl,t.toSafeInteger=al,t.toString=ol,t.toUpper=Xl,t.trim=Zl,t.trimEnd=Ql,t.trimStart=ed,t.truncate=td,t.unescape=nd,t.uniqueId=Dd,t.upperCase=Cu,t.upperFirst=Tu,t.each=jr,t.eachRight=Gr,t.first=$o,ud(t,function(){var e={};return Yn(t,function(n,i){zd.call(t.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),t.VERSION=oe,d(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),d(["drop","take"],function(e,t){a.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new a(this);n=n===ae?1:Cc(el(n),0);var o=this.clone();return i?o.__takeCount__=Tc(n,o.__takeCount__):o.__views__.push({size:Tc(n,Ne),type:e+(o.__dir__<0?"Right":"")}),o},a.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),d(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==_e||n==Me;a.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:io(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),d(["head","last"],function(e,t){var n="take"+(t?"Right":"");a.prototype[e]=function(){return this[n](1).value()[0]}}),d(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");a.prototype[e]=function(){return this.__filtered__?new a(this):this[n](1)}}),a.prototype.compact=function(){return this.filter(ld)},a.prototype.find=function(e){return this.filter(e).head()},a.prototype.findLast=function(e){return this.reverse().find(e)},a.prototype.invokeMap=Yi(function(e,t){return"function"==typeof e?new a(this):this.map(function(n){return gi(n,e,t)})}),a.prototype.reject=function(e){return this.filter(ds(io(e)))},a.prototype.slice=function(e,t){e=el(e);var n=this;return n.__filtered__&&(e>0||t<0)?new a(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ae&&(t=el(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},a.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},a.prototype.toArray=function(){return this.take(Ne)},Yn(a.prototype,function(e,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=t[r?"take"+("last"==n?"Right":""):n],l=r||/^find/.test(n);s&&(t.prototype[n]=function(){var n=this.__wrapped__,d=r?[1]:arguments,c=n instanceof a,p=d[0],u=c||jp(n),m=function(e){var n=s.apply(t,g([e],d));return r&&h?n[0]:n};u&&o&&"function"==typeof p&&1!=p.length&&(c=u=!1);var h=this.__chain__,f=!!this.__actions__.length,b=l&&!h,y=c&&!f;if(!l&&u){n=y?n:new a(this);var v=e.apply(n,d);return v.__actions__.push({func:Sr,args:[m],thisArg:ae}),new i(v,h)}return b&&y?e.apply(this,d):(v=this.thru(m),b?r?v.value()[0]:v.value():v)})}),d(["pop","push","shift","sort","splice","unshift"],function(e){var n=Gd[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;if(a&&!this.__chain__){var t=this.value();return n.apply(jp(t)?t:[],e)}return this[i](function(t){return n.apply(jp(t)?t:[],e)})}}),Yn(a.prototype,function(e,n){var i=t[n];if(i){var a=i.name+"",o=Rc[a]||(Rc[a]=[]);o.push({name:n,func:i})}}),Rc[Ba(ae,pe).name]=[{name:"wrapper",func:ae}],a.prototype.clone=C,a.prototype.reverse=S,a.prototype.value=ee,t.prototype.at=kp,t.prototype.chain=Ar,t.prototype.commit=Or,t.prototype.next=Er,t.prototype.plant=Rr,t.prototype.reverse=Ir,t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Lr,t.prototype.first=t.prototype.head,oc&&(t.prototype[oc]=Nr),t}var ae,oe="4.15.0",re=200,se="Expected a function",le="__lodash_hash_undefined__",de="__lodash_placeholder__",ce=1,pe=2,ue=4,me=8,he=16,fe=32,ge=64,be=128,ye=256,ve=512,Ce=1,Te=2,ke=30,Pe="...",xe=150,De=16,_e=1,we=2,Me=3,Se=1/0,Ae=9007199254740991,Oe=1.7976931348623157e308,Ee=NaN,Ne=4294967295,Re=Ne-1,Ie=Ne>>>1,Le=[["ary",be],["bind",ce],["bindKey",pe],["curry",me],["curryRight",he],["flip",ve],["partial",fe],["partialRight",ge],["rearg",ye]],Fe="[object Arguments]",Be="[object Array]",Ue="[object Boolean]",Ve="[object Date]",qe="[object Error]",je="[object Function]",Ge="[object GeneratorFunction]",He="[object Map]",We="[object Number]",Ye="[object Object]",Ke="[object Promise]",$e="[object RegExp]",ze="[object Set]",Je="[object String]",Xe="[object Symbol]",Ze="[object WeakMap]",Qe="[object WeakSet]",et="[object ArrayBuffer]",tt="[object DataView]",nt="[object Float32Array]",it="[object Float64Array]",at="[object Int8Array]",ot="[object Int16Array]",rt="[object Int32Array]",st="[object Uint8Array]",lt="[object Uint8ClampedArray]",dt="[object Uint16Array]",ct="[object Uint32Array]",pt=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ht=/&(?:amp|lt|gt|quot|#39|#96);/g,ft=/[&<>"'`]/g,gt=RegExp(ht.source),bt=RegExp(ft.source),yt=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Pt=/^\./,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,_t=RegExp(Dt.source),wt=/^\s+|\s+$/g,Mt=/^\s+/,St=/\s+$/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,Et=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,Ft=/^0x/i,Bt=/^[-+]0x[0-9a-f]+$/i,Ut=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,jt=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ht=/($^)/,Wt=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",Kt="\\u0300-\\u036f\\ufe20-\\ufe23",$t="\\u20d0-\\u20f0",zt="\\u2700-\\u27bf",Jt="a-z\\xdf-\\xf6\\xf8-\\xff",Xt="\\xac\\xb1\\xd7\\xf7",Zt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qt="\\u2000-\\u206f",en=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="A-Z\\xc0-\\xd6\\xd8-\\xde",nn="\\ufe0e\\ufe0f",an=Xt+Zt+Qt+en,on="[']",rn="["+Yt+"]",sn="["+an+"]",ln="["+Kt+$t+"]",dn="\\d+",cn="["+zt+"]",pn="["+Jt+"]",un="[^"+Yt+an+dn+zt+Jt+tn+"]",mn="\\ud83c[\\udffb-\\udfff]",hn="(?:"+ln+"|"+mn+")",fn="[^"+Yt+"]",gn="(?:\\ud83c[\\udde6-\\uddff]){2}",bn="[\\ud800-\\udbff][\\udc00-\\udfff]",yn="["+tn+"]",vn="\\u200d",Cn="(?:"+pn+"|"+un+")",Tn="(?:"+yn+"|"+un+")",kn="(?:"+on+"(?:d|ll|m|re|s|t|ve))?",Pn="(?:"+on+"(?:D|LL|M|RE|S|T|VE))?",xn=hn+"?",Dn="["+nn+"]?",_n="(?:"+vn+"(?:"+[fn,gn,bn].join("|")+")"+Dn+xn+")*",wn=Dn+xn+_n,Mn="(?:"+[cn,gn,bn].join("|")+")"+wn,Sn="(?:"+[fn+ln+"?",ln,gn,bn,rn].join("|")+")",An=RegExp(on,"g"),On=RegExp(ln,"g"),En=RegExp(mn+"(?="+mn+")|"+Sn+wn,"g"),Nn=RegExp([yn+"?"+pn+"+"+kn+"(?="+[sn,yn,"$"].join("|")+")",Tn+"+"+Pn+"(?="+[sn,yn+Cn,"$"].join("|")+")",yn+"?"+Cn+"+"+kn,yn+"+"+Pn,dn,Mn].join("|"),"g"),Rn=RegExp("["+vn+Yt+Kt+$t+nn+"]"),In=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ln=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fn=-1,Bn={};Bn[nt]=Bn[it]=Bn[at]=Bn[ot]=Bn[rt]=Bn[st]=Bn[lt]=Bn[dt]=Bn[ct]=!0,Bn[Fe]=Bn[Be]=Bn[et]=Bn[Ue]=Bn[tt]=Bn[Ve]=Bn[qe]=Bn[je]=Bn[He]=Bn[We]=Bn[Ye]=Bn[$e]=Bn[ze]=Bn[Je]=Bn[Ze]=!1;var Un={};Un[Fe]=Un[Be]=Un[et]=Un[tt]=Un[Ue]=Un[Ve]=Un[nt]=Un[it]=Un[at]=Un[ot]=Un[rt]=Un[He]=Un[We]=Un[Ye]=Un[$e]=Un[ze]=Un[Je]=Un[Xe]=Un[st]=Un[lt]=Un[dt]=Un[ct]=!0,Un[qe]=Un[je]=Un[Ze]=!1;var Vn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"ss"},qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},jn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Gn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hn=parseFloat,Wn=parseInt,Yn="object"==typeof e&&e&&e.Object===Object&&e,Kn="object"==typeof self&&self&&self.Object===Object&&self,$n=Yn||Kn||Function("return this")(),zn="object"==typeof t&&t&&!t.nodeType&&t,Jn=zn&&"object"==typeof a&&a&&!a.nodeType&&a,Xn=Jn&&Jn.exports===zn,Zn=Xn&&Yn.process,Qn=function(){try{return Zn&&Zn.binding("util")}catch(e){}}(),ei=Qn&&Qn.isArrayBuffer,ti=Qn&&Qn.isDate,ni=Qn&&Qn.isMap,ii=Qn&&Qn.isRegExp,ai=Qn&&Qn.isSet,oi=Qn&&Qn.isTypedArray,ri=M("length"),si=S(Vn),li=S(qn),di=S(jn),ci=ie();$n._=ci,i=function(){return ci}.call(t,n,t,a),!(i!==ae&&(a.exports=i))}).call(this)}).call(t,function(){return this}(),n(4)(e))},function(e,t,n){(function(t){"use strict";var i=n(62),a=function(){function e(){this._apiEndpointService=new i}return e.prototype.getOccupancy=function(e,n){var i=this._apiEndpointService.create("occupancy/UpdateOccupancy"),a={noOfChildren:e,childAges:n};return t.post(i,a).then(function(e){return e})},e}();e.exports=a}).call(t,n(2))},function(e,t){"use strict";var n=function(){function e(){}return e.Landing="35",e.Payment="36",e}();e.exports=n},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(486),s=n(52),l=n(75),d=n(21),c=function(e){function a(i){var a=this;e.call(this),this._landingPageViewModel=i,this.responseHandler=function(e){switch(e.action){case r.DisplayUnionPayOtpModal:a._landingPageViewModel.openUnionPayOtpModal();break;case r.InvalidUnionPayInformation:a.errorMessage(a.paymentMethod.unionPayInvalidIdOrNameOrPhoneNumberErrorText()),a.clearIdentificationInfo()}},this.always=function(){a.processing(!1)},this.paymentMethod=i.page.paymentDetails.paymentMethod,this.isProcessing=t.observable(!1),this.continueButtonCss=t.observable(""),this.closeButtonEnabled=t.observable(!0),this.idCardType=t.observable(1),this.idCardNumber=t.observable(),this.idCardName=t.observable(""),this.errorMessage=t.observable(""),this.idErrorMessage=t.observable(""),this.nameErrorMessage=t.observable(""),this.phoneNumberErrorMessage=t.observable(""),this.idCardTypeOptions=t.observableArray([{name:this.paymentMethod.unionPayIdModalNationalIdText,value:1},{name:this.paymentMethod.unionPayIdModalPassportText,value:2}]),this.cardPhoneNumber=t.observable(this.paymentMethod.creditCard.mobilePhoneNumber()),this.cardCountryCode=t.observable(""),this.isModifiedAfterSubmit=t.observable(!1);var s=t.unwrap(i.page.paymentDetails.selectedPaymentMethodType);d.UnionPayDebitCard===s?this.dataPaymentMethod=t.observable("up-debit"):d.UnionPayCreditCard===s?this.dataPaymentMethod=t.observable("up-credit"):this.dataPaymentMethod=t.observable("none"),this.header={name:o.UNION_PAY_IDENTIFICATION_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{close:function(){return a.close()},title:this.paymentMethod.unionPayIdModalTitleText,closeButtonVisible:this.closeButtonEnabled,dataPaymentMethod:this.dataPaymentMethod}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(533)),this.body.name=o.UNION_PAY_IDENTIFICATION_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(534)),this.body.data={submitUnionPayIdentification:function(){return a.submitUnionPayIdentification()},isProcessing:this.isProcessing,continueButtonClass:this.continueButtonCss,paymentMethod:this.paymentMethod,idCardType:this.idCardType,idCardNumber:this.idCardNumber,idCardName:this.idCardName,idCardTypeOptions:this.idCardTypeOptions,getCombinedPhoneNumber:this.getCombinedPhoneNumber,errorMessage:this.errorMessage,idErrorMessage:this.idErrorMessage,nameErrorMessage:this.nameErrorMessage,phoneNumberErrorMessage:this.phoneNumberErrorMessage,cardPhoneNumber:this.cardPhoneNumber,cardCountryCode:this.cardCountryCode,dataPaymentMethod:this.dataPaymentMethod},this.body.afterRender=this._initIntlTelInput.bind(this),this.dialogCss=o.UNION_PAY_IDENTIFICATION_MODAL_CLASS,this.options.backdrop="static",this._setPhoneNumberValidation(),this._setIdValidation(),this._setNameValidation()}return i(a,e),a.prototype._initIntlTelInput=function(){var e=this;this.intlTelInputService=new s("cardPhoneNumber"),this.intlTelInputService.intlTelInput("setNumber",t.unwrap(this.cardPhoneNumber()));var n=this.intlTelInputService.intlTelInput("getSelectedCountryData");this.cardCountryCode("+"+n.dialCode),this.intlTelInputService.onCountryChangeCallback(function(t,n){e.cardCountryCode("+"+n.dialCode)},this),this.cardPhoneNumber.subscribe(function(t){e.intlTelInputService.intlTelInput("setNumber",t)})},a.prototype.getCombinedPhoneNumber=function(){var e=t.unwrap(this.cardCountryCode())?this.cardCountryCode():"",n=t.unwrap(this.cardPhoneNumber());return n.indexOf(e)<0?t.observable(e+n):t.observable(n)},a.prototype.clearErrors=function(){this.idErrorMessage(""),this.nameErrorMessage(""),this.phoneNumberErrorMessage(""),this.errorMessage("")},a.prototype.clearIdentificationInfo=function(){this.paymentMethod.creditCard.idCardNumber(""),this.paymentMethod.creditCard.idCardName("")},a.prototype.close=function(e){void 0===e&&(e=!0),e&&this.clearErrors(),this.visible(!1)},a.prototype.processing=function(e){this.isProcessing(e),this.closeButtonEnabled(!e)},a.prototype.submitUnionPayIdentification=function(){this.clearErrors(),this.isModifiedAfterSubmit(!1),this.idCardNumber.isValid()&&this.idCardName.isValid()&&this.cardPhoneNumber.isValid()?(this.processing(!0),this.paymentMethod.creditCard.idCardType(this.idCardType()),this.paymentMethod.creditCard.idCardNumber(this.idCardNumber()),this.paymentMethod.creditCard.idCardName(this.idCardName()),
this.paymentMethod.creditCard.mobilePhoneNumber(this.cardPhoneNumber()),this.paymentMethod.creditCard.mobilePhoneCountryCode(this.cardCountryCode()),this._landingPageViewModel.submitDirectPaymentBooking(null,this.responseHandler,this.always)):(t.validation.group(this.idCardNumber).showAllMessages(!0),t.validation.group(this.idCardName).showAllMessages(!0),t.validation.group(this.cardPhoneNumber).showAllMessages(!0))},a.prototype._setPhoneNumberValidation=function(){var e=this;this.cardPhoneNumber.extend({required:{params:!0,message:l.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span")},validation:[{validator:function(t){return new RegExp(e.paymentMethod.mobilePhoneRegex()).test(t)},message:l.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span")},{validator:function(){return!e.cardCountryCode()||""===e.cardCountryCode()||e.intlTelInputService.intlTelInput("getNumber").length>=8&&e.intlTelInputService.intlTelInput("getNumber").length<=20&&e.intlTelInputService.intlTelInput("isValidNumber")},message:l.getValidationMessage(this.paymentMethod.pleaseEnterPhoneNumberText(),"mobilePhoneNumber-span")},{validator:function(){return e.cardCountryCode()&&""!==e.cardCountryCode()},message:l.getValidationMessage(this.paymentMethod.pleaseEnterCountryCodeText(),"countrycode-span")},{validator:function(){return!e.phoneNumberErrorMessage()&&!e.errorMessage()||""===e.phoneNumberErrorMessage()&&""===e.errorMessage()},message:function(){return e.phoneNumberErrorMessage()},onlyIf:function(){return!e.isModifiedAfterSubmit()}}]}),this.cardPhoneNumber()&&this.cardPhoneNumber.isModified(!0),this.cardPhoneNumber.subscribe(function(){e.isModifiedAfterSubmit(!0)})},a.prototype._setIdValidation=function(){var e=this;this.idCardNumber.extend({required:{params:!0,message:this.paymentMethod.unionPayInvalidIdErrorText()},validation:{validator:function(){return!e.idErrorMessage()&&!e.errorMessage()||""===e.idErrorMessage()&&""===e.errorMessage()},message:function(){return e.idErrorMessage()},onlyIf:function(){return!e.isModifiedAfterSubmit()}}}),this.idCardNumber()&&this.idCardNumber.isModified(!0),this.idCardNumber.subscribe(function(){e.isModifiedAfterSubmit(!0)})},a.prototype._setNameValidation=function(){var e=this;this.idCardName.extend({required:{params:!0,message:this.paymentMethod.unionPayInvalidNameErrorText()},validation:{validator:function(){return!e.nameErrorMessage()&&!e.errorMessage()||""===e.nameErrorMessage()&&""===e.errorMessage()},message:function(){return e.nameErrorMessage()},onlyIf:function(){return!e.isModifiedAfterSubmit()}}}),this.idCardName()&&this.idCardName.isModified(!0),this.idCardName.subscribe(function(){e.isModifiedAfterSubmit(!0)})},a}(a);e.exports=c}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: closeButtonVisible --> <button type=button class="ficon ficon-close-popup close verify-identity-close-btn" data-dismiss=modal aria-hidden=true data-element-name=close-unionpay-id data-bind="click: close, attr: {data-payment-method: dataPaymentMethod}"></button><!-- /ko --> <h4 class=modal-title data-element-name=unionpay-id-modal data-bind="html: title, attr: {data-payment-method: dataPaymentMethod}"></h4>'},function(e,t){e.exports='<!-- union pay identification details starts --> <div class=union-pay-credit-card-details><!-- ko if: errorMessage --> <p class=error-message data-element-name=submit-unionpay-id-error data-bind="html: errorMessage, attr: {data-payment-method: dataPaymentMethod}"></p><!-- /ko --> <p data-bind="html: paymentMethod.unionPayIdModalFillInputText">!</p> <form class=well name=unionPayIdentificationModal> <div class="form-group has-feedback"> <label for=idCardType class=control-label data-bind="text: paymentMethod.unionPayIdModalSelectIdTypeText"></label> <select class="form-control sensitive" name=idCardType id=idCardType data-bind="options: idCardTypeOptions, optionsText: \'name\', optionsValue: \'value\', value: idCardType"> </select> <i class="ficon form-control-feedback"></i>  </div> <div class="form-group has-feedback" data-bind="validationElement: idCardNumber"> <label for=idCardNumber class=control-label data-bind="text: paymentMethod.unionPayIdModalNationalIdOrPassportText"></label> <input class="form-control sensitive" id=idCardNumber name=idCardNumber maxlength=20 autocomplete=off data-bind="value: idCardNumber, allowEmpty"/> <i class="ficon form-control-feedback"></i> </div> <div class="form-group has-feedback" data-bind="validationElement: idCardName"> <label for=idCardName class=control-label data-bind="text: paymentMethod.unionPayIdModalNameOnIdCardText"></label> <input class="form-control sensitive" id=idCardName name=idCardName autocomplete=off data-bind="value: idCardName, allowEmpty"/> <i class="ficon form-control-feedback"></i> </div> <div class="form-group has-feedback phone-number" data-bind="validationElement: cardPhoneNumber"> <label for=cardPhoneNumber class=control-label data-bind="text: paymentMethod.mobileNumberText"></label> <input type=tel class="form-control sensitive" name=cardPhoneNumber id=cardPhoneNumber autocomplete=tel autocorrect=off data-element-name=up-mobile-phone-number data-bind="value: cardPhoneNumber,\r\n                    intlTelInput: getCombinedPhoneNumber(),\r\n                    phoneCharacterOnly: cardPhoneNumber,\r\n                    allowEmpty" maxlength=16 /> <i class="ficon form-control-feedback"></i> </div> </form> <div class=text-right> <button type=submit class="btn btn-primary" data-element-name=submit-unionpay-id data-bind="ladda: isProcessing, \r\n                    click: submitUnionPayIdentification, \r\n                    css: continueButtonClass,\r\n                    attr: {data-payment-method: dataPaymentMethod}" data-style=expand-right> <span class=ladda-label data-bind="text: paymentMethod.continueText"/> <span class=ladda-spinner /> </button> </div> </div> <!-- union pay identification details starts  -->'},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(486),s=n(99),l=n(9),d=n(75),c=n(21),p=function(e){function a(i){var a=this;e.call(this),this._unionPayOtpModal=i,this.requestNewOtpUnexpectResultHandler=function(e){e.action!==r.DisplayUnionPayOtpModal&&(a._unionPayOtpModal.page.secondStepErrorMessage(e.result),a._paymentMethod.creditCard.otp.clearError(),a.close(!1))},this.submitOtpExtraHandler=function(e){e.action===r.InvalidUnionPayInformation&&(a.visible()===!1&&a._modalService.open(a,!0),a.otpErrorMessage(a._paymentMethod.unionPayInvalidOtpErrorText()),t.validation.group(a._paymentMethod.creditCard.otp).showAllMessages(!0))},this.submitAlwaysHandler=function(){a.processing(!1),a.enableRequestNewOtp()},this._paymentMethod=i.page.paymentDetails.paymentMethod,this._paymentMethod.creditCard.otp=t.observable(""),this._modalService=new s,this._counterInterval=null,this.cdnUrl=l.getPageData().cdnUrl,this.closeDone=!1,this.isProcessing=t.observable(!1),this.isOtpFocused=t.observable(!1),this.closeButtonEnabled=t.observable(!0),this.requestNewPasswordCss=t.observable(""),this.countdownCss=t.observable(""),this.countdown=t.observable(0),this.otpErrorMessage=t.observable("");var d=t.unwrap(i.page.paymentDetails.selectedPaymentMethodType);c.UnionPayDebitCard===d?this.dataPaymentMethod=t.observable("up-debit"):c.UnionPayCreditCard===d?this.dataPaymentMethod=t.observable("up-credit"):this.dataPaymentMethod=t.observable("none"),this.header={name:o.UNION_PAY_OTP_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{close:function(){return a.close()},title:i.page.paymentDetails.paymentMethod.unionPayOtpModalOtpConfirmationText(),closeButtonVisible:this.closeButtonEnabled,dataPaymentMethod:this.dataPaymentMethod}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(536)),this.body.name=o.UNION_PAY_OTP_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(537)),this.body.data={submitUnionPayOtp:function(){return a.submitUnionPayOtp()},requestNewOtp:function(){return a.requestNewOtp()},paymentMethod:i.page.paymentDetails.paymentMethod,requestNewPasswordClass:this.requestNewPasswordCss,isProcessing:this.isProcessing,cdnUrl:this.cdnUrl,isOtpFocused:this.isOtpFocused,countdown:this.countdown,countdownClass:this.countdownCss,dataPaymentMethod:this.dataPaymentMethod},this.dialogCss=o.UNION_PAY_OTP_MODAL_CLASS,this.options.backdrop="static",this._setValidation(),this.setCountdown()}return i(a,e),a.prototype.clearErrors=function(){this.otpErrorMessage(""),this._paymentMethod.creditCard.otp.clearError()},a.prototype.close=function(e){void 0===e&&(e=!0),this.closeDone||(this.setCounterToZero(),this.enableRequestNewOtp(),this._paymentMethod.creditCard.otp(""),this.visible(!1),this._unionPayOtpModal.isProcessing(!1),this.closeDone=!0,e&&(this.clearErrors(),this._unionPayOtpModal.page.secondStepErrorMessage("")))},a.prototype.processing=function(e){this.isProcessing(e),this.closeButtonEnabled(!e)},a.prototype.enableRequestNewOtp=function(){this.countdownCss("disabled"),this.requestNewPasswordCss("")},a.prototype.disableRequestNewOtp=function(){this.countdownCss(""),this.requestNewPasswordCss("disabled")},a.prototype.setCounterToZero=function(){this.countdown(0),clearInterval(this._counterInterval)},a.prototype.getInitCounter=function(e){var t=this;void 0===e&&(e=a.DEFAULT_COUNTDOWN()),this.countdown(e>0?e:0);var n=this.countdown();return function(){n--,t.countdown(n),n<=0&&(t.setCounterToZero(),t.enableRequestNewOtp())}},a.prototype.setCountdown=function(){this.countdown()<0?(this.setCounterToZero(),this.enableRequestNewOtp()):(this._counterInterval=setInterval(this.getInitCounter(),1e3),this.disableRequestNewOtp())},a.prototype.requestNewOtp=function(){"disabled"!==this.requestNewPasswordCss()&&(this.clearErrors(),this.setCountdown(),this._paymentMethod.creditCard.otp(""),this._paymentMethod.creditCard.otp.clearError(),this._unionPayOtpModal.submitDirectPaymentBooking(null,this.requestNewOtpUnexpectResultHandler,null))},a.prototype.submitUnionPayOtp=function(){this.clearErrors(),this._paymentMethod.creditCard.otp.isValid()?(this.setCounterToZero(),this.disableRequestNewOtp(),this.processing(!0),this._unionPayOtpModal.submitDirectPaymentBooking(this.submitAlwaysHandler,this.submitOtpExtraHandler,this.submitAlwaysHandler)):t.validation.group(this._paymentMethod.creditCard.otp).showAllMessages(!0)},a.prototype._setValidation=function(){var e=this;this._paymentMethod.creditCard.otp.extend({required:{params:!0,message:d.getValidationMessage(this._paymentMethod.pleaseEnterYourPasswordBeforeContinuingText(),"submit-unionpay-otp-client-error"),onlyIf:function(){return!e.isOtpFocused()}},pattern:{params:this._paymentMethod.unionPayOtpRegex(),message:d.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"submit-unionpay-otp-client-error")},minLength:{params:4,message:d.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"submit-unionpay-otp-client-error")},maxLength:{params:6,message:d.getValidationMessage(this._paymentMethod.pleaseEnterYourOneTimePasswordFourToSixCharsText(),"submit-unionpay-otp-client-error")},validation:{validator:function(){return!e.otpErrorMessage()||""===e.otpErrorMessage()},message:function(){return d.getValidationMessage(e.otpErrorMessage(),"submit-unionpay-otp-error")}}})},a.prototype.dispose=function(){this._subscribeDuplicateModalResponse&&this._subscribeDuplicateModalResponse.dispose()},a.DEFAULT_COUNTDOWN=function(){return 60},a}(a);e.exports=p}).call(t,n(3))},function(e,t){e.exports='<!-- ko if: closeButtonVisible --> <button type=button class="ficon ficon-close-popup close verify-identity-close-btn" data-dismiss=modal aria-hidden=true data-element-name=close-unionpay-otp data-bind="click: close, attr: {data-payment-method: dataPaymentMethod}"></button><!-- /ko --> <h4 class=modal-title data-element-name=unionpay-otp-modal data-bind="html: title, attr: {data-payment-method: dataPaymentMethod}"></h4>'},function(e,t){e.exports='<!-- union pay identification details starts --> <div class=union-pay-credit-card-details> <p data-bind="html: paymentMethod.unionPayOtpModalOtpIsSentText"></p> <form class=well name=unionPayOtpModal> <div class="form-group has-feedback" data-bind="validationElement: paymentMethod.creditCard.otp"> <label for=password class=floating-label data-bind="text: paymentMethod.unionPayOtpModalOtpText"></label> <input type=tel class="form-control sensitive" id=otp name=otp data-element-name=input-unionpay-otp pattern=[0-9]* data-bind="value: paymentMethod.creditCard.otp, numericOnly: paymentMethod.creditCard.otp, hasFocus: isOtpFocused, allowEmpty, attr: {data-payment-method: dataPaymentMethod}" maxlength=6 autocomplete=off /> </div> <div class=text-inline> <span data-bind="text: paymentMethod.unionPayOtpModalNotReceivedText"></span> <a href=javascript:void(0) data-bind="text: paymentMethod.unionPayOtpModalResendText, click: requestNewOtp, css: requestNewPasswordClass, attr: {data-payment-method: dataPaymentMethod}" data-element-name=request-new-password-unionpay></a> </div> <div class="text-countdown text-inline" data-bind="css: countdownClass"> <span>(</span> <span data-bind=text:countdown></span> <span data-bind="html: paymentMethod.unionPayOtpModalSecondText"></span> <span>)</span> </div> </form> <div class=text-right> <button type=submit class="btn btn-primary" data-bind="ladda: isProcessing, click: submitUnionPayOtp, attr: {data-payment-method: dataPaymentMethod}" data-style=expand-right data-element-name=submit-unionpay-otp> <span class=ladda-label data-bind="text: paymentMethod.unionPayOtpModalConfirmToPayText"/> <span class=ladda-spinner /> </button> </div> </div> <!-- union pay otp details ends -->'},function(e,t,n){"use strict";var i=n(95),a=n(98),o=n(109),r=function(){function e(){var e=this;this.handleRenderCollectDeviceFingerprintForPaymentThreeDSecure2=function(t,n,i){o.instance.track("threedsecure-handle-devicefingerprint",{action_element_value:null!=n&&n.paymentServerTransactionId?n.paymentServerTransactionId:""}),e.threeDSecureService.handleCollectDeviceFingerprint(n,e.handleCollectDeviceFingerprintResultSuccess.bind(e,t,i),e.handleCollectDeviceFingerprintResultTimeout.bind(e,t,i))},this.handleRenderChallengeCustomerForPaymentThreeDSecure2=function(t,n,i){o.instance.track("threedsecure-handle-challenge",{action_element_value:null!=n&&n.paymentServerTransactionId?n.paymentServerTransactionId:""}),e.threeDSecureService.handleRenderChallenge(n,e.handleChallengeResultSuccess.bind(e,t,i),e.handleChallengeResultTimeout.bind(e,t,i))},this.handleCollectDeviceFingerprintResultSuccess=function(t,n,i){o.instance.track("threedsecure-devicefingerprint-success",{action_element_value:i}),e.handleCollectDeviceFingerprintResult(t,n,i)},this.handleCollectDeviceFingerprintResultTimeout=function(t,n,i){o.instance.track("threedsecure-devicefingerprint-timeout",{action_element_value:i}),e.handleCollectDeviceFingerprintResult(t,n,i)},this.handleCollectDeviceFingerprintResult=function(t,n,i){var a=e.threeDSecure2Builder.buildThreeDSecure2DetailsWithDeviceFingerprintResult(i);t(a),n()},this.handleChallengeResultSuccess=function(t,n,i){o.instance.track("threedsecure-challenge-success",{action_element_value:i}),e.handleChallengeResult(t,n,i)},this.handleChallengeResultTimeout=function(t,n,i){o.instance.track("threedsecure-challenge-timeout",{action_element_value:i}),e.handleChallengeResult(t,n,i)},this.handleChallengeResult=function(t,n,i){var a=e.threeDSecure2Builder.buildThreeDSecure2DetailsWithChallengeResult(i);t(a),n()},this.threeDSecureService=new i,this.threeDSecure2Builder=new a}return e}();e.exports=r},function(e,t,n){(function(t,i){"use strict";var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(97),r=n(96),s=n(8),l=function(e){function o(a){e.call(this),this.header.data={isCloseBtnDisplayed:!1,title:a.title},this.body.name=r.BOOKING_TOO_LARGE_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(540)),this.body.data=a,this.footer={name:r.BOOKING_TOO_LARGE_MODAL_FOOTER,templateEngine:t.stringTemplateEngine.instance,data:i.extend(a,{redirect:function(){s.redirect(a.continueUrl())}})},t.stringTemplateEngine.instance.addTemplate(this.footer.name,n(541)),this.dialogCss=r.BOOKING_TOO_LARGE_MODAL_CLASS,this.options.backdrop="static"}return a(o,e),o}(o);e.exports=l}).call(t,n(3),n(2))},function(e,t){e.exports='<p data-bind="text: sorryTheValueOfTheBookingIsTooLargeText"></p>'},function(e,t){e.exports='<button class="btn btn-primary btn-block" data-bind="text: continueBtnText, click: redirect"></button>'},function(e,t,n){(function(t,i){"use strict";var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(97),r=n(96),s=n(8),l=function(e){function o(t,n){e.call(this),this._breakfastUpgradeModal=t,this._cdnUrl=n,this._initBindingOptions()}return a(o,e),o.prototype._initBindingOptions=function(){var e=this;this.header={name:r.BREAKFAST_UPGRADE_MODAL_HEADER,templateEngine:t.stringTemplateEngine.instance,data:{isCloseBtnDisplayed:!0,title:this._breakfastUpgradeModal.title}},t.stringTemplateEngine.instance.addTemplate(this.header.name,n(543)),this.body.name=r.BREAKFAST_UPGRADE_MODAL_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(544)),this.body.data=i.extend(this._breakfastUpgradeModal,{clickUpgrade:function(){return e._clickUpgrade()},cdnUrl:this._cdnUrl}),this.dialogCss=r.BREAKFAST_UPGRADE_MODAL_CLASS},o.prototype._clickUpgrade=function(){s.redirect(t.unwrap(this._breakfastUpgradeModal.redirectUrl))},o}(o);e.exports=l}).call(t,n(3),n(2))},function(e,t){e.exports='<button type=button class="ficon ficon-line-close ficon-18 close close-btn" data-dismiss=modal aria-hidden=true></button>'},function(e,t){e.exports='<div data-element-name=breakfast-upgrade-modal class=BreakfastUpgradeModal__Container data-bind="attr: { data-message-value: price }"> <div class=BreakfastUpgradeModal__ImageContainer> <div class=BreakfastUpgradeModal__Badge data-bind="text: title"></div> <img data-bind="attr:{ alt: upgradeTitle, srcset: cdnUrl + \'/images/new-bf/breakfast-up-sell.png 1x, \' + cdnUrl + \'/images/new-bf/breakfast-up-sell@2x.png 2x\', src: cdnUrl + \'/images/new-bf/breakfast-up-sell.png\' }"/> </div> <div class=BreakfastUpgradeModal__Details> <p class=BreakfastUpgradeModal__Title> <strong data-bind="text: upgradeTitle"></strong> <span data-bind="text: upgradeDetails"></span> </p> <div class=BreakfastUpgradeModal__Message> <i class="ficon ficon-14 ficon-continental-breakfast"></i> <span data-bind="html: message"></span> </div> <div> <button class="btn btn-primary" type=button data-element-name=breakfast-upgrade-btn data-bind="text: upgradeButtonText, click: clickUpgrade"></button> <button class="btn btn-outline-primary" data-dismiss=modal data-bind="text: cancelButtonText"></button> </div> </div> </div>'},function(e,t,n){(function(t){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(97),o=n(96),r=n(99),s=function(e){function a(i){e.call(this),this._modalService=new r,this.header.data={isCloseBtnDisplayed:!1,title:i.title},this.body.name=o.PREBOOKING_SESSION_EXCEEDED_BODY,t.stringTemplateEngine.instance.addTemplate(this.body.name,n(546)),this.body.data=i,this.dialogCss=o.PREBOOKING_SESSION_EXCEEDED_MODAL_CLASS,this.options.backdrop="static"}return i(a,e),a}(a);e.exports=s}).call(t,n(3))},function(e,t){e.exports='<div class=text-center> <span data-bind="text: youCanEitherReturnToHotelPageOrSearchHotelsInXText"></span> </div> <div class=row> <div class=col-sm-6> <div class="image hotel-placeholder-image m-t-2 m-b-2"> <div class=hotel-image data-bind="style: {backgroundImage: \'url(\\\'\' + hotelImageUrl +\'\\\')\'}"></div> </div> <a class="btn btn-primary btn-block btn-word-wrap redirect-to-hotel-btn" href=# target=_self role=button data-bind="html: redirectToHotelPageBtnText, attr: { href: hotelPageUrl }, matchHeight: { targetElement: \'.idle-timeout-modal .redirect-to-search-result-btn\', delayMS: 200 }"></a> </div> <div class=col-sm-6> <div class="image city-placeholder-image m-t-2 m-b-2"> <div class=city-image data-bind="style: {backgroundImage: \'url(\\\'\' + cityImageUrl +\'\\\')\'}"></div> </div> <a class="btn btn-primary btn-block btn-word-wrap redirect-to-search-result-btn" href=# target=_self role=button data-bind="html: redirectToSearchResultPageBtnText, attr: { href: searchResultPageUrl }"></a> </div> </div>'},function(e,t){e.exports='<!-- ko component: {\r\n    name: "login-panel-v2",\r\n    params: {\r\n        loginPanel: loginPanel,\r\n        termsAndPrivacyData: termsAndPrivacyData,\r\n        isLoginPanelBlocked: isLoginPanelBlocked,\r\n        email: email,\r\n        isMobile: isMobile,\r\n        isLoggedIn: isLoggedIn,\r\n        isLoginModalOpenned: isLoginModalOpenned,\r\n        facebookDetails: facebookDetails,\r\n        isLandingPage: isLandingPage,\r\n        customTitleText: customTitleText,\r\n        isShowLoginFromCCOF: isShowLoginFromCCOF\r\n    }\r\n} --> <!-- /ko -->'},function(e,t,n){"use strict";var i=n(110),a=n(86),o=n(88),r=function(){function e(){}return e.execute=function(){if(a.isApplied(o.MessagesAccuracyMeasurement)){var t=e.readNavigationIdFromURl(window.location.href);t&&e.sendNavigationId(t)}},e.sendNavigationId=function(t){var n=i.create("WebPageNavigationTest",{session_id:window.rtag_sid,worker_mode:e.worker_mode(),target_navigation_id:t});i.send(n)},e.readNavigationIdFromURl=function(e){var t=e.match(/[\?&]nid=(\d+)/);return t?t[1]:null},e.worker_mode=function(){var e=i;try{var t=e.sender._worker;if(t._global)return"mt";if(t._sync)return"sw"}catch(n){return null}},e}();e.exports=r}]);